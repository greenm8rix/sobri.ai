{"version":3,"mappings":"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WAAY,WAAY,UAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,QAAY,UAAY,UAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,SACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,UAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,YACxC,CAAI,WAAY,WAAY,WAAY,WACpC,SAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,SACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,SACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,UACpC,UAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,UAAY,UACpC,WAAY,WAAY,WAAY,WACpC,UAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,UACpC,UAAY,UAAY,WAAY,UACpC,WAAY,UAAY,WAAY,WACpC,SAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,UAAY,UAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,SACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,UAAY,UAAY,WAAY,WACpC,UAAY,WAAY,SAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,UACpC,UAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,UAAY,UACpC,WAAY,UAAY,UAAY,UACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,YACxC,CAAI,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,UAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,SAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,UACpC,UAAY,WAAY,UAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,SAAY,WAAY,SACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,UACpC,UAAY,SAAY,WAAY,WACpC,WAAY,UAAY,UAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,UAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,UACpC,UAAY,UAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,QAAY,UACpC,UAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,UAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,YACxC,CAAI,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,UAAY,SACpC,WAAY,SAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,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","names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","createRoot","hydrateRoot","byteToHex","i","push","toString","slice","getRandomValues","rnds8","Uint8Array","native","randomUUID","crypto","bind","v4","options","buf","offset","rnds","random","_a","rng","Error","length","arr","toLowerCase","unsafeStringify","instanceOfAny","object","constructors","some","idbProxyableTypes","cursorAdvanceMethods","transactionDoneMap","WeakMap","transformCache","reverseTransformCache","idbProxyTraps","get","target","prop","receiver","IDBTransaction","objectStoreNames","objectStore","wrap","set","value","has","replaceTraps","callback","wrapFunction","func","IDBCursor","advance","continue","continuePrimaryKey","includes","args","apply","unwrap","this","request","transformCachableValue","tx","done","Promise","resolve","reject","unlisten","removeEventListener","complete","error","DOMException","addEventListener","cacheDonePromiseForTransaction","IDBDatabase","IDBObjectStore","IDBIndex","Proxy","IDBRequest","promise","success","result","promisifyRequest","newValue","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","replace","useIndex","isWrite","method","async","storeName","transaction","store","index","shift","all","oldTraps","advanceMethodProps","methodMap","advanceResults","ittrProxiedCursorToOriginalProxy","cursorIteratorTraps","cachedFunc","iterate","cursor","openCursor","proxiedCursor","delete","isIteratorProp","asyncIterator","CryptoJS","Math","undefined","window","self","globalThis","msCrypto","global","err","cryptoSecureRandomInt","Uint32Array","randomBytes","readInt32LE","create","F","obj","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","init","$super","arguments","instance","properties","propertyName","clone","WordArray","words","sigBytes","encoder","Hex","stringify","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","j","ceil","nBytes","C_enc","enc","hexChars","bite","join","parse","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","String","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","data","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","max","_minBufferSize","nBytesReady","min","_doProcessBlock","splice","Hasher","cfg","_doReset","update","messageUpdate","finalize","_doFinalize","_createHelper","hasher","message","_createHmacHelper","C_algo","HMAC","algo","X32WordArray","C_x64","x64","Word","high","low","toX32","x64Words","x64WordsLength","x32Words","x64Word","wordsLength","ArrayBuffer","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","buffer","byteOffset","byteLength","typedArrayByteLength","swapEndian","word","Utf16","Utf16BE","utf16Chars","codePoint","utf16Str","utf16StrLength","Utf16LE","parseLoop","base64Str","base64StrLength","reverseMap","bitsCombined","Base64","map","_map","base64Chars","triplet","charAt","paddingChar","_reverseMap","paddingIndex","indexOf","Base64url","urlSafe","_safe_map","T","abs","sin","MD5","_hash","M","offset_i","M_offset_i","H","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","FF","GG","HH","II","nBitsTotal","nBitsLeft","nBitsTotalH","floor","nBitsTotalL","hash","H_i","x","s","t","HmacMD5","W","SHA1","HmacSHA1","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","pow","SHA256","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","HmacSHA256","require$$1","X64Word","X64WordArray","X64Word_create","SHA512","H0","H1","H2","H3","H4","H5","H6","H7","H0h","H0l","H1h","H1l","H2h","H2l","H3h","H3l","H4h","H4l","H5h","H5l","H6h","H6l","H7h","H7l","ah","al","bh","bl","ch","cl","dh","dl","eh","el","fh","fl","gh","gl","hh","hl","Wil","Wih","Wi","gamma0xh","gamma0xl","gamma0h","gamma0l","gamma1xh","gamma1xl","gamma1h","gamma1l","Wi7","Wi7h","Wi7l","Wi16","Wi16h","Wi16l","t1l","chh","chl","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Ki","Kih","Kil","t1h","t2l","HmacSHA512","RHO_OFFSETS","PI_INDEXES","ROUND_CONSTANTS","y","newY","LFSR","roundConstantMsw","roundConstantLsw","bitPosition","SHA3","outputLength","state","_state","nBlockSizeLanes","M2i","M2i1","lane","round","tMsw","tLsw","Tx","Tx4","Tx1","Tx1Msw","Tx1Lsw","laneIndex","laneMsw","laneLsw","rhoOffset","TPiLane","T0","state0","TLane","Tx1Lane","Tx2Lane","roundConstant","blockSizeBits","outputLengthBytes","outputLengthLanes","hashWords","HmacSHA3","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","hmac","require$$2","EvpKDF","keySize","iterations","compute","password","salt","block","derivedKey","derivedKeyWords","Cipher","createEncryptor","_ENC_XFORM_MODE","createDecryptor","_DEC_XFORM_MODE","xformMode","_xformMode","_key","process","dataUpdate","ivSize","selectCipherStrategy","PasswordBasedCipher","SerializableCipher","cipher","encrypt","decrypt","ciphertext","StreamCipher","C_mode","mode","BlockCipherMode","iv","Encryptor","Decryptor","_cipher","_iv","CBC","xorBlock","_prevBlock","processBlock","encryptBlock","thisBlock","decryptBlock","Pkcs7","pad","blockSizeBytes","nPaddingBytes","paddingWord","paddingWords","padding","unpad","BlockCipher","modeCreator","_mode","__creator","finalProcessedBlocks","CipherParams","cipherParams","formatter","OpenSSLFormatter","format","OpenSSL","openSSLStr","ciphertextWords","encryptor","cipherCfg","algorithm","_parse","OpenSSLKdf","kdf","execute","derivedParams","CTRGladman","incWord","b1","b2","b3","incCounter","counter","_counter","keystream","require$$3","require$$4","PC1","PC2","BIT_SHIFTS","SBOX_P","SBOX_MASK","DES","keyWords","keyBits","keyBitPos","subKeys","_subKeys","nSubKey","subKey","bitShift","invSubKeys","_invSubKeys","_doCryptBlock","_lBlock","_rBlock","exchangeLR","exchangeRL","lBlock","rBlock","mask","TripleDES","key1","key2","key3","_des1","_des2","_des3","SHA224","N","ORIG_P","ORIG_S","BLOWFISH_CTX","pbox","sbox","ctx","BlowFish_Encrypt","left","right","temp","Xl","Xr","BlowFish_Decrypt","BlowFishInit","keysize","Row","Col","keyIndex","Data1","Data2","res","Blowfish","_keyPriorReset","factory","require$$5","require$$6","require$$7","require$$8","HmacSHA224","require$$10","SHA384","HmacSHA384","require$$11","require$$12","_zl","_zr","_sl","_sr","_hl","_hr","RIPEMD160","ar","br","cr","dr","er","hr","zl","zr","sl","sr","f1","f2","f3","f4","f5","rotl","z","HmacRIPEMD160","require$$13","require$$14","PBKDF2","blockIndex","blockIndexWords","blockWords","blockWordsLength","intermediate","intermediateWords","require$$15","require$$16","require$$17","CFB","generateKeystreamAndEncrypt","require$$18","CTR","require$$19","require$$20","OFB","_keystream","require$$21","ECB","require$$22","AnsiX923","lastBytePos","Ansix923","require$$23","Iso10126","require$$24","Iso97971","ZeroPadding","require$$25","require$$26","NoPadding","require$$27","input","require$$28","SBOX","INV_SBOX","SUB_MIX_0","SUB_MIX_1","SUB_MIX_2","SUB_MIX_3","INV_SUB_MIX_0","INV_SUB_MIX_1","INV_SUB_MIX_2","INV_SUB_MIX_3","xi","sx","x2","x4","x8","RCON","AES","_nRounds","ksRows","keySchedule","_keySchedule","ksRow","invKeySchedule","_invKeySchedule","invKsRow","nRounds","s0","s1","s2","s3","t0","t2","t3","require$$29","require$$30","RC4","keySigBytes","S","_S","keyByteIndex","keyByte","_i","_j","generateKeystreamWord","keystreamWord","RC4Drop","drop","require$$31","C_","G","Rabbit","X","_X","_C","_b","nextState","IV","IV_0","IV_1","i0","i2","i1","i3","gx","ga","gb","require$$32","RabbitLegacy","require$$33","require$$34","validateEmbedding","embedding","Array","isArray","every","val","isNaN","isFinite","encryptData","item","rest","JSON","decryptData","decrypted","Number","indexedDBStorage","constructor","db","name","version","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","event","oldVersion","newVersion","then","catch","openDB","contains","createObjectStore","ensureDB","getStorageUsage","navigator","storage","estimate","usage","quota","percentage","safeStore","put","handleQuotaExceeded","retryError","evictOldMessages","evictOldInsights","evictOldJournalEntries","allKeys","getAllKeys","userId","getCurrentUserId","messages","encrypted","sort","timestamp","recentMessages","clear","sortedInsights","shown","Date","date","getTime","newEncrypted","sortedEntries","localStorage","getItem","saveCheckIn","checkIn","getCheckIns","filter","saveJournalEntry","entry","getJournalEntries","id","deleteJournalEntry","saveMessage","getMessages","clearMessages","getProgress","currentStreak","longestStreak","startDate","lastCheckInDate","totalDaysClean","relapseCount","milestones","updateProgress","progress","updatedProgress","saveTriggerLog","trigger","getTriggerLogs","deleteTriggerLog","saveTask","task","getTasks","deleteTask","completeTask","completed","completedAt","toISOString","saveInsight","insight","getInsights","markInsightAsShown","saveMemoryEntry","memory","getMemoryEntries","deleteMemoryEntry","saveConversationSummary","summary","getConversationSummaries","deleteConversationSummary","saveAppState","getAppState","migrateFromLocalStorage","STORAGE_KEYS","CHECKINS","JOURNAL","MESSAGES","PROGRESS","TRIGGERS","TASKS","INSIGHTS","MEMORY","SUMMARIES","APP_STATE","storageKey","entries","cleanup","close","formatDate","dateObj","isToday","isYesterday","getTimeFromDate","getCurrentDateString","r","getRecoveryTask","category","recoveryDays","taskPool","title","description","timeEstimate","physical","social","productive","recovery","analytics","enabled","analyticsDisabled","trackEvent","path","location","pathname","referrer","document","eventType","eventData","sessionId","getSessionId","storeEvent","optOut","setItem","optIn","removeItem","sessionStorage","generateSimpleId","events","trackedConnections","getTrackedConnectionState","api","fromEntries","stores","api2","getState","devtools","fn","devtoolsOptions","anonymousActionType","extensionConnector","__vite_import_meta_env__","__REDUX_DEVTOOLS_EXTENSION__","_e","connection","connectionInformation","connect","existingConnection","newConnection","extractConnectionInformation","isRecording","setState","nameOrAction","action","send","setStateFromDevtools","originalIsRecording","initialState","store2","dispatchFromDevtools","dispatch","didWarnAboutReservedActionType","originalDispatch","subscribe","payload","parseJsonThen","keys","stateFromDevtools","nextLiftedState","lastComputedState","computedStates","stringified","parsed","createJSONStorage","getStorage","str2","str","toThenable","onFulfilled","_onRejected","_onFulfilled","onRejected","persist","config","baseOptions","serialize","deserialize","partialize","merge","persistedState","currentState","hasHydrated","hydrationListeners","Set","finishHydrationListeners","thenableSerialize","errorInSync","thenable","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","forEach","cb","postRehydrationCallback","onRehydrateStorage","storageValue","deserializedStorageValue","migrate","migratedState","_a2","setOptions","newOptions","clearStorage","getOptions","rehydrate","onHydrate","add","onFinishHydration","oldImpl","getInitialState","migrationResult","migrated","skipHydration","newImpl","getCheckInByDate","find","EMBEDDING_DIMENSION","getOpenAIEmbedding","text","trim","truncatedText","substring","response","fetch","headers","Authorization","body","model","ok","json","seed","extractImportantInformation","importantPatterns","insights","pattern","matches","match","detectMessageTopic","topicKeywords","relapse","craving","triggers","emotions","relationships","health","goals","coping","celebration","challenge","detectedTopics","topic","keywords","keyword","detectEmotionalState","emotionKeywords","joyful","sad","angry","anxious","hopeful","ashamed","grateful","proud","neutral","dominantEmotion","highestCount","emotion","count","validateAndRepairEmbedding","repaired","num","cosineSimilarity","dot","normA","normB","getRelevantMemories","currentMessage","memories","memoriesWithValidEmbeddings","useVectorSearch","queryEmbedding","rawEmbedding","scored","score","lastAccessed","now","accessCount","currentTopics","currentEmotionalState","scoredMemories","memoryTopics","content","importance","ageInDays","generateMemoryContextPrompt","relevantMemories","recentAiInsight","source","contextMemories","unshift","tags","contextString","toLocaleString","getOrCreateUserId","uuidv4_global","useStore","activeTab","isLoading","checkIns","journalEntries","triggerLogs","tasks","conversationSummaries","userProgress","setActiveTab","tab","setIsLoading","loading","submitCheckIn","mood","cravingLevel","notes","today","newCheckIn","uuidv4","memoryContent","addMemory","checkInDates","uniqueDays","from","streak","uniqueDates","expected","calculateCurrentStreakFromCheckIns","isFirstCheckIn","hasNotes","milestone","updatedMilestones","streakMemory","days","isLongestStreak","suggestTasks","addJournalEntry","newEntry","memoryImportance","wordCount","split","tagCount","hasTags","removeJournalEntry","addTriggerLog","intensity","strategy","successful","newTrigger","strategyMemory","removeTriggerLog","addTask","priority","newTask","hasTimeEstimate","removeTask","markTaskComplete","taskId","taskCount","categories","priorities","addInsight","newInsight","markInsightSeen","updateInsightNote","userNote","updatedInsights","updateInsightUserNote","generateFallbackEmbedding","embeddingUtils","__vitePreload","removeMemory","addConversationSummary","getRelevantMemoriesForContext","generateContextFromMemories","sendMessage","supabaseUserId","encryptionKey","errorMsg","sender","userMessage","topics","emotionalState","importantInfo","info","messageLength","messageType","allMessages","numCompletedMessagesInHistory","isRollingSummaryPoint","newAiSummaryToStore","backendUrl","apiKey","messagesForThisSummary","promptForSummarization","aiSummaries","summaryType","latestPrevAiSummary","currentUserProgress","summaryPayload","contextBriefing","summaryResponse","errorData","status","aiGeneratedSummaryText","messageIds","keyInsights","recentActivitySummary","sevenDaysAgo","recentCheckIns","recentJournalEntries","recentTriggerLogs","recentTasks","recentInsights","toLocaleDateString","completedRecentTasks","pendingRecentTasks","formatRecentActivitiesSummary","clientContextBriefing","recentMessagesForChatPayload","msg","latestAiSummaryForChat","encryptedPayload","chatSummary","clientMemoryContext","aiResponseText","insightMatch","chatResponse","generatedInsight","aiMessage","errorMessageText","aiErrorMessage","resetProgress","resetStreak","markRelapse","initializeStore","FunctionsError","context","super","FunctionsFetchError","FunctionsRelayError","FunctionsHttpError","FunctionRegion","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","FunctionsClient","url","customFetch","region","Any","_fetch","default","__VITE_PRELOAD__","resolveFetch","setAuth","token","invoke","functionName","functionArgs","_headers","Blob","FormData","assign","fetchError","isRelayError","responseType","blob","formData","globalObject","getGlobal","nodeFetch","Headers","Request","Response","defineProperty","PostgrestError_1","details","hint","code","PostgrestError","__importDefault","mod","__esModule","PostgrestBuilder_1","node_fetch_1","builder","shouldThrowOnError","schema","signal","isMaybeSingle","throwOnError","setHeader","onfulfilled","onrejected","_c","statusText","countHeader","contentRange","_d","stack","returns","overrideTypes","PostgrestTransformBuilder_1","PostgrestTransformBuilder$1","select","columns","quoted","cleanedColumns","test","searchParams","order","column","ascending","nullsFirst","foreignTable","referencedTable","existingOrder","limit","range","to","keyOffset","keyLimit","abortSignal","single","maybeSingle","csv","geojson","explain","analyze","verbose","settings","buffers","wal","Boolean","forMediatype","rollback","PostgrestTransformBuilder","PostgrestFilterBuilder_1","PostgrestFilterBuilder$1","eq","append","neq","gt","gte","lt","lte","like","likeAllOf","patterns","likeAnyOf","ilike","ilikeAllOf","ilikeAnyOf","is","values","cleanedValues","RegExp","containedBy","rangeGt","rangeGte","rangeLt","rangeLte","rangeAdjacent","overlaps","textSearch","query","typePart","configPart","not","operator","or","filters","PostgrestFilterBuilder","PostgrestQueryBuilder_1","head","allowEmpty","insert","defaultToNull","prefersHeaders","reduce","acc","uniqueColumns","upsert","onConflict","ignoreDuplicates","constants","DEFAULT_HEADERS","version_1","PostgrestClient_1","constants_1","PostgrestClient","schemaName","relation","URL","rpc","_","cjs","PostgrestBuilder","PostgrestQueryBuilder","_default","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","PostgresTypes","Serializer","HEADER_LENGTH","decode","rawPayload","_binaryDecode","view","DataView","decoder","TextDecoder","_decodeBroadcast","topicSize","getUint8","eventSize","Timer","timerCalc","timer","tries","clearTimeout","scheduleTimeout","setTimeout","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","noop","dataType","toArray","bool","toBoolean","float4","float8","int2","int4","int8","numeric","oid","toNumber","jsonb","toJson","toTimestampString","abstime","daterange","int4range","int8range","money","reltime","time","timestamptz","timetz","tsrange","tstzrange","parsedValue","parseFloat","lastIdx","closeBrace","valTrim","httpEndpointURL","socketUrl","Push","channel","timeout","sent","timeoutTimer","receivedResp","recHooks","refEvent","resend","_cancelRefEvent","_hasReceived","startTimeout","socket","join_ref","_joinRef","updatePayload","receive","_makeRef","_replyEventName","_on","_cancelTimeout","_matchReceive","_trigger","destroy","_off","REALTIME_PRESENCE_LISTEN_EVENTS","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimePresence","opts","pendingDiffs","joinRef","caller","onJoin","onLeave","onSync","diff","newState","syncState","syncDiff","inPendingSyncState","currentPresences","newPresences","leftPresences","cloneDeep","transformedState","transformState","joins","leaves","presences","newPresenceRefs","presence_ref","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","getOwnPropertyNames","metas","presence","RealtimeChannel","params","bindings","closed","joinedOnce","pushBuffer","subTopic","broadcast","ack","private","joinPush","rejoinTimer","_rejoinUntilConnected","reconnectAfterMs","joined","pushEvent","_onClose","log","_remove","_onError","reason","_isLeaving","_isClosed","errored","_isJoining","reply","broadcastEndpointURL","endPoint","isConnected","isPrivate","CHANNEL_ERROR","CLOSED","accessTokenPayload","postgres_changes","accessTokenValue","access_token","updateJoinPayload","_rejoin","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","serverPostgresFilter","unsubscribe","SUBSCRIBED","TIMED_OUT","presenceState","track","untrack","on","_canPush","_push","endpoint_payload","apikey","_fetchWithTimeout","cancel","leaving","onClose","leavePush","leave","controller","AbortController","abort","_onMessage","_event","_ref","_isMember","typeLower","toLocaleLowerCase","handledPayload","_f","bindId","bindEvent","ids","postgresChanges","commit_timestamp","errors","enrichedPayload","new","old","_getPayloadRecords","_isJoined","joining","binding","isEqual","obj1","obj2","_leaveOpenTopic","records","Transformers.convertChangeData","old_record","NATIVE_WEBSOCKET_AVAILABLE","WebSocket","RealtimeClient","channels","httpEndpoint","heartbeatIntervalMs","heartbeatTimer","pendingHeartbeatRef","logger","conn","sendBuffer","serializer","stateChangeCallbacks","accessToken","_resolveFetch","websocket","transport","encode","reconnectTimer","disconnect","worker","Worker","workerUrl","endpointURL","setupConnection","WSWebSocketDummy","WS","import","_appendParams","vsn","onclose","clearInterval","getChannels","removeChannel","removeAllChannels","values_1","kind","connectionState","readyState","connecting","Connecting","Open","closing","Closing","Closed","chan","tokenToSend","atob","_error","exp","sendHeartbeat","flushSendBuffer","newRef","dupChannel","binaryType","onopen","_onConnOpen","onerror","_onConnError","onmessage","_onConnMessage","_onConnClose","rawMessage","objectUrl","_workerObjectUrl","workerRef","terminate","postMessage","interval","setInterval","_triggerChanError","prefix","URLSearchParams","result_url","createObjectURL","address","_protocols","StorageError","__isStorageError","isStorageError","StorageApiError","toJSON","StorageUnknownError","originalError","recursiveToCamel","newKey","toUpperCase","_getErrorMessage","error_description","handleError","Res","browser","noResolveJson","_handleRequest","fetcher","parameters","_getRequestParams","post","remove","DEFAULT_SEARCH_OPTIONS","sortBy","DEFAULT_FILE_OPTIONS","cacheControl","contentType","StorageFileApi","bucketId","uploadOrUpdate","fileBody","fileOptions","metadata","encodeMetadata","toBase64","cleanPath","_removeEmptyFolders","_path","_getFinalPath","duplex","Id","fullPath","Key","upload","uploadToSignedUrl","createSignedUploadUrl","signedUrl","move","fromPath","toPath","sourceKey","destinationKey","destinationBucket","copy","createSignedUrl","expiresIn","transform","downloadQueryParam","download","encodeURI","signedURL","createSignedUrls","paths","datum","renderPath","transformationQuery","transformOptsToQueryString","queryString","exists","getPublicUrl","_queryString","publicUrl","prefixes","list","Buffer","btoa","width","height","resize","quality","StorageBucketApi","listBuckets","getBucket","createBucket","public","file_size_limit","fileSizeLimit","allowed_mime_types","allowedMimeTypes","updateBucket","emptyBucket","deleteBucket","StorageClient","JS_ENV","Deno","product","DEFAULT_GLOBAL_OPTIONS","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","autoRefreshToken","persistSession","detectSessionInUrl","flowType","DEFAULT_REALTIME_OPTIONS","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","NodeFetchHeaders","AUTO_REFRESH_TICK_DURATION_MS","EXPIRY_MARGIN_MS","AUTO_REFRESH_TICK_THRESHOLD","API_VERSION_HEADER_NAME","API_VERSIONS","BASE64URL_REGEX","AuthError","__isAuthError","isAuthError","AuthApiError","AuthUnknownError","CustomAuthError","AuthSessionMissingError","AuthInvalidTokenResponseError","AuthInvalidCredentialsError","AuthImplicitGrantRedirectError","AuthPKCEGrantCodeExchangeError","AuthRetryableFetchError","isAuthRetryableFetchError","AuthWeakPasswordError","reasons","AuthInvalidJwtError","TO_BASE64URL","IGNORE_BASE64URL","FROM_BASE64URL","charMap","byteFromBase64URL","charCode","emit","bits","queue","queuedBits","stringFromBase64URL","conv","utf8Emit","codepoint","fromCodePoint","utf8State","utf8seq","b64State","byteEmit","byte","leadingBit","stringFromUTF8","codepointToUTF8","base64UrlToUint8Array","onByte","stringToUint8Array","highSurrogate","stringToUTF8","isBrowser","localStorageWriteTests","tested","writable","supportsLocalStorage","randomKey","setItemAsync","getItemAsync","removeItemAsync","Deferred","promiseConstructor","rej","decodeJWT","parts","header","signature","raw","dec2hex","dec","generatePKCEChallenge","verifier","subtle","TextEncoder","hashed","randomString","encodedData","digest","bytes","sha256","getCodeChallengeAndMethod","isPasswordRecovery","codeVerifier","array","charSet","charSetLen","generatePKCEVerifier","storedCodeVerifier","codeChallenge","API_VERSION_REGEX","NETWORK_ERROR_CODES","maybeResponse","errorCode","responseAPIVersion","apiVersion","parseResponseAPIVersion","error_code","weak_password","_request","jwt","qs","redirectTo","requestParams","xform","_sessionResponse","session","refresh_token","expires_in","hasSession","expires_at","user","_sessionResponsePassword","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","getOwnPropertySymbols","propertyIsEnumerable","__rest","_noResolveJsonResponse","GoTrueAdminApi","mfa","listFactors","_listFactors","deleteFactor","_deleteFactor","signOut","scope","inviteUserByEmail","email","generateLink","new_email","newEmail","createUser","attributes","listUsers","_g","pagination","nextPage","lastPage","total","page","per_page","perPage","users","links","link","rel","getUserById","uid","updateUserById","deleteUser","shouldSoftDelete","should_soft_delete","factors","localStorageAdapter","memoryLocalStorageAdapter","internals","LockAcquireTimeoutError","isAcquireTimeout","NavigatorLockAcquireTimeoutError","navigatorLock","acquireTimeout","abortController","locks","ifAvailable","lock","configurable","__magic__","polyfillGlobalThis","DEFAULT_OPTIONS","debug","hasCustomAuthorizationHeader","lockNoOp","GoTrueClient","memoryStorage","stateChangeEmitters","autoRefreshTicker","visibilityChangedCallback","refreshingDeferred","initializePromise","suppressGetSessionWarning","lockAcquired","pendingInLock","broadcastChannel","console","instanceID","nextInstanceID","logDebugMessages","admin","jwks","jwks_cached_at","MIN_SAFE_INTEGER","verify","_verify","enroll","_enroll","unenroll","_unenroll","_challenge","challengeAndVerify","_challengeAndVerify","getAuthenticatorAssuranceLevel","_getAuthenticatorAssuranceLevel","BroadcastChannel","_debug","_notifyAllSubscribers","initialize","_acquireLock","_initialize","href","parseParametersFromURL","callbackUrlType","_isImplicitGrantCallback","_isPKCECallback","_getSessionFromURL","isAuthImplicitGrantRedirectError","_removeSession","redirectType","_saveSession","_recoverAndRefresh","_handleVisibilityChange","signInAnonymously","credentials","gotrue_meta_security","captcha_token","captchaToken","signUp","codeChallengeMethod","emailRedirectTo","code_challenge","code_challenge_method","phone","signInWithPassword","weakPassword","signInWithOAuth","_handleProviderSignIn","provider","scopes","queryParams","skipBrowserRedirect","exchangeCodeForSession","authCode","_exchangeCodeForSession","storageItem","auth_code","code_verifier","signInWithIdToken","nonce","id_token","signInWithOtp","create_user","shouldCreateUser","messageId","message_id","verifyOtp","signInWithSSO","provider_id","providerId","domain","skip_http_redirect","reauthenticate","_reauthenticate","_useSession","sessionError","endpoint","getSession","last","waitOn","__loadSession","currentSession","maybeSession","_isValidSession","hasExpired","isServer","suppressWarning","Reflect","_callRefreshToken","getUser","_getUser","isAuthSessionMissingError","updateUser","_updateUser","sessionData","userError","setSession","_setSession","timeNow","expiresAt","refreshedSession","token_type","refreshSession","_refreshSession","history","replaceState","provider_token","provider_refresh_token","currentStorageContent","_signOut","isAuthApiError","onAuthStateChange","subscription","_emitInitialSession","resetPasswordForEmail","getUserIdentities","identities","linkIdentity","_getUrlForProvider","unlinkIdentity","identity","identity_id","_refreshAccessToken","refreshToken","debugName","startedAt","attempt","accept","sleep","isRetryable","nextBackOffInterval","Infinity","expiresWithMargin","promises","_removeVisibilityChangedCallback","_startAutoRefresh","_stopAutoRefresh","ticker","_autoRefreshTokenTick","unref","unrefTimer","startAutoRefresh","stopAutoRefresh","expiresInTicks","_onVisibilityChanged","calledFromInitialize","methodName","visibilityState","urlParams","flowParams","factorId","friendly_name","friendlyName","factor_type","factorType","issuer","totp","qr_code","challenge_id","challengeId","challengeData","challengeError","currentLevel","nextLevel","currentAuthenticationMethods","aal","amr","fetchJwk","kid","jwk","getClaims","rawHeader","validateExp","alg","claims","namedCurve","getAlgorithm","signingKey","publicKey","importKey","AuthClient","SupabaseAuthClient","SupabaseClient","supabaseUrl","_supabaseUrl","endsWith","baseUrl","realtimeUrl","protocol","authUrl","storageUrl","functionsUrl","defaultStorageKey","hostname","defaults","dbOptions","auth","authOptions","realtime","realtimeOptions","globalOptions","applySettingDefaults","_initSupabaseAuthClient","_getAccessToken","_initRealtimeClient","_listenForAuthEvents","functions","SupabaseStorageClient","authHeaders","_handleTokenChanged","changedAccessToken","supabase","AuthContext","createContext","signInWithGoogle","hasPaid","chatSyncEnabled","chatCount","refreshUserStatus","useAuth","useContext","AuthProvider","children","setUser","useState","setLoading","setHasPaid","setChatSyncEnabled","setChatCount","upsertUser","userObj","fetchUserStatus","has_paid","chat_sync_enabled","chat_count","useEffect","origin","Provider","defaultAttributes","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","absoluteStrokeWidth","className","createElement","string","tag","attrs","displayName","Activity","AlertCircle","cx","cy","x1","y1","y2","AlertTriangle","ArrowLeft","Award","BookOpen","Book","Brain","CalendarCheck","rx","Calendar","CheckCircle2","CheckSquare","Check","Clock","points","Download","ExternalLink","HardDrive","Heart","Info","LifeBuoy","Lightbulb","Loader2","Lock","ry","Menu","MessageCircle","MoreVertical","Phone","PlusCircle","Plus","RefreshCw","Search","Send","Sparkles","Tag","ThumbsUp","Trash2","TrendingUp","Trophy","UserCheck","UserPlus","Users","NavItem","icon","Icon","label","isActive","onClick","vertical","jsxRuntimeExports","motion","button","whileHover","scale","whileTap","role","tabIndex","div","layoutId","transition","stiffness","damping","LegalDisclaimer","LoginButton","disabled","user_metadata","avatar_url","src","alt","full_name","StorageIndicator","storageInfo","setStorageInfo","isExpanded","setIsExpanded","checkStorage","formatBytes","toFixed","getProgressBarColor","style","Header","toggleMenu","isMenuOpen","h1","initial","opacity","animate","duration","getTitle","delay","getSubtitle","InsightCard","onDismiss","getTextColor","getBgColor","exit","getIcon","InsightsView","idx","htmlFor","placeholder","onChange","AppLayout","setIsMenuOpen","navItems","onKeyDown","pointerEvents","ease","MessageBubble","isUser","aiMessageHtml","unsafe","dangerouslySetInnerHTML","__html","Skeleton","ChatSkeleton","animationDelay","QuickResponses","onSelect","suggestion","PRODUCTS","priceId","price","currency","SubscriptionButton","buttonText","showPrice","successUrl","cancelUrl","price_id","success_url","cancel_url","createCheckoutSession","alert","Fragment","chatHints","ChatView","inputValue","setInputValue","storeSendMessage","messagesEndRef","useRef","showInfoBanner","setShowInfoBanner","showEmotionalInsight","setShowEmotionalInsight","currentInsight","setCurrentInsight","dismissedHintIds","setDismissedHintIds","dismissed","currentHintIndex","setCurrentHintIndex","availableHints","currentHint","scrollIntoView","behavior","unshownInsights","isLocked","handleSendMessage","handleQuickResponseClick","repeat","repeatType","AnimatePresence","prevIds","prevIndex","ctrlKey","preventDefault","rows","MoodSelector","selectedMood","onSelectMood","emoji","CravingSelector","selectedCravingLevel","onSelectCravingLevel","level","isSelected","getColorClass","getBgFillWidth","EmergencyResources","compact","website","available","languages","resource","CheckInView","setSelectedMood","setSelectedCravingLevel","setNotes","alreadyCheckedIn","setAlreadyCheckedIn","submissionComplete","setSubmissionComplete","showCrisisResources","setShowCrisisResources","showCrisisOptions","setShowCrisisOptions","todayCheckIn","handleSubmit","resetForm","localErrorMsg","JournalEntry","onDelete","onSelectTag","showActions","setShowActions","isDeleting","setIsDeleting","layout","NewJournalEntryForm","onComplete","setContent","tagInput","setTagInput","setTags","handleAddTag","trimmedTag","removeTag","tagToRemove","JournalView","showNewEntryForm","setShowNewEntryForm","searchQuery","setSearchQuery","selectedTag","setSelectedTag","toggleNewEntryForm","closeForm","allTags","flatMap","filteredEntries","matchesSearch","matchesTag","ProgressCard","unit","accentColor","controls","useAnimation","prevValue","start","StreakCalendar","currentDate","firstDayOfMonth","startOfMonth","lastDayOfMonth","endOfMonth","eachDayOfInterval","end","startingDayIndex","getDay","getMoodColor","isSameDay","day","hasCheckIn","RelapseDialog","isOpen","setReason","isSubmitting","setIsSubmitting","TriggerTracker","showAddForm","setShowAddForm","setTrigger","setIntensity","setStrategy","setSuccessful","sortedTriggers","MilestoneTimeline","sortedMilestones","TabsContext","React.createContext","onValueChange","Tabs","TabsList","TabsTrigger","selectedValue","React.useContext","TabsContent","ProgressView","showRelapseDialog","setShowRelapseDialog","RecoveryResources","features","group","feature","CopingSkills","selectedCategory","setSelectedCategory","selectedSkills","immediate","steps","cognitive","longterm","selectedCategoryInfo","CategoryIcon","skill","stepIndex","LegalTermsView","onBack","MemoryDebugView","typeFilter","setTypeFilter","showNewMemoryForm","setShowNewMemoryForm","newMemory","setNewMemory","filteredMemories","matchesType","getMemoryTypeColor","memoryTypes","memoryEntry","MemoryContextDemo","setMessage","setContext","isGenerating","setIsGenerating","memoryContext","ResourcesView","legalView","setLegalView","showMemoryDebug","setShowMemoryDebug","handleHashChange","pushState","search","fillRule","clipRule","NewTaskForm","selectedDate","setTitle","setDescription","setPriority","setCategory","setTimeEstimate","setDate","option","TaskItem","showOptions","setShowOptions","handleComplete","getCategoryIcon","getPriorityColor","TasksView","showNewTaskForm","setShowNewTaskForm","setSelectedDate","setUnshownInsights","currentInsightIndex","setCurrentInsightIndex","unseenInsights","filteredTasks","priorityOrder","medium","completedTasks","pendingTasks","ErrorBoundary","hasError","handleReset","reload","getDerivedStateFromError","componentDidCatch","errorInfo","render","AppInstallPrompt","installPrompt","setInstallPrompt","showPrompt","setShowPrompt","handleBeforeInstallPrompt","dismissPrompt","prompt","userChoice","choiceResult","outcome","DisclaimerModal","ProtectedRoute","fallback","LoginPage","showLegal","setShowLegal","StorageMigration","isReady","setIsReady","setError","migrationProgress","setMigrationProgress","hasLocalStorageData","hasIndexedDBData","keysToKeep","keepKey","ExceptionCode","CapacitorException","createCapacitor","win","capCustomPlatform","CapacitorCustomPlatform","cap","Capacitor","Plugins","getPlatform","androidBridge","webkit","messageHandlers","bridge","getPlatformId","getPluginHeader","pluginName","PluginHeaders","registeredPlugins","convertFileSrc","filePath","isNativePlatform","isPluginAvailable","plugin","platforms","registerPlugin","jsImplementations","registeredPlugin","proxy","platform","pluginHeader","jsImplementation","createPluginMethodWrapper","wrapper","loadPluginImplementation","impl","Unimplemented","methodHeader","methods","rtype","nativePromise","nativeCallback","createPluginMethod","addListener","removeListener","addListenerNative","eventName","callbackId","Exception","DEBUG","isLoggingEnabled","initCapacitorGlobal","WebPlugin","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","hasListeners","registerWindowListener","windowEventName","pluginEventName","handler","unimplemented","unavailable","Unavailable","handle","arg","CapacitorCookiesPluginWeb","getCookies","cookies","cookie","cookieMap","setCookie","encodedKey","encodedValue","expires","deleteCookie","clearCookies","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","originalKeys","normalizeHttpHeaders","form","CapacitorHttpPluginWeb","requestInit","webFetchExtra","shouldEncode","accumulator","buildUrlParams","shouldEncodeUrlParams","reader","FileReader","onload","base64String","readAsDataURL","readBlobAsBase64","patch","App","AppWeb","showDisclaimerModal","setShowDisclaimerModal","appStateListener","CapacitorApp","backButtonListener","canGoBack","exitApp","tabParam","getElementById","StrictMode","registration","serviceWorker","register","newWorker","installing","notification","innerHTML","appendChild","Notification","requestPermission","ready","regWithSync","sync","syncError","querySelector"],"ignoreList":[0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,50,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,194,195],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/idb/build/index.js","../../__vite-browser-external","../../node_modules/crypto-js/core.js","../../node_modules/crypto-js/x64-core.js","../../node_modules/crypto-js/lib-typedarrays.js","../../node_modules/crypto-js/enc-utf16.js","../../node_modules/crypto-js/enc-base64.js","../../node_modules/crypto-js/enc-base64url.js","../../node_modules/crypto-js/md5.js","../../node_modules/crypto-js/sha1.js","../../node_modules/crypto-js/sha256.js","../../node_modules/crypto-js/sha512.js","../../node_modules/crypto-js/sha3.js","../../node_modules/crypto-js/hmac.js","../../node_modules/crypto-js/evpkdf.js","../../node_modules/crypto-js/cipher-core.js","../../node_modules/crypto-js/mode-ctr-gladman.js","../../node_modules/crypto-js/tripledes.js","../../node_modules/crypto-js/sha224.js","../../node_modules/crypto-js/blowfish.js","../../node_modules/crypto-js/index.js","../../node_modules/crypto-js/sha384.js","../../node_modules/crypto-js/ripemd160.js","../../node_modules/crypto-js/pbkdf2.js","../../node_modules/crypto-js/mode-cfb.js","../../node_modules/crypto-js/mode-ctr.js","../../node_modules/crypto-js/mode-ofb.js","../../node_modules/crypto-js/mode-ecb.js","../../node_modules/crypto-js/pad-ansix923.js","../../node_modules/crypto-js/pad-iso10126.js","../../node_modules/crypto-js/pad-iso97971.js","../../node_modules/crypto-js/pad-zeropadding.js","../../node_modules/crypto-js/pad-nopadding.js","../../node_modules/crypto-js/format-hex.js","../../node_modules/crypto-js/aes.js","../../node_modules/crypto-js/rc4.js","../../node_modules/crypto-js/rabbit.js","../../node_modules/crypto-js/rabbit-legacy.js","../../src/utils/cryptoUtils.ts","../../src/utils/indexedDBUtils.ts","../../src/utils/dateUtils.ts","../../src/utils/mockUtils.ts","../../src/utils/analytics.ts","../../node_modules/zustand/esm/middleware.mjs","../../src/utils/storageUtils.ts","../../src/utils/embeddingUtils.ts","../../src/utils/memoryUtils.ts","../../src/store/useStore.ts","../../node_modules/@supabase/functions-js/dist/module/types.js","../../node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","../../node_modules/@supabase/functions-js/dist/module/helper.js","../../node_modules/@supabase/node-fetch/browser.js","../../node_modules/@supabase/postgrest-js/dist/cjs/PostgrestError.js","../../node_modules/@supabase/postgrest-js/dist/cjs/PostgrestBuilder.js","../../node_modules/@supabase/postgrest-js/dist/cjs/PostgrestTransformBuilder.js","../../node_modules/@supabase/postgrest-js/dist/cjs/PostgrestFilterBuilder.js","../../node_modules/@supabase/postgrest-js/dist/cjs/PostgrestQueryBuilder.js","../../node_modules/@supabase/postgrest-js/dist/cjs/version.js","../../node_modules/@supabase/postgrest-js/dist/cjs/constants.js","../../node_modules/@supabase/postgrest-js/dist/cjs/PostgrestClient.js","../../node_modules/@supabase/postgrest-js/dist/cjs/index.js","../../node_modules/@supabase/postgrest-js/dist/esm/wrapper.mjs","../../node_modules/@supabase/realtime-js/dist/module/lib/constants.js","../../node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","../../node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","../../node_modules/@supabase/realtime-js/dist/module/lib/timer.js","../../node_modules/@supabase/realtime-js/dist/module/lib/push.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","../../node_modules/@supabase/storage-js/dist/module/lib/errors.js","../../node_modules/@supabase/storage-js/dist/module/lib/helpers.js","../../node_modules/@supabase/storage-js/dist/module/lib/fetch.js","../../node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","../../node_modules/@supabase/storage-js/dist/module/lib/version.js","../../node_modules/@supabase/storage-js/dist/module/lib/constants.js","../../node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","../../node_modules/@supabase/storage-js/dist/module/StorageClient.js","../../node_modules/@supabase/supabase-js/dist/module/lib/constants.js","../../node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","../../node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","../../node_modules/@supabase/auth-js/dist/module/lib/version.js","../../node_modules/@supabase/auth-js/dist/module/lib/constants.js","../../node_modules/@supabase/auth-js/dist/module/lib/errors.js","../../node_modules/@supabase/auth-js/dist/module/lib/base64url.js","../../node_modules/@supabase/auth-js/dist/module/lib/helpers.js","../../node_modules/@supabase/auth-js/dist/module/lib/fetch.js","../../node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js","../../node_modules/@supabase/auth-js/dist/module/lib/local-storage.js","../../node_modules/@supabase/auth-js/dist/module/lib/locks.js","../../node_modules/@supabase/auth-js/dist/module/lib/polyfills.js","../../node_modules/@supabase/auth-js/dist/module/GoTrueClient.js","../../node_modules/@supabase/auth-js/dist/module/AuthClient.js","../../node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","../../node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","../../node_modules/@supabase/supabase-js/dist/module/index.js","../../src/utils/supabaseClient.ts","../../src/auth/AuthContext.tsx","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/book-open.js","../../node_modules/lucide-react/dist/esm/icons/book.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/calendar-check.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-square.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/hard-drive.js","../../node_modules/lucide-react/dist/esm/icons/heart.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/life-buoy.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/message-circle.js","../../node_modules/lucide-react/dist/esm/icons/more-vertical.js","../../node_modules/lucide-react/dist/esm/icons/phone.js","../../node_modules/lucide-react/dist/esm/icons/plus-circle.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../node_modules/lucide-react/dist/esm/icons/tag.js","../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/trophy.js","../../node_modules/lucide-react/dist/esm/icons/user-check.js","../../node_modules/lucide-react/dist/esm/icons/user-plus.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/components/Layout/NavItem.tsx","../../src/components/Legal/LegalDisclaimer.tsx","../../src/auth/LoginButton.tsx","../../src/components/UI/StorageIndicator.tsx","../../src/components/Layout/Header.tsx","../../src/components/TasksView/InsightCard.tsx","../../src/components/InsightsView/InsightsView.tsx","../../src/components/Layout/AppLayout.tsx","../../src/components/ChatView/MessageBubble.tsx","../../src/components/UI/Skeleton.tsx","../../src/components/ChatView/ChatSkeleton.tsx","../../src/components/ChatView/QuickResponses.tsx","../../src/stripe-config.ts","../../src/components/Subscription/SubscriptionButton.tsx","../../src/utils/stripeUtils.ts","../../src/components/ChatView/ChatView.tsx","../../src/components/CheckInView/MoodSelector.tsx","../../src/components/CheckInView/CravingSelector.tsx","../../src/components/Resources/EmergencyResources.tsx","../../src/components/CheckInView/CheckInView.tsx","../../src/components/JournalView/JournalEntry.tsx","../../src/components/JournalView/NewJournalEntryForm.tsx","../../src/components/JournalView/JournalView.tsx","../../src/components/ProgressView/ProgressCard.tsx","../../src/components/ProgressView/StreakCalendar.tsx","../../src/components/ProgressView/RelapseDialog.tsx","../../src/components/ProgressView/TriggerTracker.tsx","../../src/components/ProgressView/MilestoneTimeline.tsx","../../src/components/UI/Tabs.tsx","../../src/components/ProgressView/ProgressView.tsx","../../src/components/Resources/RecoveryResources.tsx","../../src/components/ResourcesView/CopingSkills.tsx","../../src/components/Legal/LegalTermsView.tsx","../../src/components/MemoryView/MemoryDebugView.tsx","../../src/components/MemoryView/MemoryContextDemo.tsx","../../src/components/ResourcesView/ResourcesView.tsx","../../src/components/TasksView/NewTaskForm.tsx","../../src/components/TasksView/TaskItem.tsx","../../src/components/TasksView/TasksView.tsx","../../src/components/ErrorBoundary.tsx","../../src/components/AppInstallPrompt.tsx","../../src/components/Legal/DisclaimerModal.tsx","../../src/auth/ProtectedRoute.tsx","../../src/auth/LoginPage.tsx","../../src/components/StorageMigration.tsx","../../node_modules/@capacitor/core/dist/index.js","../../node_modules/@capacitor/app/dist/esm/index.js","../../src/App.tsx","../../src/main.tsx","../../src/registerServiceWorker.ts"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst transactionDoneMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    // This mapping exists in reverseTransformCache but doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(this.request);\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nconst advanceMethodProps = ['continue', 'continuePrimaryKey', 'advance'];\nconst methodMap = {};\nconst advanceResults = new WeakMap();\nconst ittrProxiedCursorToOriginalProxy = new WeakMap();\nconst cursorIteratorTraps = {\n    get(target, prop) {\n        if (!advanceMethodProps.includes(prop))\n            return target[prop];\n        let cachedFunc = methodMap[prop];\n        if (!cachedFunc) {\n            cachedFunc = methodMap[prop] = function (...args) {\n                advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));\n            };\n        }\n        return cachedFunc;\n    },\n};\nasync function* iterate(...args) {\n    // tslint:disable-next-line:no-this-assignment\n    let cursor = this;\n    if (!(cursor instanceof IDBCursor)) {\n        cursor = await cursor.openCursor(...args);\n    }\n    if (!cursor)\n        return;\n    cursor = cursor;\n    const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);\n    ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);\n    // Map this double-proxy back to the original, so other cursor methods work.\n    reverseTransformCache.set(proxiedCursor, unwrap(cursor));\n    while (cursor) {\n        yield proxiedCursor;\n        // If one of the advancing methods was not called, call continue().\n        cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());\n        advanceResults.delete(proxiedCursor);\n    }\n}\nfunction isIteratorProp(target, prop) {\n    return ((prop === Symbol.asyncIterator &&\n        instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor])) ||\n        (prop === 'iterate' && instanceOfAny(target, [IDBIndex, IDBObjectStore])));\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get(target, prop, receiver) {\n        if (isIteratorProp(target, prop))\n            return iterate;\n        return oldTraps.get(target, prop, receiver);\n    },\n    has(target, prop) {\n        return isIteratorProp(target, prop) || oldTraps.has(target, prop);\n    },\n}));\n\nexport { deleteDB, openDB, unwrap, wrap };\n","export default {}",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var X32WordArray = C_lib.WordArray;\n\n\t    /**\n\t     * x64 namespace.\n\t     */\n\t    var C_x64 = C.x64 = {};\n\n\t    /**\n\t     * A 64-bit word.\n\t     */\n\t    var X64Word = C_x64.Word = Base.extend({\n\t        /**\n\t         * Initializes a newly created 64-bit word.\n\t         *\n\t         * @param {number} high The high 32 bits.\n\t         * @param {number} low The low 32 bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\n\t         */\n\t        init: function (high, low) {\n\t            this.high = high;\n\t            this.low = low;\n\t        }\n\n\t        /**\n\t         * Bitwise NOTs this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after negating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var negated = x64Word.not();\n\t         */\n\t        // not: function () {\n\t            // var high = ~this.high;\n\t            // var low = ~this.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ANDs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to AND with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ANDing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var anded = x64Word.and(anotherX64Word);\n\t         */\n\t        // and: function (word) {\n\t            // var high = this.high & word.high;\n\t            // var low = this.low & word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to OR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var ored = x64Word.or(anotherX64Word);\n\t         */\n\t        // or: function (word) {\n\t            // var high = this.high | word.high;\n\t            // var low = this.low | word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise XORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after XORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var xored = x64Word.xor(anotherX64Word);\n\t         */\n\t        // xor: function (word) {\n\t            // var high = this.high ^ word.high;\n\t            // var low = this.low ^ word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftL(25);\n\t         */\n\t        // shiftL: function (n) {\n\t            // if (n < 32) {\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\n\t                // var low = this.low << n;\n\t            // } else {\n\t                // var high = this.low << (n - 32);\n\t                // var low = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftR(7);\n\t         */\n\t        // shiftR: function (n) {\n\t            // if (n < 32) {\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\n\t                // var high = this.high >>> n;\n\t            // } else {\n\t                // var low = this.high >>> (n - 32);\n\t                // var high = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotL(25);\n\t         */\n\t        // rotL: function (n) {\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotR(7);\n\t         */\n\t        // rotR: function (n) {\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\n\t        // },\n\n\t        /**\n\t         * Adds this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to add with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after adding.\n\t         *\n\t         * @example\n\t         *\n\t         *     var added = x64Word.add(anotherX64Word);\n\t         */\n\t        // add: function (word) {\n\t            // var low = (this.low + word.low) | 0;\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\n\t            // var high = (this.high + word.high + carry) | 0;\n\n\t            // return X64Word.create(high, low);\n\t        // }\n\t    });\n\n\t    /**\n\t     * An array of 64-bit words.\n\t     *\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ]);\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ], 10);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 8;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this 64-bit word array to a 32-bit word array.\n\t         *\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x32WordArray = x64WordArray.toX32();\n\t         */\n\t        toX32: function () {\n\t            // Shortcuts\n\t            var x64Words = this.words;\n\t            var x64WordsLength = x64Words.length;\n\n\t            // Convert\n\t            var x32Words = [];\n\t            for (var i = 0; i < x64WordsLength; i++) {\n\t                var x64Word = x64Words[i];\n\t                x32Words.push(x64Word.high);\n\t                x32Words.push(x64Word.low);\n\t            }\n\n\t            return X32WordArray.create(x32Words, this.sigBytes);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {X64WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = x64WordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\n\t            // Clone \"words\" array\n\t            var words = clone.words = this.words.slice(0);\n\n\t            // Clone each X64Word object\n\t            var wordsLength = words.length;\n\t            for (var i = 0; i < wordsLength; i++) {\n\t                words[i] = words[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\t}());\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * UTF-16 BE encoding strategy.\n\t     */\n\t    var Utf16BE = C_enc.Utf16 = C_enc.Utf16BE = {\n\t        /**\n\t         * Converts a word array to a UTF-16 BE string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-16 BE string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf16String = CryptoJS.enc.Utf16.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var utf16Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 2) {\n\t                var codePoint = (words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff;\n\t                utf16Chars.push(String.fromCharCode(codePoint));\n\t            }\n\n\t            return utf16Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a UTF-16 BE string to a word array.\n\t         *\n\t         * @param {string} utf16Str The UTF-16 BE string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf16.parse(utf16String);\n\t         */\n\t        parse: function (utf16Str) {\n\t            // Shortcut\n\t            var utf16StrLength = utf16Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < utf16StrLength; i++) {\n\t                words[i >>> 1] |= utf16Str.charCodeAt(i) << (16 - (i % 2) * 16);\n\t            }\n\n\t            return WordArray.create(words, utf16StrLength * 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-16 LE encoding strategy.\n\t     */\n\t    C_enc.Utf16LE = {\n\t        /**\n\t         * Converts a word array to a UTF-16 LE string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-16 LE string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf16Str = CryptoJS.enc.Utf16LE.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var utf16Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 2) {\n\t                var codePoint = swapEndian((words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff);\n\t                utf16Chars.push(String.fromCharCode(codePoint));\n\t            }\n\n\t            return utf16Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a UTF-16 LE string to a word array.\n\t         *\n\t         * @param {string} utf16Str The UTF-16 LE string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf16LE.parse(utf16Str);\n\t         */\n\t        parse: function (utf16Str) {\n\t            // Shortcut\n\t            var utf16StrLength = utf16Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < utf16StrLength; i++) {\n\t                words[i >>> 1] |= swapEndian(utf16Str.charCodeAt(i) << (16 - (i % 2) * 16));\n\t            }\n\n\t            return WordArray.create(words, utf16StrLength * 2);\n\t        }\n\t    };\n\n\t    function swapEndian(word) {\n\t        return ((word << 8) & 0xff00ff00) | ((word >>> 8) & 0x00ff00ff);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Utf16;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64url encoding strategy.\n\t     */\n\t    var Base64url = C_enc.Base64url = {\n\t        /**\n\t         * Converts a word array to a Base64url string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @param {boolean} urlSafe Whether to use url safe\n\t         *\n\t         * @return {string} The Base64url string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64url.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray, urlSafe) {\n\t            if (urlSafe === undefined) {\n\t                urlSafe = true\n\t            }\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = urlSafe ? this._safe_map : this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64url string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64url string.\n\t         *\n\t         * @param {boolean} urlSafe Whether to use url safe\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64url.parse(base64String);\n\t         */\n\t        parse: function (base64Str, urlSafe) {\n\t            if (urlSafe === undefined) {\n\t                urlSafe = true\n\t            }\n\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = urlSafe ? this._safe_map : this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                reverseMap = this._reverseMap = [];\n\t                for (var j = 0; j < map.length; j++) {\n\t                    reverseMap[map.charCodeAt(j)] = j;\n\t                }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n\t        _safe_map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t        var words = [];\n\t        var nBytes = 0;\n\t        for (var i = 0; i < base64StrLength; i++) {\n\t            if (i % 4) {\n\t                var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t                var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t                var bitsCombined = bits1 | bits2;\n\t                words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t                nBytes++;\n\t            }\n\t        }\n\t        return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64url;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-1 hash algorithm.\n\t     */\n\t    var SHA1 = C_algo.SHA1 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476,\n\t                0xc3d2e1f0\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\n\t            // Computation\n\t            for (var i = 0; i < 80; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n\t                    W[i] = (n << 1) | (n >>> 31);\n\t                }\n\n\t                var t = ((a << 5) | (a >>> 27)) + e + W[i];\n\t                if (i < 20) {\n\t                    t += ((b & c) | (~b & d)) + 0x5a827999;\n\t                } else if (i < 40) {\n\t                    t += (b ^ c ^ d) + 0x6ed9eba1;\n\t                } else if (i < 60) {\n\t                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\n\t                } else /* if (i < 80) */ {\n\t                    t += (b ^ c ^ d) - 0x359d3e2a;\n\t                }\n\n\t                e = d;\n\t                d = c;\n\t                c = (b << 30) | (b >>> 2);\n\t                b = a;\n\t                a = t;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA1('message');\n\t     *     var hash = CryptoJS.SHA1(wordArray);\n\t     */\n\t    C.SHA1 = Hasher._createHelper(SHA1);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA1(message, key);\n\t     */\n\t    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\n\t}());\n\n\n\treturn CryptoJS.SHA1;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\n\t    function X64Word_create() {\n\t        return X64Word.create.apply(X64Word, arguments);\n\t    }\n\n\t    // Constants\n\t    var K = [\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\n\t    ];\n\n\t    // Reusable objects\n\t    var W = [];\n\t    (function () {\n\t        for (var i = 0; i < 80; i++) {\n\t            W[i] = X64Word_create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-512 hash algorithm.\n\t     */\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var H0 = H[0];\n\t            var H1 = H[1];\n\t            var H2 = H[2];\n\t            var H3 = H[3];\n\t            var H4 = H[4];\n\t            var H5 = H[5];\n\t            var H6 = H[6];\n\t            var H7 = H[7];\n\n\t            var H0h = H0.high;\n\t            var H0l = H0.low;\n\t            var H1h = H1.high;\n\t            var H1l = H1.low;\n\t            var H2h = H2.high;\n\t            var H2l = H2.low;\n\t            var H3h = H3.high;\n\t            var H3l = H3.low;\n\t            var H4h = H4.high;\n\t            var H4l = H4.low;\n\t            var H5h = H5.high;\n\t            var H5l = H5.low;\n\t            var H6h = H6.high;\n\t            var H6l = H6.low;\n\t            var H7h = H7.high;\n\t            var H7l = H7.low;\n\n\t            // Working variables\n\t            var ah = H0h;\n\t            var al = H0l;\n\t            var bh = H1h;\n\t            var bl = H1l;\n\t            var ch = H2h;\n\t            var cl = H2l;\n\t            var dh = H3h;\n\t            var dl = H3l;\n\t            var eh = H4h;\n\t            var el = H4l;\n\t            var fh = H5h;\n\t            var fl = H5l;\n\t            var gh = H6h;\n\t            var gl = H6l;\n\t            var hh = H7h;\n\t            var hl = H7l;\n\n\t            // Rounds\n\t            for (var i = 0; i < 80; i++) {\n\t                var Wil;\n\t                var Wih;\n\n\t                // Shortcut\n\t                var Wi = W[i];\n\n\t                // Extend message\n\t                if (i < 16) {\n\t                    Wih = Wi.high = M[offset + i * 2]     | 0;\n\t                    Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\n\t                } else {\n\t                    // Gamma0\n\t                    var gamma0x  = W[i - 15];\n\t                    var gamma0xh = gamma0x.high;\n\t                    var gamma0xl = gamma0x.low;\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\n\n\t                    // Gamma1\n\t                    var gamma1x  = W[i - 2];\n\t                    var gamma1xh = gamma1x.high;\n\t                    var gamma1xl = gamma1x.low;\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\n\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n\t                    var Wi7  = W[i - 7];\n\t                    var Wi7h = Wi7.high;\n\t                    var Wi7l = Wi7.low;\n\n\t                    var Wi16  = W[i - 16];\n\t                    var Wi16h = Wi16.high;\n\t                    var Wi16l = Wi16.low;\n\n\t                    Wil = gamma0l + Wi7l;\n\t                    Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\n\t                    Wil = Wil + gamma1l;\n\t                    Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\n\t                    Wil = Wil + Wi16l;\n\t                    Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\n\n\t                    Wi.high = Wih;\n\t                    Wi.low  = Wil;\n\t                }\n\n\t                var chh  = (eh & fh) ^ (~eh & gh);\n\t                var chl  = (el & fl) ^ (~el & gl);\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\n\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\n\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\n\t                var Ki  = K[i];\n\t                var Kih = Ki.high;\n\t                var Kil = Ki.low;\n\n\t                var t1l = hl + sigma1l;\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + chl;\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Kil;\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Wil;\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\n\n\t                // t2 = sigma0 + maj\n\t                var t2l = sigma0l + majl;\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\n\n\t                // Update working variables\n\t                hh = gh;\n\t                hl = gl;\n\t                gh = fh;\n\t                gl = fl;\n\t                fh = eh;\n\t                fl = el;\n\t                el = (dl + t1l) | 0;\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n\t                dh = ch;\n\t                dl = cl;\n\t                ch = bh;\n\t                cl = bl;\n\t                bh = ah;\n\t                bl = al;\n\t                al = (t1l + t2l) | 0;\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H0l = H0.low  = (H0l + al);\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\n\t            H1l = H1.low  = (H1l + bl);\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\n\t            H2l = H2.low  = (H2l + cl);\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\n\t            H3l = H3.low  = (H3l + dl);\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\n\t            H4l = H4.low  = (H4l + el);\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\n\t            H5l = H5.low  = (H5l + fl);\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\n\t            H6l = H6.low  = (H6l + gl);\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\n\t            H7l = H7.low  = (H7l + hl);\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Convert hash to 32-bit word array before returning\n\t            var hash = this._hash.toX32();\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        },\n\n\t        blockSize: 1024/32\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA512('message');\n\t     *     var hash = CryptoJS.SHA512(wordArray);\n\t     */\n\t    C.SHA512 = Hasher._createHelper(SHA512);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\n\t     */\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\n\t}());\n\n\n\treturn CryptoJS.SHA512;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var C_algo = C.algo;\n\n\t    // Constants tables\n\t    var RHO_OFFSETS = [];\n\t    var PI_INDEXES  = [];\n\t    var ROUND_CONSTANTS = [];\n\n\t    // Compute Constants\n\t    (function () {\n\t        // Compute rho offset constants\n\t        var x = 1, y = 0;\n\t        for (var t = 0; t < 24; t++) {\n\t            RHO_OFFSETS[x + 5 * y] = ((t + 1) * (t + 2) / 2) % 64;\n\n\t            var newX = y % 5;\n\t            var newY = (2 * x + 3 * y) % 5;\n\t            x = newX;\n\t            y = newY;\n\t        }\n\n\t        // Compute pi index constants\n\t        for (var x = 0; x < 5; x++) {\n\t            for (var y = 0; y < 5; y++) {\n\t                PI_INDEXES[x + 5 * y] = y + ((2 * x + 3 * y) % 5) * 5;\n\t            }\n\t        }\n\n\t        // Compute round constants\n\t        var LFSR = 0x01;\n\t        for (var i = 0; i < 24; i++) {\n\t            var roundConstantMsw = 0;\n\t            var roundConstantLsw = 0;\n\n\t            for (var j = 0; j < 7; j++) {\n\t                if (LFSR & 0x01) {\n\t                    var bitPosition = (1 << j) - 1;\n\t                    if (bitPosition < 32) {\n\t                        roundConstantLsw ^= 1 << bitPosition;\n\t                    } else /* if (bitPosition >= 32) */ {\n\t                        roundConstantMsw ^= 1 << (bitPosition - 32);\n\t                    }\n\t                }\n\n\t                // Compute next LFSR\n\t                if (LFSR & 0x80) {\n\t                    // Primitive polynomial over GF(2): x^8 + x^6 + x^5 + x^4 + 1\n\t                    LFSR = (LFSR << 1) ^ 0x71;\n\t                } else {\n\t                    LFSR <<= 1;\n\t                }\n\t            }\n\n\t            ROUND_CONSTANTS[i] = X64Word.create(roundConstantMsw, roundConstantLsw);\n\t        }\n\t    }());\n\n\t    // Reusable objects for temporary values\n\t    var T = [];\n\t    (function () {\n\t        for (var i = 0; i < 25; i++) {\n\t            T[i] = X64Word.create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-3 hash algorithm.\n\t     */\n\t    var SHA3 = C_algo.SHA3 = Hasher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} outputLength\n\t         *   The desired number of bits in the output hash.\n\t         *   Only values permitted are: 224, 256, 384, 512.\n\t         *   Default: 512\n\t         */\n\t        cfg: Hasher.cfg.extend({\n\t            outputLength: 512\n\t        }),\n\n\t        _doReset: function () {\n\t            var state = this._state = []\n\t            for (var i = 0; i < 25; i++) {\n\t                state[i] = new X64Word.init();\n\t            }\n\n\t            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var state = this._state;\n\t            var nBlockSizeLanes = this.blockSize / 2;\n\n\t            // Absorb\n\t            for (var i = 0; i < nBlockSizeLanes; i++) {\n\t                // Shortcuts\n\t                var M2i  = M[offset + 2 * i];\n\t                var M2i1 = M[offset + 2 * i + 1];\n\n\t                // Swap endian\n\t                M2i = (\n\t                    (((M2i << 8)  | (M2i >>> 24)) & 0x00ff00ff) |\n\t                    (((M2i << 24) | (M2i >>> 8))  & 0xff00ff00)\n\t                );\n\t                M2i1 = (\n\t                    (((M2i1 << 8)  | (M2i1 >>> 24)) & 0x00ff00ff) |\n\t                    (((M2i1 << 24) | (M2i1 >>> 8))  & 0xff00ff00)\n\t                );\n\n\t                // Absorb message into state\n\t                var lane = state[i];\n\t                lane.high ^= M2i1;\n\t                lane.low  ^= M2i;\n\t            }\n\n\t            // Rounds\n\t            for (var round = 0; round < 24; round++) {\n\t                // Theta\n\t                for (var x = 0; x < 5; x++) {\n\t                    // Mix column lanes\n\t                    var tMsw = 0, tLsw = 0;\n\t                    for (var y = 0; y < 5; y++) {\n\t                        var lane = state[x + 5 * y];\n\t                        tMsw ^= lane.high;\n\t                        tLsw ^= lane.low;\n\t                    }\n\n\t                    // Temporary values\n\t                    var Tx = T[x];\n\t                    Tx.high = tMsw;\n\t                    Tx.low  = tLsw;\n\t                }\n\t                for (var x = 0; x < 5; x++) {\n\t                    // Shortcuts\n\t                    var Tx4 = T[(x + 4) % 5];\n\t                    var Tx1 = T[(x + 1) % 5];\n\t                    var Tx1Msw = Tx1.high;\n\t                    var Tx1Lsw = Tx1.low;\n\n\t                    // Mix surrounding columns\n\t                    var tMsw = Tx4.high ^ ((Tx1Msw << 1) | (Tx1Lsw >>> 31));\n\t                    var tLsw = Tx4.low  ^ ((Tx1Lsw << 1) | (Tx1Msw >>> 31));\n\t                    for (var y = 0; y < 5; y++) {\n\t                        var lane = state[x + 5 * y];\n\t                        lane.high ^= tMsw;\n\t                        lane.low  ^= tLsw;\n\t                    }\n\t                }\n\n\t                // Rho Pi\n\t                for (var laneIndex = 1; laneIndex < 25; laneIndex++) {\n\t                    var tMsw;\n\t                    var tLsw;\n\n\t                    // Shortcuts\n\t                    var lane = state[laneIndex];\n\t                    var laneMsw = lane.high;\n\t                    var laneLsw = lane.low;\n\t                    var rhoOffset = RHO_OFFSETS[laneIndex];\n\n\t                    // Rotate lanes\n\t                    if (rhoOffset < 32) {\n\t                        tMsw = (laneMsw << rhoOffset) | (laneLsw >>> (32 - rhoOffset));\n\t                        tLsw = (laneLsw << rhoOffset) | (laneMsw >>> (32 - rhoOffset));\n\t                    } else /* if (rhoOffset >= 32) */ {\n\t                        tMsw = (laneLsw << (rhoOffset - 32)) | (laneMsw >>> (64 - rhoOffset));\n\t                        tLsw = (laneMsw << (rhoOffset - 32)) | (laneLsw >>> (64 - rhoOffset));\n\t                    }\n\n\t                    // Transpose lanes\n\t                    var TPiLane = T[PI_INDEXES[laneIndex]];\n\t                    TPiLane.high = tMsw;\n\t                    TPiLane.low  = tLsw;\n\t                }\n\n\t                // Rho pi at x = y = 0\n\t                var T0 = T[0];\n\t                var state0 = state[0];\n\t                T0.high = state0.high;\n\t                T0.low  = state0.low;\n\n\t                // Chi\n\t                for (var x = 0; x < 5; x++) {\n\t                    for (var y = 0; y < 5; y++) {\n\t                        // Shortcuts\n\t                        var laneIndex = x + 5 * y;\n\t                        var lane = state[laneIndex];\n\t                        var TLane = T[laneIndex];\n\t                        var Tx1Lane = T[((x + 1) % 5) + 5 * y];\n\t                        var Tx2Lane = T[((x + 2) % 5) + 5 * y];\n\n\t                        // Mix rows\n\t                        lane.high = TLane.high ^ (~Tx1Lane.high & Tx2Lane.high);\n\t                        lane.low  = TLane.low  ^ (~Tx1Lane.low  & Tx2Lane.low);\n\t                    }\n\t                }\n\n\t                // Iota\n\t                var lane = state[0];\n\t                var roundConstant = ROUND_CONSTANTS[round];\n\t                lane.high ^= roundConstant.high;\n\t                lane.low  ^= roundConstant.low;\n\t            }\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\t            var blockSizeBits = this.blockSize * 32;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x1 << (24 - nBitsLeft % 32);\n\t            dataWords[((Math.ceil((nBitsLeft + 1) / blockSizeBits) * blockSizeBits) >>> 5) - 1] |= 0x80;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var state = this._state;\n\t            var outputLengthBytes = this.cfg.outputLength / 8;\n\t            var outputLengthLanes = outputLengthBytes / 8;\n\n\t            // Squeeze\n\t            var hashWords = [];\n\t            for (var i = 0; i < outputLengthLanes; i++) {\n\t                // Shortcuts\n\t                var lane = state[i];\n\t                var laneMsw = lane.high;\n\t                var laneLsw = lane.low;\n\n\t                // Swap endian\n\t                laneMsw = (\n\t                    (((laneMsw << 8)  | (laneMsw >>> 24)) & 0x00ff00ff) |\n\t                    (((laneMsw << 24) | (laneMsw >>> 8))  & 0xff00ff00)\n\t                );\n\t                laneLsw = (\n\t                    (((laneLsw << 8)  | (laneLsw >>> 24)) & 0x00ff00ff) |\n\t                    (((laneLsw << 24) | (laneLsw >>> 8))  & 0xff00ff00)\n\t                );\n\n\t                // Squeeze state to retrieve hash\n\t                hashWords.push(laneLsw);\n\t                hashWords.push(laneMsw);\n\t            }\n\n\t            // Return final computed hash\n\t            return new WordArray.init(hashWords, outputLengthBytes);\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\n\t            var state = clone._state = this._state.slice(0);\n\t            for (var i = 0; i < 25; i++) {\n\t                state[i] = state[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA3('message');\n\t     *     var hash = CryptoJS.SHA3(wordArray);\n\t     */\n\t    C.SHA3 = Hasher._createHelper(SHA3);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA3(message, key);\n\t     */\n\t    C.HmacSHA3 = Hasher._createHmacHelper(SHA3);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA3;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha1\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha1\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var MD5 = C_algo.MD5;\n\n\t    /**\n\t     * This key derivation function is meant to conform with EVP_BytesToKey.\n\t     * www.openssl.org/docs/crypto/EVP_BytesToKey.html\n\t     */\n\t    var EvpKDF = C_algo.EvpKDF = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\n\t         * @property {Hasher} hasher The hash algorithm to use. Default: MD5\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\n\t         */\n\t        cfg: Base.extend({\n\t            keySize: 128/32,\n\t            hasher: MD5,\n\t            iterations: 1\n\t        }),\n\n\t        /**\n\t         * Initializes a newly created key derivation function.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create();\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });\n\t         */\n\t        init: function (cfg) {\n\t            this.cfg = this.cfg.extend(cfg);\n\t        },\n\n\t        /**\n\t         * Derives a key from a password.\n\t         *\n\t         * @param {WordArray|string} password The password.\n\t         * @param {WordArray|string} salt A salt.\n\t         *\n\t         * @return {WordArray} The derived key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var key = kdf.compute(password, salt);\n\t         */\n\t        compute: function (password, salt) {\n\t            var block;\n\n\t            // Shortcut\n\t            var cfg = this.cfg;\n\n\t            // Init hasher\n\t            var hasher = cfg.hasher.create();\n\n\t            // Initial values\n\t            var derivedKey = WordArray.create();\n\n\t            // Shortcuts\n\t            var derivedKeyWords = derivedKey.words;\n\t            var keySize = cfg.keySize;\n\t            var iterations = cfg.iterations;\n\n\t            // Generate key\n\t            while (derivedKeyWords.length < keySize) {\n\t                if (block) {\n\t                    hasher.update(block);\n\t                }\n\t                block = hasher.update(password).finalize(salt);\n\t                hasher.reset();\n\n\t                // Iterations\n\t                for (var i = 1; i < iterations; i++) {\n\t                    block = hasher.finalize(block);\n\t                    hasher.reset();\n\t                }\n\n\t                derivedKey.concat(block);\n\t            }\n\t            derivedKey.sigBytes = keySize * 4;\n\n\t            return derivedKey;\n\t        }\n\t    });\n\n\t    /**\n\t     * Derives a key from a password.\n\t     *\n\t     * @param {WordArray|string} password The password.\n\t     * @param {WordArray|string} salt A salt.\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\n\t     *\n\t     * @return {WordArray} The derived key.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var key = CryptoJS.EvpKDF(password, salt);\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });\n\t     */\n\t    C.EvpKDF = function (password, salt, cfg) {\n\t        return EvpKDF.create(cfg).compute(password, salt);\n\t    };\n\t}());\n\n\n\treturn CryptoJS.EvpKDF;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./evpkdf\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./evpkdf\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Cipher core components.\n\t */\n\tCryptoJS.lib.Cipher || (function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var Base64 = C_enc.Base64;\n\t    var C_algo = C.algo;\n\t    var EvpKDF = C_algo.EvpKDF;\n\n\t    /**\n\t     * Abstract base cipher template.\n\t     *\n\t     * @property {number} keySize This cipher's key size. Default: 4 (128 bits)\n\t     * @property {number} ivSize This cipher's IV size. Default: 4 (128 bits)\n\t     * @property {number} _ENC_XFORM_MODE A constant representing encryption mode.\n\t     * @property {number} _DEC_XFORM_MODE A constant representing decryption mode.\n\t     */\n\t    var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {WordArray} iv The IV to use for this operation.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Creates this cipher in encryption mode.\n\t         *\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {Cipher} A cipher instance.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });\n\t         */\n\t        createEncryptor: function (key, cfg) {\n\t            return this.create(this._ENC_XFORM_MODE, key, cfg);\n\t        },\n\n\t        /**\n\t         * Creates this cipher in decryption mode.\n\t         *\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {Cipher} A cipher instance.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });\n\t         */\n\t        createDecryptor: function (key, cfg) {\n\t            return this.create(this._DEC_XFORM_MODE, key, cfg);\n\t        },\n\n\t        /**\n\t         * Initializes a newly created cipher.\n\t         *\n\t         * @param {number} xformMode Either the encryption or decryption transormation mode constant.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });\n\t         */\n\t        init: function (xformMode, key, cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Store transform mode and key\n\t            this._xformMode = xformMode;\n\t            this._key = key;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this cipher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     cipher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-cipher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Adds data to be encrypted or decrypted.\n\t         *\n\t         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.\n\t         *\n\t         * @return {WordArray} The data after processing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var encrypted = cipher.process('data');\n\t         *     var encrypted = cipher.process(wordArray);\n\t         */\n\t        process: function (dataUpdate) {\n\t            // Append\n\t            this._append(dataUpdate);\n\n\t            // Process available blocks\n\t            return this._process();\n\t        },\n\n\t        /**\n\t         * Finalizes the encryption or decryption process.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.\n\t         *\n\t         * @return {WordArray} The data after final processing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var encrypted = cipher.finalize();\n\t         *     var encrypted = cipher.finalize('data');\n\t         *     var encrypted = cipher.finalize(wordArray);\n\t         */\n\t        finalize: function (dataUpdate) {\n\t            // Final data update\n\t            if (dataUpdate) {\n\t                this._append(dataUpdate);\n\t            }\n\n\t            // Perform concrete-cipher logic\n\t            var finalProcessedData = this._doFinalize();\n\n\t            return finalProcessedData;\n\t        },\n\n\t        keySize: 128/32,\n\n\t        ivSize: 128/32,\n\n\t        _ENC_XFORM_MODE: 1,\n\n\t        _DEC_XFORM_MODE: 2,\n\n\t        /**\n\t         * Creates shortcut functions to a cipher's object interface.\n\t         *\n\t         * @param {Cipher} cipher The cipher to create a helper for.\n\t         *\n\t         * @return {Object} An object with encrypt and decrypt shortcut functions.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);\n\t         */\n\t        _createHelper: (function () {\n\t            function selectCipherStrategy(key) {\n\t                if (typeof key == 'string') {\n\t                    return PasswordBasedCipher;\n\t                } else {\n\t                    return SerializableCipher;\n\t                }\n\t            }\n\n\t            return function (cipher) {\n\t                return {\n\t                    encrypt: function (message, key, cfg) {\n\t                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);\n\t                    },\n\n\t                    decrypt: function (ciphertext, key, cfg) {\n\t                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);\n\t                    }\n\t                };\n\t            };\n\t        }())\n\t    });\n\n\t    /**\n\t     * Abstract base stream cipher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 1 (32 bits)\n\t     */\n\t    var StreamCipher = C_lib.StreamCipher = Cipher.extend({\n\t        _doFinalize: function () {\n\t            // Process partial blocks\n\t            var finalProcessedBlocks = this._process(!!'flush');\n\n\t            return finalProcessedBlocks;\n\t        },\n\n\t        blockSize: 1\n\t    });\n\n\t    /**\n\t     * Mode namespace.\n\t     */\n\t    var C_mode = C.mode = {};\n\n\t    /**\n\t     * Abstract base block cipher mode template.\n\t     */\n\t    var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({\n\t        /**\n\t         * Creates this mode for encryption.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);\n\t         */\n\t        createEncryptor: function (cipher, iv) {\n\t            return this.Encryptor.create(cipher, iv);\n\t        },\n\n\t        /**\n\t         * Creates this mode for decryption.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);\n\t         */\n\t        createDecryptor: function (cipher, iv) {\n\t            return this.Decryptor.create(cipher, iv);\n\t        },\n\n\t        /**\n\t         * Initializes a newly created mode.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);\n\t         */\n\t        init: function (cipher, iv) {\n\t            this._cipher = cipher;\n\t            this._iv = iv;\n\t        }\n\t    });\n\n\t    /**\n\t     * Cipher Block Chaining mode.\n\t     */\n\t    var CBC = C_mode.CBC = (function () {\n\t        /**\n\t         * Abstract base CBC mode.\n\t         */\n\t        var CBC = BlockCipherMode.extend();\n\n\t        /**\n\t         * CBC encryptor.\n\t         */\n\t        CBC.Encryptor = CBC.extend({\n\t            /**\n\t             * Processes the data block at offset.\n\t             *\n\t             * @param {Array} words The data words to operate on.\n\t             * @param {number} offset The offset where the block starts.\n\t             *\n\t             * @example\n\t             *\n\t             *     mode.processBlock(data.words, offset);\n\t             */\n\t            processBlock: function (words, offset) {\n\t                // Shortcuts\n\t                var cipher = this._cipher;\n\t                var blockSize = cipher.blockSize;\n\n\t                // XOR and encrypt\n\t                xorBlock.call(this, words, offset, blockSize);\n\t                cipher.encryptBlock(words, offset);\n\n\t                // Remember this block to use with next block\n\t                this._prevBlock = words.slice(offset, offset + blockSize);\n\t            }\n\t        });\n\n\t        /**\n\t         * CBC decryptor.\n\t         */\n\t        CBC.Decryptor = CBC.extend({\n\t            /**\n\t             * Processes the data block at offset.\n\t             *\n\t             * @param {Array} words The data words to operate on.\n\t             * @param {number} offset The offset where the block starts.\n\t             *\n\t             * @example\n\t             *\n\t             *     mode.processBlock(data.words, offset);\n\t             */\n\t            processBlock: function (words, offset) {\n\t                // Shortcuts\n\t                var cipher = this._cipher;\n\t                var blockSize = cipher.blockSize;\n\n\t                // Remember this block to use with next block\n\t                var thisBlock = words.slice(offset, offset + blockSize);\n\n\t                // Decrypt and XOR\n\t                cipher.decryptBlock(words, offset);\n\t                xorBlock.call(this, words, offset, blockSize);\n\n\t                // This block becomes the previous block\n\t                this._prevBlock = thisBlock;\n\t            }\n\t        });\n\n\t        function xorBlock(words, offset, blockSize) {\n\t            var block;\n\n\t            // Shortcut\n\t            var iv = this._iv;\n\n\t            // Choose mixing block\n\t            if (iv) {\n\t                block = iv;\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            } else {\n\t                block = this._prevBlock;\n\t            }\n\n\t            // XOR blocks\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= block[i];\n\t            }\n\t        }\n\n\t        return CBC;\n\t    }());\n\n\t    /**\n\t     * Padding namespace.\n\t     */\n\t    var C_pad = C.pad = {};\n\n\t    /**\n\t     * PKCS #5/7 padding strategy.\n\t     */\n\t    var Pkcs7 = C_pad.Pkcs7 = {\n\t        /**\n\t         * Pads data using the algorithm defined in PKCS #5/7.\n\t         *\n\t         * @param {WordArray} data The data to pad.\n\t         * @param {number} blockSize The multiple that the data should be padded to.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);\n\t         */\n\t        pad: function (data, blockSize) {\n\t            // Shortcut\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count padding bytes\n\t            var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\n\n\t            // Create padding word\n\t            var paddingWord = (nPaddingBytes << 24) | (nPaddingBytes << 16) | (nPaddingBytes << 8) | nPaddingBytes;\n\n\t            // Create padding\n\t            var paddingWords = [];\n\t            for (var i = 0; i < nPaddingBytes; i += 4) {\n\t                paddingWords.push(paddingWord);\n\t            }\n\t            var padding = WordArray.create(paddingWords, nPaddingBytes);\n\n\t            // Add padding\n\t            data.concat(padding);\n\t        },\n\n\t        /**\n\t         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.\n\t         *\n\t         * @param {WordArray} data The data to unpad.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     CryptoJS.pad.Pkcs7.unpad(wordArray);\n\t         */\n\t        unpad: function (data) {\n\t            // Get number of padding bytes from last byte\n\t            var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t            // Remove padding\n\t            data.sigBytes -= nPaddingBytes;\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract base block cipher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 4 (128 bits)\n\t     */\n\t    var BlockCipher = C_lib.BlockCipher = Cipher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {Mode} mode The block mode to use. Default: CBC\n\t         * @property {Padding} padding The padding strategy to use. Default: Pkcs7\n\t         */\n\t        cfg: Cipher.cfg.extend({\n\t            mode: CBC,\n\t            padding: Pkcs7\n\t        }),\n\n\t        reset: function () {\n\t            var modeCreator;\n\n\t            // Reset cipher\n\t            Cipher.reset.call(this);\n\n\t            // Shortcuts\n\t            var cfg = this.cfg;\n\t            var iv = cfg.iv;\n\t            var mode = cfg.mode;\n\n\t            // Reset block mode\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\n\t                modeCreator = mode.createEncryptor;\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\n\t                modeCreator = mode.createDecryptor;\n\t                // Keep at least one block in the buffer for unpadding\n\t                this._minBufferSize = 1;\n\t            }\n\n\t            if (this._mode && this._mode.__creator == modeCreator) {\n\t                this._mode.init(this, iv && iv.words);\n\t            } else {\n\t                this._mode = modeCreator.call(mode, this, iv && iv.words);\n\t                this._mode.__creator = modeCreator;\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (words, offset) {\n\t            this._mode.processBlock(words, offset);\n\t        },\n\n\t        _doFinalize: function () {\n\t            var finalProcessedBlocks;\n\n\t            // Shortcut\n\t            var padding = this.cfg.padding;\n\n\t            // Finalize\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\n\t                // Pad data\n\t                padding.pad(this._data, this.blockSize);\n\n\t                // Process final blocks\n\t                finalProcessedBlocks = this._process(!!'flush');\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\n\t                // Process final blocks\n\t                finalProcessedBlocks = this._process(!!'flush');\n\n\t                // Unpad data\n\t                padding.unpad(finalProcessedBlocks);\n\t            }\n\n\t            return finalProcessedBlocks;\n\t        },\n\n\t        blockSize: 128/32\n\t    });\n\n\t    /**\n\t     * A collection of cipher parameters.\n\t     *\n\t     * @property {WordArray} ciphertext The raw ciphertext.\n\t     * @property {WordArray} key The key to this ciphertext.\n\t     * @property {WordArray} iv The IV used in the ciphering operation.\n\t     * @property {WordArray} salt The salt used with a key derivation function.\n\t     * @property {Cipher} algorithm The cipher algorithm.\n\t     * @property {Mode} mode The block mode used in the ciphering operation.\n\t     * @property {Padding} padding The padding scheme used in the ciphering operation.\n\t     * @property {number} blockSize The block size of the cipher.\n\t     * @property {Format} formatter The default formatting strategy to convert this cipher params object to a string.\n\t     */\n\t    var CipherParams = C_lib.CipherParams = Base.extend({\n\t        /**\n\t         * Initializes a newly created cipher params object.\n\t         *\n\t         * @param {Object} cipherParams An object with any of the possible cipher parameters.\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.lib.CipherParams.create({\n\t         *         ciphertext: ciphertextWordArray,\n\t         *         key: keyWordArray,\n\t         *         iv: ivWordArray,\n\t         *         salt: saltWordArray,\n\t         *         algorithm: CryptoJS.algo.AES,\n\t         *         mode: CryptoJS.mode.CBC,\n\t         *         padding: CryptoJS.pad.PKCS7,\n\t         *         blockSize: 4,\n\t         *         formatter: CryptoJS.format.OpenSSL\n\t         *     });\n\t         */\n\t        init: function (cipherParams) {\n\t            this.mixIn(cipherParams);\n\t        },\n\n\t        /**\n\t         * Converts this cipher params object to a string.\n\t         *\n\t         * @param {Format} formatter (Optional) The formatting strategy to use.\n\t         *\n\t         * @return {string} The stringified cipher params.\n\t         *\n\t         * @throws Error If neither the formatter nor the default formatter is set.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = cipherParams + '';\n\t         *     var string = cipherParams.toString();\n\t         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);\n\t         */\n\t        toString: function (formatter) {\n\t            return (formatter || this.formatter).stringify(this);\n\t        }\n\t    });\n\n\t    /**\n\t     * Format namespace.\n\t     */\n\t    var C_format = C.format = {};\n\n\t    /**\n\t     * OpenSSL formatting strategy.\n\t     */\n\t    var OpenSSLFormatter = C_format.OpenSSL = {\n\t        /**\n\t         * Converts a cipher params object to an OpenSSL-compatible string.\n\t         *\n\t         * @param {CipherParams} cipherParams The cipher params object.\n\t         *\n\t         * @return {string} The OpenSSL-compatible string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);\n\t         */\n\t        stringify: function (cipherParams) {\n\t            var wordArray;\n\n\t            // Shortcuts\n\t            var ciphertext = cipherParams.ciphertext;\n\t            var salt = cipherParams.salt;\n\n\t            // Format\n\t            if (salt) {\n\t                wordArray = WordArray.create([0x53616c74, 0x65645f5f]).concat(salt).concat(ciphertext);\n\t            } else {\n\t                wordArray = ciphertext;\n\t            }\n\n\t            return wordArray.toString(Base64);\n\t        },\n\n\t        /**\n\t         * Converts an OpenSSL-compatible string to a cipher params object.\n\t         *\n\t         * @param {string} openSSLStr The OpenSSL-compatible string.\n\t         *\n\t         * @return {CipherParams} The cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);\n\t         */\n\t        parse: function (openSSLStr) {\n\t            var salt;\n\n\t            // Parse base64\n\t            var ciphertext = Base64.parse(openSSLStr);\n\n\t            // Shortcut\n\t            var ciphertextWords = ciphertext.words;\n\n\t            // Test for salt\n\t            if (ciphertextWords[0] == 0x53616c74 && ciphertextWords[1] == 0x65645f5f) {\n\t                // Extract salt\n\t                salt = WordArray.create(ciphertextWords.slice(2, 4));\n\n\t                // Remove salt from ciphertext\n\t                ciphertextWords.splice(0, 4);\n\t                ciphertext.sigBytes -= 16;\n\t            }\n\n\t            return CipherParams.create({ ciphertext: ciphertext, salt: salt });\n\t        }\n\t    };\n\n\t    /**\n\t     * A cipher wrapper that returns ciphertext as a serializable cipher params object.\n\t     */\n\t    var SerializableCipher = C_lib.SerializableCipher = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL\n\t         */\n\t        cfg: Base.extend({\n\t            format: OpenSSLFormatter\n\t        }),\n\n\t        /**\n\t         * Encrypts a message.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {WordArray|string} message The message to encrypt.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {CipherParams} A cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         */\n\t        encrypt: function (cipher, message, key, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Encrypt\n\t            var encryptor = cipher.createEncryptor(key, cfg);\n\t            var ciphertext = encryptor.finalize(message);\n\n\t            // Shortcut\n\t            var cipherCfg = encryptor.cfg;\n\n\t            // Create and return serializable cipher params\n\t            return CipherParams.create({\n\t                ciphertext: ciphertext,\n\t                key: key,\n\t                iv: cipherCfg.iv,\n\t                algorithm: cipher,\n\t                mode: cipherCfg.mode,\n\t                padding: cipherCfg.padding,\n\t                blockSize: cipher.blockSize,\n\t                formatter: cfg.format\n\t            });\n\t        },\n\n\t        /**\n\t         * Decrypts serialized ciphertext.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {WordArray} The plaintext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         */\n\t        decrypt: function (cipher, ciphertext, key, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Convert string to CipherParams\n\t            ciphertext = this._parse(ciphertext, cfg.format);\n\n\t            // Decrypt\n\t            var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);\n\n\t            return plaintext;\n\t        },\n\n\t        /**\n\t         * Converts serialized ciphertext to CipherParams,\n\t         * else assumed CipherParams already and returns ciphertext unchanged.\n\t         *\n\t         * @param {CipherParams|string} ciphertext The ciphertext.\n\t         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.\n\t         *\n\t         * @return {CipherParams} The unserialized ciphertext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);\n\t         */\n\t        _parse: function (ciphertext, format) {\n\t            if (typeof ciphertext == 'string') {\n\t                return format.parse(ciphertext, this);\n\t            } else {\n\t                return ciphertext;\n\t            }\n\t        }\n\t    });\n\n\t    /**\n\t     * Key derivation function namespace.\n\t     */\n\t    var C_kdf = C.kdf = {};\n\n\t    /**\n\t     * OpenSSL key derivation function.\n\t     */\n\t    var OpenSSLKdf = C_kdf.OpenSSL = {\n\t        /**\n\t         * Derives a key and IV from a password.\n\t         *\n\t         * @param {string} password The password to derive from.\n\t         * @param {number} keySize The size in words of the key to generate.\n\t         * @param {number} ivSize The size in words of the IV to generate.\n\t         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.\n\t         *\n\t         * @return {CipherParams} A cipher params object with the key, IV, and salt.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');\n\t         */\n\t        execute: function (password, keySize, ivSize, salt, hasher) {\n\t            // Generate random salt\n\t            if (!salt) {\n\t                salt = WordArray.random(64/8);\n\t            }\n\n\t            // Derive key and IV\n\t            if (!hasher) {\n\t                var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);\n\t            } else {\n\t                var key = EvpKDF.create({ keySize: keySize + ivSize, hasher: hasher }).compute(password, salt);\n\t            }\n\n\n\t            // Separate key and IV\n\t            var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);\n\t            key.sigBytes = keySize * 4;\n\n\t            // Return params\n\t            return CipherParams.create({ key: key, iv: iv, salt: salt });\n\t        }\n\t    };\n\n\t    /**\n\t     * A serializable cipher wrapper that derives the key from a password,\n\t     * and returns ciphertext as a serializable cipher params object.\n\t     */\n\t    var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL\n\t         */\n\t        cfg: SerializableCipher.cfg.extend({\n\t            kdf: OpenSSLKdf\n\t        }),\n\n\t        /**\n\t         * Encrypts a message using a password.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {WordArray|string} message The message to encrypt.\n\t         * @param {string} password The password.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {CipherParams} A cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });\n\t         */\n\t        encrypt: function (cipher, message, password, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Derive key and other params\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, cfg.salt, cfg.hasher);\n\n\t            // Add IV to config\n\t            cfg.iv = derivedParams.iv;\n\n\t            // Encrypt\n\t            var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);\n\n\t            // Mix in derived params\n\t            ciphertext.mixIn(derivedParams);\n\n\t            return ciphertext;\n\t        },\n\n\t        /**\n\t         * Decrypts serialized ciphertext using a password.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\n\t         * @param {string} password The password.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {WordArray} The plaintext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });\n\t         */\n\t        decrypt: function (cipher, ciphertext, password, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Convert string to CipherParams\n\t            ciphertext = this._parse(ciphertext, cfg.format);\n\n\t            // Derive key and other params\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt, cfg.hasher);\n\n\t            // Add IV to config\n\t            cfg.iv = derivedParams.iv;\n\n\t            // Decrypt\n\t            var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);\n\n\t            return plaintext;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/** @preserve\n\t * Counter block mode compatible with  Dr Brian Gladman fileenc.c\n\t * derived from CryptoJS.mode.CTR\n\t * Jan Hruby jhruby.web@gmail.com\n\t */\n\tCryptoJS.mode.CTRGladman = (function () {\n\t    var CTRGladman = CryptoJS.lib.BlockCipherMode.extend();\n\n\t\tfunction incWord(word)\n\t\t{\n\t\t\tif (((word >> 24) & 0xff) === 0xff) { //overflow\n\t\t\tvar b1 = (word >> 16)&0xff;\n\t\t\tvar b2 = (word >> 8)&0xff;\n\t\t\tvar b3 = word & 0xff;\n\n\t\t\tif (b1 === 0xff) // overflow b1\n\t\t\t{\n\t\t\tb1 = 0;\n\t\t\tif (b2 === 0xff)\n\t\t\t{\n\t\t\t\tb2 = 0;\n\t\t\t\tif (b3 === 0xff)\n\t\t\t\t{\n\t\t\t\t\tb3 = 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t++b3;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t++b2;\n\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t++b1;\n\t\t\t}\n\n\t\t\tword = 0;\n\t\t\tword += (b1 << 16);\n\t\t\tword += (b2 << 8);\n\t\t\tword += b3;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\tword += (0x01 << 24);\n\t\t\t}\n\t\t\treturn word;\n\t\t}\n\n\t\tfunction incCounter(counter)\n\t\t{\n\t\t\tif ((counter[0] = incWord(counter[0])) === 0)\n\t\t\t{\n\t\t\t\t// encr_data in fileenc.c from  Dr Brian Gladman's counts only with DWORD j < 8\n\t\t\t\tcounter[1] = incWord(counter[1]);\n\t\t\t}\n\t\t\treturn counter;\n\t\t}\n\n\t    var Encryptor = CTRGladman.Encryptor = CTRGladman.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher\n\t            var blockSize = cipher.blockSize;\n\t            var iv = this._iv;\n\t            var counter = this._counter;\n\n\t            // Generate keystream\n\t            if (iv) {\n\t                counter = this._counter = iv.slice(0);\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            }\n\n\t\t\t\tincCounter(counter);\n\n\t\t\t\tvar keystream = counter.slice(0);\n\t            cipher.encryptBlock(keystream, 0);\n\n\t            // Encrypt\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= keystream[i];\n\t            }\n\t        }\n\t    });\n\n\t    CTRGladman.Decryptor = Encryptor;\n\n\t    return CTRGladman;\n\t}());\n\n\n\n\n\treturn CryptoJS.mode.CTRGladman;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    // Permuted Choice 1 constants\n\t    var PC1 = [\n\t        57, 49, 41, 33, 25, 17, 9,  1,\n\t        58, 50, 42, 34, 26, 18, 10, 2,\n\t        59, 51, 43, 35, 27, 19, 11, 3,\n\t        60, 52, 44, 36, 63, 55, 47, 39,\n\t        31, 23, 15, 7,  62, 54, 46, 38,\n\t        30, 22, 14, 6,  61, 53, 45, 37,\n\t        29, 21, 13, 5,  28, 20, 12, 4\n\t    ];\n\n\t    // Permuted Choice 2 constants\n\t    var PC2 = [\n\t        14, 17, 11, 24, 1,  5,\n\t        3,  28, 15, 6,  21, 10,\n\t        23, 19, 12, 4,  26, 8,\n\t        16, 7,  27, 20, 13, 2,\n\t        41, 52, 31, 37, 47, 55,\n\t        30, 40, 51, 45, 33, 48,\n\t        44, 49, 39, 56, 34, 53,\n\t        46, 42, 50, 36, 29, 32\n\t    ];\n\n\t    // Cumulative bit shift constants\n\t    var BIT_SHIFTS = [1,  2,  4,  6,  8,  10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28];\n\n\t    // SBOXes and round permutation constants\n\t    var SBOX_P = [\n\t        {\n\t            0x0: 0x808200,\n\t            0x10000000: 0x8000,\n\t            0x20000000: 0x808002,\n\t            0x30000000: 0x2,\n\t            0x40000000: 0x200,\n\t            0x50000000: 0x808202,\n\t            0x60000000: 0x800202,\n\t            0x70000000: 0x800000,\n\t            0x80000000: 0x202,\n\t            0x90000000: 0x800200,\n\t            0xa0000000: 0x8200,\n\t            0xb0000000: 0x808000,\n\t            0xc0000000: 0x8002,\n\t            0xd0000000: 0x800002,\n\t            0xe0000000: 0x0,\n\t            0xf0000000: 0x8202,\n\t            0x8000000: 0x0,\n\t            0x18000000: 0x808202,\n\t            0x28000000: 0x8202,\n\t            0x38000000: 0x8000,\n\t            0x48000000: 0x808200,\n\t            0x58000000: 0x200,\n\t            0x68000000: 0x808002,\n\t            0x78000000: 0x2,\n\t            0x88000000: 0x800200,\n\t            0x98000000: 0x8200,\n\t            0xa8000000: 0x808000,\n\t            0xb8000000: 0x800202,\n\t            0xc8000000: 0x800002,\n\t            0xd8000000: 0x8002,\n\t            0xe8000000: 0x202,\n\t            0xf8000000: 0x800000,\n\t            0x1: 0x8000,\n\t            0x10000001: 0x2,\n\t            0x20000001: 0x808200,\n\t            0x30000001: 0x800000,\n\t            0x40000001: 0x808002,\n\t            0x50000001: 0x8200,\n\t            0x60000001: 0x200,\n\t            0x70000001: 0x800202,\n\t            0x80000001: 0x808202,\n\t            0x90000001: 0x808000,\n\t            0xa0000001: 0x800002,\n\t            0xb0000001: 0x8202,\n\t            0xc0000001: 0x202,\n\t            0xd0000001: 0x800200,\n\t            0xe0000001: 0x8002,\n\t            0xf0000001: 0x0,\n\t            0x8000001: 0x808202,\n\t            0x18000001: 0x808000,\n\t            0x28000001: 0x800000,\n\t            0x38000001: 0x200,\n\t            0x48000001: 0x8000,\n\t            0x58000001: 0x800002,\n\t            0x68000001: 0x2,\n\t            0x78000001: 0x8202,\n\t            0x88000001: 0x8002,\n\t            0x98000001: 0x800202,\n\t            0xa8000001: 0x202,\n\t            0xb8000001: 0x808200,\n\t            0xc8000001: 0x800200,\n\t            0xd8000001: 0x0,\n\t            0xe8000001: 0x8200,\n\t            0xf8000001: 0x808002\n\t        },\n\t        {\n\t            0x0: 0x40084010,\n\t            0x1000000: 0x4000,\n\t            0x2000000: 0x80000,\n\t            0x3000000: 0x40080010,\n\t            0x4000000: 0x40000010,\n\t            0x5000000: 0x40084000,\n\t            0x6000000: 0x40004000,\n\t            0x7000000: 0x10,\n\t            0x8000000: 0x84000,\n\t            0x9000000: 0x40004010,\n\t            0xa000000: 0x40000000,\n\t            0xb000000: 0x84010,\n\t            0xc000000: 0x80010,\n\t            0xd000000: 0x0,\n\t            0xe000000: 0x4010,\n\t            0xf000000: 0x40080000,\n\t            0x800000: 0x40004000,\n\t            0x1800000: 0x84010,\n\t            0x2800000: 0x10,\n\t            0x3800000: 0x40004010,\n\t            0x4800000: 0x40084010,\n\t            0x5800000: 0x40000000,\n\t            0x6800000: 0x80000,\n\t            0x7800000: 0x40080010,\n\t            0x8800000: 0x80010,\n\t            0x9800000: 0x0,\n\t            0xa800000: 0x4000,\n\t            0xb800000: 0x40080000,\n\t            0xc800000: 0x40000010,\n\t            0xd800000: 0x84000,\n\t            0xe800000: 0x40084000,\n\t            0xf800000: 0x4010,\n\t            0x10000000: 0x0,\n\t            0x11000000: 0x40080010,\n\t            0x12000000: 0x40004010,\n\t            0x13000000: 0x40084000,\n\t            0x14000000: 0x40080000,\n\t            0x15000000: 0x10,\n\t            0x16000000: 0x84010,\n\t            0x17000000: 0x4000,\n\t            0x18000000: 0x4010,\n\t            0x19000000: 0x80000,\n\t            0x1a000000: 0x80010,\n\t            0x1b000000: 0x40000010,\n\t            0x1c000000: 0x84000,\n\t            0x1d000000: 0x40004000,\n\t            0x1e000000: 0x40000000,\n\t            0x1f000000: 0x40084010,\n\t            0x10800000: 0x84010,\n\t            0x11800000: 0x80000,\n\t            0x12800000: 0x40080000,\n\t            0x13800000: 0x4000,\n\t            0x14800000: 0x40004000,\n\t            0x15800000: 0x40084010,\n\t            0x16800000: 0x10,\n\t            0x17800000: 0x40000000,\n\t            0x18800000: 0x40084000,\n\t            0x19800000: 0x40000010,\n\t            0x1a800000: 0x40004010,\n\t            0x1b800000: 0x80010,\n\t            0x1c800000: 0x0,\n\t            0x1d800000: 0x4010,\n\t            0x1e800000: 0x40080010,\n\t            0x1f800000: 0x84000\n\t        },\n\t        {\n\t            0x0: 0x104,\n\t            0x100000: 0x0,\n\t            0x200000: 0x4000100,\n\t            0x300000: 0x10104,\n\t            0x400000: 0x10004,\n\t            0x500000: 0x4000004,\n\t            0x600000: 0x4010104,\n\t            0x700000: 0x4010000,\n\t            0x800000: 0x4000000,\n\t            0x900000: 0x4010100,\n\t            0xa00000: 0x10100,\n\t            0xb00000: 0x4010004,\n\t            0xc00000: 0x4000104,\n\t            0xd00000: 0x10000,\n\t            0xe00000: 0x4,\n\t            0xf00000: 0x100,\n\t            0x80000: 0x4010100,\n\t            0x180000: 0x4010004,\n\t            0x280000: 0x0,\n\t            0x380000: 0x4000100,\n\t            0x480000: 0x4000004,\n\t            0x580000: 0x10000,\n\t            0x680000: 0x10004,\n\t            0x780000: 0x104,\n\t            0x880000: 0x4,\n\t            0x980000: 0x100,\n\t            0xa80000: 0x4010000,\n\t            0xb80000: 0x10104,\n\t            0xc80000: 0x10100,\n\t            0xd80000: 0x4000104,\n\t            0xe80000: 0x4010104,\n\t            0xf80000: 0x4000000,\n\t            0x1000000: 0x4010100,\n\t            0x1100000: 0x10004,\n\t            0x1200000: 0x10000,\n\t            0x1300000: 0x4000100,\n\t            0x1400000: 0x100,\n\t            0x1500000: 0x4010104,\n\t            0x1600000: 0x4000004,\n\t            0x1700000: 0x0,\n\t            0x1800000: 0x4000104,\n\t            0x1900000: 0x4000000,\n\t            0x1a00000: 0x4,\n\t            0x1b00000: 0x10100,\n\t            0x1c00000: 0x4010000,\n\t            0x1d00000: 0x104,\n\t            0x1e00000: 0x10104,\n\t            0x1f00000: 0x4010004,\n\t            0x1080000: 0x4000000,\n\t            0x1180000: 0x104,\n\t            0x1280000: 0x4010100,\n\t            0x1380000: 0x0,\n\t            0x1480000: 0x10004,\n\t            0x1580000: 0x4000100,\n\t            0x1680000: 0x100,\n\t            0x1780000: 0x4010004,\n\t            0x1880000: 0x10000,\n\t            0x1980000: 0x4010104,\n\t            0x1a80000: 0x10104,\n\t            0x1b80000: 0x4000004,\n\t            0x1c80000: 0x4000104,\n\t            0x1d80000: 0x4010000,\n\t            0x1e80000: 0x4,\n\t            0x1f80000: 0x10100\n\t        },\n\t        {\n\t            0x0: 0x80401000,\n\t            0x10000: 0x80001040,\n\t            0x20000: 0x401040,\n\t            0x30000: 0x80400000,\n\t            0x40000: 0x0,\n\t            0x50000: 0x401000,\n\t            0x60000: 0x80000040,\n\t            0x70000: 0x400040,\n\t            0x80000: 0x80000000,\n\t            0x90000: 0x400000,\n\t            0xa0000: 0x40,\n\t            0xb0000: 0x80001000,\n\t            0xc0000: 0x80400040,\n\t            0xd0000: 0x1040,\n\t            0xe0000: 0x1000,\n\t            0xf0000: 0x80401040,\n\t            0x8000: 0x80001040,\n\t            0x18000: 0x40,\n\t            0x28000: 0x80400040,\n\t            0x38000: 0x80001000,\n\t            0x48000: 0x401000,\n\t            0x58000: 0x80401040,\n\t            0x68000: 0x0,\n\t            0x78000: 0x80400000,\n\t            0x88000: 0x1000,\n\t            0x98000: 0x80401000,\n\t            0xa8000: 0x400000,\n\t            0xb8000: 0x1040,\n\t            0xc8000: 0x80000000,\n\t            0xd8000: 0x400040,\n\t            0xe8000: 0x401040,\n\t            0xf8000: 0x80000040,\n\t            0x100000: 0x400040,\n\t            0x110000: 0x401000,\n\t            0x120000: 0x80000040,\n\t            0x130000: 0x0,\n\t            0x140000: 0x1040,\n\t            0x150000: 0x80400040,\n\t            0x160000: 0x80401000,\n\t            0x170000: 0x80001040,\n\t            0x180000: 0x80401040,\n\t            0x190000: 0x80000000,\n\t            0x1a0000: 0x80400000,\n\t            0x1b0000: 0x401040,\n\t            0x1c0000: 0x80001000,\n\t            0x1d0000: 0x400000,\n\t            0x1e0000: 0x40,\n\t            0x1f0000: 0x1000,\n\t            0x108000: 0x80400000,\n\t            0x118000: 0x80401040,\n\t            0x128000: 0x0,\n\t            0x138000: 0x401000,\n\t            0x148000: 0x400040,\n\t            0x158000: 0x80000000,\n\t            0x168000: 0x80001040,\n\t            0x178000: 0x40,\n\t            0x188000: 0x80000040,\n\t            0x198000: 0x1000,\n\t            0x1a8000: 0x80001000,\n\t            0x1b8000: 0x80400040,\n\t            0x1c8000: 0x1040,\n\t            0x1d8000: 0x80401000,\n\t            0x1e8000: 0x400000,\n\t            0x1f8000: 0x401040\n\t        },\n\t        {\n\t            0x0: 0x80,\n\t            0x1000: 0x1040000,\n\t            0x2000: 0x40000,\n\t            0x3000: 0x20000000,\n\t            0x4000: 0x20040080,\n\t            0x5000: 0x1000080,\n\t            0x6000: 0x21000080,\n\t            0x7000: 0x40080,\n\t            0x8000: 0x1000000,\n\t            0x9000: 0x20040000,\n\t            0xa000: 0x20000080,\n\t            0xb000: 0x21040080,\n\t            0xc000: 0x21040000,\n\t            0xd000: 0x0,\n\t            0xe000: 0x1040080,\n\t            0xf000: 0x21000000,\n\t            0x800: 0x1040080,\n\t            0x1800: 0x21000080,\n\t            0x2800: 0x80,\n\t            0x3800: 0x1040000,\n\t            0x4800: 0x40000,\n\t            0x5800: 0x20040080,\n\t            0x6800: 0x21040000,\n\t            0x7800: 0x20000000,\n\t            0x8800: 0x20040000,\n\t            0x9800: 0x0,\n\t            0xa800: 0x21040080,\n\t            0xb800: 0x1000080,\n\t            0xc800: 0x20000080,\n\t            0xd800: 0x21000000,\n\t            0xe800: 0x1000000,\n\t            0xf800: 0x40080,\n\t            0x10000: 0x40000,\n\t            0x11000: 0x80,\n\t            0x12000: 0x20000000,\n\t            0x13000: 0x21000080,\n\t            0x14000: 0x1000080,\n\t            0x15000: 0x21040000,\n\t            0x16000: 0x20040080,\n\t            0x17000: 0x1000000,\n\t            0x18000: 0x21040080,\n\t            0x19000: 0x21000000,\n\t            0x1a000: 0x1040000,\n\t            0x1b000: 0x20040000,\n\t            0x1c000: 0x40080,\n\t            0x1d000: 0x20000080,\n\t            0x1e000: 0x0,\n\t            0x1f000: 0x1040080,\n\t            0x10800: 0x21000080,\n\t            0x11800: 0x1000000,\n\t            0x12800: 0x1040000,\n\t            0x13800: 0x20040080,\n\t            0x14800: 0x20000000,\n\t            0x15800: 0x1040080,\n\t            0x16800: 0x80,\n\t            0x17800: 0x21040000,\n\t            0x18800: 0x40080,\n\t            0x19800: 0x21040080,\n\t            0x1a800: 0x0,\n\t            0x1b800: 0x21000000,\n\t            0x1c800: 0x1000080,\n\t            0x1d800: 0x40000,\n\t            0x1e800: 0x20040000,\n\t            0x1f800: 0x20000080\n\t        },\n\t        {\n\t            0x0: 0x10000008,\n\t            0x100: 0x2000,\n\t            0x200: 0x10200000,\n\t            0x300: 0x10202008,\n\t            0x400: 0x10002000,\n\t            0x500: 0x200000,\n\t            0x600: 0x200008,\n\t            0x700: 0x10000000,\n\t            0x800: 0x0,\n\t            0x900: 0x10002008,\n\t            0xa00: 0x202000,\n\t            0xb00: 0x8,\n\t            0xc00: 0x10200008,\n\t            0xd00: 0x202008,\n\t            0xe00: 0x2008,\n\t            0xf00: 0x10202000,\n\t            0x80: 0x10200000,\n\t            0x180: 0x10202008,\n\t            0x280: 0x8,\n\t            0x380: 0x200000,\n\t            0x480: 0x202008,\n\t            0x580: 0x10000008,\n\t            0x680: 0x10002000,\n\t            0x780: 0x2008,\n\t            0x880: 0x200008,\n\t            0x980: 0x2000,\n\t            0xa80: 0x10002008,\n\t            0xb80: 0x10200008,\n\t            0xc80: 0x0,\n\t            0xd80: 0x10202000,\n\t            0xe80: 0x202000,\n\t            0xf80: 0x10000000,\n\t            0x1000: 0x10002000,\n\t            0x1100: 0x10200008,\n\t            0x1200: 0x10202008,\n\t            0x1300: 0x2008,\n\t            0x1400: 0x200000,\n\t            0x1500: 0x10000000,\n\t            0x1600: 0x10000008,\n\t            0x1700: 0x202000,\n\t            0x1800: 0x202008,\n\t            0x1900: 0x0,\n\t            0x1a00: 0x8,\n\t            0x1b00: 0x10200000,\n\t            0x1c00: 0x2000,\n\t            0x1d00: 0x10002008,\n\t            0x1e00: 0x10202000,\n\t            0x1f00: 0x200008,\n\t            0x1080: 0x8,\n\t            0x1180: 0x202000,\n\t            0x1280: 0x200000,\n\t            0x1380: 0x10000008,\n\t            0x1480: 0x10002000,\n\t            0x1580: 0x2008,\n\t            0x1680: 0x10202008,\n\t            0x1780: 0x10200000,\n\t            0x1880: 0x10202000,\n\t            0x1980: 0x10200008,\n\t            0x1a80: 0x2000,\n\t            0x1b80: 0x202008,\n\t            0x1c80: 0x200008,\n\t            0x1d80: 0x0,\n\t            0x1e80: 0x10000000,\n\t            0x1f80: 0x10002008\n\t        },\n\t        {\n\t            0x0: 0x100000,\n\t            0x10: 0x2000401,\n\t            0x20: 0x400,\n\t            0x30: 0x100401,\n\t            0x40: 0x2100401,\n\t            0x50: 0x0,\n\t            0x60: 0x1,\n\t            0x70: 0x2100001,\n\t            0x80: 0x2000400,\n\t            0x90: 0x100001,\n\t            0xa0: 0x2000001,\n\t            0xb0: 0x2100400,\n\t            0xc0: 0x2100000,\n\t            0xd0: 0x401,\n\t            0xe0: 0x100400,\n\t            0xf0: 0x2000000,\n\t            0x8: 0x2100001,\n\t            0x18: 0x0,\n\t            0x28: 0x2000401,\n\t            0x38: 0x2100400,\n\t            0x48: 0x100000,\n\t            0x58: 0x2000001,\n\t            0x68: 0x2000000,\n\t            0x78: 0x401,\n\t            0x88: 0x100401,\n\t            0x98: 0x2000400,\n\t            0xa8: 0x2100000,\n\t            0xb8: 0x100001,\n\t            0xc8: 0x400,\n\t            0xd8: 0x2100401,\n\t            0xe8: 0x1,\n\t            0xf8: 0x100400,\n\t            0x100: 0x2000000,\n\t            0x110: 0x100000,\n\t            0x120: 0x2000401,\n\t            0x130: 0x2100001,\n\t            0x140: 0x100001,\n\t            0x150: 0x2000400,\n\t            0x160: 0x2100400,\n\t            0x170: 0x100401,\n\t            0x180: 0x401,\n\t            0x190: 0x2100401,\n\t            0x1a0: 0x100400,\n\t            0x1b0: 0x1,\n\t            0x1c0: 0x0,\n\t            0x1d0: 0x2100000,\n\t            0x1e0: 0x2000001,\n\t            0x1f0: 0x400,\n\t            0x108: 0x100400,\n\t            0x118: 0x2000401,\n\t            0x128: 0x2100001,\n\t            0x138: 0x1,\n\t            0x148: 0x2000000,\n\t            0x158: 0x100000,\n\t            0x168: 0x401,\n\t            0x178: 0x2100400,\n\t            0x188: 0x2000001,\n\t            0x198: 0x2100000,\n\t            0x1a8: 0x0,\n\t            0x1b8: 0x2100401,\n\t            0x1c8: 0x100401,\n\t            0x1d8: 0x400,\n\t            0x1e8: 0x2000400,\n\t            0x1f8: 0x100001\n\t        },\n\t        {\n\t            0x0: 0x8000820,\n\t            0x1: 0x20000,\n\t            0x2: 0x8000000,\n\t            0x3: 0x20,\n\t            0x4: 0x20020,\n\t            0x5: 0x8020820,\n\t            0x6: 0x8020800,\n\t            0x7: 0x800,\n\t            0x8: 0x8020000,\n\t            0x9: 0x8000800,\n\t            0xa: 0x20800,\n\t            0xb: 0x8020020,\n\t            0xc: 0x820,\n\t            0xd: 0x0,\n\t            0xe: 0x8000020,\n\t            0xf: 0x20820,\n\t            0x80000000: 0x800,\n\t            0x80000001: 0x8020820,\n\t            0x80000002: 0x8000820,\n\t            0x80000003: 0x8000000,\n\t            0x80000004: 0x8020000,\n\t            0x80000005: 0x20800,\n\t            0x80000006: 0x20820,\n\t            0x80000007: 0x20,\n\t            0x80000008: 0x8000020,\n\t            0x80000009: 0x820,\n\t            0x8000000a: 0x20020,\n\t            0x8000000b: 0x8020800,\n\t            0x8000000c: 0x0,\n\t            0x8000000d: 0x8020020,\n\t            0x8000000e: 0x8000800,\n\t            0x8000000f: 0x20000,\n\t            0x10: 0x20820,\n\t            0x11: 0x8020800,\n\t            0x12: 0x20,\n\t            0x13: 0x800,\n\t            0x14: 0x8000800,\n\t            0x15: 0x8000020,\n\t            0x16: 0x8020020,\n\t            0x17: 0x20000,\n\t            0x18: 0x0,\n\t            0x19: 0x20020,\n\t            0x1a: 0x8020000,\n\t            0x1b: 0x8000820,\n\t            0x1c: 0x8020820,\n\t            0x1d: 0x20800,\n\t            0x1e: 0x820,\n\t            0x1f: 0x8000000,\n\t            0x80000010: 0x20000,\n\t            0x80000011: 0x800,\n\t            0x80000012: 0x8020020,\n\t            0x80000013: 0x20820,\n\t            0x80000014: 0x20,\n\t            0x80000015: 0x8020000,\n\t            0x80000016: 0x8000000,\n\t            0x80000017: 0x8000820,\n\t            0x80000018: 0x8020820,\n\t            0x80000019: 0x8000020,\n\t            0x8000001a: 0x8000800,\n\t            0x8000001b: 0x0,\n\t            0x8000001c: 0x20800,\n\t            0x8000001d: 0x820,\n\t            0x8000001e: 0x20020,\n\t            0x8000001f: 0x8020800\n\t        }\n\t    ];\n\n\t    // Masks that select the SBOX input\n\t    var SBOX_MASK = [\n\t        0xf8000001, 0x1f800000, 0x01f80000, 0x001f8000,\n\t        0x0001f800, 0x00001f80, 0x000001f8, 0x8000001f\n\t    ];\n\n\t    /**\n\t     * DES block cipher algorithm.\n\t     */\n\t    var DES = C_algo.DES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var key = this._key;\n\t            var keyWords = key.words;\n\n\t            // Select 56 bits according to PC1\n\t            var keyBits = [];\n\t            for (var i = 0; i < 56; i++) {\n\t                var keyBitPos = PC1[i] - 1;\n\t                keyBits[i] = (keyWords[keyBitPos >>> 5] >>> (31 - keyBitPos % 32)) & 1;\n\t            }\n\n\t            // Assemble 16 subkeys\n\t            var subKeys = this._subKeys = [];\n\t            for (var nSubKey = 0; nSubKey < 16; nSubKey++) {\n\t                // Create subkey\n\t                var subKey = subKeys[nSubKey] = [];\n\n\t                // Shortcut\n\t                var bitShift = BIT_SHIFTS[nSubKey];\n\n\t                // Select 48 bits according to PC2\n\t                for (var i = 0; i < 24; i++) {\n\t                    // Select from the left 28 key bits\n\t                    subKey[(i / 6) | 0] |= keyBits[((PC2[i] - 1) + bitShift) % 28] << (31 - i % 6);\n\n\t                    // Select from the right 28 key bits\n\t                    subKey[4 + ((i / 6) | 0)] |= keyBits[28 + (((PC2[i + 24] - 1) + bitShift) % 28)] << (31 - i % 6);\n\t                }\n\n\t                // Since each subkey is applied to an expanded 32-bit input,\n\t                // the subkey can be broken into 8 values scaled to 32-bits,\n\t                // which allows the key to be used without expansion\n\t                subKey[0] = (subKey[0] << 1) | (subKey[0] >>> 31);\n\t                for (var i = 1; i < 7; i++) {\n\t                    subKey[i] = subKey[i] >>> ((i - 1) * 4 + 3);\n\t                }\n\t                subKey[7] = (subKey[7] << 5) | (subKey[7] >>> 27);\n\t            }\n\n\t            // Compute inverse subkeys\n\t            var invSubKeys = this._invSubKeys = [];\n\t            for (var i = 0; i < 16; i++) {\n\t                invSubKeys[i] = subKeys[15 - i];\n\t            }\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._subKeys);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._invSubKeys);\n\t        },\n\n\t        _doCryptBlock: function (M, offset, subKeys) {\n\t            // Get input\n\t            this._lBlock = M[offset];\n\t            this._rBlock = M[offset + 1];\n\n\t            // Initial permutation\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\n\t            exchangeLR.call(this, 16, 0x0000ffff);\n\t            exchangeRL.call(this, 2,  0x33333333);\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\n\t            exchangeLR.call(this, 1,  0x55555555);\n\n\t            // Rounds\n\t            for (var round = 0; round < 16; round++) {\n\t                // Shortcuts\n\t                var subKey = subKeys[round];\n\t                var lBlock = this._lBlock;\n\t                var rBlock = this._rBlock;\n\n\t                // Feistel function\n\t                var f = 0;\n\t                for (var i = 0; i < 8; i++) {\n\t                    f |= SBOX_P[i][((rBlock ^ subKey[i]) & SBOX_MASK[i]) >>> 0];\n\t                }\n\t                this._lBlock = rBlock;\n\t                this._rBlock = lBlock ^ f;\n\t            }\n\n\t            // Undo swap from last round\n\t            var t = this._lBlock;\n\t            this._lBlock = this._rBlock;\n\t            this._rBlock = t;\n\n\t            // Final permutation\n\t            exchangeLR.call(this, 1,  0x55555555);\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\n\t            exchangeRL.call(this, 2,  0x33333333);\n\t            exchangeLR.call(this, 16, 0x0000ffff);\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\n\n\t            // Set output\n\t            M[offset] = this._lBlock;\n\t            M[offset + 1] = this._rBlock;\n\t        },\n\n\t        keySize: 64/32,\n\n\t        ivSize: 64/32,\n\n\t        blockSize: 64/32\n\t    });\n\n\t    // Swap bits across the left and right words\n\t    function exchangeLR(offset, mask) {\n\t        var t = ((this._lBlock >>> offset) ^ this._rBlock) & mask;\n\t        this._rBlock ^= t;\n\t        this._lBlock ^= t << offset;\n\t    }\n\n\t    function exchangeRL(offset, mask) {\n\t        var t = ((this._rBlock >>> offset) ^ this._lBlock) & mask;\n\t        this._lBlock ^= t;\n\t        this._rBlock ^= t << offset;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.DES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.DES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.DES = BlockCipher._createHelper(DES);\n\n\t    /**\n\t     * Triple-DES block cipher algorithm.\n\t     */\n\t    var TripleDES = C_algo.TripleDES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var key = this._key;\n\t            var keyWords = key.words;\n\t            // Make sure the key length is valid (64, 128 or >= 192 bit)\n\t            if (keyWords.length !== 2 && keyWords.length !== 4 && keyWords.length < 6) {\n\t                throw new Error('Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.');\n\t            }\n\n\t            // Extend the key according to the keying options defined in 3DES standard\n\t            var key1 = keyWords.slice(0, 2);\n\t            var key2 = keyWords.length < 4 ? keyWords.slice(0, 2) : keyWords.slice(2, 4);\n\t            var key3 = keyWords.length < 6 ? keyWords.slice(0, 2) : keyWords.slice(4, 6);\n\n\t            // Create DES instances\n\t            this._des1 = DES.createEncryptor(WordArray.create(key1));\n\t            this._des2 = DES.createEncryptor(WordArray.create(key2));\n\t            this._des3 = DES.createEncryptor(WordArray.create(key3));\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._des1.encryptBlock(M, offset);\n\t            this._des2.decryptBlock(M, offset);\n\t            this._des3.encryptBlock(M, offset);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            this._des3.decryptBlock(M, offset);\n\t            this._des2.encryptBlock(M, offset);\n\t            this._des1.decryptBlock(M, offset);\n\t        },\n\n\t        keySize: 192/32,\n\n\t        ivSize: 64/32,\n\n\t        blockSize: 64/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.TripleDES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.TripleDES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.TripleDES = BlockCipher._createHelper(TripleDES);\n\t}());\n\n\n\treturn CryptoJS.TripleDES;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var SHA256 = C_algo.SHA256;\n\n\t    /**\n\t     * SHA-224 hash algorithm.\n\t     */\n\t    var SHA224 = C_algo.SHA224 = SHA256.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n\t                0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4\n\t            ]);\n\t        },\n\n\t        _doFinalize: function () {\n\t            var hash = SHA256._doFinalize.call(this);\n\n\t            hash.sigBytes -= 4;\n\n\t            return hash;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA224('message');\n\t     *     var hash = CryptoJS.SHA224(wordArray);\n\t     */\n\t    C.SHA224 = SHA256._createHelper(SHA224);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA224(message, key);\n\t     */\n\t    C.HmacSHA224 = SHA256._createHmacHelper(SHA224);\n\t}());\n\n\n\treturn CryptoJS.SHA224;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    const N = 16;\n\n\t    //Origin pbox and sbox, derived from PI\n\t    const ORIG_P = [\n\t        0x243F6A88, 0x85A308D3, 0x13198A2E, 0x03707344,\n\t        0xA4093822, 0x299F31D0, 0x082EFA98, 0xEC4E6C89,\n\t        0x452821E6, 0x38D01377, 0xBE5466CF, 0x34E90C6C,\n\t        0xC0AC29B7, 0xC97C50DD, 0x3F84D5B5, 0xB5470917,\n\t        0x9216D5D9, 0x8979FB1B\n\t    ];\n\n\t    const ORIG_S = [\n\t        [   0xD1310BA6, 0x98DFB5AC, 0x2FFD72DB, 0xD01ADFB7,\n\t            0xB8E1AFED, 0x6A267E96, 0xBA7C9045, 0xF12C7F99,\n\t            0x24A19947, 0xB3916CF7, 0x0801F2E2, 0x858EFC16,\n\t            0x636920D8, 0x71574E69, 0xA458FEA3, 0xF4933D7E,\n\t            0x0D95748F, 0x728EB658, 0x718BCD58, 0x82154AEE,\n\t            0x7B54A41D, 0xC25A59B5, 0x9C30D539, 0x2AF26013,\n\t            0xC5D1B023, 0x286085F0, 0xCA417918, 0xB8DB38EF,\n\t            0x8E79DCB0, 0x603A180E, 0x6C9E0E8B, 0xB01E8A3E,\n\t            0xD71577C1, 0xBD314B27, 0x78AF2FDA, 0x55605C60,\n\t            0xE65525F3, 0xAA55AB94, 0x57489862, 0x63E81440,\n\t            0x55CA396A, 0x2AAB10B6, 0xB4CC5C34, 0x1141E8CE,\n\t            0xA15486AF, 0x7C72E993, 0xB3EE1411, 0x636FBC2A,\n\t            0x2BA9C55D, 0x741831F6, 0xCE5C3E16, 0x9B87931E,\n\t            0xAFD6BA33, 0x6C24CF5C, 0x7A325381, 0x28958677,\n\t            0x3B8F4898, 0x6B4BB9AF, 0xC4BFE81B, 0x66282193,\n\t            0x61D809CC, 0xFB21A991, 0x487CAC60, 0x5DEC8032,\n\t            0xEF845D5D, 0xE98575B1, 0xDC262302, 0xEB651B88,\n\t            0x23893E81, 0xD396ACC5, 0x0F6D6FF3, 0x83F44239,\n\t            0x2E0B4482, 0xA4842004, 0x69C8F04A, 0x9E1F9B5E,\n\t            0x21C66842, 0xF6E96C9A, 0x670C9C61, 0xABD388F0,\n\t            0x6A51A0D2, 0xD8542F68, 0x960FA728, 0xAB5133A3,\n\t            0x6EEF0B6C, 0x137A3BE4, 0xBA3BF050, 0x7EFB2A98,\n\t            0xA1F1651D, 0x39AF0176, 0x66CA593E, 0x82430E88,\n\t            0x8CEE8619, 0x456F9FB4, 0x7D84A5C3, 0x3B8B5EBE,\n\t            0xE06F75D8, 0x85C12073, 0x401A449F, 0x56C16AA6,\n\t            0x4ED3AA62, 0x363F7706, 0x1BFEDF72, 0x429B023D,\n\t            0x37D0D724, 0xD00A1248, 0xDB0FEAD3, 0x49F1C09B,\n\t            0x075372C9, 0x80991B7B, 0x25D479D8, 0xF6E8DEF7,\n\t            0xE3FE501A, 0xB6794C3B, 0x976CE0BD, 0x04C006BA,\n\t            0xC1A94FB6, 0x409F60C4, 0x5E5C9EC2, 0x196A2463,\n\t            0x68FB6FAF, 0x3E6C53B5, 0x1339B2EB, 0x3B52EC6F,\n\t            0x6DFC511F, 0x9B30952C, 0xCC814544, 0xAF5EBD09,\n\t            0xBEE3D004, 0xDE334AFD, 0x660F2807, 0x192E4BB3,\n\t            0xC0CBA857, 0x45C8740F, 0xD20B5F39, 0xB9D3FBDB,\n\t            0x5579C0BD, 0x1A60320A, 0xD6A100C6, 0x402C7279,\n\t            0x679F25FE, 0xFB1FA3CC, 0x8EA5E9F8, 0xDB3222F8,\n\t            0x3C7516DF, 0xFD616B15, 0x2F501EC8, 0xAD0552AB,\n\t            0x323DB5FA, 0xFD238760, 0x53317B48, 0x3E00DF82,\n\t            0x9E5C57BB, 0xCA6F8CA0, 0x1A87562E, 0xDF1769DB,\n\t            0xD542A8F6, 0x287EFFC3, 0xAC6732C6, 0x8C4F5573,\n\t            0x695B27B0, 0xBBCA58C8, 0xE1FFA35D, 0xB8F011A0,\n\t            0x10FA3D98, 0xFD2183B8, 0x4AFCB56C, 0x2DD1D35B,\n\t            0x9A53E479, 0xB6F84565, 0xD28E49BC, 0x4BFB9790,\n\t            0xE1DDF2DA, 0xA4CB7E33, 0x62FB1341, 0xCEE4C6E8,\n\t            0xEF20CADA, 0x36774C01, 0xD07E9EFE, 0x2BF11FB4,\n\t            0x95DBDA4D, 0xAE909198, 0xEAAD8E71, 0x6B93D5A0,\n\t            0xD08ED1D0, 0xAFC725E0, 0x8E3C5B2F, 0x8E7594B7,\n\t            0x8FF6E2FB, 0xF2122B64, 0x8888B812, 0x900DF01C,\n\t            0x4FAD5EA0, 0x688FC31C, 0xD1CFF191, 0xB3A8C1AD,\n\t            0x2F2F2218, 0xBE0E1777, 0xEA752DFE, 0x8B021FA1,\n\t            0xE5A0CC0F, 0xB56F74E8, 0x18ACF3D6, 0xCE89E299,\n\t            0xB4A84FE0, 0xFD13E0B7, 0x7CC43B81, 0xD2ADA8D9,\n\t            0x165FA266, 0x80957705, 0x93CC7314, 0x211A1477,\n\t            0xE6AD2065, 0x77B5FA86, 0xC75442F5, 0xFB9D35CF,\n\t            0xEBCDAF0C, 0x7B3E89A0, 0xD6411BD3, 0xAE1E7E49,\n\t            0x00250E2D, 0x2071B35E, 0x226800BB, 0x57B8E0AF,\n\t            0x2464369B, 0xF009B91E, 0x5563911D, 0x59DFA6AA,\n\t            0x78C14389, 0xD95A537F, 0x207D5BA2, 0x02E5B9C5,\n\t            0x83260376, 0x6295CFA9, 0x11C81968, 0x4E734A41,\n\t            0xB3472DCA, 0x7B14A94A, 0x1B510052, 0x9A532915,\n\t            0xD60F573F, 0xBC9BC6E4, 0x2B60A476, 0x81E67400,\n\t            0x08BA6FB5, 0x571BE91F, 0xF296EC6B, 0x2A0DD915,\n\t            0xB6636521, 0xE7B9F9B6, 0xFF34052E, 0xC5855664,\n\t            0x53B02D5D, 0xA99F8FA1, 0x08BA4799, 0x6E85076A   ],\n\t        [   0x4B7A70E9, 0xB5B32944, 0xDB75092E, 0xC4192623,\n\t            0xAD6EA6B0, 0x49A7DF7D, 0x9CEE60B8, 0x8FEDB266,\n\t            0xECAA8C71, 0x699A17FF, 0x5664526C, 0xC2B19EE1,\n\t            0x193602A5, 0x75094C29, 0xA0591340, 0xE4183A3E,\n\t            0x3F54989A, 0x5B429D65, 0x6B8FE4D6, 0x99F73FD6,\n\t            0xA1D29C07, 0xEFE830F5, 0x4D2D38E6, 0xF0255DC1,\n\t            0x4CDD2086, 0x8470EB26, 0x6382E9C6, 0x021ECC5E,\n\t            0x09686B3F, 0x3EBAEFC9, 0x3C971814, 0x6B6A70A1,\n\t            0x687F3584, 0x52A0E286, 0xB79C5305, 0xAA500737,\n\t            0x3E07841C, 0x7FDEAE5C, 0x8E7D44EC, 0x5716F2B8,\n\t            0xB03ADA37, 0xF0500C0D, 0xF01C1F04, 0x0200B3FF,\n\t            0xAE0CF51A, 0x3CB574B2, 0x25837A58, 0xDC0921BD,\n\t            0xD19113F9, 0x7CA92FF6, 0x94324773, 0x22F54701,\n\t            0x3AE5E581, 0x37C2DADC, 0xC8B57634, 0x9AF3DDA7,\n\t            0xA9446146, 0x0FD0030E, 0xECC8C73E, 0xA4751E41,\n\t            0xE238CD99, 0x3BEA0E2F, 0x3280BBA1, 0x183EB331,\n\t            0x4E548B38, 0x4F6DB908, 0x6F420D03, 0xF60A04BF,\n\t            0x2CB81290, 0x24977C79, 0x5679B072, 0xBCAF89AF,\n\t            0xDE9A771F, 0xD9930810, 0xB38BAE12, 0xDCCF3F2E,\n\t            0x5512721F, 0x2E6B7124, 0x501ADDE6, 0x9F84CD87,\n\t            0x7A584718, 0x7408DA17, 0xBC9F9ABC, 0xE94B7D8C,\n\t            0xEC7AEC3A, 0xDB851DFA, 0x63094366, 0xC464C3D2,\n\t            0xEF1C1847, 0x3215D908, 0xDD433B37, 0x24C2BA16,\n\t            0x12A14D43, 0x2A65C451, 0x50940002, 0x133AE4DD,\n\t            0x71DFF89E, 0x10314E55, 0x81AC77D6, 0x5F11199B,\n\t            0x043556F1, 0xD7A3C76B, 0x3C11183B, 0x5924A509,\n\t            0xF28FE6ED, 0x97F1FBFA, 0x9EBABF2C, 0x1E153C6E,\n\t            0x86E34570, 0xEAE96FB1, 0x860E5E0A, 0x5A3E2AB3,\n\t            0x771FE71C, 0x4E3D06FA, 0x2965DCB9, 0x99E71D0F,\n\t            0x803E89D6, 0x5266C825, 0x2E4CC978, 0x9C10B36A,\n\t            0xC6150EBA, 0x94E2EA78, 0xA5FC3C53, 0x1E0A2DF4,\n\t            0xF2F74EA7, 0x361D2B3D, 0x1939260F, 0x19C27960,\n\t            0x5223A708, 0xF71312B6, 0xEBADFE6E, 0xEAC31F66,\n\t            0xE3BC4595, 0xA67BC883, 0xB17F37D1, 0x018CFF28,\n\t            0xC332DDEF, 0xBE6C5AA5, 0x65582185, 0x68AB9802,\n\t            0xEECEA50F, 0xDB2F953B, 0x2AEF7DAD, 0x5B6E2F84,\n\t            0x1521B628, 0x29076170, 0xECDD4775, 0x619F1510,\n\t            0x13CCA830, 0xEB61BD96, 0x0334FE1E, 0xAA0363CF,\n\t            0xB5735C90, 0x4C70A239, 0xD59E9E0B, 0xCBAADE14,\n\t            0xEECC86BC, 0x60622CA7, 0x9CAB5CAB, 0xB2F3846E,\n\t            0x648B1EAF, 0x19BDF0CA, 0xA02369B9, 0x655ABB50,\n\t            0x40685A32, 0x3C2AB4B3, 0x319EE9D5, 0xC021B8F7,\n\t            0x9B540B19, 0x875FA099, 0x95F7997E, 0x623D7DA8,\n\t            0xF837889A, 0x97E32D77, 0x11ED935F, 0x16681281,\n\t            0x0E358829, 0xC7E61FD6, 0x96DEDFA1, 0x7858BA99,\n\t            0x57F584A5, 0x1B227263, 0x9B83C3FF, 0x1AC24696,\n\t            0xCDB30AEB, 0x532E3054, 0x8FD948E4, 0x6DBC3128,\n\t            0x58EBF2EF, 0x34C6FFEA, 0xFE28ED61, 0xEE7C3C73,\n\t            0x5D4A14D9, 0xE864B7E3, 0x42105D14, 0x203E13E0,\n\t            0x45EEE2B6, 0xA3AAABEA, 0xDB6C4F15, 0xFACB4FD0,\n\t            0xC742F442, 0xEF6ABBB5, 0x654F3B1D, 0x41CD2105,\n\t            0xD81E799E, 0x86854DC7, 0xE44B476A, 0x3D816250,\n\t            0xCF62A1F2, 0x5B8D2646, 0xFC8883A0, 0xC1C7B6A3,\n\t            0x7F1524C3, 0x69CB7492, 0x47848A0B, 0x5692B285,\n\t            0x095BBF00, 0xAD19489D, 0x1462B174, 0x23820E00,\n\t            0x58428D2A, 0x0C55F5EA, 0x1DADF43E, 0x233F7061,\n\t            0x3372F092, 0x8D937E41, 0xD65FECF1, 0x6C223BDB,\n\t            0x7CDE3759, 0xCBEE7460, 0x4085F2A7, 0xCE77326E,\n\t            0xA6078084, 0x19F8509E, 0xE8EFD855, 0x61D99735,\n\t            0xA969A7AA, 0xC50C06C2, 0x5A04ABFC, 0x800BCADC,\n\t            0x9E447A2E, 0xC3453484, 0xFDD56705, 0x0E1E9EC9,\n\t            0xDB73DBD3, 0x105588CD, 0x675FDA79, 0xE3674340,\n\t            0xC5C43465, 0x713E38D8, 0x3D28F89E, 0xF16DFF20,\n\t            0x153E21E7, 0x8FB03D4A, 0xE6E39F2B, 0xDB83ADF7   ],\n\t        [   0xE93D5A68, 0x948140F7, 0xF64C261C, 0x94692934,\n\t            0x411520F7, 0x7602D4F7, 0xBCF46B2E, 0xD4A20068,\n\t            0xD4082471, 0x3320F46A, 0x43B7D4B7, 0x500061AF,\n\t            0x1E39F62E, 0x97244546, 0x14214F74, 0xBF8B8840,\n\t            0x4D95FC1D, 0x96B591AF, 0x70F4DDD3, 0x66A02F45,\n\t            0xBFBC09EC, 0x03BD9785, 0x7FAC6DD0, 0x31CB8504,\n\t            0x96EB27B3, 0x55FD3941, 0xDA2547E6, 0xABCA0A9A,\n\t            0x28507825, 0x530429F4, 0x0A2C86DA, 0xE9B66DFB,\n\t            0x68DC1462, 0xD7486900, 0x680EC0A4, 0x27A18DEE,\n\t            0x4F3FFEA2, 0xE887AD8C, 0xB58CE006, 0x7AF4D6B6,\n\t            0xAACE1E7C, 0xD3375FEC, 0xCE78A399, 0x406B2A42,\n\t            0x20FE9E35, 0xD9F385B9, 0xEE39D7AB, 0x3B124E8B,\n\t            0x1DC9FAF7, 0x4B6D1856, 0x26A36631, 0xEAE397B2,\n\t            0x3A6EFA74, 0xDD5B4332, 0x6841E7F7, 0xCA7820FB,\n\t            0xFB0AF54E, 0xD8FEB397, 0x454056AC, 0xBA489527,\n\t            0x55533A3A, 0x20838D87, 0xFE6BA9B7, 0xD096954B,\n\t            0x55A867BC, 0xA1159A58, 0xCCA92963, 0x99E1DB33,\n\t            0xA62A4A56, 0x3F3125F9, 0x5EF47E1C, 0x9029317C,\n\t            0xFDF8E802, 0x04272F70, 0x80BB155C, 0x05282CE3,\n\t            0x95C11548, 0xE4C66D22, 0x48C1133F, 0xC70F86DC,\n\t            0x07F9C9EE, 0x41041F0F, 0x404779A4, 0x5D886E17,\n\t            0x325F51EB, 0xD59BC0D1, 0xF2BCC18F, 0x41113564,\n\t            0x257B7834, 0x602A9C60, 0xDFF8E8A3, 0x1F636C1B,\n\t            0x0E12B4C2, 0x02E1329E, 0xAF664FD1, 0xCAD18115,\n\t            0x6B2395E0, 0x333E92E1, 0x3B240B62, 0xEEBEB922,\n\t            0x85B2A20E, 0xE6BA0D99, 0xDE720C8C, 0x2DA2F728,\n\t            0xD0127845, 0x95B794FD, 0x647D0862, 0xE7CCF5F0,\n\t            0x5449A36F, 0x877D48FA, 0xC39DFD27, 0xF33E8D1E,\n\t            0x0A476341, 0x992EFF74, 0x3A6F6EAB, 0xF4F8FD37,\n\t            0xA812DC60, 0xA1EBDDF8, 0x991BE14C, 0xDB6E6B0D,\n\t            0xC67B5510, 0x6D672C37, 0x2765D43B, 0xDCD0E804,\n\t            0xF1290DC7, 0xCC00FFA3, 0xB5390F92, 0x690FED0B,\n\t            0x667B9FFB, 0xCEDB7D9C, 0xA091CF0B, 0xD9155EA3,\n\t            0xBB132F88, 0x515BAD24, 0x7B9479BF, 0x763BD6EB,\n\t            0x37392EB3, 0xCC115979, 0x8026E297, 0xF42E312D,\n\t            0x6842ADA7, 0xC66A2B3B, 0x12754CCC, 0x782EF11C,\n\t            0x6A124237, 0xB79251E7, 0x06A1BBE6, 0x4BFB6350,\n\t            0x1A6B1018, 0x11CAEDFA, 0x3D25BDD8, 0xE2E1C3C9,\n\t            0x44421659, 0x0A121386, 0xD90CEC6E, 0xD5ABEA2A,\n\t            0x64AF674E, 0xDA86A85F, 0xBEBFE988, 0x64E4C3FE,\n\t            0x9DBC8057, 0xF0F7C086, 0x60787BF8, 0x6003604D,\n\t            0xD1FD8346, 0xF6381FB0, 0x7745AE04, 0xD736FCCC,\n\t            0x83426B33, 0xF01EAB71, 0xB0804187, 0x3C005E5F,\n\t            0x77A057BE, 0xBDE8AE24, 0x55464299, 0xBF582E61,\n\t            0x4E58F48F, 0xF2DDFDA2, 0xF474EF38, 0x8789BDC2,\n\t            0x5366F9C3, 0xC8B38E74, 0xB475F255, 0x46FCD9B9,\n\t            0x7AEB2661, 0x8B1DDF84, 0x846A0E79, 0x915F95E2,\n\t            0x466E598E, 0x20B45770, 0x8CD55591, 0xC902DE4C,\n\t            0xB90BACE1, 0xBB8205D0, 0x11A86248, 0x7574A99E,\n\t            0xB77F19B6, 0xE0A9DC09, 0x662D09A1, 0xC4324633,\n\t            0xE85A1F02, 0x09F0BE8C, 0x4A99A025, 0x1D6EFE10,\n\t            0x1AB93D1D, 0x0BA5A4DF, 0xA186F20F, 0x2868F169,\n\t            0xDCB7DA83, 0x573906FE, 0xA1E2CE9B, 0x4FCD7F52,\n\t            0x50115E01, 0xA70683FA, 0xA002B5C4, 0x0DE6D027,\n\t            0x9AF88C27, 0x773F8641, 0xC3604C06, 0x61A806B5,\n\t            0xF0177A28, 0xC0F586E0, 0x006058AA, 0x30DC7D62,\n\t            0x11E69ED7, 0x2338EA63, 0x53C2DD94, 0xC2C21634,\n\t            0xBBCBEE56, 0x90BCB6DE, 0xEBFC7DA1, 0xCE591D76,\n\t            0x6F05E409, 0x4B7C0188, 0x39720A3D, 0x7C927C24,\n\t            0x86E3725F, 0x724D9DB9, 0x1AC15BB4, 0xD39EB8FC,\n\t            0xED545578, 0x08FCA5B5, 0xD83D7CD3, 0x4DAD0FC4,\n\t            0x1E50EF5E, 0xB161E6F8, 0xA28514D9, 0x6C51133C,\n\t            0x6FD5C7E7, 0x56E14EC4, 0x362ABFCE, 0xDDC6C837,\n\t            0xD79A3234, 0x92638212, 0x670EFA8E, 0x406000E0  ],\n\t        [   0x3A39CE37, 0xD3FAF5CF, 0xABC27737, 0x5AC52D1B,\n\t            0x5CB0679E, 0x4FA33742, 0xD3822740, 0x99BC9BBE,\n\t            0xD5118E9D, 0xBF0F7315, 0xD62D1C7E, 0xC700C47B,\n\t            0xB78C1B6B, 0x21A19045, 0xB26EB1BE, 0x6A366EB4,\n\t            0x5748AB2F, 0xBC946E79, 0xC6A376D2, 0x6549C2C8,\n\t            0x530FF8EE, 0x468DDE7D, 0xD5730A1D, 0x4CD04DC6,\n\t            0x2939BBDB, 0xA9BA4650, 0xAC9526E8, 0xBE5EE304,\n\t            0xA1FAD5F0, 0x6A2D519A, 0x63EF8CE2, 0x9A86EE22,\n\t            0xC089C2B8, 0x43242EF6, 0xA51E03AA, 0x9CF2D0A4,\n\t            0x83C061BA, 0x9BE96A4D, 0x8FE51550, 0xBA645BD6,\n\t            0x2826A2F9, 0xA73A3AE1, 0x4BA99586, 0xEF5562E9,\n\t            0xC72FEFD3, 0xF752F7DA, 0x3F046F69, 0x77FA0A59,\n\t            0x80E4A915, 0x87B08601, 0x9B09E6AD, 0x3B3EE593,\n\t            0xE990FD5A, 0x9E34D797, 0x2CF0B7D9, 0x022B8B51,\n\t            0x96D5AC3A, 0x017DA67D, 0xD1CF3ED6, 0x7C7D2D28,\n\t            0x1F9F25CF, 0xADF2B89B, 0x5AD6B472, 0x5A88F54C,\n\t            0xE029AC71, 0xE019A5E6, 0x47B0ACFD, 0xED93FA9B,\n\t            0xE8D3C48D, 0x283B57CC, 0xF8D56629, 0x79132E28,\n\t            0x785F0191, 0xED756055, 0xF7960E44, 0xE3D35E8C,\n\t            0x15056DD4, 0x88F46DBA, 0x03A16125, 0x0564F0BD,\n\t            0xC3EB9E15, 0x3C9057A2, 0x97271AEC, 0xA93A072A,\n\t            0x1B3F6D9B, 0x1E6321F5, 0xF59C66FB, 0x26DCF319,\n\t            0x7533D928, 0xB155FDF5, 0x03563482, 0x8ABA3CBB,\n\t            0x28517711, 0xC20AD9F8, 0xABCC5167, 0xCCAD925F,\n\t            0x4DE81751, 0x3830DC8E, 0x379D5862, 0x9320F991,\n\t            0xEA7A90C2, 0xFB3E7BCE, 0x5121CE64, 0x774FBE32,\n\t            0xA8B6E37E, 0xC3293D46, 0x48DE5369, 0x6413E680,\n\t            0xA2AE0810, 0xDD6DB224, 0x69852DFD, 0x09072166,\n\t            0xB39A460A, 0x6445C0DD, 0x586CDECF, 0x1C20C8AE,\n\t            0x5BBEF7DD, 0x1B588D40, 0xCCD2017F, 0x6BB4E3BB,\n\t            0xDDA26A7E, 0x3A59FF45, 0x3E350A44, 0xBCB4CDD5,\n\t            0x72EACEA8, 0xFA6484BB, 0x8D6612AE, 0xBF3C6F47,\n\t            0xD29BE463, 0x542F5D9E, 0xAEC2771B, 0xF64E6370,\n\t            0x740E0D8D, 0xE75B1357, 0xF8721671, 0xAF537D5D,\n\t            0x4040CB08, 0x4EB4E2CC, 0x34D2466A, 0x0115AF84,\n\t            0xE1B00428, 0x95983A1D, 0x06B89FB4, 0xCE6EA048,\n\t            0x6F3F3B82, 0x3520AB82, 0x011A1D4B, 0x277227F8,\n\t            0x611560B1, 0xE7933FDC, 0xBB3A792B, 0x344525BD,\n\t            0xA08839E1, 0x51CE794B, 0x2F32C9B7, 0xA01FBAC9,\n\t            0xE01CC87E, 0xBCC7D1F6, 0xCF0111C3, 0xA1E8AAC7,\n\t            0x1A908749, 0xD44FBD9A, 0xD0DADECB, 0xD50ADA38,\n\t            0x0339C32A, 0xC6913667, 0x8DF9317C, 0xE0B12B4F,\n\t            0xF79E59B7, 0x43F5BB3A, 0xF2D519FF, 0x27D9459C,\n\t            0xBF97222C, 0x15E6FC2A, 0x0F91FC71, 0x9B941525,\n\t            0xFAE59361, 0xCEB69CEB, 0xC2A86459, 0x12BAA8D1,\n\t            0xB6C1075E, 0xE3056A0C, 0x10D25065, 0xCB03A442,\n\t            0xE0EC6E0E, 0x1698DB3B, 0x4C98A0BE, 0x3278E964,\n\t            0x9F1F9532, 0xE0D392DF, 0xD3A0342B, 0x8971F21E,\n\t            0x1B0A7441, 0x4BA3348C, 0xC5BE7120, 0xC37632D8,\n\t            0xDF359F8D, 0x9B992F2E, 0xE60B6F47, 0x0FE3F11D,\n\t            0xE54CDA54, 0x1EDAD891, 0xCE6279CF, 0xCD3E7E6F,\n\t            0x1618B166, 0xFD2C1D05, 0x848FD2C5, 0xF6FB2299,\n\t            0xF523F357, 0xA6327623, 0x93A83531, 0x56CCCD02,\n\t            0xACF08162, 0x5A75EBB5, 0x6E163697, 0x88D273CC,\n\t            0xDE966292, 0x81B949D0, 0x4C50901B, 0x71C65614,\n\t            0xE6C6C7BD, 0x327A140A, 0x45E1D006, 0xC3F27B9A,\n\t            0xC9AA53FD, 0x62A80F00, 0xBB25BFE2, 0x35BDD2F6,\n\t            0x71126905, 0xB2040222, 0xB6CBCF7C, 0xCD769C2B,\n\t            0x53113EC0, 0x1640E3D3, 0x38ABBD60, 0x2547ADF0,\n\t            0xBA38209C, 0xF746CE76, 0x77AFA1C5, 0x20756060,\n\t            0x85CBFE4E, 0x8AE88DD8, 0x7AAAF9B0, 0x4CF9AA7E,\n\t            0x1948C25C, 0x02FB8A8C, 0x01C36AE4, 0xD6EBE1F9,\n\t            0x90D4F869, 0xA65CDEA0, 0x3F09252D, 0xC208E69F,\n\t            0xB74E6132, 0xCE77E25B, 0x578FDFE3, 0x3AC372E6  ]\n\t    ];\n\n\t    var BLOWFISH_CTX = {\n\t        pbox: [],\n\t        sbox: []\n\t    }\n\n\t    function F(ctx, x){\n\t        let a = (x >> 24) & 0xFF;\n\t        let b = (x >> 16) & 0xFF;\n\t        let c = (x >> 8) & 0xFF;\n\t        let d = x & 0xFF;\n\n\t        let y = ctx.sbox[0][a] + ctx.sbox[1][b];\n\t        y = y ^ ctx.sbox[2][c];\n\t        y = y + ctx.sbox[3][d];\n\n\t        return y;\n\t    }\n\n\t    function BlowFish_Encrypt(ctx, left, right){\n\t        let Xl = left;\n\t        let Xr = right;\n\t        let temp;\n\n\t        for(let i = 0; i < N; ++i){\n\t            Xl = Xl ^ ctx.pbox[i];\n\t            Xr = F(ctx, Xl) ^ Xr;\n\n\t            temp = Xl;\n\t            Xl = Xr;\n\t            Xr = temp;\n\t        }\n\n\t        temp = Xl;\n\t        Xl = Xr;\n\t        Xr = temp;\n\n\t        Xr = Xr ^ ctx.pbox[N];\n\t        Xl = Xl ^ ctx.pbox[N + 1];\n\n\t        return {left: Xl, right: Xr};\n\t    }\n\n\t    function BlowFish_Decrypt(ctx, left, right){\n\t        let Xl = left;\n\t        let Xr = right;\n\t        let temp;\n\n\t        for(let i = N + 1; i > 1; --i){\n\t            Xl = Xl ^ ctx.pbox[i];\n\t            Xr = F(ctx, Xl) ^ Xr;\n\n\t            temp = Xl;\n\t            Xl = Xr;\n\t            Xr = temp;\n\t        }\n\n\t        temp = Xl;\n\t        Xl = Xr;\n\t        Xr = temp;\n\n\t        Xr = Xr ^ ctx.pbox[1];\n\t        Xl = Xl ^ ctx.pbox[0];\n\n\t        return {left: Xl, right: Xr};\n\t    }\n\n\t    /**\n\t     * Initialization ctx's pbox and sbox.\n\t     *\n\t     * @param {Object} ctx The object has pbox and sbox.\n\t     * @param {Array} key An array of 32-bit words.\n\t     * @param {int} keysize The length of the key.\n\t     *\n\t     * @example\n\t     *\n\t     *     BlowFishInit(BLOWFISH_CTX, key, 128/32);\n\t     */\n\t    function BlowFishInit(ctx, key, keysize)\n\t    {\n\t        for(let Row = 0; Row < 4; Row++)\n\t        {\n\t            ctx.sbox[Row] = [];\n\t            for(let Col = 0; Col < 256; Col++)\n\t            {\n\t                ctx.sbox[Row][Col] = ORIG_S[Row][Col];\n\t            }\n\t        }\n\n\t        let keyIndex = 0;\n\t        for(let index = 0; index < N + 2; index++)\n\t        {\n\t            ctx.pbox[index] = ORIG_P[index] ^ key[keyIndex];\n\t            keyIndex++;\n\t            if(keyIndex >= keysize)\n\t            {\n\t                keyIndex = 0;\n\t            }\n\t        }\n\n\t        let Data1 = 0;\n\t        let Data2 = 0;\n\t        let res = 0;\n\t        for(let i = 0; i < N + 2; i += 2)\n\t        {\n\t            res = BlowFish_Encrypt(ctx, Data1, Data2);\n\t            Data1 = res.left;\n\t            Data2 = res.right;\n\t            ctx.pbox[i] = Data1;\n\t            ctx.pbox[i + 1] = Data2;\n\t        }\n\n\t        for(let i = 0; i < 4; i++)\n\t        {\n\t            for(let j = 0; j < 256; j += 2)\n\t            {\n\t                res = BlowFish_Encrypt(ctx, Data1, Data2);\n\t                Data1 = res.left;\n\t                Data2 = res.right;\n\t                ctx.sbox[i][j] = Data1;\n\t                ctx.sbox[i][j + 1] = Data2;\n\t            }\n\t        }\n\n\t        return true;\n\t    }\n\n\t    /**\n\t     * Blowfish block cipher algorithm.\n\t     */\n\t    var Blowfish = C_algo.Blowfish = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Skip reset of nRounds has been set before and key did not change\n\t            if (this._keyPriorReset === this._key) {\n\t                return;\n\t            }\n\n\t            // Shortcuts\n\t            var key = this._keyPriorReset = this._key;\n\t            var keyWords = key.words;\n\t            var keySize = key.sigBytes / 4;\n\n\t            //Initialization pbox and sbox\n\t            BlowFishInit(BLOWFISH_CTX, keyWords, keySize);\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            var res = BlowFish_Encrypt(BLOWFISH_CTX, M[offset], M[offset + 1]);\n\t            M[offset] = res.left;\n\t            M[offset + 1] = res.right;\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            var res = BlowFish_Decrypt(BLOWFISH_CTX, M[offset], M[offset + 1]);\n\t            M[offset] = res.left;\n\t            M[offset + 1] = res.right;\n\t        },\n\n\t        blockSize: 64/32,\n\n\t        keySize: 128/32,\n\n\t        ivSize: 64/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.Blowfish.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.Blowfish.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.Blowfish = BlockCipher._createHelper(Blowfish);\n\t}());\n\n\n\treturn CryptoJS.Blowfish;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./lib-typedarrays\"), require(\"./enc-utf16\"), require(\"./enc-base64\"), require(\"./enc-base64url\"), require(\"./md5\"), require(\"./sha1\"), require(\"./sha256\"), require(\"./sha224\"), require(\"./sha512\"), require(\"./sha384\"), require(\"./sha3\"), require(\"./ripemd160\"), require(\"./hmac\"), require(\"./pbkdf2\"), require(\"./evpkdf\"), require(\"./cipher-core\"), require(\"./mode-cfb\"), require(\"./mode-ctr\"), require(\"./mode-ctr-gladman\"), require(\"./mode-ofb\"), require(\"./mode-ecb\"), require(\"./pad-ansix923\"), require(\"./pad-iso10126\"), require(\"./pad-iso97971\"), require(\"./pad-zeropadding\"), require(\"./pad-nopadding\"), require(\"./format-hex\"), require(\"./aes\"), require(\"./tripledes\"), require(\"./rc4\"), require(\"./rabbit\"), require(\"./rabbit-legacy\"), require(\"./blowfish\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./lib-typedarrays\", \"./enc-utf16\", \"./enc-base64\", \"./enc-base64url\", \"./md5\", \"./sha1\", \"./sha256\", \"./sha224\", \"./sha512\", \"./sha384\", \"./sha3\", \"./ripemd160\", \"./hmac\", \"./pbkdf2\", \"./evpkdf\", \"./cipher-core\", \"./mode-cfb\", \"./mode-ctr\", \"./mode-ctr-gladman\", \"./mode-ofb\", \"./mode-ecb\", \"./pad-ansix923\", \"./pad-iso10126\", \"./pad-iso97971\", \"./pad-zeropadding\", \"./pad-nopadding\", \"./format-hex\", \"./aes\", \"./tripledes\", \"./rc4\", \"./rabbit\", \"./rabbit-legacy\", \"./blowfish\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./sha512\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./sha512\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\t    var SHA512 = C_algo.SHA512;\n\n\t    /**\n\t     * SHA-384 hash algorithm.\n\t     */\n\t    var SHA384 = C_algo.SHA384 = SHA512.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0xcbbb9d5d, 0xc1059ed8), new X64Word.init(0x629a292a, 0x367cd507),\n\t                new X64Word.init(0x9159015a, 0x3070dd17), new X64Word.init(0x152fecd8, 0xf70e5939),\n\t                new X64Word.init(0x67332667, 0xffc00b31), new X64Word.init(0x8eb44a87, 0x68581511),\n\t                new X64Word.init(0xdb0c2e0d, 0x64f98fa7), new X64Word.init(0x47b5481d, 0xbefa4fa4)\n\t            ]);\n\t        },\n\n\t        _doFinalize: function () {\n\t            var hash = SHA512._doFinalize.call(this);\n\n\t            hash.sigBytes -= 16;\n\n\t            return hash;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA384('message');\n\t     *     var hash = CryptoJS.SHA384(wordArray);\n\t     */\n\t    C.SHA384 = SHA512._createHelper(SHA384);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA384(message, key);\n\t     */\n\t    C.HmacSHA384 = SHA512._createHmacHelper(SHA384);\n\t}());\n\n\n\treturn CryptoJS.SHA384;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/** @preserve\n\t(c) 2012 by Cdric Mesnil. All rights reserved.\n\n\tRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n\t    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\t    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t*/\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var _zl = WordArray.create([\n\t        0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,\n\t        7,  4, 13,  1, 10,  6, 15,  3, 12,  0,  9,  5,  2, 14, 11,  8,\n\t        3, 10, 14,  4,  9, 15,  8,  1,  2,  7,  0,  6, 13, 11,  5, 12,\n\t        1,  9, 11, 10,  0,  8, 12,  4, 13,  3,  7, 15, 14,  5,  6,  2,\n\t        4,  0,  5,  9,  7, 12,  2, 10, 14,  1,  3,  8, 11,  6, 15, 13]);\n\t    var _zr = WordArray.create([\n\t        5, 14,  7,  0,  9,  2, 11,  4, 13,  6, 15,  8,  1, 10,  3, 12,\n\t        6, 11,  3,  7,  0, 13,  5, 10, 14, 15,  8, 12,  4,  9,  1,  2,\n\t        15,  5,  1,  3,  7, 14,  6,  9, 11,  8, 12,  2, 10,  0,  4, 13,\n\t        8,  6,  4,  1,  3, 11, 15,  0,  5, 12,  2, 13,  9,  7, 10, 14,\n\t        12, 15, 10,  4,  1,  5,  8,  7,  6,  2, 13, 14,  0,  3,  9, 11]);\n\t    var _sl = WordArray.create([\n\t         11, 14, 15, 12,  5,  8,  7,  9, 11, 13, 14, 15,  6,  7,  9,  8,\n\t        7, 6,   8, 13, 11,  9,  7, 15,  7, 12, 15,  9, 11,  7, 13, 12,\n\t        11, 13,  6,  7, 14,  9, 13, 15, 14,  8, 13,  6,  5, 12,  7,  5,\n\t          11, 12, 14, 15, 14, 15,  9,  8,  9, 14,  5,  6,  8,  6,  5, 12,\n\t        9, 15,  5, 11,  6,  8, 13, 12,  5, 12, 13, 14, 11,  8,  5,  6 ]);\n\t    var _sr = WordArray.create([\n\t        8,  9,  9, 11, 13, 15, 15,  5,  7,  7,  8, 11, 14, 14, 12,  6,\n\t        9, 13, 15,  7, 12,  8,  9, 11,  7,  7, 12,  7,  6, 15, 13, 11,\n\t        9,  7, 15, 11,  8,  6,  6, 14, 12, 13,  5, 14, 13, 13,  7,  5,\n\t        15,  5,  8, 11, 14, 14,  6, 14,  6,  9, 12,  9, 12,  5, 15,  8,\n\t        8,  5, 12,  9, 12,  5, 14,  6,  8, 13,  6,  5, 15, 13, 11, 11 ]);\n\n\t    var _hl =  WordArray.create([ 0x00000000, 0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xA953FD4E]);\n\t    var _hr =  WordArray.create([ 0x50A28BE6, 0x5C4DD124, 0x6D703EF3, 0x7A6D76E9, 0x00000000]);\n\n\t    /**\n\t     * RIPEMD160 hash algorithm.\n\t     */\n\t    var RIPEMD160 = C_algo.RIPEMD160 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash  = WordArray.create([0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                // Swap\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\t            // Shortcut\n\t            var H  = this._hash.words;\n\t            var hl = _hl.words;\n\t            var hr = _hr.words;\n\t            var zl = _zl.words;\n\t            var zr = _zr.words;\n\t            var sl = _sl.words;\n\t            var sr = _sr.words;\n\n\t            // Working variables\n\t            var al, bl, cl, dl, el;\n\t            var ar, br, cr, dr, er;\n\n\t            ar = al = H[0];\n\t            br = bl = H[1];\n\t            cr = cl = H[2];\n\t            dr = dl = H[3];\n\t            er = el = H[4];\n\t            // Computation\n\t            var t;\n\t            for (var i = 0; i < 80; i += 1) {\n\t                t = (al +  M[offset+zl[i]])|0;\n\t                if (i<16){\n\t\t            t +=  f1(bl,cl,dl) + hl[0];\n\t                } else if (i<32) {\n\t\t            t +=  f2(bl,cl,dl) + hl[1];\n\t                } else if (i<48) {\n\t\t            t +=  f3(bl,cl,dl) + hl[2];\n\t                } else if (i<64) {\n\t\t            t +=  f4(bl,cl,dl) + hl[3];\n\t                } else {// if (i<80) {\n\t\t            t +=  f5(bl,cl,dl) + hl[4];\n\t                }\n\t                t = t|0;\n\t                t =  rotl(t,sl[i]);\n\t                t = (t+el)|0;\n\t                al = el;\n\t                el = dl;\n\t                dl = rotl(cl, 10);\n\t                cl = bl;\n\t                bl = t;\n\n\t                t = (ar + M[offset+zr[i]])|0;\n\t                if (i<16){\n\t\t            t +=  f5(br,cr,dr) + hr[0];\n\t                } else if (i<32) {\n\t\t            t +=  f4(br,cr,dr) + hr[1];\n\t                } else if (i<48) {\n\t\t            t +=  f3(br,cr,dr) + hr[2];\n\t                } else if (i<64) {\n\t\t            t +=  f2(br,cr,dr) + hr[3];\n\t                } else {// if (i<80) {\n\t\t            t +=  f1(br,cr,dr) + hr[4];\n\t                }\n\t                t = t|0;\n\t                t =  rotl(t,sr[i]) ;\n\t                t = (t+er)|0;\n\t                ar = er;\n\t                er = dr;\n\t                dr = rotl(cr, 10);\n\t                cr = br;\n\t                br = t;\n\t            }\n\t            // Intermediate hash value\n\t            t    = (H[1] + cl + dr)|0;\n\t            H[1] = (H[2] + dl + er)|0;\n\t            H[2] = (H[3] + el + ar)|0;\n\t            H[3] = (H[4] + al + br)|0;\n\t            H[4] = (H[0] + bl + cr)|0;\n\t            H[0] =  t;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotal << 8)  | (nBitsTotal >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotal << 24) | (nBitsTotal >>> 8))  & 0xff00ff00)\n\t            );\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 5; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                // Swap\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\n\t    function f1(x, y, z) {\n\t        return ((x) ^ (y) ^ (z));\n\n\t    }\n\n\t    function f2(x, y, z) {\n\t        return (((x)&(y)) | ((~x)&(z)));\n\t    }\n\n\t    function f3(x, y, z) {\n\t        return (((x) | (~(y))) ^ (z));\n\t    }\n\n\t    function f4(x, y, z) {\n\t        return (((x) & (z)) | ((y)&(~(z))));\n\t    }\n\n\t    function f5(x, y, z) {\n\t        return ((x) ^ ((y) |(~(z))));\n\n\t    }\n\n\t    function rotl(x,n) {\n\t        return (x<<n) | (x>>>(32-n));\n\t    }\n\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.RIPEMD160('message');\n\t     *     var hash = CryptoJS.RIPEMD160(wordArray);\n\t     */\n\t    C.RIPEMD160 = Hasher._createHelper(RIPEMD160);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacRIPEMD160(message, key);\n\t     */\n\t    C.HmacRIPEMD160 = Hasher._createHmacHelper(RIPEMD160);\n\t}(Math));\n\n\n\treturn CryptoJS.RIPEMD160;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var SHA256 = C_algo.SHA256;\n\t    var HMAC = C_algo.HMAC;\n\n\t    /**\n\t     * Password-Based Key Derivation Function 2 algorithm.\n\t     */\n\t    var PBKDF2 = C_algo.PBKDF2 = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\n\t         * @property {Hasher} hasher The hasher to use. Default: SHA256\n\t         * @property {number} iterations The number of iterations to perform. Default: 250000\n\t         */\n\t        cfg: Base.extend({\n\t            keySize: 128/32,\n\t            hasher: SHA256,\n\t            iterations: 250000\n\t        }),\n\n\t        /**\n\t         * Initializes a newly created key derivation function.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create();\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8 });\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8, iterations: 1000 });\n\t         */\n\t        init: function (cfg) {\n\t            this.cfg = this.cfg.extend(cfg);\n\t        },\n\n\t        /**\n\t         * Computes the Password-Based Key Derivation Function 2.\n\t         *\n\t         * @param {WordArray|string} password The password.\n\t         * @param {WordArray|string} salt A salt.\n\t         *\n\t         * @return {WordArray} The derived key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var key = kdf.compute(password, salt);\n\t         */\n\t        compute: function (password, salt) {\n\t            // Shortcut\n\t            var cfg = this.cfg;\n\n\t            // Init HMAC\n\t            var hmac = HMAC.create(cfg.hasher, password);\n\n\t            // Initial values\n\t            var derivedKey = WordArray.create();\n\t            var blockIndex = WordArray.create([0x00000001]);\n\n\t            // Shortcuts\n\t            var derivedKeyWords = derivedKey.words;\n\t            var blockIndexWords = blockIndex.words;\n\t            var keySize = cfg.keySize;\n\t            var iterations = cfg.iterations;\n\n\t            // Generate key\n\t            while (derivedKeyWords.length < keySize) {\n\t                var block = hmac.update(salt).finalize(blockIndex);\n\t                hmac.reset();\n\n\t                // Shortcuts\n\t                var blockWords = block.words;\n\t                var blockWordsLength = blockWords.length;\n\n\t                // Iterations\n\t                var intermediate = block;\n\t                for (var i = 1; i < iterations; i++) {\n\t                    intermediate = hmac.finalize(intermediate);\n\t                    hmac.reset();\n\n\t                    // Shortcut\n\t                    var intermediateWords = intermediate.words;\n\n\t                    // XOR intermediate with block\n\t                    for (var j = 0; j < blockWordsLength; j++) {\n\t                        blockWords[j] ^= intermediateWords[j];\n\t                    }\n\t                }\n\n\t                derivedKey.concat(block);\n\t                blockIndexWords[0]++;\n\t            }\n\t            derivedKey.sigBytes = keySize * 4;\n\n\t            return derivedKey;\n\t        }\n\t    });\n\n\t    /**\n\t     * Computes the Password-Based Key Derivation Function 2.\n\t     *\n\t     * @param {WordArray|string} password The password.\n\t     * @param {WordArray|string} salt A salt.\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\n\t     *\n\t     * @return {WordArray} The derived key.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var key = CryptoJS.PBKDF2(password, salt);\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8 });\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8, iterations: 1000 });\n\t     */\n\t    C.PBKDF2 = function (password, salt, cfg) {\n\t        return PBKDF2.create(cfg).compute(password, salt);\n\t    };\n\t}());\n\n\n\treturn CryptoJS.PBKDF2;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Cipher Feedback block mode.\n\t */\n\tCryptoJS.mode.CFB = (function () {\n\t    var CFB = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    CFB.Encryptor = CFB.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher;\n\t            var blockSize = cipher.blockSize;\n\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n\t            // Remember this block to use with next block\n\t            this._prevBlock = words.slice(offset, offset + blockSize);\n\t        }\n\t    });\n\n\t    CFB.Decryptor = CFB.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher;\n\t            var blockSize = cipher.blockSize;\n\n\t            // Remember this block to use with next block\n\t            var thisBlock = words.slice(offset, offset + blockSize);\n\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n\t            // This block becomes the previous block\n\t            this._prevBlock = thisBlock;\n\t        }\n\t    });\n\n\t    function generateKeystreamAndEncrypt(words, offset, blockSize, cipher) {\n\t        var keystream;\n\n\t        // Shortcut\n\t        var iv = this._iv;\n\n\t        // Generate keystream\n\t        if (iv) {\n\t            keystream = iv.slice(0);\n\n\t            // Remove IV for subsequent blocks\n\t            this._iv = undefined;\n\t        } else {\n\t            keystream = this._prevBlock;\n\t        }\n\t        cipher.encryptBlock(keystream, 0);\n\n\t        // Encrypt\n\t        for (var i = 0; i < blockSize; i++) {\n\t            words[offset + i] ^= keystream[i];\n\t        }\n\t    }\n\n\t    return CFB;\n\t}());\n\n\n\treturn CryptoJS.mode.CFB;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Counter block mode.\n\t */\n\tCryptoJS.mode.CTR = (function () {\n\t    var CTR = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    var Encryptor = CTR.Encryptor = CTR.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher\n\t            var blockSize = cipher.blockSize;\n\t            var iv = this._iv;\n\t            var counter = this._counter;\n\n\t            // Generate keystream\n\t            if (iv) {\n\t                counter = this._counter = iv.slice(0);\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            }\n\t            var keystream = counter.slice(0);\n\t            cipher.encryptBlock(keystream, 0);\n\n\t            // Increment counter\n\t            counter[blockSize - 1] = (counter[blockSize - 1] + 1) | 0\n\n\t            // Encrypt\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= keystream[i];\n\t            }\n\t        }\n\t    });\n\n\t    CTR.Decryptor = Encryptor;\n\n\t    return CTR;\n\t}());\n\n\n\treturn CryptoJS.mode.CTR;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Output Feedback block mode.\n\t */\n\tCryptoJS.mode.OFB = (function () {\n\t    var OFB = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    var Encryptor = OFB.Encryptor = OFB.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher\n\t            var blockSize = cipher.blockSize;\n\t            var iv = this._iv;\n\t            var keystream = this._keystream;\n\n\t            // Generate keystream\n\t            if (iv) {\n\t                keystream = this._keystream = iv.slice(0);\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            }\n\t            cipher.encryptBlock(keystream, 0);\n\n\t            // Encrypt\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= keystream[i];\n\t            }\n\t        }\n\t    });\n\n\t    OFB.Decryptor = Encryptor;\n\n\t    return OFB;\n\t}());\n\n\n\treturn CryptoJS.mode.OFB;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Electronic Codebook block mode.\n\t */\n\tCryptoJS.mode.ECB = (function () {\n\t    var ECB = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    ECB.Encryptor = ECB.extend({\n\t        processBlock: function (words, offset) {\n\t            this._cipher.encryptBlock(words, offset);\n\t        }\n\t    });\n\n\t    ECB.Decryptor = ECB.extend({\n\t        processBlock: function (words, offset) {\n\t            this._cipher.decryptBlock(words, offset);\n\t        }\n\t    });\n\n\t    return ECB;\n\t}());\n\n\n\treturn CryptoJS.mode.ECB;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * ANSI X.923 padding strategy.\n\t */\n\tCryptoJS.pad.AnsiX923 = {\n\t    pad: function (data, blockSize) {\n\t        // Shortcuts\n\t        var dataSigBytes = data.sigBytes;\n\t        var blockSizeBytes = blockSize * 4;\n\n\t        // Count padding bytes\n\t        var nPaddingBytes = blockSizeBytes - dataSigBytes % blockSizeBytes;\n\n\t        // Compute last byte position\n\t        var lastBytePos = dataSigBytes + nPaddingBytes - 1;\n\n\t        // Pad\n\t        data.clamp();\n\t        data.words[lastBytePos >>> 2] |= nPaddingBytes << (24 - (lastBytePos % 4) * 8);\n\t        data.sigBytes += nPaddingBytes;\n\t    },\n\n\t    unpad: function (data) {\n\t        // Get number of padding bytes from last byte\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t        // Remove padding\n\t        data.sigBytes -= nPaddingBytes;\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.Ansix923;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * ISO 10126 padding strategy.\n\t */\n\tCryptoJS.pad.Iso10126 = {\n\t    pad: function (data, blockSize) {\n\t        // Shortcut\n\t        var blockSizeBytes = blockSize * 4;\n\n\t        // Count padding bytes\n\t        var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\n\n\t        // Pad\n\t        data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes - 1)).\n\t             concat(CryptoJS.lib.WordArray.create([nPaddingBytes << 24], 1));\n\t    },\n\n\t    unpad: function (data) {\n\t        // Get number of padding bytes from last byte\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t        // Remove padding\n\t        data.sigBytes -= nPaddingBytes;\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.Iso10126;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * ISO/IEC 9797-1 Padding Method 2.\n\t */\n\tCryptoJS.pad.Iso97971 = {\n\t    pad: function (data, blockSize) {\n\t        // Add 0x80 byte\n\t        data.concat(CryptoJS.lib.WordArray.create([0x80000000], 1));\n\n\t        // Zero pad the rest\n\t        CryptoJS.pad.ZeroPadding.pad(data, blockSize);\n\t    },\n\n\t    unpad: function (data) {\n\t        // Remove zero padding\n\t        CryptoJS.pad.ZeroPadding.unpad(data);\n\n\t        // Remove one more byte -- the 0x80 byte\n\t        data.sigBytes--;\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.Iso97971;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Zero padding strategy.\n\t */\n\tCryptoJS.pad.ZeroPadding = {\n\t    pad: function (data, blockSize) {\n\t        // Shortcut\n\t        var blockSizeBytes = blockSize * 4;\n\n\t        // Pad\n\t        data.clamp();\n\t        data.sigBytes += blockSizeBytes - ((data.sigBytes % blockSizeBytes) || blockSizeBytes);\n\t    },\n\n\t    unpad: function (data) {\n\t        // Shortcut\n\t        var dataWords = data.words;\n\n\t        // Unpad\n\t        var i = data.sigBytes - 1;\n\t        for (var i = data.sigBytes - 1; i >= 0; i--) {\n\t            if (((dataWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff)) {\n\t                data.sigBytes = i + 1;\n\t                break;\n\t            }\n\t        }\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.ZeroPadding;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * A noop padding strategy.\n\t */\n\tCryptoJS.pad.NoPadding = {\n\t    pad: function () {\n\t    },\n\n\t    unpad: function () {\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.NoPadding;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var CipherParams = C_lib.CipherParams;\n\t    var C_enc = C.enc;\n\t    var Hex = C_enc.Hex;\n\t    var C_format = C.format;\n\n\t    var HexFormatter = C_format.Hex = {\n\t        /**\n\t         * Converts the ciphertext of a cipher params object to a hexadecimally encoded string.\n\t         *\n\t         * @param {CipherParams} cipherParams The cipher params object.\n\t         *\n\t         * @return {string} The hexadecimally encoded string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.format.Hex.stringify(cipherParams);\n\t         */\n\t        stringify: function (cipherParams) {\n\t            return cipherParams.ciphertext.toString(Hex);\n\t        },\n\n\t        /**\n\t         * Converts a hexadecimally encoded ciphertext string to a cipher params object.\n\t         *\n\t         * @param {string} input The hexadecimally encoded string.\n\t         *\n\t         * @return {CipherParams} The cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.format.Hex.parse(hexString);\n\t         */\n\t        parse: function (input) {\n\t            var ciphertext = Hex.parse(input);\n\t            return CipherParams.create({ ciphertext: ciphertext });\n\t        }\n\t    };\n\t}());\n\n\n\treturn CryptoJS.format.Hex;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    // Lookup tables\n\t    var SBOX = [];\n\t    var INV_SBOX = [];\n\t    var SUB_MIX_0 = [];\n\t    var SUB_MIX_1 = [];\n\t    var SUB_MIX_2 = [];\n\t    var SUB_MIX_3 = [];\n\t    var INV_SUB_MIX_0 = [];\n\t    var INV_SUB_MIX_1 = [];\n\t    var INV_SUB_MIX_2 = [];\n\t    var INV_SUB_MIX_3 = [];\n\n\t    // Compute lookup tables\n\t    (function () {\n\t        // Compute double table\n\t        var d = [];\n\t        for (var i = 0; i < 256; i++) {\n\t            if (i < 128) {\n\t                d[i] = i << 1;\n\t            } else {\n\t                d[i] = (i << 1) ^ 0x11b;\n\t            }\n\t        }\n\n\t        // Walk GF(2^8)\n\t        var x = 0;\n\t        var xi = 0;\n\t        for (var i = 0; i < 256; i++) {\n\t            // Compute sbox\n\t            var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\n\t            sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\n\t            SBOX[x] = sx;\n\t            INV_SBOX[sx] = x;\n\n\t            // Compute multiplication\n\t            var x2 = d[x];\n\t            var x4 = d[x2];\n\t            var x8 = d[x4];\n\n\t            // Compute sub bytes, mix columns tables\n\t            var t = (d[sx] * 0x101) ^ (sx * 0x1010100);\n\t            SUB_MIX_0[x] = (t << 24) | (t >>> 8);\n\t            SUB_MIX_1[x] = (t << 16) | (t >>> 16);\n\t            SUB_MIX_2[x] = (t << 8)  | (t >>> 24);\n\t            SUB_MIX_3[x] = t;\n\n\t            // Compute inv sub bytes, inv mix columns tables\n\t            var t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\n\t            INV_SUB_MIX_0[sx] = (t << 24) | (t >>> 8);\n\t            INV_SUB_MIX_1[sx] = (t << 16) | (t >>> 16);\n\t            INV_SUB_MIX_2[sx] = (t << 8)  | (t >>> 24);\n\t            INV_SUB_MIX_3[sx] = t;\n\n\t            // Compute next counter\n\t            if (!x) {\n\t                x = xi = 1;\n\t            } else {\n\t                x = x2 ^ d[d[d[x8 ^ x2]]];\n\t                xi ^= d[d[xi]];\n\t            }\n\t        }\n\t    }());\n\n\t    // Precomputed Rcon lookup\n\t    var RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\n\n\t    /**\n\t     * AES block cipher algorithm.\n\t     */\n\t    var AES = C_algo.AES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            var t;\n\n\t            // Skip reset of nRounds has been set before and key did not change\n\t            if (this._nRounds && this._keyPriorReset === this._key) {\n\t                return;\n\t            }\n\n\t            // Shortcuts\n\t            var key = this._keyPriorReset = this._key;\n\t            var keyWords = key.words;\n\t            var keySize = key.sigBytes / 4;\n\n\t            // Compute number of rounds\n\t            var nRounds = this._nRounds = keySize + 6;\n\n\t            // Compute number of key schedule rows\n\t            var ksRows = (nRounds + 1) * 4;\n\n\t            // Compute key schedule\n\t            var keySchedule = this._keySchedule = [];\n\t            for (var ksRow = 0; ksRow < ksRows; ksRow++) {\n\t                if (ksRow < keySize) {\n\t                    keySchedule[ksRow] = keyWords[ksRow];\n\t                } else {\n\t                    t = keySchedule[ksRow - 1];\n\n\t                    if (!(ksRow % keySize)) {\n\t                        // Rot word\n\t                        t = (t << 8) | (t >>> 24);\n\n\t                        // Sub word\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\n\n\t                        // Mix Rcon\n\t                        t ^= RCON[(ksRow / keySize) | 0] << 24;\n\t                    } else if (keySize > 6 && ksRow % keySize == 4) {\n\t                        // Sub word\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\n\t                    }\n\n\t                    keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;\n\t                }\n\t            }\n\n\t            // Compute inv key schedule\n\t            var invKeySchedule = this._invKeySchedule = [];\n\t            for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {\n\t                var ksRow = ksRows - invKsRow;\n\n\t                if (invKsRow % 4) {\n\t                    var t = keySchedule[ksRow];\n\t                } else {\n\t                    var t = keySchedule[ksRow - 4];\n\t                }\n\n\t                if (invKsRow < 4 || ksRow <= 4) {\n\t                    invKeySchedule[invKsRow] = t;\n\t                } else {\n\t                    invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[(t >>> 16) & 0xff]] ^\n\t                                               INV_SUB_MIX_2[SBOX[(t >>> 8) & 0xff]] ^ INV_SUB_MIX_3[SBOX[t & 0xff]];\n\t                }\n\t            }\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            // Swap 2nd and 4th rows\n\t            var t = M[offset + 1];\n\t            M[offset + 1] = M[offset + 3];\n\t            M[offset + 3] = t;\n\n\t            this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);\n\n\t            // Inv swap 2nd and 4th rows\n\t            var t = M[offset + 1];\n\t            M[offset + 1] = M[offset + 3];\n\t            M[offset + 3] = t;\n\t        },\n\n\t        _doCryptBlock: function (M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {\n\t            // Shortcut\n\t            var nRounds = this._nRounds;\n\n\t            // Get input, add round key\n\t            var s0 = M[offset]     ^ keySchedule[0];\n\t            var s1 = M[offset + 1] ^ keySchedule[1];\n\t            var s2 = M[offset + 2] ^ keySchedule[2];\n\t            var s3 = M[offset + 3] ^ keySchedule[3];\n\n\t            // Key schedule row counter\n\t            var ksRow = 4;\n\n\t            // Rounds\n\t            for (var round = 1; round < nRounds; round++) {\n\t                // Shift rows, sub bytes, mix columns, add round key\n\t                var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[(s1 >>> 16) & 0xff] ^ SUB_MIX_2[(s2 >>> 8) & 0xff] ^ SUB_MIX_3[s3 & 0xff] ^ keySchedule[ksRow++];\n\t                var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[(s2 >>> 16) & 0xff] ^ SUB_MIX_2[(s3 >>> 8) & 0xff] ^ SUB_MIX_3[s0 & 0xff] ^ keySchedule[ksRow++];\n\t                var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[(s3 >>> 16) & 0xff] ^ SUB_MIX_2[(s0 >>> 8) & 0xff] ^ SUB_MIX_3[s1 & 0xff] ^ keySchedule[ksRow++];\n\t                var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[(s0 >>> 16) & 0xff] ^ SUB_MIX_2[(s1 >>> 8) & 0xff] ^ SUB_MIX_3[s2 & 0xff] ^ keySchedule[ksRow++];\n\n\t                // Update state\n\t                s0 = t0;\n\t                s1 = t1;\n\t                s2 = t2;\n\t                s3 = t3;\n\t            }\n\n\t            // Shift rows, sub bytes, add round key\n\t            var t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\n\n\t            // Set output\n\t            M[offset]     = t0;\n\t            M[offset + 1] = t1;\n\t            M[offset + 2] = t2;\n\t            M[offset + 3] = t3;\n\t        },\n\n\t        keySize: 256/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.AES = BlockCipher._createHelper(AES);\n\t}());\n\n\n\treturn CryptoJS.AES;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var StreamCipher = C_lib.StreamCipher;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * RC4 stream cipher algorithm.\n\t     */\n\t    var RC4 = C_algo.RC4 = StreamCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var key = this._key;\n\t            var keyWords = key.words;\n\t            var keySigBytes = key.sigBytes;\n\n\t            // Init sbox\n\t            var S = this._S = [];\n\t            for (var i = 0; i < 256; i++) {\n\t                S[i] = i;\n\t            }\n\n\t            // Key setup\n\t            for (var i = 0, j = 0; i < 256; i++) {\n\t                var keyByteIndex = i % keySigBytes;\n\t                var keyByte = (keyWords[keyByteIndex >>> 2] >>> (24 - (keyByteIndex % 4) * 8)) & 0xff;\n\n\t                j = (j + S[i] + keyByte) % 256;\n\n\t                // Swap\n\t                var t = S[i];\n\t                S[i] = S[j];\n\t                S[j] = t;\n\t            }\n\n\t            // Counters\n\t            this._i = this._j = 0;\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            M[offset] ^= generateKeystreamWord.call(this);\n\t        },\n\n\t        keySize: 256/32,\n\n\t        ivSize: 0\n\t    });\n\n\t    function generateKeystreamWord() {\n\t        // Shortcuts\n\t        var S = this._S;\n\t        var i = this._i;\n\t        var j = this._j;\n\n\t        // Generate keystream word\n\t        var keystreamWord = 0;\n\t        for (var n = 0; n < 4; n++) {\n\t            i = (i + 1) % 256;\n\t            j = (j + S[i]) % 256;\n\n\t            // Swap\n\t            var t = S[i];\n\t            S[i] = S[j];\n\t            S[j] = t;\n\n\t            keystreamWord |= S[(S[i] + S[j]) % 256] << (24 - n * 8);\n\t        }\n\n\t        // Update counters\n\t        this._i = i;\n\t        this._j = j;\n\n\t        return keystreamWord;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.RC4.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.RC4.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.RC4 = StreamCipher._createHelper(RC4);\n\n\t    /**\n\t     * Modified RC4 stream cipher algorithm.\n\t     */\n\t    var RC4Drop = C_algo.RC4Drop = RC4.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} drop The number of keystream words to drop. Default 192\n\t         */\n\t        cfg: RC4.cfg.extend({\n\t            drop: 192\n\t        }),\n\n\t        _doReset: function () {\n\t            RC4._doReset.call(this);\n\n\t            // Drop\n\t            for (var i = this.cfg.drop; i > 0; i--) {\n\t                generateKeystreamWord.call(this);\n\t            }\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.RC4Drop.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.RC4Drop.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.RC4Drop = StreamCipher._createHelper(RC4Drop);\n\t}());\n\n\n\treturn CryptoJS.RC4;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var StreamCipher = C_lib.StreamCipher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable objects\n\t    var S  = [];\n\t    var C_ = [];\n\t    var G  = [];\n\n\t    /**\n\t     * Rabbit stream cipher algorithm\n\t     */\n\t    var Rabbit = C_algo.Rabbit = StreamCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var K = this._key.words;\n\t            var iv = this.cfg.iv;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                K[i] = (((K[i] << 8)  | (K[i] >>> 24)) & 0x00ff00ff) |\n\t                       (((K[i] << 24) | (K[i] >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Generate initial state values\n\t            var X = this._X = [\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\n\t            ];\n\n\t            // Generate initial counter values\n\t            var C = this._C = [\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\n\t            ];\n\n\t            // Carry bit\n\t            this._b = 0;\n\n\t            // Iterate the system four times\n\t            for (var i = 0; i < 4; i++) {\n\t                nextState.call(this);\n\t            }\n\n\t            // Modify the counters\n\t            for (var i = 0; i < 8; i++) {\n\t                C[i] ^= X[(i + 4) & 7];\n\t            }\n\n\t            // IV setup\n\t            if (iv) {\n\t                // Shortcuts\n\t                var IV = iv.words;\n\t                var IV_0 = IV[0];\n\t                var IV_1 = IV[1];\n\n\t                // Generate four subvectors\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\n\n\t                // Modify counter values\n\t                C[0] ^= i0;\n\t                C[1] ^= i1;\n\t                C[2] ^= i2;\n\t                C[3] ^= i3;\n\t                C[4] ^= i0;\n\t                C[5] ^= i1;\n\t                C[6] ^= i2;\n\t                C[7] ^= i3;\n\n\t                // Iterate the system four times\n\t                for (var i = 0; i < 4; i++) {\n\t                    nextState.call(this);\n\t                }\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var X = this._X;\n\n\t            // Iterate the system\n\t            nextState.call(this);\n\n\t            // Generate four keystream words\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\n\n\t            for (var i = 0; i < 4; i++) {\n\t                // Swap endian\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\n\n\t                // Encrypt\n\t                M[offset + i] ^= S[i];\n\t            }\n\t        },\n\n\t        blockSize: 128/32,\n\n\t        ivSize: 64/32\n\t    });\n\n\t    function nextState() {\n\t        // Shortcuts\n\t        var X = this._X;\n\t        var C = this._C;\n\n\t        // Save old counter values\n\t        for (var i = 0; i < 8; i++) {\n\t            C_[i] = C[i];\n\t        }\n\n\t        // Calculate new counter values\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\n\n\t        // Calculate the g-values\n\t        for (var i = 0; i < 8; i++) {\n\t            var gx = X[i] + C[i];\n\n\t            // Construct high and low argument for squaring\n\t            var ga = gx & 0xffff;\n\t            var gb = gx >>> 16;\n\n\t            // Calculate high and low result of squaring\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\n\n\t            // High XOR low\n\t            G[i] = gh ^ gl;\n\t        }\n\n\t        // Calculate new state values\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.Rabbit.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.Rabbit.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.Rabbit = StreamCipher._createHelper(Rabbit);\n\t}());\n\n\n\treturn CryptoJS.Rabbit;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var StreamCipher = C_lib.StreamCipher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable objects\n\t    var S  = [];\n\t    var C_ = [];\n\t    var G  = [];\n\n\t    /**\n\t     * Rabbit stream cipher algorithm.\n\t     *\n\t     * This is a legacy version that neglected to convert the key to little-endian.\n\t     * This error doesn't affect the cipher's security,\n\t     * but it does affect its compatibility with other implementations.\n\t     */\n\t    var RabbitLegacy = C_algo.RabbitLegacy = StreamCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var K = this._key.words;\n\t            var iv = this.cfg.iv;\n\n\t            // Generate initial state values\n\t            var X = this._X = [\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\n\t            ];\n\n\t            // Generate initial counter values\n\t            var C = this._C = [\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\n\t            ];\n\n\t            // Carry bit\n\t            this._b = 0;\n\n\t            // Iterate the system four times\n\t            for (var i = 0; i < 4; i++) {\n\t                nextState.call(this);\n\t            }\n\n\t            // Modify the counters\n\t            for (var i = 0; i < 8; i++) {\n\t                C[i] ^= X[(i + 4) & 7];\n\t            }\n\n\t            // IV setup\n\t            if (iv) {\n\t                // Shortcuts\n\t                var IV = iv.words;\n\t                var IV_0 = IV[0];\n\t                var IV_1 = IV[1];\n\n\t                // Generate four subvectors\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\n\n\t                // Modify counter values\n\t                C[0] ^= i0;\n\t                C[1] ^= i1;\n\t                C[2] ^= i2;\n\t                C[3] ^= i3;\n\t                C[4] ^= i0;\n\t                C[5] ^= i1;\n\t                C[6] ^= i2;\n\t                C[7] ^= i3;\n\n\t                // Iterate the system four times\n\t                for (var i = 0; i < 4; i++) {\n\t                    nextState.call(this);\n\t                }\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var X = this._X;\n\n\t            // Iterate the system\n\t            nextState.call(this);\n\n\t            // Generate four keystream words\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\n\n\t            for (var i = 0; i < 4; i++) {\n\t                // Swap endian\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\n\n\t                // Encrypt\n\t                M[offset + i] ^= S[i];\n\t            }\n\t        },\n\n\t        blockSize: 128/32,\n\n\t        ivSize: 64/32\n\t    });\n\n\t    function nextState() {\n\t        // Shortcuts\n\t        var X = this._X;\n\t        var C = this._C;\n\n\t        // Save old counter values\n\t        for (var i = 0; i < 8; i++) {\n\t            C_[i] = C[i];\n\t        }\n\n\t        // Calculate new counter values\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\n\n\t        // Calculate the g-values\n\t        for (var i = 0; i < 8; i++) {\n\t            var gx = X[i] + C[i];\n\n\t            // Construct high and low argument for squaring\n\t            var ga = gx & 0xffff;\n\t            var gb = gx >>> 16;\n\n\t            // Calculate high and low result of squaring\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\n\n\t            // High XOR low\n\t            G[i] = gh ^ gl;\n\t        }\n\n\t        // Calculate new state values\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.RabbitLegacy.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.RabbitLegacy.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.RabbitLegacy = StreamCipher._createHelper(RabbitLegacy);\n\t}());\n\n\n\treturn CryptoJS.RabbitLegacy;\n\n}));","import CryptoJS from 'crypto-js';\n\n// Validate embedding integrity\nfunction validateEmbedding(embedding: number[]): boolean {\n  if (!Array.isArray(embedding)) return false;\n  if (embedding.length === 0) return false;\n  \n  // Check if all elements are valid numbers\n  return embedding.every(val => \n    typeof val === 'number' && \n    !isNaN(val) && \n    isFinite(val)\n  );\n}\n\n// Encrypt data with a key (userId)\nexport function encryptData(data: any, key: string): string {\n  // Special handling for memory entries with embeddings\n  if (Array.isArray(data)) {\n    data = data.map(item => {\n      if (item.embedding && Array.isArray(item.embedding)) {\n        // Validate embedding before encryption\n        if (!validateEmbedding(item.embedding)) {\n          console.warn('Invalid embedding detected before encryption:', item.id);\n          // Remove invalid embedding rather than encrypt bad data\n          const { embedding, ...rest } = item;\n          return rest;\n        }\n      }\n      return item;\n    });\n  }\n  \n  return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();\n}\n\n// Decrypt data with a key (userId)\nexport function decryptData(ciphertext: string, key: string): any {\n  const bytes = CryptoJS.AES.decrypt(ciphertext, key);\n  const decrypted = bytes.toString(CryptoJS.enc.Utf8);\n  const data = JSON.parse(decrypted);\n  \n  // Special handling for memory entries with embeddings\n  if (Array.isArray(data)) {\n    const processedData = data.map(item => {\n      if (item.embedding && Array.isArray(item.embedding)) {\n        // Validate embedding after decryption\n        if (!validateEmbedding(item.embedding)) {\n          console.warn('Invalid embedding detected after decryption:', item.id);\n          // Remove corrupted embedding\n          const { embedding, ...rest } = item;\n          return rest;\n        }\n        \n        // Ensure all numbers are properly typed (in case of any precision issues)\n        item.embedding = item.embedding.map((val: any) => Number(val));\n      }\n      return item;\n    });\n    \n    return processedData;\n  }\n  \n  return data;\n}\n\n// Test function to verify embedding integrity\nexport function testEmbeddingIntegrity(originalEmbedding: number[], key: string): boolean {\n  try {\n    // Create test object\n    const testData = { embedding: originalEmbedding, test: true };\n    \n    // Encrypt and decrypt\n    const encrypted = encryptData([testData], key);\n    const decrypted = decryptData(encrypted, key);\n    \n    if (!Array.isArray(decrypted) || decrypted.length === 0) return false;\n    \n    const recoveredEmbedding = decrypted[0].embedding;\n    if (!recoveredEmbedding || !Array.isArray(recoveredEmbedding)) return false;\n    \n    // Check length\n    if (originalEmbedding.length !== recoveredEmbedding.length) return false;\n    \n    // Check values (allowing for tiny floating-point differences)\n    const tolerance = 1e-10;\n    return originalEmbedding.every((val, idx) => \n      Math.abs(val - recoveredEmbedding[idx]) < tolerance\n    );\n  } catch (error) {\n    console.error('Embedding integrity test failed:', error);\n    return false;\n  }\n} ","import { openDB, DBSchema, IDBPDatabase } from 'idb';\r\nimport { \r\n  DailyCheckIn, \r\n  JournalEntry, \r\n  Message, \r\n  UserProgress, \r\n  TriggerLog, \r\n  Task, \r\n  EmotionalInsight, \r\n  MemoryEntry, \r\n  ConversationSummary \r\n} from '../types';\r\nimport { encryptData, decryptData } from './cryptoUtils';\r\n\r\n// Define the database schema\r\ninterface SobriDB extends DBSchema {\r\n  checkIns: {\r\n    key: string;\r\n    value: string; // Encrypted data\r\n  };\r\n  journal: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  messages: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  progress: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  triggers: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  tasks: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  insights: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  memory: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  summaries: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n  appState: {\r\n    key: string;\r\n    value: string;\r\n  };\r\n}\r\n\r\nconst DB_NAME = 'SobriDB';\r\nconst DB_VERSION = 1;\r\n\r\n// Storage limits and thresholds\r\nconst MAX_MESSAGES = 300; // Keep only recent messages\r\nconst MAX_INSIGHTS = 100;\r\nconst MAX_JOURNAL_ENTRIES = 200;\r\nconst STORAGE_WARNING_THRESHOLD = 0.8; // Warn at 80% usage\r\n\r\nclass IndexedDBStorage {\r\n  private db: IDBPDatabase<SobriDB> | null = null;\r\n\r\n  async init(): Promise<void> {\r\n    try {\r\n      this.db = await openDB<SobriDB>(DB_NAME, DB_VERSION, {\r\n        upgrade(db) {\r\n          // Create object stores\r\n          if (!db.objectStoreNames.contains('checkIns')) {\r\n            db.createObjectStore('checkIns');\r\n          }\r\n          if (!db.objectStoreNames.contains('journal')) {\r\n            db.createObjectStore('journal');\r\n          }\r\n          if (!db.objectStoreNames.contains('messages')) {\r\n            db.createObjectStore('messages');\r\n          }\r\n          if (!db.objectStoreNames.contains('progress')) {\r\n            db.createObjectStore('progress');\r\n          }\r\n          if (!db.objectStoreNames.contains('triggers')) {\r\n            db.createObjectStore('triggers');\r\n          }\r\n          if (!db.objectStoreNames.contains('tasks')) {\r\n            db.createObjectStore('tasks');\r\n          }\r\n          if (!db.objectStoreNames.contains('insights')) {\r\n            db.createObjectStore('insights');\r\n          }\r\n          if (!db.objectStoreNames.contains('memory')) {\r\n            db.createObjectStore('memory');\r\n          }\r\n          if (!db.objectStoreNames.contains('summaries')) {\r\n            db.createObjectStore('summaries');\r\n          }\r\n          if (!db.objectStoreNames.contains('appState')) {\r\n            db.createObjectStore('appState');\r\n          }\r\n        },\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to initialize IndexedDB:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async ensureDB(): Promise<IDBPDatabase<SobriDB>> {\r\n    if (!this.db) {\r\n      await this.init();\r\n    }\r\n    return this.db!;\r\n  }\r\n\r\n  // Storage usage monitoring\r\n  async getStorageUsage(): Promise<{ usage: number; quota: number; percentage: number }> {\r\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\r\n      const estimate = await navigator.storage.estimate();\r\n      const usage = estimate.usage || 0;\r\n      const quota = estimate.quota || 0;\r\n      const percentage = quota > 0 ? (usage / quota) * 100 : 0;\r\n      \r\n      if (percentage > STORAGE_WARNING_THRESHOLD * 100) {\r\n        console.warn(`Storage usage at ${percentage.toFixed(2)}% - consider cleaning up old data`);\r\n      }\r\n      \r\n      return { usage, quota, percentage };\r\n    }\r\n    return { usage: 0, quota: 0, percentage: 0 };\r\n  }\r\n\r\n  // Generic storage operations with error handling\r\n  private async safeStore<K extends keyof SobriDB>(\r\n    storeName: K,\r\n    key: string,\r\n    value: string\r\n  ): Promise<void> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      await db.put(storeName, value, key);\r\n    } catch (error) {\r\n      if (error.name === 'QuotaExceededError') {\r\n        console.error('Storage quota exceeded!');\r\n        // Trigger cleanup based on store type\r\n        await this.handleQuotaExceeded(storeName);\r\n        // Retry once after cleanup\r\n        try {\r\n          const db = await this.ensureDB();\r\n          await db.put(storeName, value, key);\r\n        } catch (retryError) {\r\n          throw new Error('Failed to store data even after cleanup: ' + retryError.message);\r\n        }\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n  }\r\n\r\n  private async handleQuotaExceeded(storeName: keyof SobriDB): Promise<void> {\r\n    console.log(`Handling quota exceeded for store: ${storeName}`);\r\n    \r\n    switch (storeName) {\r\n      case 'messages':\r\n        await this.evictOldMessages();\r\n        break;\r\n      case 'insights':\r\n        await this.evictOldInsights();\r\n        break;\r\n      case 'journal':\r\n        await this.evictOldJournalEntries();\r\n        break;\r\n      default:\r\n        console.warn(`No eviction strategy for store: ${storeName}`);\r\n    }\r\n  }\r\n\r\n  // Message eviction - keep only recent messages\r\n  private async evictOldMessages(): Promise<void> {\r\n    const db = await this.ensureDB();\r\n    const tx = db.transaction('messages', 'readwrite');\r\n    const store = tx.objectStore('messages');\r\n    \r\n    const allKeys = await store.getAllKeys();\r\n    const userId = await this.getCurrentUserId();\r\n    \r\n    if (!userId || allKeys.length === 0) return;\r\n    \r\n    // Get all messages and sort by timestamp\r\n    const messages: Message[] = [];\r\n    for (const key of allKeys) {\r\n      const encrypted = await store.get(key);\r\n      if (encrypted) {\r\n        try {\r\n          const decrypted = decryptData(encrypted, userId) as Message[];\r\n          messages.push(...decrypted);\r\n        } catch (error) {\r\n          console.error('Failed to decrypt messages for eviction');\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Sort by timestamp and keep only recent\r\n    messages.sort((a, b) => b.timestamp - a.timestamp);\r\n    const recentMessages = messages.slice(0, MAX_MESSAGES);\r\n    \r\n    // Clear and restore only recent messages\r\n    await store.clear();\r\n    const encrypted = encryptData(recentMessages, userId);\r\n    await store.put(encrypted, userId);\r\n    \r\n    console.log(`Evicted ${messages.length - recentMessages.length} old messages`);\r\n  }\r\n\r\n  private async evictOldInsights(): Promise<void> {\r\n    const db = await this.ensureDB();\r\n    const userId = await this.getCurrentUserId();\r\n    if (!userId) return;\r\n    \r\n    const encrypted = await db.get('insights', userId);\r\n    if (!encrypted) return;\r\n    \r\n    try {\r\n      const insights = decryptData(encrypted, userId) as EmotionalInsight[];\r\n      // Keep only recent insights, prioritize unshown ones\r\n      const sortedInsights = insights.sort((a, b) => {\r\n        if (a.shown !== b.shown) return a.shown ? 1 : -1;\r\n        return new Date(b.date).getTime() - new Date(a.date).getTime();\r\n      });\r\n      \r\n      const recentInsights = sortedInsights.slice(0, MAX_INSIGHTS);\r\n      const newEncrypted = encryptData(recentInsights, userId);\r\n      await db.put('insights', newEncrypted, userId);\r\n      \r\n      console.log(`Evicted ${insights.length - recentInsights.length} old insights`);\r\n    } catch (error) {\r\n      console.error('Failed to evict old insights:', error);\r\n    }\r\n  }\r\n\r\n  private async evictOldJournalEntries(): Promise<void> {\r\n    const db = await this.ensureDB();\r\n    const userId = await this.getCurrentUserId();\r\n    if (!userId) return;\r\n    \r\n    const encrypted = await db.get('journal', userId);\r\n    if (!encrypted) return;\r\n    \r\n    try {\r\n      const entries = decryptData(encrypted, userId) as JournalEntry[];\r\n      // Keep only recent entries\r\n      const sortedEntries = entries.sort((a, b) => \r\n        new Date(b.date).getTime() - new Date(a.date).getTime()\r\n      );\r\n      \r\n      const recentEntries = sortedEntries.slice(0, MAX_JOURNAL_ENTRIES);\r\n      const newEncrypted = encryptData(recentEntries, userId);\r\n      await db.put('journal', newEncrypted, userId);\r\n      \r\n      console.log(`Evicted ${entries.length - recentEntries.length} old journal entries`);\r\n    } catch (error) {\r\n      console.error('Failed to evict old journal entries:', error);\r\n    }\r\n  }\r\n\r\n  private async getCurrentUserId(): Promise<string | null> {\r\n    // First try IndexedDB\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const userId = await db.get('appState', 'userId');\r\n      if (userId) return userId;\r\n    } catch (error) {\r\n      console.error('Failed to get userId from IndexedDB:', error);\r\n    }\r\n    \r\n    // Fallback to localStorage during migration\r\n    return localStorage.getItem('Soberi_userId');\r\n  }\r\n\r\n  // Public methods matching the original storage interface\r\n  async saveCheckIn(checkIn: DailyCheckIn, userId: string): Promise<void> {\r\n    const checkIns = await this.getCheckIns(userId);\r\n    const updatedCheckIns = [\r\n      ...checkIns.filter(c => c.date !== checkIn.date),\r\n      checkIn\r\n    ];\r\n    const encrypted = encryptData(updatedCheckIns, userId);\r\n    await this.safeStore('checkIns', userId, encrypted);\r\n  }\r\n\r\n  async getCheckIns(userId: string): Promise<DailyCheckIn[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('checkIns', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get check-ins:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async saveJournalEntry(entry: JournalEntry, userId: string): Promise<void> {\r\n    const entries = await this.getJournalEntries(userId);\r\n    const updatedEntries = [...entries.filter(e => e.id !== entry.id), entry];\r\n    const encrypted = encryptData(updatedEntries, userId);\r\n    await this.safeStore('journal', userId, encrypted);\r\n  }\r\n\r\n  async getJournalEntries(userId: string): Promise<JournalEntry[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('journal', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get journal entries:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteJournalEntry(id: string, userId: string): Promise<void> {\r\n    const entries = await this.getJournalEntries(userId);\r\n    const updatedEntries = entries.filter(e => e.id !== id);\r\n    const encrypted = encryptData(updatedEntries, userId);\r\n    await this.safeStore('journal', userId, encrypted);\r\n  }\r\n\r\n  async saveMessage(message: Message, userId: string): Promise<void> {\r\n    const messages = await this.getMessages(userId);\r\n    const updatedMessages = [...messages, message];\r\n    const encrypted = encryptData(updatedMessages, userId);\r\n    await this.safeStore('messages', userId, encrypted);\r\n  }\r\n\r\n  async getMessages(userId: string): Promise<Message[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('messages', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get messages:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async clearMessages(userId: string): Promise<void> {\r\n    const db = await this.ensureDB();\r\n    await db.delete('messages', userId);\r\n  }\r\n\r\n  async getProgress(userId: string): Promise<UserProgress> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('progress', userId);\r\n      if (!encrypted) {\r\n        return {\r\n          currentStreak: 0,\r\n          longestStreak: 0,\r\n          startDate: null,\r\n          lastCheckInDate: null,\r\n          totalDaysClean: 0,\r\n          relapseCount: 0,\r\n          milestones: []\r\n        };\r\n      }\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get progress:', error);\r\n      return {\r\n        currentStreak: 0,\r\n        longestStreak: 0,\r\n        startDate: null,\r\n        lastCheckInDate: null,\r\n        totalDaysClean: 0,\r\n        relapseCount: 0,\r\n        milestones: []\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateProgress(progress: Partial<UserProgress>, userId: string): Promise<UserProgress> {\r\n    const currentProgress = await this.getProgress(userId);\r\n    const updatedProgress = { ...currentProgress, ...progress };\r\n    const encrypted = encryptData(updatedProgress, userId);\r\n    await this.safeStore('progress', userId, encrypted);\r\n    return updatedProgress;\r\n  }\r\n\r\n  async saveTriggerLog(trigger: TriggerLog, userId: string): Promise<void> {\r\n    const triggers = await this.getTriggerLogs(userId);\r\n    const updatedTriggers = [...triggers.filter(t => t.id !== trigger.id), trigger];\r\n    const encrypted = encryptData(updatedTriggers, userId);\r\n    await this.safeStore('triggers', userId, encrypted);\r\n  }\r\n\r\n  async getTriggerLogs(userId: string): Promise<TriggerLog[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('triggers', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get trigger logs:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteTriggerLog(id: string, userId: string): Promise<void> {\r\n    const triggers = await this.getTriggerLogs(userId);\r\n    const updatedTriggers = triggers.filter(t => t.id !== id);\r\n    const encrypted = encryptData(updatedTriggers, userId);\r\n    await this.safeStore('triggers', userId, encrypted);\r\n  }\r\n\r\n  async saveTask(task: Task, userId: string): Promise<void> {\r\n    const tasks = await this.getTasks(userId);\r\n    const updatedTasks = [...tasks.filter(t => t.id !== task.id), task];\r\n    const encrypted = encryptData(updatedTasks, userId);\r\n    await this.safeStore('tasks', userId, encrypted);\r\n  }\r\n\r\n  async getTasks(userId: string): Promise<Task[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('tasks', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get tasks:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteTask(id: string, userId: string): Promise<void> {\r\n    const tasks = await this.getTasks(userId);\r\n    const updatedTasks = tasks.filter(t => t.id !== id);\r\n    const encrypted = encryptData(updatedTasks, userId);\r\n    await this.safeStore('tasks', userId, encrypted);\r\n  }\r\n\r\n  async completeTask(id: string, userId: string): Promise<void> {\r\n    const tasks = await this.getTasks(userId);\r\n    const updatedTasks = tasks.map(task =>\r\n      task.id === id\r\n        ? { ...task, completed: true, completedAt: new Date().toISOString() }\r\n        : task\r\n    );\r\n    const encrypted = encryptData(updatedTasks, userId);\r\n    await this.safeStore('tasks', userId, encrypted);\r\n  }\r\n\r\n  async saveInsight(insight: EmotionalInsight, userId: string): Promise<void> {\r\n    const insights = await this.getInsights(userId);\r\n    const updatedInsights = [...insights.filter(i => i.id !== insight.id), insight];\r\n    const encrypted = encryptData(updatedInsights, userId);\r\n    await this.safeStore('insights', userId, encrypted);\r\n  }\r\n\r\n  async getInsights(userId: string): Promise<EmotionalInsight[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('insights', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get insights:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async markInsightAsShown(id: string, userId: string): Promise<void> {\r\n    const insights = await this.getInsights(userId);\r\n    const updatedInsights = insights.map(insight =>\r\n      insight.id === id ? { ...insight, shown: true } : insight\r\n    );\r\n    const encrypted = encryptData(updatedInsights, userId);\r\n    await this.safeStore('insights', userId, encrypted);\r\n  }\r\n\r\n  async saveMemoryEntry(memory: MemoryEntry, userId: string): Promise<void> {\r\n    const memories = await this.getMemoryEntries(userId);\r\n    const updatedMemories = [...memories.filter(m => m.id !== memory.id), memory];\r\n    const encrypted = encryptData(updatedMemories, userId);\r\n    await this.safeStore('memory', userId, encrypted);\r\n  }\r\n\r\n  async getMemoryEntries(userId: string): Promise<MemoryEntry[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('memory', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get memory entries:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteMemoryEntry(id: string, userId: string): Promise<void> {\r\n    const memories = await this.getMemoryEntries(userId);\r\n    const updatedMemories = memories.filter(m => m.id !== id);\r\n    const encrypted = encryptData(updatedMemories, userId);\r\n    await this.safeStore('memory', userId, encrypted);\r\n  }\r\n\r\n  async saveConversationSummary(summary: ConversationSummary, userId: string): Promise<void> {\r\n    const summaries = await this.getConversationSummaries(userId);\r\n    const updatedSummaries = [...summaries.filter(s => s.id !== summary.id), summary];\r\n    const encrypted = encryptData(updatedSummaries, userId);\r\n    await this.safeStore('summaries', userId, encrypted);\r\n  }\r\n\r\n  async getConversationSummaries(userId: string): Promise<ConversationSummary[]> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('summaries', userId);\r\n      if (!encrypted) return [];\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get conversation summaries:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteConversationSummary(id: string, userId: string): Promise<void> {\r\n    const summaries = await this.getConversationSummaries(userId);\r\n    const updatedSummaries = summaries.filter(s => s.id !== id);\r\n    const encrypted = encryptData(updatedSummaries, userId);\r\n    await this.safeStore('summaries', userId, encrypted);\r\n  }\r\n\r\n  // App state methods for Zustand\r\n  async saveAppState(state: any, userId: string): Promise<void> {\r\n    const encrypted = encryptData(state, userId);\r\n    await this.safeStore('appState', userId, encrypted);\r\n    // Also store userId for future reference\r\n    await this.safeStore('appState', 'userId', userId);\r\n  }\r\n\r\n  async getAppState(userId: string): Promise<any> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const encrypted = await db.get('appState', userId);\r\n      if (!encrypted) return null;\r\n      return decryptData(encrypted, userId);\r\n    } catch (error) {\r\n      console.error('Failed to get app state:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Migration helper\r\n  async migrateFromLocalStorage(userId: string): Promise<void> {\r\n    console.log('Starting migration from localStorage to IndexedDB...');\r\n    \r\n    const STORAGE_KEYS = {\r\n      CHECKINS: 'Soberi_checkins',\r\n      JOURNAL: 'Soberi_journal',\r\n      MESSAGES: 'Soberi_messages',\r\n      PROGRESS: 'Soberi_progress',\r\n      TRIGGERS: 'Soberi_triggers',\r\n      TASKS: 'Soberi_tasks',\r\n      INSIGHTS: 'Soberi_insights',\r\n      MEMORY: 'Soberi_memory',\r\n      SUMMARIES: 'Soberi_conversation_summaries',\r\n      APP_STATE: 'Soberiai-storage'\r\n    };\r\n\r\n    try {\r\n      // Migrate each data type\r\n      for (const [key, storageKey] of Object.entries(STORAGE_KEYS)) {\r\n        const data = localStorage.getItem(storageKey);\r\n        if (data) {\r\n          const storeName = key.toLowerCase() as keyof SobriDB;\r\n          await this.safeStore(storeName === 'app_state' ? 'appState' : storeName, userId, data);\r\n          console.log(`Migrated ${key} to IndexedDB`);\r\n        }\r\n      }\r\n      \r\n      console.log('Migration completed successfully!');\r\n    } catch (error) {\r\n      console.error('Migration failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Clean up method\r\n  async cleanup(): Promise<void> {\r\n    if (this.db) {\r\n      this.db.close();\r\n      this.db = null;\r\n    }\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const indexedDBStorage = new IndexedDBStorage();\r\n\r\n// Export individual functions matching the original interface\r\nexport const saveCheckIn = (checkIn: DailyCheckIn, userId: string) => \r\n  indexedDBStorage.saveCheckIn(checkIn, userId);\r\n\r\nexport const getCheckIns = (userId: string) => \r\n  indexedDBStorage.getCheckIns(userId);\r\n\r\nexport const saveJournalEntry = (entry: JournalEntry, userId: string) => \r\n  indexedDBStorage.saveJournalEntry(entry, userId);\r\n\r\nexport const getJournalEntries = (userId: string) => \r\n  indexedDBStorage.getJournalEntries(userId);\r\n\r\nexport const deleteJournalEntry = (id: string, userId: string) => \r\n  indexedDBStorage.deleteJournalEntry(id, userId);\r\n\r\nexport const saveMessage = (message: Message, userId: string) => \r\n  indexedDBStorage.saveMessage(message, userId);\r\n\r\nexport const getMessages = (userId: string) => \r\n  indexedDBStorage.getMessages(userId);\r\n\r\nexport const clearMessages = (userId: string) => \r\n  indexedDBStorage.clearMessages(userId);\r\n\r\nexport const getProgress = (userId: string) => \r\n  indexedDBStorage.getProgress(userId);\r\n\r\nexport const updateProgress = (progress: Partial<UserProgress>, userId: string) => \r\n  indexedDBStorage.updateProgress(progress, userId);\r\n\r\nexport const saveTriggerLog = (trigger: TriggerLog, userId: string) => \r\n  indexedDBStorage.saveTriggerLog(trigger, userId);\r\n\r\nexport const getTriggerLogs = (userId: string) => \r\n  indexedDBStorage.getTriggerLogs(userId);\r\n\r\nexport const deleteTriggerLog = (id: string, userId: string) => \r\n  indexedDBStorage.deleteTriggerLog(id, userId);\r\n\r\nexport const saveTask = (task: Task, userId: string) => \r\n  indexedDBStorage.saveTask(task, userId);\r\n\r\nexport const getTasks = (userId: string) => \r\n  indexedDBStorage.getTasks(userId);\r\n\r\nexport const deleteTask = (id: string, userId: string) => \r\n  indexedDBStorage.deleteTask(id, userId);\r\n\r\nexport const completeTask = (id: string, userId: string) => \r\n  indexedDBStorage.completeTask(id, userId);\r\n\r\nexport const saveInsight = (insight: EmotionalInsight, userId: string) => \r\n  indexedDBStorage.saveInsight(insight, userId);\r\n\r\nexport const getInsights = (userId: string) => \r\n  indexedDBStorage.getInsights(userId);\r\n\r\nexport const markInsightAsShown = (id: string, userId: string) => \r\n  indexedDBStorage.markInsightAsShown(id, userId);\r\n\r\nexport const saveMemoryEntry = (memory: MemoryEntry, userId: string) => \r\n  indexedDBStorage.saveMemoryEntry(memory, userId);\r\n\r\nexport const getMemoryEntries = (userId: string) => \r\n  indexedDBStorage.getMemoryEntries(userId);\r\n\r\nexport const deleteMemoryEntry = (id: string, userId: string) => \r\n  indexedDBStorage.deleteMemoryEntry(id, userId);\r\n\r\nexport const saveConversationSummary = (summary: ConversationSummary, userId: string) => \r\n  indexedDBStorage.saveConversationSummary(summary, userId);\r\n\r\nexport const getConversationSummaries = (userId: string) => \r\n  indexedDBStorage.getConversationSummaries(userId);\r\n\r\nexport const deleteConversationSummary = (id: string, userId: string) => \r\n  indexedDBStorage.deleteConversationSummary(id, userId);\r\n\r\nexport const saveAppState = (state: any, userId: string) => \r\n  indexedDBStorage.saveAppState(state, userId);\r\n\r\nexport const getAppState = (userId: string) => \r\n  indexedDBStorage.getAppState(userId);\r\n\r\nexport const migrateFromLocalStorage = (userId: string) => \r\n  indexedDBStorage.migrateFromLocalStorage(userId);\r\n\r\nexport const getStorageUsage = () => \r\n  indexedDBStorage.getStorageUsage();\r\n\r\nexport const resetStreak = async (userId: string): Promise<UserProgress> => {\r\n  const progress = await indexedDBStorage.getProgress(userId);\r\n  const updatedProgress = {\r\n    ...progress,\r\n    currentStreak: 0,\r\n    relapseCount: progress.relapseCount + 1,\r\n  };\r\n  return await indexedDBStorage.updateProgress(updatedProgress, userId);\r\n};\r\n\r\nexport const incrementStreak = async (userId: string): Promise<UserProgress> => {\r\n  const progress = await indexedDBStorage.getProgress(userId);\r\n  const newStreak = progress.currentStreak + 1;\r\n  const updatedProgress = {\r\n    ...progress,\r\n    currentStreak: newStreak,\r\n    longestStreak: Math.max(newStreak, progress.longestStreak),\r\n    totalDaysClean: progress.totalDaysClean + 1,\r\n  };\r\n  return await indexedDBStorage.updateProgress(updatedProgress, userId);\r\n};\r\n\r\nexport const updateInsightUserNote = async (id: string, userNote: string, userId: string): Promise<void> => {\r\n  const insights = await indexedDBStorage.getInsights(userId);\r\n  const updatedInsights = insights.map(insight =>\r\n    insight.id === id ? { ...insight, userNote } : insight\r\n  );\r\n  // Save all insights back (the saveInsight method handles updates)\r\n  for (const insight of updatedInsights) {\r\n    if (insight.id === id) {\r\n      await indexedDBStorage.saveInsight(insight, userId);\r\n      break;\r\n    }\r\n  }\r\n}; ","import { format, isToday, isYesterday, differenceInDays, parseISO } from 'date-fns';\n\nexport const formatDate = (date: string | Date): string => {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  \n  if (isToday(dateObj)) {\n    return 'Today';\n  } else if (isYesterday(dateObj)) {\n    return 'Yesterday';\n  } else {\n    return format(dateObj, 'MMM d, yyyy');\n  }\n};\n\nexport const getTimeFromDate = (date: string | Date | number): string => {\n  const dateObj = typeof date === 'number' \n    ? new Date(date) \n    : typeof date === 'string' \n      ? new Date(date) \n      : date;\n  \n  return format(dateObj, 'h:mm a');\n};\n\nexport const getCurrentDateString = (): string => {\n  return format(new Date(), 'yyyy-MM-dd');\n};\n\nexport const calculateStreakDays = (startDate: string | null, lastCheckIn: string | null): number => {\n  if (!startDate || !lastCheckIn) return 0;\n  \n  const start = parseISO(startDate);\n  const lastCheck = parseISO(lastCheckIn);\n  const today = new Date();\n  \n  // If last check-in was more than 1 day ago, streak is broken\n  if (differenceInDays(today, lastCheck) > 1) {\n    return 0;\n  }\n  \n  return differenceInDays(lastCheck, start) + 1;\n};\n\n// Calculate the current streak from an array of check-in dates\nexport function calculateCurrentStreakFromCheckIns(checkInDates: string[]): number {\n  if (!checkInDates || checkInDates.length === 0) return 0;\n  // Remove duplicates and sort dates descending\n  const uniqueDates = Array.from(new Set(checkInDates.map(d => d.slice(0, 10)))).sort((a, b) => new Date(b).getTime() - new Date(a).getTime());\n  const today = new Date();\n  let streak = 0;\n  let current = new Date(uniqueDates[0]);\n  let i = 0;\n\n  // If the most recent check-in is today or yesterday, start streak\n  const isToday = uniqueDates[0] === today.toISOString().slice(0, 10);\n  const isYesterday = uniqueDates[0] === new Date(today.getTime() - 86400000).toISOString().slice(0, 10);\n  if (!isToday && !isYesterday) return 0;\n\n  while (i < uniqueDates.length) {\n    const expected = new Date(today.getTime() - streak * 86400000).toISOString().slice(0, 10);\n    if (uniqueDates[i] === expected) {\n      streak++;\n      i++;\n    } else {\n      break;\n    }\n  }\n  return streak;\n}","// Simple mock of uuid function\r\nexport const v4 = (): string => {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n    const r = Math.random() * 16 | 0;\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n};\r\n\r\n// Welcome messages for the AI chat\r\nexport const getWelcomeMessage = (): string => {\r\n  const welcomeMessages = [\r\n    \"Hey there, I'm Soberi. Think of me as a friend who's got your back on this journey. No pressure, just a safe space to share what's on your mind. What's up?\",\r\n    \"Hi, I'm Soberi. I'm here to listen without judgment, whether you're celebrating a win or navigating a tough spot. Feel free to share anything  what's going on today?\",\r\n    \"Welcome! I'm Soberi, your companion for this recovery path. Just a heads up, I'm here to support you, not to sound like a textbook. So, what's on your mind?\"\r\n  ];\r\n\r\n  return welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];\r\n};\r\n\r\n// Crisis response for users reporting extreme cravings or distress\r\nexport const getCrisisResponse = (craving: string): string => {\r\n  const immediateStrategies = [\r\n    \"Take 5 deep breaths, inhaling for 4 counts and exhaling for 6. This activates your parasympathetic nervous system to reduce anxiety.\",\r\n    \"Try the 5-4-3-2-1 grounding technique: Name 5 things you can see, 4 things you can touch, 3 things you can hear, 2 things you can smell, and 1 thing you can taste.\",\r\n    \"Put your hands under cold water for 30 seconds or hold an ice cube. This physical sensation can interrupt craving patterns.\",\r\n    \"Call or text someone you trust right now. Real human connection is powerful during intense cravings.\",\r\n    \"Step outside for 5 minutes and focus only on nature or your surroundings. A change of environment can interrupt the craving cycle.\"\r\n  ];\r\n\r\n  const followUpSupport = [\r\n    \"Remember that cravings are temporary - they always pass, even when they feel overwhelming.\",\r\n    \"Your brain is used to the substance and is sending signals, but you are stronger than these signals. They will weaken over time.\",\r\n    \"This moment doesn't define your recovery. Every minute you resist strengthens your recovery muscles.\",\r\n    \"You've overcome cravings before, and you can do it again. Your past strength is evidence of your capability.\",\r\n    \"Physical cravings typically peak for 20-30 minutes before subsiding. Can you delay your decision just until this wave passes?\"\r\n  ];\r\n\r\n  // Personalize based on craving intensity\r\n  let responseIntro = \"\";\r\n  if (craving === \"extreme\") {\r\n    responseIntro = \"I can see you're really struggling right now with intense cravings. This is a critical moment, and I'm here with you. \";\r\n  } else if (craving === \"severe\") {\r\n    responseIntro = \"Severe cravings are really challenging. Thank you for being honest about where you're at. \";\r\n  } else {\r\n    responseIntro = \"I understand you're experiencing cravings right now. \";\r\n  }\r\n\r\n  // Get random immediate strategy and follow-up support\r\n  const strategy = immediateStrategies[Math.floor(Math.random() * immediateStrategies.length)];\r\n  const support = followUpSupport[Math.floor(Math.random() * followUpSupport.length)];\r\n\r\n  return `${responseIntro}First, try this: ${strategy}\\n\\n${support}\\n\\nAfter you try this, come back and let me know if it helped or if you need another strategy. I'm staying right here with you through this.`;\r\n};\r\n\r\n// Enhanced response system for user messages\r\nexport const getMockResponse = (userMessage: string): string => {\r\n  const lowerMessage = userMessage.toLowerCase();\r\n\r\n  // Check for crisis/relapse situations first - highest priority\r\n  if (lowerMessage.includes('relapse') ||\r\n    lowerMessage.includes('i used') ||\r\n    lowerMessage.includes('i slipped') ||\r\n    lowerMessage.includes('i failed')) {\r\n    return \"Thank you for your honesty - that takes real courage. Relapse is often part of recovery, not the end of it. What matters most is what you do right now.\\n\\nFirst, be gentle with yourself. Shame doesn't help recovery, but self-compassion does.\\n\\nSecond, try to understand what led to this moment. Was there a trigger, emotion, person, or situation that contributed?\\n\\nYou haven't lost all your progress. Everything you've learned about staying sober is still with you. Would you like to talk about what happened, or would you prefer to focus on your plan for the next 24 hours?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('craving') ||\r\n    lowerMessage.includes('want to use') ||\r\n    lowerMessage.includes('urge') ||\r\n    lowerMessage.includes('tempted')) {\r\n    // Determine craving intensity\r\n    let cravingLevel = \"moderate\";\r\n    if (lowerMessage.includes('extreme') ||\r\n      lowerMessage.includes('unbearable') ||\r\n      lowerMessage.includes('worst') ||\r\n      lowerMessage.includes('can\\'t take')) {\r\n      cravingLevel = \"extreme\";\r\n    } else if (lowerMessage.includes('severe') ||\r\n      lowerMessage.includes('strong') ||\r\n      lowerMessage.includes('really bad')) {\r\n      cravingLevel = \"severe\";\r\n    }\r\n\r\n    return getCrisisResponse(cravingLevel);\r\n  }\r\n\r\n  // Check for suicidal ideation or severe mental health crisis\r\n  if (lowerMessage.includes('kill myself') ||\r\n    lowerMessage.includes('suicide') ||\r\n    lowerMessage.includes('end my life') ||\r\n    lowerMessage.includes('don\\'t want to live')) {\r\n    return \"I'm concerned about what you're sharing, and I want to make sure you get the support you need. If you're having thoughts of harming yourself, please reach out to a crisis helpline where trained professionals can help:\\n\\n National Suicide Prevention Lifeline: 988 or 1-800-273-8255\\n Crisis Text Line: Text HOME to 741741\\n\\nThese services are confidential and available 24/7. Would you like to talk more about what you're feeling? I'm here to listen without judgment.\";\r\n  }\r\n\r\n  // Regular conversation flows\r\n  if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {\r\n    return \"Hi there! I'm Soberi, your recovery companion. I'm here to support you through both challenges and victories. How are you feeling today? Remember, I'm here to listen without judgment whenever you need to talk.\";\r\n  }\r\n\r\n  if (lowerMessage.includes('purpose') || lowerMessage.includes('meaning') || lowerMessage.includes('what\\'s the point')) {\r\n    return \"Finding purpose during recovery is one of the most important - and challenging - parts of the journey. When substances are gone, there can be an emptiness that needs to be filled with something meaningful.\\n\\nMany people in recovery find purpose through:\\n\\n1. Helping others who are struggling\\n2. Reconnecting with passions they had before addiction\\n3. Discovering completely new interests\\n4. Building deeper connections with loved ones\\n5. Creating something (art, writing, projects)\\n\\nIt's normal to feel a lack of direction at first. Purpose usually emerges gradually as you build a life that aligns with your authentic values. What activities made you feel fulfilled or engaged before your addiction began?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('bad') || lowerMessage.includes('sad') || lowerMessage.includes('depressed') || lowerMessage.includes('awful')) {\r\n    return \"I'm sorry to hear you're going through a difficult time. These feelings are a normal part of recovery and life - they don't mean you're failing or doing something wrong.\\n\\nA critical thing to understand about recovery: it often feels worse before it feels better. When we remove substances, we face emotions we've been numbing, and our brain chemistry needs time to rebalance.\\n\\nThis difficult period isn't a sign that recovery isn't working - it's actually evidence that you're healing. You're finally processing emotions instead of escaping them.\\n\\nIs there a specific part of what you're feeling that's most difficult right now?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('feeling worse') || lowerMessage.includes('not getting better') || lowerMessage.includes('why bother')) {\r\n    return \"What you're experiencing is actually a normal part of the recovery process. When we stop numbing our emotions with substances, we often feel worse initially as our brain chemistry adjusts and we face feelings we've been avoiding.\\n\\nThis phenomenon is sometimes called 'the wall' or 'the valley' in recovery - it's a difficult period many people experience where emotional discomfort increases before it gets better.\\n\\nThe key thing to understand is that this isn't a sign that recovery isn't working - it's actually evidence that you're truly healing. You're doing the hard work of processing emotions rather than escaping them.\\n\\nMost people who persist through this challenging phase report that eventually, their emotional resilience grows stronger than it was before addiction. Your brain is rewiring itself, and that takes time. Would it be helpful to discuss some strategies for navigating this difficult period?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('good') || lowerMessage.includes('great') || lowerMessage.includes('happy') || lowerMessage.includes('better')) {\r\n    return \"That's wonderful to hear! These positive moments are so valuable for your recovery journey. When you're feeling good, it's a perfect time to reinforce your commitment and remember why sobriety matters to you.\\n\\nCan you identify what contributed to this positive feeling? Understanding what brings you joy and stability can help you intentionally build more of these elements into your daily life. Also, consider capturing this moment in your journal so you can look back on it during more challenging times.\";\r\n  }\r\n\r\n  if (lowerMessage.includes('trigger') || lowerMessage.includes('temptation') || lowerMessage.includes('risk')) {\r\n    return \"Identifying your triggers is an important part of recovery. Each time you recognize a trigger, you're building self-awareness that strengthens your ability to stay sober.\\n\\nFor this specific trigger, let's break it down:\\n\\n1. Is it a person, place, emotion, or situation?\\n2. What early warning signs might tell you this trigger is present?\\n3. What's one specific strategy you could use when you encounter it?\\n\\nHaving a detailed plan for each trigger can transform it from a dangerous threat into a manageable challenge.\";\r\n  }\r\n\r\n  if (lowerMessage.includes('help') || lowerMessage.includes('how can you')) {\r\n    return \"I'm here to support your recovery journey in several ways:\\n\\n Daily conversation and emotional support without judgment\\n Help tracking your progress and celebrating milestones\\n A space to process difficult emotions and cravings\\n Structure for your day through suggested tasks and activities\\n Reminders of your strengths and reasons for recovery\\n Strategies for handling triggers and challenging situations\\n\\nWhat would be most helpful for you right now? I'm here to listen, reflect, or provide specific coping strategies if you're facing a particular challenge.\";\r\n  }\r\n\r\n  if (lowerMessage.includes('lonely') || lowerMessage.includes('alone') || lowerMessage.includes('isolated')) {\r\n    return \"Recovery can sometimes feel lonely, especially if you've had to distance yourself from people associated with your addiction. This feeling is common but temporary as you build new connections.\\n\\nHave you considered reaching out to a recovery community? Groups like AA, NA, SMART Recovery, or online forums can provide understanding from people who truly get what you're experiencing. Even one connection with someone who understands can significantly reduce feelings of isolation.\\n\\nWhat small step could you take today to feel more connected?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('tired') || lowerMessage.includes('exhausted') || lowerMessage.includes('no energy')) {\r\n    return \"Recovery takes a lot of energy, especially in the early stages when your body and mind are healing. Feeling tired is completely normal.\\n\\nA few things that might help:\\n\\n Prioritize sleep hygiene - consistent bedtime, dark room, no screens before bed\\n Stay hydrated and eat regular meals with protein\\n Consider gentle movement like walking or stretching\\n Give yourself permission to rest - recovery is hard work\\n\\nYour energy levels will likely improve as your body heals, but be patient with yourself during this process.\";\r\n  }\r\n\r\n  if (lowerMessage.includes('why quit') || lowerMessage.includes('why stop') || lowerMessage.includes('not worth it')) {\r\n    return \"It's completely normal to question your recovery journey sometimes, especially during challenging moments. Your brain might try to convince you that using again would be easier or more enjoyable.\\n\\nRecovery isn't about feeling good right away - it's about healing so you can eventually feel genuine emotions again, build authentic relationships, and live with integrity. The difficult feelings you're experiencing now are part of that healing process.\\n\\nRecovery is hard precisely because it's worthwhile. You're rebuilding your neurological pathways, your emotional resilience, and your sense of self. This deep work often feels worse before it feels better.\\n\\nWhat specific aspect of recovery is feeling most challenging for you right now?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('structure') || lowerMessage.includes('routine') || lowerMessage.includes('bored') || lowerMessage.includes('tasks')) {\r\n    return \"Creating structure is crucial in recovery - it fills the time previously spent using or obtaining substances, and builds a foundation for your new life.\\n\\nI've added some suggested tasks in your Tasks tab based on your recovery stage. These include self-care activities, social connections, and productive tasks that can help rebuild confidence and purpose.\\n\\nEstablishing a consistent daily routine can significantly reduce cravings by minimizing decision fatigue and providing a sense of accomplishment. What part of your day currently feels most unstructured or challenging?\";\r\n  }\r\n\r\n  if (lowerMessage.includes('no motivation') || lowerMessage.includes('can\\'t do anything') || lowerMessage.includes('what\\'s the point')) {\r\n    return \"Motivation is especially difficult in early recovery because your brain's reward system is recalibrating. What you're experiencing isn't laziness - it's a neurological process as your brain learns to find reward and meaning without substances.\\n\\nRather than waiting for motivation to appear, try starting with very small actions. Even completing one 5-minute task can build momentum. The structure in your Tasks tab is designed to help with exactly this challenge.\\n\\nAlso remember that motivation often follows action, not the other way around. Many people find that starting a task, even reluctantly, often leads to natural motivation once they're engaged.\\n\\nWhat's one tiny step you could take in the next hour that would feel like progress?\";\r\n  }\r\n\r\n  // Default response for other messages - more personalized than the original\r\n  return \"Gotcha. Thanks for sharing that. Seriously, just talking about this stuff is a big step. I'm Soberi, by the way  think of me as your no-bs companion on this ride. I'm not about textbook answers, just real talk and support. So, what's really on your mind, or what feels like the next step for you today? No judgment here, just a space to figure things out.\";\r\n};\r\n\r\n// Mood-based responses for check-ins\r\nexport const getMockResponseBasedOnMood = (mood: string, cravingLevel: string = \"none\", streak: number = 0): string => {\r\n  // Crisis intervention for high craving levels\r\n  if (cravingLevel === \"extreme\" || cravingLevel === \"severe\") {\r\n    return getCrisisResponse(cravingLevel);\r\n  }\r\n\r\n  const responses = {\r\n    great: [\r\n      \"That's wonderful to hear! These positive days are building blocks for your recovery. What's one thing that contributed to your great mood today that you could intentionally incorporate more often?\",\r\n      \"I'm so happy for you! Days like this are evidence of your progress. Consider writing a quick note to your future self about how good this feels - it can be powerful to read during harder days.\",\r\n      \"Fantastic! Your brain is creating new pathways and associations with sobriety. Each positive day reinforces that you can feel good without substances. What healthy activities brought you joy today?\"\r\n    ],\r\n    good: [\r\n      \"I'm glad you're having a good day! These stable, positive days are the foundation of lasting recovery. What's one small thing you did today that supported your wellbeing?\",\r\n      \"That's great to hear. As you string together good days, you're building evidence that you can handle life's challenges without substances. What's a healthy coping strategy that worked well for you recently?\",\r\n      \"Good days are worth celebrating in recovery. Your brain is learning that you can experience positive emotions without substances. What's something you're looking forward to tomorrow?\"\r\n    ],\r\n    neutral: [\r\n      \"Neutral days are an important part of recovery too - learning to be okay with ordinary moments without seeking artificial highs or escaping discomfort. How are you taking care of yourself today?\",\r\n      \"Thanks for checking in. Even on neutral days, you're still making progress by staying committed to your recovery. Is there one small positive action you could take to nurture yourself today?\",\r\n      \"Neutral days are completely normal and healthy. Recovery isn't always about feeling amazing - it's also about developing comfort with the full range of human emotions. What's one small win you can acknowledge today?\"\r\n    ],\r\n    bad: [\r\n      \"I'm sorry you're having a difficult day. Challenging emotions are part of recovery and life - the difference now is that you're developing the strength to face them without substances. What's one small thing that might help you feel a bit better right now?\",\r\n      \"Tough days are part of the journey. Remember that you've gotten through difficult days before, and you'll get through this one too. Could you try one small self-care activity in the next hour?\",\r\n      \"I hear that today is difficult. These moments are when your recovery muscles grow stronger. Rather than escaping the discomfort, you're developing the ability to sit with it. What's one healthy coping strategy you could try right now?\"\r\n    ],\r\n    terrible: [\r\n      \"I'm really sorry you're feeling this way. These intensely difficult moments are temporary, even when they don't feel that way. Your priority right now is just getting through the next few hours with gentleness toward yourself. Would it help to reach out to someone in your support network?\",\r\n      \"When things feel this overwhelming, focus on the basics: Are you hydrated? Have you eaten? Could you step outside for 10 minutes? Sometimes our physical state intensifies our emotional distress. What's one tiny step you could take to care for yourself right now?\",\r\n      \"I'm here with you through this incredibly hard time. Recovery has peaks and valleys, and this difficult moment doesn't erase your progress. Can you think of one time in the past when you felt terrible but got through it? That same strength is still within you.\"\r\n    ]\r\n  };\r\n\r\n  // Early recovery messaging (0-30 days)\r\n  if (streak < 30) {\r\n    if (mood === 'bad' || mood === 'terrible') {\r\n      return `${responses[mood as keyof typeof responses][Math.floor(Math.random() * responses[mood as keyof typeof responses].length)]}\\n\\nIt's normal for things to feel worse before they feel better in early recovery. Your brain chemistry is adjusting, and you're facing emotions you may have been numbing. This difficult period isn't a sign that recovery isn't working - it's actually evidence that you're healing. The discomfort you're feeling is temporary, but the strength you're building will last.`;\r\n    }\r\n  }\r\n\r\n  // Add craving-specific content for moderate cravings\r\n  if (cravingLevel === \"moderate\") {\r\n    return `${responses[mood as keyof typeof responses][Math.floor(Math.random() * responses[mood as keyof typeof responses].length)]}\\n\\nI notice you're experiencing moderate cravings today. Remember that cravings are temporary and will pass. Try drinking a large glass of water, taking a 10-minute walk, or calling a supportive friend to help ride out this wave.`;\r\n  } else if (cravingLevel === \"mild\") {\r\n    return `${responses[mood as keyof typeof responses][Math.floor(Math.random() * responses[mood as keyof typeof responses].length)]}\\n\\nI see you're having mild cravings today. That's normal in recovery, and noticing them is a sign of your growing self-awareness. Consider it a reminder to practice extra self-care today.`;\r\n  }\r\n\r\n  return responses[mood as keyof typeof responses][Math.floor(Math.random() * responses[mood as keyof typeof responses].length)];\r\n};\r\n\r\n// Generate emotional insights for users\r\nexport const getEmotionalInsight = (mood: string, cravingLevel: string, streak: number): string | null => {\r\n  // Early recovery insights (0-30 days)\r\n  if (streak < 30) {\r\n    if (mood === 'bad' || mood === 'terrible') {\r\n      return \"Early recovery often feels worse before it feels better. Your brain is healing and learning to process emotions without substances. This discomfort is evidence of healing, not failure.\";\r\n    }\r\n\r\n    if (cravingLevel === 'severe' || cravingLevel === 'extreme') {\r\n      return \"Strong cravings in early recovery are normal and don't mean you're doing something wrong. Each time you resist, you're building new neural pathways that will eventually make recovery easier.\";\r\n    }\r\n\r\n    return \"The early days of recovery are often the hardest. Your brain and body are adjusting to functioning without substances. Be patient with yourself - you're doing something incredibly difficult.\";\r\n  }\r\n\r\n  // Medium-term recovery insights (30-90 days)\r\n  if (streak >= 30 && streak < 90) {\r\n    if (mood === 'good' || mood === 'great') {\r\n      return \"You're experiencing what many call the 'pink cloud' - a period of optimism and positive feelings as your body heals. Enjoy these good feelings while preparing for the natural emotional fluctuations that are part of recovery.\";\r\n    }\r\n\r\n    if (cravingLevel === 'mild' || cravingLevel === 'moderate') {\r\n      return \"As recovery progresses, cravings often become less frequent but can still be triggered by specific people, places, or emotions. Your growing self-awareness is a powerful recovery tool.\";\r\n    }\r\n\r\n    return \"At this stage of recovery, many people begin to face the underlying issues that contributed to their addiction. This deeper emotional work can be challenging but leads to lasting healing.\";\r\n  }\r\n\r\n  // Longer-term recovery insights (90+ days)\r\n  if (streak >= 90) {\r\n    return \"Long-term recovery isn't just about not using substances - it's about building a meaningful life where substances aren't needed. Your ongoing commitment to this process is remarkable.\";\r\n  }\r\n\r\n  // General insights that apply to any stage\r\n  const generalInsights = [\r\n    \"Recovery isn't about feeling good all the time - it's about feeling everything authentically and developing healthier responses to life's challenges.\",\r\n    \"The purpose of recovery isn't just abstinence, but building a life where substances aren't needed to cope or find meaning.\",\r\n    \"Emotions are like waves - they rise, peak, and eventually subside. Learning to ride these waves without substances is a core recovery skill.\"\r\n  ];\r\n\r\n  return generalInsights[Math.floor(Math.random() * generalInsights.length)];\r\n};\r\n\r\n// Generate suggested tasks based on recovery stage and categories\r\nexport const getRecoveryTask = (category: string, recoveryDays: number): { title: string, description: string, timeEstimate?: number } => {\r\n  const earlyRecoveryTasks = {\r\n    'self-care': [\r\n      {\r\n        title: \"Practice 5-minute mindfulness\",\r\n        description: \"Sit quietly and focus on your breath for just 5 minutes. Notice when your mind wanders and gently return to your breathing.\",\r\n        timeEstimate: 5\r\n      },\r\n      {\r\n        title: \"Take a hot shower or bath\",\r\n        description: \"Use this time to practice being present with physical sensations rather than caught in thoughts.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Drink water throughout the day\",\r\n        description: \"Set a goal to drink at least 64oz of water today. Proper hydration supports brain function and physical healing.\",\r\n        timeEstimate: 5\r\n      }\r\n    ],\r\n    'physical': [\r\n      {\r\n        title: \"Go for a 10-minute walk\",\r\n        description: \"Even brief exercise releases endorphins that can reduce cravings and improve mood.\",\r\n        timeEstimate: 10\r\n      },\r\n      {\r\n        title: \"Stretch for 5 minutes\",\r\n        description: \"Simple stretching can reduce physical tension that might be triggering cravings or negative emotions.\",\r\n        timeEstimate: 5\r\n      },\r\n      {\r\n        title: \"Get 30 minutes of sunlight\",\r\n        description: \"Sunlight exposure helps regulate your body's natural rhythm and improves vitamin D production, both helpful for mood.\",\r\n        timeEstimate: 30\r\n      }\r\n    ],\r\n    'social': [\r\n      {\r\n        title: \"Text one supportive person\",\r\n        description: \"Send a message to someone who knows about and supports your recovery. Even brief connection helps.\",\r\n        timeEstimate: 5\r\n      },\r\n      {\r\n        title: \"Identify recovery meeting options\",\r\n        description: \"Find three in-person or online recovery meetings you could potentially attend this week.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Practice saying no\",\r\n        description: \"Write down and practice three different ways to decline if someone offers you substances.\",\r\n        timeEstimate: 15\r\n      }\r\n    ],\r\n    'productive': [\r\n      {\r\n        title: \"Clean one small space\",\r\n        description: \"Choose a drawer, shelf, or surface and organize it completely. Small accomplishments build confidence.\",\r\n        timeEstimate: 15\r\n      },\r\n      {\r\n        title: \"Make your bed\",\r\n        description: \"This simple act of order can provide a sense of accomplishment first thing in the morning.\",\r\n        timeEstimate: 5\r\n      },\r\n      {\r\n        title: \"Create a daily schedule\",\r\n        description: \"Plan tomorrow's activities hour by hour to provide structure and reduce decision fatigue.\",\r\n        timeEstimate: 20\r\n      }\r\n    ],\r\n    'recovery': [\r\n      {\r\n        title: \"Write down 3 triggers\",\r\n        description: \"Identify three specific situations, emotions, or people that trigger cravings for you.\",\r\n        timeEstimate: 15\r\n      },\r\n      {\r\n        title: \"List your reasons for recovery\",\r\n        description: \"Write down at least 5 specific reasons why you want to maintain your sobriety.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Create a crisis card\",\r\n        description: \"Write down 3 people you can call and 3 actions you can take when experiencing severe cravings.\",\r\n        timeEstimate: 15\r\n      }\r\n    ]\r\n  };\r\n\r\n  const midRecoveryTasks = {\r\n    'self-care': [\r\n      {\r\n        title: \"Practice 15-minute meditation\",\r\n        description: \"Extend your mindfulness practice to 15 minutes, focusing on acceptance of thoughts and feelings.\",\r\n        timeEstimate: 15\r\n      },\r\n      {\r\n        title: \"Identify one boundary to set\",\r\n        description: \"Reflect on a relationship or situation where you need to establish or reinforce a healthy boundary.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Create a sleep routine\",\r\n        description: \"Establish a consistent bedtime ritual to improve sleep quality, which supports recovery.\",\r\n        timeEstimate: 30\r\n      }\r\n    ],\r\n    'physical': [\r\n      {\r\n        title: \"30-minute exercise session\",\r\n        description: \"Choose any physical activity you enjoy and engage in it for at least 30 minutes.\",\r\n        timeEstimate: 30\r\n      },\r\n      {\r\n        title: \"Prepare a nutritious meal\",\r\n        description: \"Cook a balanced meal with protein, complex carbs, and vegetables to support brain healing.\",\r\n        timeEstimate: 45\r\n      },\r\n      {\r\n        title: \"Check in with your body\",\r\n        description: \"Do a full body scan and note any physical sensations, tension, or discomfort without judgment.\",\r\n        timeEstimate: 10\r\n      }\r\n    ],\r\n    'social': [\r\n      {\r\n        title: \"Attend a recovery meeting\",\r\n        description: \"Participate in an in-person or online recovery support meeting of your choice.\",\r\n        timeEstimate: 60\r\n      },\r\n      {\r\n        title: \"Have a substance-free social interaction\",\r\n        description: \"Connect with someone in a setting that doesn't involve substances (coffee, walk, activity).\",\r\n        timeEstimate: 60\r\n      },\r\n      {\r\n        title: \"Practice sharing feelings\",\r\n        description: \"Have a conversation where you honestly share how your recovery is going with someone you trust.\",\r\n        timeEstimate: 30\r\n      }\r\n    ],\r\n    'productive': [\r\n      {\r\n        title: \"Set one small goal for the week\",\r\n        description: \"Choose one achievable objective related to work, home, or personal development.\",\r\n        timeEstimate: 15\r\n      },\r\n      {\r\n        title: \"Learn something new for 20 minutes\",\r\n        description: \"Spend time reading, watching educational content, or practicing a new skill.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Complete one postponed task\",\r\n        description: \"Choose one task you've been avoiding and complete it to reduce background stress.\",\r\n        timeEstimate: 30\r\n      }\r\n    ],\r\n    'recovery': [\r\n      {\r\n        title: \"Identify a recurring thought pattern\",\r\n        description: \"Notice and write down a thought pattern that often precedes cravings or negative emotions.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Practice a new coping strategy\",\r\n        description: \"Choose and try a coping technique you haven't used before from the Coping Skills library.\",\r\n        timeEstimate: 30\r\n      },\r\n      {\r\n        title: \"Reflect on recovery progress\",\r\n        description: \"Write about how your relationship with substances has changed since beginning recovery.\",\r\n        timeEstimate: 25\r\n      }\r\n    ]\r\n  };\r\n\r\n  const advancedRecoveryTasks = {\r\n    'self-care': [\r\n      {\r\n        title: \"Explore personal values\",\r\n        description: \"Identify 3-5 core values that are important to you now and how recovery helps honor them.\",\r\n        timeEstimate: 30\r\n      },\r\n      {\r\n        title: \"Practice self-compassion meditation\",\r\n        description: \"Do a guided self-compassion meditation focused on extending kindness to yourself.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Create a wellness plan\",\r\n        description: \"Develop a written plan that addresses physical, emotional, social and spiritual well-being.\",\r\n        timeEstimate: 45\r\n      }\r\n    ],\r\n    'physical': [\r\n      {\r\n        title: \"Try a new physical activity\",\r\n        description: \"Experiment with a form of movement you haven't tried before or haven't done recently.\",\r\n        timeEstimate: 45\r\n      },\r\n      {\r\n        title: \"Complete a fitness challenge\",\r\n        description: \"Set a specific, measurable physical goal and complete it (specific number of reps, distance, etc).\",\r\n        timeEstimate: 40\r\n      },\r\n      {\r\n        title: \"Practice progressive relaxation\",\r\n        description: \"Systematically tense and relax each muscle group to release physical tension.\",\r\n        timeEstimate: 20\r\n      }\r\n    ],\r\n    'social': [\r\n      {\r\n        title: \"Reach out to support someone else\",\r\n        description: \"Contact someone else in recovery and offer encouragement or assistance.\",\r\n        timeEstimate: 20\r\n      },\r\n      {\r\n        title: \"Share your recovery story\",\r\n        description: \"Consider sharing some aspect of your journey with someone who might benefit from hearing it.\",\r\n        timeEstimate: 30\r\n      },\r\n      {\r\n        title: \"Expand your social circle\",\r\n        description: \"Identify one new social opportunity that aligns with your interests and values.\",\r\n        timeEstimate: 60\r\n      }\r\n    ],\r\n    'productive': [\r\n      {\r\n        title: \"Work on a meaningful project\",\r\n        description: \"Spend time on a project that gives you a sense of purpose and accomplishment.\",\r\n        timeEstimate: 60\r\n      },\r\n      {\r\n        title: \"Organize digital or physical spaces\",\r\n        description: \"Clear clutter from your email, files, or physical spaces to reduce background stress.\",\r\n        timeEstimate: 45\r\n      },\r\n      {\r\n        title: \"Research a topic of interest\",\r\n        description: \"Explore a subject you're curious about through reading, listening, or watching content.\",\r\n        timeEstimate: 40\r\n      }\r\n    ],\r\n    'recovery': [\r\n      {\r\n        title: \"Create a relapse prevention plan\",\r\n        description: \"Develop a detailed written plan for handling high-risk situations and warning signs.\",\r\n        timeEstimate: 60\r\n      },\r\n      {\r\n        title: \"Practice a difficult conversation\",\r\n        description: \"Write out or role play a challenging conversation related to your recovery.\",\r\n        timeEstimate: 30\r\n      },\r\n      {\r\n        title: \"Review and update recovery goals\",\r\n        description: \"Reflect on your initial recovery goals and adjust them based on what you've learned.\",\r\n        timeEstimate: 45\r\n      }\r\n    ]\r\n  };\r\n\r\n  let taskPool;\r\n\r\n  if (recoveryDays < 30) {\r\n    // Early recovery - focus on basics and immediate coping\r\n    taskPool = earlyRecoveryTasks[category as keyof typeof earlyRecoveryTasks];\r\n  } else if (recoveryDays < 90) {\r\n    // Mid recovery - more skill building and routine establishment\r\n    taskPool = midRecoveryTasks[category as keyof typeof midRecoveryTasks];\r\n  } else {\r\n    // Advanced recovery - identity development and deeper work\r\n    taskPool = advancedRecoveryTasks[category as keyof typeof advancedRecoveryTasks];\r\n  }\r\n\r\n  // Select a random task from the appropriate category and recovery stage\r\n  return taskPool[Math.floor(Math.random() * taskPool.length)];\r\n};\r\n","// Simple analytics utility to track user interactions\n// In a production app, you would replace this with a proper analytics service\n\n// Event types\nexport type EventType =\n  | 'page_view'\n  | 'chat_message_sent'\n  | 'check_in_completed'\n  | 'journal_entry_created'\n  | 'relapse_recorded'\n  | 'streak_milestone'\n  | 'trigger_log_created' // Added\n  | 'task_created'        // Added\n  | 'task_completed';     // Added\n\n// Event properties\nexport interface EventProperties {\n  [key: string]: string | number | boolean | null | undefined;\n}\n\ninterface StoredEventData extends EventProperties {\n  event: EventType;\n  timestamp: string;\n  sessionId: string;\n}\n\nclass AnalyticsService {\n  private enabled: boolean = true;\n\n  constructor() {\n    // Check if analytics should be disabled (e.g. user opt-out)\n    const analyticsDisabled = localStorage.getItem('Soberi_analytics_disabled') === 'true';\n    this.enabled = !analyticsDisabled;\n\n    // Initialize session\n    this.trackEvent('page_view', {\n      path: window.location.pathname,\n      referrer: document.referrer || 'direct',\n    });\n  }\n\n  // Track an event\n  trackEvent(eventType: EventType, properties: EventProperties = {}): void {\n    if (!this.enabled) return;\n\n    // Add timestamp and session ID\n    const eventData = {\n      event: eventType,\n      timestamp: new Date().toISOString(),\n      sessionId: this.getSessionId(),\n      ...properties\n    };\n\n    // Log the event (in production, send to server)\n    console.log('[Analytics]', eventData);\n\n    // Store locally for debugging/development\n    this.storeEvent(eventData);\n  }\n\n  // Opt out of analytics\n  optOut(): void {\n    this.enabled = false;\n    localStorage.setItem('Soberi_analytics_disabled', 'true');\n  }\n\n  // Opt in to analytics\n  optIn(): void {\n    this.enabled = true;\n    localStorage.removeItem('Soberi_analytics_disabled');\n  }\n\n  // Get or create a session ID\n  private getSessionId(): string {\n    let sessionId = sessionStorage.getItem('Soberi_session_id');\n    if (!sessionId) {\n      sessionId = crypto.randomUUID ? crypto.randomUUID() : this.generateSimpleId();\n      sessionStorage.setItem('Soberi_session_id', sessionId);\n    }\n    return sessionId;\n  }\n\n  // Generate a simple ID as fallback\n  private generateSimpleId(): string {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  // Store event in local storage for debugging\n  private storeEvent(eventData: StoredEventData): void {\n    try {\n      const events: StoredEventData[] = JSON.parse(localStorage.getItem('Soberi_analytics_events') || '[]');\n      events.push(eventData);\n\n      // Keep only last 100 events to avoid storage issues\n      if (events.length > 100) {\n        events.shift();\n      }\n\n      localStorage.setItem('Soberi_analytics_events', JSON.stringify(events));\n    } catch (error) {\n      console.error('Failed to store analytics event:', error);\n    }\n  }\n}\n\n// Create a singleton instance\nexport const analytics = new AnalyticsService();\n\n// Export default instance\nexport default analytics;\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { DailyCheckIn, JournalEntry, Message, UserProgress, TriggerLog, Task, EmotionalInsight, MemoryEntry, ConversationSummary } from '../types';\nimport { encryptData, decryptData } from './cryptoUtils';\n\nconst STORAGE_KEYS = {\n  CHECKINS: 'Soberi_checkins',\n  JOURNAL: 'Soberi_journal',\n  MESSAGES: 'Soberi_messages',\n  PROGRESS: 'Soberi_progress',\n  TRIGGERS: 'Soberi_triggers',\n  TASKS: 'Soberi_tasks',\n  INSIGHTS: 'Soberi_insights',\n  MEMORY: 'Soberi_memory',\n  SUMMARIES: 'Soberi_conversation_summaries',\n};\n\n// Daily Check-ins\nexport const saveCheckIn = (checkIn: DailyCheckIn, userId: string): void => {\n  const checkIns = getCheckIns(userId);\n  const updatedCheckIns = [\n    ...checkIns.filter(c => c.date !== checkIn.date),\n    checkIn\n  ];\n  const encrypted = encryptData(updatedCheckIns, userId);\n  localStorage.setItem(STORAGE_KEYS.CHECKINS, encrypted);\n};\n\nexport const getCheckIns = (userId: string): DailyCheckIn[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.CHECKINS);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt check-ins for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const getCheckInByDate = (date: string): DailyCheckIn | undefined => {\n  const checkIns = getCheckIns();\n  return checkIns.find(c => c.date === date);\n};\n\n// Journal Entries\nexport const saveJournalEntry = (entry: JournalEntry, userId: string): void => {\n  const entries = getJournalEntries(userId);\n  const updatedEntries = [...entries.filter(e => e.id !== entry.id), entry];\n  const encrypted = encryptData(updatedEntries, userId);\n  localStorage.setItem(STORAGE_KEYS.JOURNAL, encrypted);\n};\n\nexport const getJournalEntries = (userId: string): JournalEntry[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.JOURNAL);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt journal entries for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const deleteJournalEntry = (id: string, userId: string): void => {\n  const entries = getJournalEntries(userId);\n  const updatedEntries = entries.filter(e => e.id !== id);\n  const encrypted = encryptData(updatedEntries, userId);\n  localStorage.setItem(STORAGE_KEYS.JOURNAL, encrypted);\n};\n\n// Trigger Logs\nexport const saveTriggerLog = (trigger: TriggerLog, userId: string): void => {\n  const triggers = getTriggerLogs(userId);\n  const updatedTriggers = [...triggers.filter(t => t.id !== trigger.id), trigger];\n  const encrypted = encryptData(updatedTriggers, userId);\n  localStorage.setItem(STORAGE_KEYS.TRIGGERS, encrypted);\n};\n\nexport const getTriggerLogs = (userId: string): TriggerLog[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.TRIGGERS);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt trigger logs for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const deleteTriggerLog = (id: string, userId: string): void => {\n  const triggers = getTriggerLogs(userId);\n  const updatedTriggers = triggers.filter(t => t.id !== id);\n  const encrypted = encryptData(updatedTriggers, userId);\n  localStorage.setItem(STORAGE_KEYS.TRIGGERS, encrypted);\n};\n\n// Tasks\nexport const saveTask = (task: Task, userId: string): void => {\n  const tasks = getTasks(userId);\n  const updatedTasks = [...tasks.filter(t => t.id !== task.id), task];\n  const encrypted = encryptData(updatedTasks, userId);\n  localStorage.setItem(STORAGE_KEYS.TASKS, encrypted);\n};\n\nexport const getTasks = (userId: string): Task[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.TASKS);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt tasks for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const getTasksByDate = (date: string): Task[] => {\n  const tasks = getTasks();\n  return tasks.filter(t => t.date === date);\n};\n\nexport const deleteTask = (id: string, userId: string): void => {\n  const tasks = getTasks(userId);\n  const updatedTasks = tasks.filter(t => t.id !== id);\n  const encrypted = encryptData(updatedTasks, userId);\n  localStorage.setItem(STORAGE_KEYS.TASKS, encrypted);\n};\n\nexport const completeTask = (id: string, userId: string): void => {\n  const tasks = getTasks(userId);\n  const updatedTasks = tasks.map(task =>\n    task.id === id\n      ? { ...task, completed: true, completedAt: new Date().toISOString() }\n      : task\n  );\n  const encrypted = encryptData(updatedTasks, userId);\n  localStorage.setItem(STORAGE_KEYS.TASKS, encrypted);\n};\n\n// Emotional Insights\nexport const saveInsight = (insight: EmotionalInsight, userId: string): void => {\n  const insights = getInsights(userId);\n  const updatedInsights = [...insights.filter(i => i.id !== insight.id), insight];\n  const encrypted = encryptData(updatedInsights, userId);\n  localStorage.setItem(STORAGE_KEYS.INSIGHTS, encrypted);\n};\n\nexport const getInsights = (userId: string): EmotionalInsight[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.INSIGHTS);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt insights for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const markInsightAsShown = (id: string, userId: string): void => {\n  const insights = getInsights(userId);\n  const updatedInsights = insights.map(insight =>\n    insight.id === id ? { ...insight, shown: true } : insight\n  );\n  const encrypted = encryptData(updatedInsights, userId);\n  localStorage.setItem(STORAGE_KEYS.INSIGHTS, encrypted);\n};\n\nexport const updateInsightUserNote = (id: string, userNote: string, userId: string): void => {\n  const insights = getInsights(userId);\n  const updatedInsights = insights.map(insight =>\n    insight.id === id ? { ...insight, userNote } : insight\n  );\n  const encrypted = encryptData(updatedInsights, userId);\n  localStorage.setItem(STORAGE_KEYS.INSIGHTS, encrypted);\n};\n\n// Chat Messages\nexport const saveMessage = (message: Message, userId: string): void => {\n  const messages = getMessages(userId);\n  const updatedMessages = [...messages, message];\n  const encrypted = encryptData(updatedMessages, userId);\n  localStorage.setItem(STORAGE_KEYS.MESSAGES, encrypted);\n};\n\nexport const getMessages = (userId: string): Message[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.MESSAGES);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt messages for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const clearMessages = (): void => {\n  localStorage.setItem(STORAGE_KEYS.MESSAGES, JSON.stringify([]));\n};\n\n// Memory entries\nexport const saveMemoryEntry = (memory: MemoryEntry, userId: string): void => {\n  const memories = getMemoryEntries(userId);\n  const updatedMemories = [...memories.filter(m => m.id !== memory.id), memory];\n  const encrypted = encryptData(updatedMemories, userId);\n  localStorage.setItem(STORAGE_KEYS.MEMORY, encrypted);\n};\n\nexport const getMemoryEntries = (userId: string): MemoryEntry[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.MEMORY);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt memory entries for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const deleteMemoryEntry = (id: string, userId: string): void => {\n  const memories = getMemoryEntries(userId);\n  const updatedMemories = memories.filter(m => m.id !== id);\n  const encrypted = encryptData(updatedMemories, userId);\n  localStorage.setItem(STORAGE_KEYS.MEMORY, encrypted);\n};\n\n// Conversation summaries\nexport const saveConversationSummary = (summary: ConversationSummary, userId: string): void => {\n  const summaries = getConversationSummaries(userId);\n  const updatedSummaries = [...summaries.filter(s => s.id !== summary.id), summary];\n  const encrypted = encryptData(updatedSummaries, userId);\n  localStorage.setItem(STORAGE_KEYS.SUMMARIES, encrypted);\n};\n\nexport const getConversationSummaries = (userId: string): ConversationSummary[] => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.SUMMARIES);\n  if (!encrypted) return [];\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt conversation summaries for user:', userId, error.message);\n    return [];\n  }\n};\n\nexport const deleteConversationSummary = (id: string): void => {\n  const summaries = getConversationSummaries();\n  const updatedSummaries = summaries.filter(s => s.id !== id);\n  localStorage.setItem(STORAGE_KEYS.SUMMARIES, JSON.stringify(updatedSummaries));\n};\n\n// User Progress\nexport const getProgress = (userId: string): UserProgress => {\n  const encrypted = localStorage.getItem(STORAGE_KEYS.PROGRESS);\n  if (!encrypted) {\n    return {\n      currentStreak: 0,\n      longestStreak: 0,\n      startDate: null,\n      lastCheckInDate: null,\n      totalDaysClean: 0,\n      relapseCount: 0,\n      milestones: []\n    };\n  }\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt progress for user:', userId, error.message);\n  return {\n    currentStreak: 0,\n    longestStreak: 0,\n    startDate: null,\n    lastCheckInDate: null,\n    totalDaysClean: 0,\n    relapseCount: 0,\n    milestones: []\n  };\n  }\n};\n\nexport const updateProgress = (progress: Partial<UserProgress>, userId: string): UserProgress => {\n  const currentProgress = getProgress(userId);\n  const updatedProgress = { ...currentProgress, ...progress };\n  const encrypted = encryptData(updatedProgress, userId);\n  localStorage.setItem(STORAGE_KEYS.PROGRESS, encrypted);\n  return updatedProgress;\n};\n\nexport const resetStreak = (): UserProgress => {\n  const progress = getProgress();\n  const updatedProgress = {\n    ...progress,\n    currentStreak: 0,\n    relapseCount: progress.relapseCount + 1,\n  };\n  localStorage.setItem(STORAGE_KEYS.PROGRESS, JSON.stringify(updatedProgress));\n  return updatedProgress;\n};\n\nexport const incrementStreak = (): UserProgress => {\n  const progress = getProgress();\n  const newStreak = progress.currentStreak + 1;\n  const updatedProgress = {\n    ...progress,\n    currentStreak: newStreak,\n    longestStreak: Math.max(newStreak, progress.longestStreak),\n    totalDaysClean: progress.totalDaysClean + 1,\n  };\n  localStorage.setItem(STORAGE_KEYS.PROGRESS, JSON.stringify(updatedProgress));\n  return updatedProgress;\n};\n\n// Utility for encrypting/decrypting the entire app state for Soberiai-storage\nexport const saveAppState = (state: any, userId: string): void => {\n  const encrypted = encryptData(state, userId);\n  localStorage.setItem('Soberiai-storage', encrypted);\n};\n\nexport const getAppState = (userId: string): any => {\n  const encrypted = localStorage.getItem('Soberiai-storage');\n  if (!encrypted) return null;\n  try {\n    return decryptData(encrypted, userId);\n  } catch (error) {\n    console.error('Failed to decrypt app state for user:', userId, error.message);\n    return null;\n  }\n};","// Utility to generate embeddings using OpenAI API\n\nconst EMBEDDING_DIMENSION = 3072; // OpenAI text-embedding-ada-002 dimension\n\n// Validate that an embedding has the correct format\nexport function validateEmbedding(embedding: any): embedding is number[] {\n  return (\n    Array.isArray(embedding) &&\n    embedding.length === EMBEDDING_DIMENSION &&\n    embedding.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val))\n  );\n}\n\nexport async function getOpenAIEmbedding(text: string): Promise<number[]> {\n  const apiKey = import.meta.env.VITE_OPENAI_API_KEY || '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';\n  if (!apiKey) {\n    console.error('OpenAI API key is not set.');\n    return [];\n  }\n\n  // Validate input\n  if (!text || typeof text !== 'string' || text.trim().length === 0) {\n    console.error('Invalid input text for embedding generation');\n    return [];\n  }\n\n  // Truncate text if too long (OpenAI has token limits)\n  const maxLength = 18000; // Conservative limit\n  const truncatedText = text.length > maxLength ? text.substring(0, maxLength) : text;\n\n  try {\n    const response = await fetch('https://api.openai.com/v1/embeddings', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${apiKey}`,\n      },\n      body: JSON.stringify({\n        input: truncatedText,\n        model: 'text-embedding-3-large',\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      console.error('OpenAI embedding error:', error);\n      return [];\n    }\n\n    const data = await response.json();\n    \n    // Validate response structure\n    if (!data || !data.data || !Array.isArray(data.data) || data.data.length === 0) {\n      console.error('Invalid response structure from OpenAI API');\n      return [];\n    }\n\n    const embedding = data.data[0].embedding;\n    \n    // Validate the embedding\n    if (!validateEmbedding(embedding)) {\n      console.error('Invalid embedding format received from OpenAI API');\n      return [];\n    }\n\n    return embedding;\n  } catch (err) {\n    console.error('Failed to fetch OpenAI embedding:', err);\n    return [];\n  }\n}\n\n// Generate a fallback embedding using a simple hash-based approach\n// This is only used when OpenAI API fails\nexport function generateFallbackEmbedding(text: string): number[] {\n  console.warn('Using fallback embedding generation');\n  \n  // Simple hash function\n  let hash = 0;\n  for (let i = 0; i < text.length; i++) {\n    const char = text.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  \n  // Generate deterministic pseudo-random numbers based on hash\n  const embedding = new Array(EMBEDDING_DIMENSION);\n  let seed = Math.abs(hash);\n  \n  for (let i = 0; i < EMBEDDING_DIMENSION; i++) {\n    seed = (seed * 9301 + 49297) % 233280;\n    embedding[i] = (seed / 233280.0) * 2 - 1; // Normalize to [-1, 1]\n  }\n  \n  return embedding;\n}\n\n// Get embedding with fallback\nexport async function getEmbeddingWithFallback(text: string): Promise<number[]> {\n  const embedding = await getOpenAIEmbedding(text);\n  \n  if (embedding.length === 0) {\n    // Use fallback if OpenAI fails\n    return generateFallbackEmbedding(text);\n  }\n  \n  return embedding;\n} ","import { v4 as uuidv4 } from './mockUtils';\nimport { MemoryEntry, MemoryType, Message, ConversationSummary } from '../types';\nimport { getMemoryEntries, getInsights } from './storageUtils';\nimport { getOpenAIEmbedding } from './embeddingUtils';\n\n// Constants\nconst MAX_MEMORIES_TO_RETRIEVE = 5; // Maximum number of memories to retrieve for context\nconst MEMORY_RECENCY_WEIGHT = 0.4; // Weight for recency in memory scoring\nconst MEMORY_IMPORTANCE_WEIGHT = 0.2; // Weight for importance in memory scoring (reduced to balance with other factors)\nconst MEMORY_ACCESS_WEIGHT = 0.2; // Weight for access count in memory scoring\n\n// Helper function to extract important information from user messages\nexport const extractImportantInformation = (message: string): string[] => {\n  const importantPatterns = [\n    // Personal feelings and state\n    /I (?:feel|am feeling) (.*?)(?:\\.|\\?|!|$)/i,\n    /I'm (?:feeling) (.*?)(?:\\.|\\?|!|$)/i,\n\n    // Desires and needs\n    /I (?:want|need|wish) (.*?)(?:\\.|\\?|!|$)/i,\n    /I'm (?:trying to|attempting to) (.*?)(?:\\.|\\?|!|$)/i,\n\n    // Personal history\n    /I (?:used to|would) (.*?)(?:\\.|\\?|!|$)/i,\n    /I've (?:been|had|experienced) (.*?)(?:\\.|\\?|!|$)/i,\n\n    // Personal details and relationships\n    /[Mm]y (?:family|friend|partner|spouse|boyfriend|girlfriend|wife|husband|father|mother|dad|mom|brother|sister|child|son|daughter) (.*?)(?:\\.|\\?|!|$)/i,\n\n    // Preferences\n    /I (?:like|love|enjoy|prefer) (.*?)(?:\\.|\\?|!|$)/i,\n    /I (?:hate|dislike|can't stand|don't like) (.*?)(?:\\.|\\?|!|$)/i,\n\n    // Recovery-specific\n    /I (?:relapsed|slipped|used|took) (.*?)(?:\\.|\\?|!|$)/i,\n    /I've been (?:sober|clean|in recovery) (.*?)(?:\\.|\\?|!|$)/i,\n\n    // Triggers and coping mechanisms\n    /(?:triggers|makes me want to use|makes me crave) (.*?)(?:\\.|\\?|!|$)/i,\n    /(?:helps me|works for me|coping strategy) (.*?)(?:\\.|\\?|!|$)/i,\n  ];\n\n  const insights: string[] = [];\n\n  // Check each pattern and extract matches\n  for (const pattern of importantPatterns) {\n    const matches = message.match(pattern);\n    if (matches && matches.length > 0) {\n      insights.push(matches[0]);\n    }\n  }\n\n  return insights;\n};\n\n// Detect the topics in a message\nexport const detectMessageTopic = (message: string): string[] => {\n  const topicKeywords = {\n    'relapse': ['relapse', 'slip', 'used again', 'fell off', 'back to square one', 'using again', 'took', 'drank'],\n    'craving': ['craving', 'urge', 'want to use', 'tempted', 'thinking about using', 'desire', 'need'],\n    'triggers': ['trigger', 'makes me want', 'when I see', 'around people who', 'reminded', 'places', 'situations'],\n    'emotions': ['feel', 'emotion', 'sad', 'angry', 'happy', 'anxious', 'depressed', 'joy', 'shame', 'guilt'],\n    'recovery': ['sober', 'clean', 'recovery', 'journey', 'path', 'healing', 'sobriety', 'abstinence', 'program'],\n    'relationships': ['friend', 'family', 'partner', 'spouse', 'relationship', 'people', 'support', 'social'],\n    'health': ['sleep', 'eat', 'exercise', 'health', 'physical', 'doctor', 'medication', 'energy', 'fatigue'],\n    'goals': ['goal', 'plan', 'future', 'aim', 'want to', 'trying to', 'hope', 'aspire', 'dream'],\n    'coping': ['cope', 'strategy', 'technique', 'method', 'way to handle', 'deal with', 'manage', 'tool'],\n    'celebration': ['proud', 'achievement', 'milestone', 'celebrate', 'success', 'victory', 'accomplishment'],\n    'challenge': ['difficult', 'hard', 'challenge', 'struggle', 'tough', 'obstacle', 'hurdle', 'problem']\n  };\n\n  const detectedTopics: string[] = [];\n\n  // Check each topic's keywords\n  for (const [topic, keywords] of Object.entries(topicKeywords)) {\n    if (keywords.some(keyword => message.toLowerCase().includes(keyword))) {\n      detectedTopics.push(topic);\n    }\n  }\n\n  return detectedTopics;\n};\n\n// Detect the emotional state from a message\nexport const detectEmotionalState = (message: string): string => {\n  const emotionKeywords = {\n    'joyful': ['happy', 'joy', 'excited', 'thrilled', 'great', 'wonderful', 'fantastic', 'ecstatic', 'pleased'],\n    'sad': ['sad', 'down', 'depressed', 'unhappy', 'miserable', 'blue', 'melancholy', 'heartbroken'],\n    'angry': ['angry', 'mad', 'furious', 'irritated', 'annoyed', 'frustrated', 'rage', 'resent'],\n    'anxious': ['anxious', 'worried', 'nervous', 'scared', 'afraid', 'panic', 'stress', 'tense', 'fear'],\n    'hopeful': ['hope', 'hopeful', 'optimistic', 'looking forward', 'positive', 'encouraged', 'bright'],\n    'ashamed': ['shame', 'ashamed', 'embarrassed', 'guilty', 'regret', 'remorse', 'sorry'],\n    'grateful': ['grateful', 'thankful', 'appreciate', 'blessed', 'fortunate', 'lucky'],\n    'proud': ['proud', 'accomplished', 'satisfied', 'achievement', 'fulfilled'],\n    'neutral': ['okay', 'fine', 'alright', 'neutral', 'so-so', 'meh', 'average']\n  };\n\n  let dominantEmotion = 'neutral';\n  let highestCount = 0;\n\n  // Find the emotion with the most keyword matches\n  for (const [emotion, keywords] of Object.entries(emotionKeywords)) {\n    const count = keywords.filter(keyword =>\n      message.toLowerCase().includes(keyword)\n    ).length;\n\n    if (count > highestCount) {\n      highestCount = count;\n      dominantEmotion = emotion;\n    }\n  }\n\n  return dominantEmotion;\n};\n\n// Create a conversation summary from a set of messages\nexport const createConversationSummary = (messages: Message[]): ConversationSummary => {\n  // Extract all user messages\n  const userMessages = messages.filter(m => m.sender === 'user');\n\n  // Join user messages to analyze them together\n  const combinedUserContent = userMessages.map(m => m.content).join(' ');\n\n  // Detect topics, emotional state, and extract insights\n  const topics = detectMessageTopic(combinedUserContent);\n  const emotionalState = detectEmotionalState(combinedUserContent);\n  const insights = extractImportantInformation(combinedUserContent);\n\n  // Create a summary\n  const messageCount = userMessages.length;\n  const firstTimestamp = Math.min(...messages.map(m => m.timestamp));\n  const lastTimestamp = Math.max(...messages.map(m => m.timestamp));\n\n  const summary = `Conversation with ${messageCount} user messages. \n    User emotional state: ${emotionalState}. \n    Main topics discussed: ${topics.length > 0 ? topics.join(', ') : 'general conversation'}. \n    Duration: ${Math.round((lastTimestamp - firstTimestamp) / 60000)} minutes.`;\n\n  return {\n    id: uuidv4(),\n    date: new Date().toISOString(),\n    summary,\n    messageIds: messages.map(m => m.id),\n    topics,\n    emotionalState,\n    keyInsights: insights\n  };\n};\n\n// Determine if a summary should be created based on message patterns\nexport const shouldCreateSummary = (messages: Message[]): boolean => {\n  // Create a summary every 10 user messages\n  const userMessageCount = messages.filter(m => m.sender === 'user').length;\n  if (userMessageCount > 0 && userMessageCount % 10 === 0) {\n    return true;\n  }\n\n  // Create a summary if there are emotion or topic shifts\n  if (userMessageCount >= 5) {\n    const recentUserMessages = messages.filter(m => m.sender === 'user').slice(-5);\n\n    // Check if there's a significant emotional shift\n    const emotions = new Set(recentUserMessages.map(m => detectEmotionalState(m.content)));\n\n    // Check if there's a topic shift\n    const topics = recentUserMessages.map(m => detectMessageTopic(m.content));\n    const uniqueTopics = new Set(topics.flat());\n\n    // If there are multiple emotions or topics, it might be good to summarize\n    return emotions.size > 2 || uniqueTopics.size > 3;\n  }\n\n  return false;\n};\n\n// Add a validation function for embeddings\nfunction validateAndRepairEmbedding(embedding: number[] | undefined): number[] | undefined {\n  if (!embedding || !Array.isArray(embedding)) return undefined;\n  \n  // Check if embedding has correct length (OpenAI ada-002 should be 1536 dimensions)\n  if (embedding.length !== 1536) {\n    console.warn(`Invalid embedding length: ${embedding.length}, expected 1536`);\n    return undefined;\n  }\n  \n  // Ensure all values are valid numbers\n  const repaired = embedding.map(val => {\n    const num = Number(val);\n    if (isNaN(num) || !isFinite(num)) {\n      console.warn('Invalid number in embedding, replacing with 0');\n      return 0;\n    }\n    return num;\n  });\n  \n  // Check if too many values were invalid\n  const invalidCount = repaired.filter(val => val === 0).length;\n  if (invalidCount > embedding.length * 0.1) { // More than 10% invalid\n    console.warn(`Too many invalid values in embedding: ${invalidCount}/${embedding.length}`);\n    return undefined;\n  }\n  \n  return repaired;\n}\n\n// Add a simple cosine similarity function\nfunction cosineSimilarity(a: number[], b: number[]): number {\n  // Validate inputs\n  if (!a || !b || a.length !== b.length) {\n    console.warn('Invalid inputs for cosine similarity');\n    return 0;\n  }\n  \n  let dot = 0, normA = 0, normB = 0;\n  for (let i = 0; i < a.length; i++) {\n    dot += a[i] * b[i];\n    normA += a[i] * a[i];\n    normB += b[i] * b[i];\n  }\n  \n  // Prevent division by zero\n  if (normA === 0 || normB === 0) return 0;\n  \n  return dot / (Math.sqrt(normA) * Math.sqrt(normB));\n}\n\n// Get relevant memories for the current message (vector search first, fallback to topic-based)\nexport const getRelevantMemories = async (\n  currentMessage: string,\n  count: number = MAX_MEMORIES_TO_RETRIEVE,\n  userId: string\n): Promise<MemoryEntry[]> => {\n  const memories = getMemoryEntries(userId);\n  if (memories.length === 0) return [];\n\n  // Validate and repair embeddings for all memories\n  const memoriesWithValidEmbeddings = memories.map(m => ({\n    ...m,\n    embedding: validateAndRepairEmbedding(m.embedding)\n  }));\n  \n  // Check if we have enough valid embeddings for vector search\n  const validEmbeddingsCount = memoriesWithValidEmbeddings.filter(m => m.embedding !== undefined).length;\n  const useVectorSearch = validEmbeddingsCount >= memories.length * 0.8; // At least 80% have valid embeddings\n  \n  let queryEmbedding: number[] | undefined = undefined;\n\n  if (useVectorSearch) {\n    try {\n      const rawEmbedding = await getOpenAIEmbedding(currentMessage);\n      queryEmbedding = validateAndRepairEmbedding(rawEmbedding);\n    } catch (e) {\n      console.error('Failed to get query embedding:', e);\n      queryEmbedding = undefined;\n    }\n  }\n\n  if (useVectorSearch && queryEmbedding) {\n    // Use cosine similarity for vector search\n    const scored = memoriesWithValidEmbeddings\n      .filter(m => m.embedding !== undefined) // Only include memories with valid embeddings\n      .map(m => ({\n        memory: m,\n        score: cosineSimilarity(queryEmbedding!, m.embedding!)\n      }))\n      .filter(item => item.score > 0); // Filter out zero scores\n      \n    scored.sort((a, b) => b.score - a.score);\n    \n    // If we have enough results from vector search, return them\n    if (scored.length >= count) {\n      return scored.slice(0, count).map(item => {\n        // Update access count and last accessed\n        const memory = item.memory;\n        memory.lastAccessed = Date.now();\n        memory.accessCount = (memory.accessCount || 0) + 1;\n        return memory;\n      });\n    }\n  }\n\n  // Fallback: topic/emotion/recency-based scoring\n  const currentTopics = detectMessageTopic(currentMessage);\n  const currentEmotionalState = detectEmotionalState(currentMessage);\n  const scoredMemories = memoriesWithValidEmbeddings.map(memory => {\n    let score = 0;\n    const memoryTopics = detectMessageTopic(memory.content);\n    const topicIntersection = memoryTopics.filter(topic => currentTopics.includes(topic));\n    score += (topicIntersection.length / Math.max(memoryTopics.length, 1)) * 10;\n    const memoryEmotionalState = detectEmotionalState(memory.content);\n    if (memoryEmotionalState === currentEmotionalState) {\n      score += 5;\n    }\n    score += memory.importance;\n    const ageInDays = (Date.now() - new Date(memory.date).getTime()) / (1000 * 60 * 60 * 24);\n    const recencyScore = Math.max(0, 10 - Math.min(ageInDays, 10));\n    const finalScore =\n      (score * 0.4) +\n      (recencyScore * MEMORY_RECENCY_WEIGHT) +\n      (memory.importance * MEMORY_IMPORTANCE_WEIGHT) +\n      (memory.accessCount * MEMORY_ACCESS_WEIGHT);\n    return { memory, score: finalScore };\n  });\n  scoredMemories.sort((a, b) => b.score - a.score);\n  return scoredMemories.slice(0, count).map(item => item.memory);\n};\n\n// Generate a context prompt from relevant memories\nexport const generateMemoryContextPrompt = async (currentMessage: string, userId: string): Promise<string> => {\n  // Get relevant memories for the current message\n  const relevantMemories = await getRelevantMemories(currentMessage, undefined, userId);\n\n  // Get the most recent AI-generated insight (from EmotionalInsight)\n  const insights = getInsights(userId);\n  const recentAiInsight = insights\n    .filter(i => i.type === 'insight' && i.source === 'ai')\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())[0];\n\n  // If the most recent AI insight is not already in the relevant memories, add it\n  let contextMemories = [...relevantMemories];\n  if (recentAiInsight) {\n    const alreadyIncluded = relevantMemories.some(m => m.content.includes(recentAiInsight.content));\n    if (!alreadyIncluded) {\n      // Add as a pseudo-memory entry\n      contextMemories.unshift({\n        id: `ai-insight-${recentAiInsight.id}`,\n        date: recentAiInsight.date,\n        content: recentAiInsight.content,\n        type: 'breakthrough',\n        importance: 8,\n        tags: ['insight', 'ai'],\n        accessCount: 0\n      });\n    }\n  }\n\n  // If no relevant memories, return empty string\n  if (contextMemories.length === 0) {\n    return '';\n  }\n\n  // Format relevant memories into a clear context string for the AI\n  let contextString = \"--- User's Relevant Personal Memories ---\\n\";\n\n  contextMemories.forEach(memory => {\n    contextString += `Type: ${memory.type}\\n`;\n    contextString += `Date: ${new Date(memory.date).toLocaleString()}\\n`;\n    contextString += `Content: ${memory.content}\\n`;\n    if (memory.tags && memory.tags.length > 0) {\n      contextString += `Tags: ${memory.tags.join(', ')}\\n`;\n    }\n    contextString += `---\\n`; // Separator between memories\n  });\n\n  contextString += \"--------------------------------------\";\n\n  return contextString;\n};\n\n// Extract memories from a conversation\nexport const createMemoryFromMessage = (\n  message: Message,\n  type: MemoryType,\n  importance: number,\n  tags: string[] = []\n): MemoryEntry => {\n  return {\n    id: uuidv4(),\n    date: new Date(message.timestamp).toISOString(),\n    content: message.content,\n    type,\n    importance,\n    tags,\n    accessCount: 0\n  };\n};","import { create } from 'zustand';\nimport { v4 as uuidv4_global } from 'uuid'; // Renaming to avoid conflict if uuidv4 is destructured later\nimport { DailyCheckIn, JournalEntry, Message, UserProgress, MoodType, CravingLevel, TriggerLog, Task, TaskCategory, TaskPriority, EmotionalInsight, MemoryEntry, ConversationSummary, Milestone } from '../types'; // Milestone moved to end for consistency if it matters\nimport {\n  saveCheckIn,\n  getCheckIns,\n  saveJournalEntry,\n  getJournalEntries,\n  deleteJournalEntry,\n  getMessages,\n  saveMessage,\n  // clearMessages, // Unused import\n  getProgress,\n  updateProgress,\n  resetStreak,\n  incrementStreak,\n  saveTriggerLog,\n  getTriggerLogs,\n  deleteTriggerLog,\n  saveTask,\n  getTasks,\n  deleteTask,\n  completeTask,\n  saveInsight,\n  getInsights,\n  markInsightAsShown,\n  saveMemoryEntry,\n  getMemoryEntries,\n  deleteMemoryEntry,\n  saveConversationSummary,\n  getConversationSummaries,\n  updateInsightUserNote,\n  saveAppState,\n  getAppState\n} from '../utils/indexedDBUtils';\nimport { getCurrentDateString, calculateCurrentStreakFromCheckIns } from '../utils/dateUtils';\nimport { v4 as uuidv4, getRecoveryTask } from '../utils/mockUtils';\nimport analytics from '../utils/analytics';\nimport { devtools, persist } from 'zustand/middleware';\nimport {\n  // createMemoryFromMessage, // Unused import\n  extractImportantInformation,\n  detectMessageTopic,\n  detectEmotionalState,\n  // createConversationSummary, // Replaced by AI summarization logic\n  // shouldCreateSummary, // Replaced by AI summarization logic\n  getRelevantMemories,\n  generateMemoryContextPrompt\n} from '../utils/memoryUtils';\nimport { getOpenAIEmbedding } from '../utils/embeddingUtils';\nimport { encryptData } from '../utils/cryptoUtils';\nimport { useAuth } from '../auth/AuthContext'; // Ensure useAuth is imported if not already\n\n// Helper function to get or create a unique user ID\nconst getOrCreateUserId = (): string => {\n  let userId: string | null = localStorage.getItem('Soberi_userId');\n  if (userId === null) { // Explicitly check for null\n    userId = uuidv4_global();\n    localStorage.setItem('Soberi_userId', userId); // userId is now definitely a string\n  }\n  return userId; // userId is guaranteed to be a string here\n};\n\ninterface AppState {\n  // UI State\n  activeTab: 'chat' | 'checkin' | 'journal' | 'progress' | 'resources' | 'tasks' | 'insights';\n  isLoading: boolean;\n\n  // Data\n  checkIns: DailyCheckIn[];\n  journalEntries: JournalEntry[];\n  messages: Message[];\n  userProgress: UserProgress;\n  triggerLogs: TriggerLog[];\n  tasks: Task[];\n  insights: EmotionalInsight[];\n  memories: MemoryEntry[];\n  conversationSummaries: ConversationSummary[];\n\n  // Actions\n  setActiveTab: (tab: 'chat' | 'checkin' | 'journal' | 'progress' | 'resources' | 'tasks' | 'insights') => void;\n  setIsLoading: (loading: boolean) => void;\n\n  // Check-in Actions\n  submitCheckIn: (mood: MoodType, cravingLevel: CravingLevel, notes: string) => Promise<void>;\n\n  // Journal Actions\n  addJournalEntry: (content: string, tags: string[]) => Promise<void>;\n  removeJournalEntry: (id: string) => Promise<void>;\n\n  // Chat Actions\n  sendMessage: (content: string, supabaseUserId: string) => Promise<void>;\n\n  // Progress Actions\n  resetProgress: () => Promise<void>;\n  markRelapse: () => Promise<void>;\n\n  // Trigger Logs Actions\n  addTriggerLog: (trigger: string, intensity: number, strategy: string, successful: boolean, notes: string) => Promise<void>;\n  removeTriggerLog: (id: string) => Promise<void>;\n\n  // Task Actions\n  addTask: (title: string, description: string, date: string, priority: TaskPriority, category: TaskCategory, timeEstimate?: number) => Promise<void>;\n  removeTask: (id: string) => Promise<void>;\n  markTaskComplete: (id: string) => Promise<void>;\n  suggestTasks: () => Promise<void>;\n\n  // Insight Actions\n  addInsight: (content: string, type: 'insight' | 'encouragement' | 'reminder', source: 'system' | 'ai' | 'user') => Promise<void>;\n  markInsightSeen: (id: string) => Promise<void>;\n  updateInsightNote: (id: string, userNote: string) => Promise<void>;\n\n  // Memory System Actions\n  addMemory: (memory: MemoryEntry) => Promise<void>;\n  removeMemory: (id: string) => Promise<void>;\n  addConversationSummary: (summary: ConversationSummary) => Promise<void>;\n  getRelevantMemoriesForContext: (currentMessage: string, count?: number) => Promise<MemoryEntry[]>;\n  generateContextFromMemories: (currentMessage: string) => Promise<string>;\n\n  // Init\n  initializeStore: () => Promise<void>;\n}\n\n// Helper to format recent activities into a summary string\nconst formatRecentActivitiesSummary = (state: AppState): string => {\n  const now = Date.now();\n  const sevenDaysAgo = now - 7 * 24 * 60 * 60 * 1000;\n\n  // Limit the number of recent entries shown per category\n  const maxEntriesPerCategory = 2; // Show only the last 2 of each\n\n  const recentCheckIns = state.checkIns.filter(c => new Date(c.date).getTime() >= sevenDaysAgo).slice(-maxEntriesPerCategory);\n  const recentJournalEntries = state.journalEntries.filter(j => new Date(j.date).getTime() >= sevenDaysAgo).slice(-maxEntriesPerCategory);\n  const recentTriggerLogs = state.triggerLogs.filter(t => new Date(t.date).getTime() >= sevenDaysAgo).slice(-maxEntriesPerCategory);\n  const recentTasks = state.tasks.filter(t => t.date && new Date(t.date).getTime() >= sevenDaysAgo).slice(-maxEntriesPerCategory);\n  const recentInsights = state.insights.filter(i => new Date(i.date).getTime() >= sevenDaysAgo).slice(-maxEntriesPerCategory);\n\n  let summary = \"--- User's Recent Activity Summary (Last 7 Days) ---\\n\";\n\n  if (recentCheckIns.length > 0) {\n    summary += `\\nRecent Check-ins (${recentCheckIns.length}):\\n`;\n    recentCheckIns.forEach(c => {\n      summary += `- On ${new Date(c.date).toLocaleDateString()}: Mood - ${c.mood}, Cravings - ${c.cravingLevel}${c.notes ? `, Notes: ${c.notes.substring(0, 50)}...` : ''}\\n`;\n    });\n  }\n\n  if (recentJournalEntries.length > 0) {\n    summary += `\\nRecent Journal Entries (${recentJournalEntries.length}):\\n`;\n    recentJournalEntries.forEach(j => {\n      summary += `- On ${new Date(j.date).toLocaleDateString()}: ${j.content.substring(0, 100)}...\\n`; // Truncate journal content for summary\n    });\n  }\n\n  if (recentTriggerLogs.length > 0) {\n    summary += `\\nRecent Trigger Logs (${recentTriggerLogs.length}):\\n`;\n    recentTriggerLogs.forEach(t => {\n      summary += `- On ${new Date(t.date).toLocaleDateString()}: Trigger - ${t.trigger}, Intensity - ${t.intensity}${t.successful ? ', Strategy Successful' : ', Strategy Failed'}${t.notes ? `, Notes: ${t.notes.substring(0, 50)}...` : ''}\\n`;\n    });\n  }\n\n  const completedRecentTasks = recentTasks.filter(task => task.completed);\n  const pendingRecentTasks = recentTasks.filter(task => !task.completed);\n\n  if (recentTasks.length > 0) {\n    summary += `\\nRecent Tasks (${recentTasks.length}):\\n`;\n    if (pendingRecentTasks.length > 0) {\n      summary += `Pending (${pendingRecentTasks.length}):\\n`;\n      pendingRecentTasks.slice(-maxEntriesPerCategory).forEach(t => {\n        summary += `- ${t.title}${t.date ? ` (Due ${new Date(t.date).toLocaleDateString()})` : ''}\\n`;\n      });\n    }\n    if (completedRecentTasks.length > 0) {\n      summary += `Completed (${completedRecentTasks.length}):\\n`;\n      completedRecentTasks.slice(-maxEntriesPerCategory).forEach(t => {\n        summary += `- ${t.title} (Completed)\\n`;\n      });\n    }\n  }\n\n  if (recentInsights.length > 0) {\n    summary += `\\nRecent Insights (${recentInsights.length}):\\n`;\n    recentInsights.forEach(i => {\n      summary += `- ${i.content.substring(0, 100)}...\\n`; // Truncate insight content for summary\n    });\n  }\n\n  summary += \"--------------------------------------------\";\n\n  return summary;\n};\n\n// Create the store with middleware for dev tools and persistence\nexport const useStore = create<AppState>()(\n  devtools(\n    persist(\n      (set, get) => ({\n        activeTab: 'chat',\n        isLoading: false,\n        checkIns: [],\n        journalEntries: [],\n        messages: [],\n        triggerLogs: [],\n        tasks: [],\n        insights: [],\n        memories: [],\n        conversationSummaries: [],\n        userProgress: {\n          currentStreak: 0,\n          longestStreak: 0,\n          startDate: null,\n          lastCheckInDate: null,\n          totalDaysClean: 0,\n          relapseCount: 0,\n          milestones: [],\n        },\n\n        setActiveTab: (tab) => {\n          analytics.trackEvent('page_view', { tab });\n          set({ activeTab: tab });\n        },\n        setIsLoading: (loading) => set({ isLoading: loading }),\n\n        submitCheckIn: async (mood, cravingLevel, notes) => {\n          const userId = getOrCreateUserId();\n          const today = getCurrentDateString();\n\n          // Check if already submitted today\n          const existingCheckIn = await getCheckIns(userId).then(checkIns => \n            checkIns.find(c => c.date === today)\n          );\n          if (existingCheckIn) {\n            console.warn('Check-in already submitted for today');\n            return;\n          }\n\n          const newCheckIn: DailyCheckIn = {\n            id: uuidv4(),\n            date: today,\n            mood,\n            cravingLevel,\n            notes,\n          };\n          await saveCheckIn(newCheckIn, userId);\n\n          // Add to memory system\n          const memoryContent = `Check-in: Mood was ${mood}, craving level was ${cravingLevel}.${notes ? ` Notes: ${notes}` : ''}`;\n          const memory: MemoryEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content: memoryContent,\n            type: 'personal_detail',\n            importance: cravingLevel === 'extreme' || cravingLevel === 'severe' ? 9 : 7,\n            tags: ['mood', 'craving', mood, cravingLevel],\n            accessCount: 0\n          };\n          await get().addMemory(memory);\n\n          // Update progress using all check-ins\n          const allCheckIns = await getCheckIns(userId);\n          const checkInDates = allCheckIns.map(c => c.date);\n          const uniqueDays = Array.from(new Set(checkInDates.map(d => d.slice(0, 10))));\n          const streak = calculateCurrentStreakFromCheckIns(checkInDates);\n          const progress = await getProgress(userId);\n          const isFirstCheckIn = !progress.startDate;\n          const updatedProgress = {\n            ...progress,\n            lastCheckInDate: today,\n            startDate: progress.startDate || today,\n            currentStreak: streak,\n            longestStreak: Math.max(streak, progress.longestStreak),\n            totalDaysClean: uniqueDays.length,\n          };\n          await updateProgress(updatedProgress, userId);\n\n          // Track check-in completed\n          analytics.trackEvent('check_in_completed', {\n            mood,\n            cravingLevel,\n            hasNotes: notes.length > 0,\n            isFirstCheckIn,\n          });\n\n          // Check for streak milestones\n          if (streak > 0 && streak % 7 === 0) {\n            // Add milestone achievement\n            const milestone: Milestone = {\n              id: uuidv4(),\n              date: new Date().toISOString(),\n              type: 'streak',\n              value: streak,\n              description: `${streak} day streak achieved!`\n            };\n\n            const updatedMilestones = [...(progress.milestones || []), milestone];\n\n            await updateProgress({\n              ...updatedProgress,\n              milestones: updatedMilestones\n            }, userId);\n\n            // Add to memory\n            const streakMemory: MemoryEntry = {\n              id: uuidv4(),\n              date: new Date().toISOString(),\n              content: `User reached a ${streak} day streak milestone`,\n              type: 'breakthrough',\n              importance: 8,\n              tags: ['streak', 'milestone', 'achievement'],\n              accessCount: 0\n            };\n            await get().addMemory(streakMemory);\n\n            analytics.trackEvent('streak_milestone', {\n              days: streak,\n              isLongestStreak: streak >= progress.longestStreak,\n            });\n          }\n\n          // Generate daily tasks based on mood and recovery stage\n          await get().suggestTasks();\n\n          set({\n            checkIns: await getCheckIns(userId),\n            userProgress: await getProgress(userId),\n          });\n        },\n\n        addJournalEntry: async (content, tags) => {\n          const userId = getOrCreateUserId();\n          const newEntry: JournalEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content,\n            tags,\n          };\n\n          await saveJournalEntry(newEntry, userId);\n\n          // Add to memory system with appropriate importance based on content\n          const importantInfo = extractImportantInformation(content);\n          const memoryImportance = importantInfo.length > 0 ? 8 : 6;\n\n          const memory: MemoryEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content: content,\n            type: 'personal_detail',\n            importance: memoryImportance,\n            tags: [...tags, 'journal'],\n            accessCount: 0\n          };\n          await get().addMemory(memory);\n\n          // Track journal entry created\n          analytics.trackEvent('journal_entry_created', {\n            wordCount: content.split(/\\s+/).length,\n            tagCount: tags.length,\n            hasTags: tags.length > 0,\n          });\n\n          set({ journalEntries: await getJournalEntries(userId) });\n        },\n\n        removeJournalEntry: async (id) => {\n          const userId = getOrCreateUserId();\n          await deleteJournalEntry(id, userId);\n          set({ journalEntries: await getJournalEntries(userId) });\n        },\n\n        addTriggerLog: async (trigger, intensity, strategy, successful, notes) => {\n          const userId = getOrCreateUserId();\n          const newTrigger: TriggerLog = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            trigger,\n            intensity,\n            strategy,\n            successful,\n            notes\n          };\n\n          await saveTriggerLog(newTrigger, userId);\n\n          // Add to memory\n          const memoryContent = `Trigger: ${trigger} (intensity: ${intensity}/10). Strategy used: ${strategy}. ${successful ? 'Strategy was successful' : 'Strategy was not successful'}.${notes ? ` Notes: ${notes}` : ''}`;\n          const memory: MemoryEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content: memoryContent,\n            type: 'trigger',\n            importance: intensity >= 7 ? 9 : 7,\n            tags: ['trigger', successful ? 'successful_strategy' : 'unsuccessful_strategy'],\n            accessCount: 0\n          };\n          await get().addMemory(memory);\n\n          // If strategy was successful, also add as a coping strategy\n          if (successful) {\n            const strategyMemory: MemoryEntry = {\n              id: uuidv4(),\n              date: new Date().toISOString(),\n              content: `Effective coping strategy: ${strategy} for trigger: ${trigger}`,\n              type: 'coping_strategy',\n              importance: 8,\n              tags: ['strategy', 'effective'],\n              accessCount: 0\n            };\n            await get().addMemory(strategyMemory);\n          }\n\n          // Track trigger log created\n          analytics.trackEvent('trigger_log_created', {\n            intensity,\n            successful,\n            hasNotes: notes.length > 0\n          });\n\n          set({ triggerLogs: await getTriggerLogs(userId) });\n        },\n\n        removeTriggerLog: async (id) => {\n          const userId = getOrCreateUserId();\n          await deleteTriggerLog(id, userId);\n          set({ triggerLogs: await getTriggerLogs(userId) });\n        },\n\n        addTask: async (title, description, date, priority, category, timeEstimate) => {\n          const userId = getOrCreateUserId();\n          const newTask: Task = {\n            id: uuidv4(),\n            title,\n            description,\n            completed: false,\n            date,\n            priority,\n            category,\n            timeEstimate\n          };\n\n          await saveTask(newTask, userId);\n\n          // Add goal to memory\n          const memory: MemoryEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content: `User set a goal: ${title}${description ? ` - ${description}` : ''}`,\n            type: 'goal',\n            importance: priority === 'high' || category === 'recovery' ? 7 : 5,\n            tags: ['goal', category],\n            accessCount: 0\n          };\n          await get().addMemory(memory);\n\n          // Track task created\n          analytics.trackEvent('task_created', {\n            priority,\n            category,\n            hasTimeEstimate: !!timeEstimate\n          });\n\n          set({ tasks: await getTasks(userId) });\n        },\n\n        removeTask: async (id) => {\n          const userId = getOrCreateUserId();\n          await deleteTask(id, userId);\n          set({ tasks: await getTasks(userId) });\n        },\n\n        markTaskComplete: async (id) => {\n          const userId = getOrCreateUserId();\n          await completeTask(id, userId);\n\n          // Find the task to add to memory\n          const tasks = await getTasks(userId);\n          const task = tasks.find(t => t.id === id);\n          if (task) {\n            const memory: MemoryEntry = {\n              id: uuidv4(),\n              date: new Date().toISOString(),\n              content: `User completed the task: ${task.title}`,\n              type: 'breakthrough',\n              importance: task.priority === 'high' || task.category === 'recovery' ? 7 : 5,\n              tags: ['achievement', 'completed_task'],\n              accessCount: 0\n            };\n            await get().addMemory(memory);\n          }\n\n          // Track task completed\n          analytics.trackEvent('task_completed', { taskId: id });\n\n          set({ tasks: await getTasks(userId) });\n        },\n\n        suggestTasks: async () => {\n          const userId = getOrCreateUserId();\n          const today = getCurrentDateString();\n          const progress = await getProgress(userId);\n          const recoveryDays = progress.currentStreak;\n          const existingTasks = (await getTasks(userId)).filter(t => t.date === today);\n\n          // Only suggest tasks if we don't have enough for today\n          if (existingTasks.length < 3) {\n            // Generate 3-5 tasks based on recovery stage\n            const taskCount = Math.floor(Math.random() * 3) + 3; // 3 to 5 tasks\n            const categories: TaskCategory[] = ['self-care', 'physical', 'social', 'productive', 'recovery'];\n            const priorities: TaskPriority[] = ['high', 'medium', 'low'];\n\n            for (let i = 0; i < taskCount; i++) {\n              const category = categories[Math.floor(Math.random() * categories.length)];\n              const priority = priorities[Math.floor(Math.random() * priorities.length)];\n\n              const { title, description, timeEstimate } = getRecoveryTask(category, recoveryDays);\n\n              const newTask: Task = {\n                id: uuidv4(),\n                title,\n                description,\n                completed: false,\n                date: today,\n                priority,\n                category,\n                timeEstimate\n              };\n\n              await saveTask(newTask, userId);\n            }\n\n            set({ tasks: await getTasks(userId) });\n          }\n        },\n\n        addInsight: async (content, type, source) => {\n          const userId = getOrCreateUserId();\n          const newInsight: EmotionalInsight = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content,\n            type,\n            source,\n            shown: false\n          };\n\n          await saveInsight(newInsight, userId);\n\n          // Add to memory if it's a significant insight\n          if (type === 'insight') {\n            const memory: MemoryEntry = {\n              id: uuidv4(),\n              date: new Date().toISOString(),\n              content: `Recovery insight: ${content}`,\n              type: 'breakthrough',\n              importance: 7,\n              tags: ['insight', 'recovery_knowledge'],\n              accessCount: 0\n            };\n            await get().addMemory(memory);\n          }\n\n          set({ insights: await getInsights(userId) });\n        },\n\n        markInsightSeen: async (id) => {\n          const userId = getOrCreateUserId();\n          await markInsightAsShown(id, userId);\n          set({ insights: await getInsights(userId) });\n        },\n\n        updateInsightNote: async (id, userNote) => {\n          const userId = getOrCreateUserId();\n          await updateInsightUserNote(id, userNote, userId);\n          set({ insights: await getInsights(userId) });\n        },\n\n        // Memory system actions\n        addMemory: async (memory) => {\n          const userId = getOrCreateUserId();\n          // Only generate embedding if not already present\n          if (!memory.embedding) {\n            try {\n              memory.embedding = await getOpenAIEmbedding(memory.content);\n              // Validate the embedding\n              if (!memory.embedding || memory.embedding.length !== 1536) {\n                console.warn('Invalid embedding received, using fallback');\n                // Use the fallback embedding generator\n                const { generateFallbackEmbedding } = await import('../utils/embeddingUtils');\n                memory.embedding = generateFallbackEmbedding(memory.content);\n              }\n            } catch (error) {\n              console.error('Failed to generate embedding:', error);\n              // Use fallback embedding on error\n              const { generateFallbackEmbedding } = await import('../utils/embeddingUtils');\n              memory.embedding = generateFallbackEmbedding(memory.content);\n            }\n          }\n          await saveMemoryEntry(memory, userId);\n          set({ memories: await getMemoryEntries(userId) });\n        },\n\n        removeMemory: async (id) => {\n          const userId = getOrCreateUserId();\n          await deleteMemoryEntry(id, userId);\n          set({ memories: await getMemoryEntries(userId) });\n        },\n\n        addConversationSummary: async (summary) => {\n          const userId = getOrCreateUserId();\n          await saveConversationSummary(summary, userId);\n          set({ conversationSummaries: await getConversationSummaries(userId) });\n        },\n\n        getRelevantMemoriesForContext: async (currentMessage: string, count = 5): Promise<MemoryEntry[]> => {\n          const userId = getOrCreateUserId();\n          return await getRelevantMemories(currentMessage, count, userId);\n        },\n\n        generateContextFromMemories: async (currentMessage: string): Promise<string> => {\n          const userId = getOrCreateUserId();\n          return await generateMemoryContextPrompt(currentMessage, userId);\n        },\n\n        sendMessage: async (content, supabaseUserId) => {\n          const encryptionKey = getOrCreateUserId(); // This is Soberi_userId, for encryption\n          set({ isLoading: true });\n\n          if (!supabaseUserId) {\n            console.error('sendMessage called without supabaseUserId. Aborting.');\n            set({ isLoading: false });\n            // Optionally, show an error to the user or add a fallback message\n            const errorMsg: Message = {\n              id: uuidv4(),\n              content: 'Error: Could not send message. User identification failed.',\n              sender: 'ai',\n              timestamp: Date.now(),\n            };\n            saveMessage(errorMsg, encryptionKey);\n            set(state => ({ messages: [...state.messages, errorMsg], isLoading: false }));\n            return;\n          }\n\n          const userMessage: Message = {\n            id: uuidv4(),\n            content,\n            sender: 'user',\n            timestamp: Date.now(),\n          };\n          saveMessage(userMessage, encryptionKey); // Use encryptionKey for local storage\n\n          // Process the message for memory system\n          const topics = detectMessageTopic(content);\n          const emotionalState = detectEmotionalState(content);\n          const importantInfo = extractImportantInformation(content);\n\n          // If we extracted important information, add it to memory\n          if (importantInfo.length > 0) {\n            for (const info of importantInfo) {\n              const memory: MemoryEntry = {\n                id: uuidv4(),\n                date: new Date().toISOString(),\n                content: info,\n                type: 'personal_detail',\n                importance: 8,\n                tags: [...topics, emotionalState],\n                accessCount: 0\n              };\n              await get().addMemory(memory);\n            }\n          }\n\n          // Check if content mentions relapse\n          if (content.toLowerCase().includes('relapse') ||\n            content.toLowerCase().includes('slip') ||\n            content.toLowerCase().includes('used again')) {\n            const memory: MemoryEntry = {\n              id: uuidv4(),\n              date: new Date().toISOString(),\n              content: `User mentioned potential relapse: ${content.substring(0, 100)}${content.length > 100 ? '...' : ''}`,\n              type: 'relapse',\n              importance: 10,\n              tags: ['relapse', 'setback'],\n              accessCount: 0\n            };\n            await get().addMemory(memory);\n          }\n\n          // Track message sent\n          analytics.trackEvent('chat_message_sent', {\n            messageLength: content.length,\n            wordCount: content.split(/\\s+/).length,\n            messageType: 'user',\n          });\n\n          // Update messages immediately to show user message\n          set(state => ({\n            messages: [...state.messages, userMessage]\n          }));\n\n          // New summarization and context logic\n          const SUMMARY_INTERVAL = 4;\n          const allMessages = get().messages; // Includes current user message\n          const numMessagesInStore = allMessages.length;\n\n          // Calculate based on messages *before* the current user's message was added\n          const numCompletedMessagesInHistory = numMessagesInStore - 1;\n\n          const isFirstSummaryPoint = numCompletedMessagesInHistory === SUMMARY_INTERVAL;\n          const isRollingSummaryPoint = numCompletedMessagesInHistory > SUMMARY_INTERVAL && (numCompletedMessagesInHistory % SUMMARY_INTERVAL === 0);\n\n          let newAiSummaryToStore: ConversationSummary | null = null;\n          const backendUrl = import.meta.env.VITE_BACKEND_URL || 'https://soberi-backend-service-280233666207.europe-west1.run.app';\n          const apiKey = import.meta.env.VITE_BACKEND_API_KEY || 'sk-proj-sssssdffsdfwerwrwerdhhjmnvdfd2133443';\n\n          if (!apiKey) {\n            console.error('Backend API key is not configured');\n            const errorMsg: Message = {\n              id: uuidv4(),\n              content: 'Error: Backend API key is not configured. Please contact support.',\n              sender: 'ai',\n              timestamp: Date.now(),\n            };\n            saveMessage(errorMsg, encryptionKey);\n            set(state => ({ messages: [...state.messages, errorMsg], isLoading: false }));\n            return;\n          }\n\n          if (isFirstSummaryPoint || isRollingSummaryPoint) {\n            set({ isLoading: true }); // Indicate loading for summary generation\n            // Messages to summarize are the block of completed messages *before* the current user's message\n            const messagesForThisSummary = allMessages.slice(numCompletedMessagesInHistory - SUMMARY_INTERVAL, numCompletedMessagesInHistory);\n\n            let promptForSummarization = \"Summarize the following conversation concisely, capturing key points, decisions, and emotional tone. Focus on creating a brief that can inform future interactions:\\n\";\n            messagesForThisSummary.forEach(m => { promptForSummarization += `${m.sender === 'user' ? 'User' : 'AI'}: ${m.content}\\n`; });\n\n            if (isRollingSummaryPoint) {\n              const aiSummaries = get().conversationSummaries.filter(s => s.summaryType === 'ai_generated');\n              if (aiSummaries.length > 0) {\n                const latestPrevAiSummary = aiSummaries[aiSummaries.length - 1];\n                // For rolling summary, the prompt includes previous summary and the NEW messages that led to this summary point\n                promptForSummarization = `Previous summary: \"${latestPrevAiSummary.summary}\"\\n\\nBased on this previous summary and the following new messages, provide an updated and comprehensive summary of the entire conversation so far. The summary should be concise and highlight key developments:\\n${messagesForThisSummary.map(m => `${m.sender === 'user' ? 'User' : 'AI'}: ${m.content}`).join('\\n')}`;\n              }\n            }\n\n            try {\n              // console.log(\"Client: Requesting AI summary with prompt:\", promptForSummarization);\n              const currentUserProgress = get().userProgress; // Get current user progress\n              const summaryPayload = {\n                message: promptForSummarization,\n                recentMessages: [], // Explicitly empty for summary task\n                userId: supabaseUserId, // Add userId for context if backend needs it\n                contextBriefing: \"This is a request to summarize the conversation provided in the main message. Please focus on that task. you are to generate a summary that can inform future interactions and make the user feel more connected to you\", // Hint for the backend's system prompt\n                userProgress: currentUserProgress // Include user progress\n              };\n              const summaryResponse = await fetch(`${backendUrl}/api/chat`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'X-API-KEY': apiKey },\n                body: JSON.stringify(summaryPayload),\n              });\n\n              if (!summaryResponse.ok) {\n                const errorData = await summaryResponse.json();\n                throw new Error(errorData.error || `AI Summary request failed with status ${summaryResponse.status}`);\n              }\n              const summaryData = await summaryResponse.json();\n              const aiGeneratedSummaryText = summaryData.response;\n\n              newAiSummaryToStore = {\n                id: uuidv4(),\n                date: new Date().toISOString(),\n                summary: aiGeneratedSummaryText,\n                messageIds: messagesForThisSummary.map(m => m.id), // Use corrected slice\n                topics: detectMessageTopic(aiGeneratedSummaryText), // Basic topic detection on summary\n                emotionalState: detectEmotionalState(aiGeneratedSummaryText), // Basic emotion detection\n                keyInsights: extractImportantInformation(aiGeneratedSummaryText), // Basic insights\n                summaryType: 'ai_generated'\n              };\n              get().addConversationSummary(newAiSummaryToStore);\n              // console.log(\"Client: AI Summary generated and stored:\", newAiSummaryToStore.summary);\n            } catch (error) {\n              console.error('Error generating AI summary:', error);\n              // Decide if we should proceed without summary or show error\n            }\n            // isLoading will be set to false after the main chat response\n          }\n\n          // Prepare payload for the main chat response\n          const recentActivitySummary = formatRecentActivitiesSummary(get());\n          const currentUserProgress = get().userProgress;\n          const clientContextBriefing = await get().generateContextFromMemories(content);\n          const recentMessagesForChatPayload = allMessages.slice(-SUMMARY_INTERVAL).map(msg => ({\n            sender: msg.sender,\n            content: msg.content,\n          }));\n          const aiSummaries = get().conversationSummaries.filter(s => s.summaryType === 'ai_generated');\n          const latestAiSummaryForChat = newAiSummaryToStore || (aiSummaries.length > 0 ? aiSummaries[aiSummaries.length - 1] : null);\n          const payloadForBackend = {\n            userId: supabaseUserId, // Use the PASSED IN supabaseUserId INSIDE payload\n            message: content,\n            chatSummary: latestAiSummaryForChat?.summary || '',\n            recentMessages: recentMessagesForChatPayload,\n            clientMemoryContext: clientContextBriefing,\n            userProgress: currentUserProgress,\n            recentActivitySummary: recentActivitySummary\n          };\n\n          const encryptedPayload = encryptData(payloadForBackend, encryptionKey); // Encrypt with Soberi_userId (encryptionKey)\n\n          try {\n            const response = await fetch(`${backendUrl}/api/chat`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json', 'X-API-KEY': apiKey },\n              body: JSON.stringify({ encryptedPayload, userId: encryptionKey }), // Send Soberi_userId (encryptionKey) as decryption key hint\n            });\n\n            if (!response.ok) {\n              const errorData = await response.json();\n              throw new Error(errorData.error || `API chat request failed with status ${response.status}`);\n            }\n            const data = await response.json();\n            const aiResponseText = data.response;\n            const insightMatch = aiResponseText.match(/<SOBERI_INSIGHT>(.*?)<\\/SOBERI_INSIGHT>/s);\n            let chatResponse = aiResponseText;\n            let generatedInsight = null;\n\n            if (insightMatch && insightMatch[1]) {\n              generatedInsight = insightMatch[1].trim();\n              // Remove insight from the main chat response\n              chatResponse = aiResponseText.replace(insightMatch[0], '').trim();\n            }\n\n            const aiMessage: Message = {\n              id: uuidv4(),\n              content: chatResponse,\n              sender: 'ai',\n              timestamp: Date.now(),\n            };\n            saveMessage(aiMessage, encryptionKey); // Use encryptionKey for local storage\n\n            // Add generated insight to the store if found\n            if (generatedInsight) {\n              get().addInsight(generatedInsight, 'insight', 'ai'); // Add with source 'ai'\n            }\n\n            set(state => ({\n              messages: [...state.messages, aiMessage],\n              isLoading: false,\n            }));\n          } catch (error: unknown) {\n            console.error('Error connecting to AI backend or processing response:', error);\n            let errorMessageText = 'An unknown error occurred with the AI backend.';\n            if (error instanceof Error) errorMessageText = error.message;\n            else if (typeof error === 'string') errorMessageText = error;\n\n            const aiErrorMessage: Message = {\n              id: uuidv4(),\n              content: `Error: ${errorMessageText}`,\n              sender: 'ai',\n              timestamp: Date.now(),\n            };\n            saveMessage(aiErrorMessage, encryptionKey); // Use encryptionKey for local storage\n            set(state => ({\n              messages: [...state.messages, aiErrorMessage],\n              isLoading: false,\n            }));\n          }\n        },\n\n        resetProgress: async () => {\n          const userId = getOrCreateUserId();\n          await resetStreak(userId);\n          \n          // Add relapse to memory\n          const memory: MemoryEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content: 'User reset their progress counter',\n            type: 'relapse',\n            importance: 10,\n            tags: ['relapse', 'reset'],\n            accessCount: 0\n          };\n          await get().addMemory(memory);\n          \n          set({ userProgress: await getProgress(userId) });\n        },\n\n        markRelapse: async () => {\n          const userId = getOrCreateUserId();\n          const progress = await getProgress(userId);\n          const updatedProgress = {\n            ...progress,\n            currentStreak: 0,\n            relapseCount: progress.relapseCount + 1,\n          };\n          await updateProgress(updatedProgress, userId);\n          \n          // Add relapse to memory with high importance\n          const memory: MemoryEntry = {\n            id: uuidv4(),\n            date: new Date().toISOString(),\n            content: `User experienced a relapse after ${progress.currentStreak} days`,\n            type: 'relapse',\n            importance: 10,\n            tags: ['relapse', 'setback'],\n            accessCount: 0\n          };\n          await get().addMemory(memory);\n          \n          set({ userProgress: updatedProgress });\n        },\n\n        initializeStore: async () => {\n          const userId = getOrCreateUserId();\n          if (!userId) return;\n\n          try {\n            // Load all data asynchronously\n            const [\n              checkIns,\n              journalEntries,\n              messages,\n              userProgress,\n              triggerLogs,\n              tasks,\n              insights,\n              memories,\n              conversationSummaries\n            ] = await Promise.all([\n              getCheckIns(userId),\n              getJournalEntries(userId),\n              getMessages(userId),\n              getProgress(userId),\n              getTriggerLogs(userId),\n              getTasks(userId),\n              getInsights(userId),\n              getMemoryEntries(userId),\n              getConversationSummaries(userId)\n            ]);\n\n            set({\n              checkIns,\n              journalEntries,\n              messages,\n              userProgress,\n              triggerLogs,\n              tasks,\n              insights,\n              memories,\n              conversationSummaries\n            });\n\n            // Check if tasks need to be suggested\n            const today = getCurrentDateString();\n            const todaysTasks = tasks.filter(t => t.date === today);\n            if (todaysTasks.length === 0) {\n              await get().suggestTasks();\n            }\n          } catch (error) {\n            console.error('Failed to initialize store:', error);\n          }\n        },\n      }),\n      {\n        name: 'Soberiai-storage',\n        partialize: (state) => ({\n          checkIns: state.checkIns,\n          journalEntries: state.journalEntries,\n          messages: state.messages,\n          userProgress: state.userProgress,\n          triggerLogs: state.triggerLogs,\n          tasks: state.tasks,\n          insights: state.insights,\n          memories: state.memories,\n          conversationSummaries: state.conversationSummaries,\n        }),\n        storage: {\n          getItem: async (name) => {\n            const userId = localStorage.getItem('Soberi_userId');\n            if (!userId) return null;\n            const value = await getAppState(userId);\n            return value ? value : null;\n          },\n          setItem: async (name, value) => {\n            const userId = localStorage.getItem('Soberi_userId');\n            if (!userId) return;\n            await saveAppState(value, userId);\n          },\n          removeItem: async (name) => {\n            // For now, we'll just clear the app state for the current user\n            const userId = localStorage.getItem('Soberi_userId');\n            if (!userId) return;\n            await saveAppState(null, userId);\n          },\n        },\n      }\n    )\n  )\n);\n\n// Import the getMockResponse function from mockUtils for AI responses\n// import { getMockResponse } from '../utils/mockUtils'; // This seems to be unused now as direct mock responses are replaced by backend calls\n\n// Enhanced response function that incorporates memory context\n// function getMockResponseWithMemory(content: string, memoryContext: string): string { // Unused function\n//   // Get the standard response\n//   const standardResponse = getMockResponse(content);\n//\n//   // If there's memory context available, try to personalize the response\n//   if (memoryContext.trim().length > 0) {\n//     // Simple personalization by adding references to previous conversations or user details\n//     const personalizedIntros = [\n//       `Based on what you've shared before, `,\n//       `Considering what I know about your journey, `,\n//       `Given what we've discussed previously, `,\n//       `Taking into account your past experiences, `,\n//       `Building on our previous conversations, `\n//     ];\n//\n//     // Select a random personalized intro\n//     const intro = personalizedIntros[Math.floor(Math.random() * personalizedIntros.length)];\n//\n//     // Approximately 50% of the time, add a reference to memory\n//     if (Math.random() > 0.5) {\n//       return intro + standardResponse.charAt(0).toLowerCase() + standardResponse.slice(1);\n//     }\n//   }\n//\n//   return standardResponse;\n// }\n","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        this.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n// Define the enum for the 'region' property\nexport var FunctionRegion;\n(function (FunctionRegion) {\n    FunctionRegion[\"Any\"] = \"any\";\n    FunctionRegion[\"ApNortheast1\"] = \"ap-northeast-1\";\n    FunctionRegion[\"ApNortheast2\"] = \"ap-northeast-2\";\n    FunctionRegion[\"ApSouth1\"] = \"ap-south-1\";\n    FunctionRegion[\"ApSoutheast1\"] = \"ap-southeast-1\";\n    FunctionRegion[\"ApSoutheast2\"] = \"ap-southeast-2\";\n    FunctionRegion[\"CaCentral1\"] = \"ca-central-1\";\n    FunctionRegion[\"EuCentral1\"] = \"eu-central-1\";\n    FunctionRegion[\"EuWest1\"] = \"eu-west-1\";\n    FunctionRegion[\"EuWest2\"] = \"eu-west-2\";\n    FunctionRegion[\"EuWest3\"] = \"eu-west-3\";\n    FunctionRegion[\"SaEast1\"] = \"sa-east-1\";\n    FunctionRegion[\"UsEast1\"] = \"us-east-1\";\n    FunctionRegion[\"UsWest1\"] = \"us-west-1\";\n    FunctionRegion[\"UsWest2\"] = \"us-west-2\";\n})(FunctionRegion || (FunctionRegion = {}));\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, FunctionRegion, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, region = FunctionRegion.Any, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.region = region;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - The name of the Function to invoke.\n     * @param options - Options for invoking the Function.\n     */\n    invoke(functionName, options = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, method, body: functionArgs } = options;\n                let _headers = {};\n                let { region } = options;\n                if (!region) {\n                    region = this.region;\n                }\n                if (region && region !== 'any') {\n                    _headers['x-region'] = region;\n                }\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: method || 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'text/event-stream') {\n                    data = response;\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n//# sourceMappingURL=FunctionsClient.js.map","export const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => import('@supabase/node-fetch').then(({ default: fetch }) => fetch(...args));\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n//# sourceMappingURL=helper.js.map","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function() {\n    // the only reliable means to get the global object is\n    // `Function('return this')()`\n    // However, this causes CSP violations in Chrome apps.\n    if (typeof self !== 'undefined') { return self; }\n    if (typeof window !== 'undefined') { return window; }\n    if (typeof global !== 'undefined') { return global; }\n    throw new Error('unable to locate global object');\n}\n\nvar globalObject = getGlobal();\n\nexport const fetch = globalObject.fetch;\n\nexport default globalObject.fetch.bind(globalObject);\n\nexport const Headers = globalObject.Headers;\nexport const Request = globalObject.Request;\nexport const Response = globalObject.Response;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Error format\n *\n * {@link https://postgrest.org/en/stable/api.html?highlight=options#errors-and-http-status-codes}\n */\nclass PostgrestError extends Error {\n    constructor(context) {\n        super(context.message);\n        this.name = 'PostgrestError';\n        this.details = context.details;\n        this.hint = context.hint;\n        this.code = context.code;\n    }\n}\nexports.default = PostgrestError;\n//# sourceMappingURL=PostgrestError.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// @ts-ignore\nconst node_fetch_1 = __importDefault(require(\"@supabase/node-fetch\"));\nconst PostgrestError_1 = __importDefault(require(\"./PostgrestError\"));\nclass PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.isMaybeSingle = builder.isMaybeSingle;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = node_fetch_1.default;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    /**\n     * Set an HTTP header for the request.\n     */\n    setHeader(name, value) {\n        this.headers = Object.assign({}, this.headers);\n        this.headers[name] = value;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then(async (res) => {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = await res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n                // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n                // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n                if (this.isMaybeSingle && this.method === 'GET' && Array.isArray(data)) {\n                    if (data.length > 1) {\n                        error = {\n                            // https://github.com/PostgREST/postgrest/blob/a867d79c42419af16c18c3fb019eba8df992626f/src/PostgREST/Error.hs#L553\n                            code: 'PGRST116',\n                            details: `Results contain ${data.length} rows, application/vnd.pgrst.object+json requires 1 row`,\n                            hint: null,\n                            message: 'JSON object requested, multiple (or no) rows returned',\n                        };\n                        data = null;\n                        count = null;\n                        status = 406;\n                        statusText = 'Not Acceptable';\n                    }\n                    else if (data.length === 1) {\n                        data = data[0];\n                    }\n                    else {\n                        data = null;\n                    }\n                }\n            }\n            else {\n                const body = await res.text();\n                try {\n                    error = JSON.parse(body);\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (Array.isArray(error) && res.status === 404) {\n                        data = [];\n                        error = null;\n                        status = 200;\n                        statusText = 'OK';\n                    }\n                }\n                catch (_d) {\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (res.status === 404 && body === '') {\n                        status = 204;\n                        statusText = 'No Content';\n                    }\n                    else {\n                        error = {\n                            message: body,\n                        };\n                    }\n                }\n                if (error && this.isMaybeSingle && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw new PostgrestError_1.default(error);\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        });\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => {\n                var _a, _b, _c;\n                return ({\n                    error: {\n                        message: `${(_a = fetchError === null || fetchError === void 0 ? void 0 : fetchError.name) !== null && _a !== void 0 ? _a : 'FetchError'}: ${fetchError === null || fetchError === void 0 ? void 0 : fetchError.message}`,\n                        details: `${(_b = fetchError === null || fetchError === void 0 ? void 0 : fetchError.stack) !== null && _b !== void 0 ? _b : ''}`,\n                        hint: '',\n                        code: `${(_c = fetchError === null || fetchError === void 0 ? void 0 : fetchError.code) !== null && _c !== void 0 ? _c : ''}`,\n                    },\n                    data: null,\n                    count: null,\n                    status: 0,\n                    statusText: '',\n                });\n            });\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     * @deprecated Use overrideTypes<yourType, { merge: false }>() method at the end of your call chain instead\n     */\n    returns() {\n        /* istanbul ignore next */\n        return this;\n    }\n    /**\n     * Override the type of the returned `data` field in the response.\n     *\n     * @typeParam NewResult - The new type to cast the response data to\n     * @typeParam Options - Optional type configuration (defaults to { merge: true })\n     * @typeParam Options.merge - When true, merges the new type with existing return type. When false, replaces the existing types entirely (defaults to true)\n     * @example\n     * ```typescript\n     * // Merge with existing types (default behavior)\n     * const query = supabase\n     *   .from('users')\n     *   .select()\n     *   .overrideTypes<{ custom_field: string }>()\n     *\n     * // Replace existing types completely\n     * const replaceQuery = supabase\n     *   .from('users')\n     *   .select()\n     *   .overrideTypes<{ id: number; name: string }, { merge: false }>()\n     * ```\n     * @returns A PostgrestBuilder instance with the new type\n     */\n    overrideTypes() {\n        return this;\n    }\n}\nexports.default = PostgrestBuilder;\n//# sourceMappingURL=PostgrestBuilder.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PostgrestBuilder_1 = __importDefault(require(\"./PostgrestBuilder\"));\nclass PostgrestTransformBuilder extends PostgrestBuilder_1.default {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    /**\n     * Order the query result by `column`.\n     *\n     * You can call this method multiple times to order by multiple columns.\n     *\n     * You can order referenced tables, but it only affects the ordering of the\n     * parent table if you use `!inner` in the query.\n     *\n     * @param column - The column to order by\n     * @param options - Named parameters\n     * @param options.ascending - If `true`, the result will be in ascending order\n     * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n     * `null`s appear last.\n     * @param options.referencedTable - Set this to order a referenced table by\n     * its columns\n     * @param options.foreignTable - Deprecated, use `options.referencedTable`\n     * instead\n     */\n    order(column, { ascending = true, nullsFirst, foreignTable, referencedTable = foreignTable, } = {}) {\n        const key = referencedTable ? `${referencedTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.referencedTable - Set this to limit rows of referenced\n     * tables instead of the parent table\n     * @param options.foreignTable - Deprecated, use `options.referencedTable`\n     * instead\n     */\n    limit(count, { foreignTable, referencedTable = foreignTable, } = {}) {\n        const key = typeof referencedTable === 'undefined' ? 'limit' : `${referencedTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by starting at an offset `from` and ending at the offset `to`.\n     * Only records within this range are returned.\n     * This respects the query order and if there is no order clause the range could behave unexpectedly.\n     * The `from` and `to` values are 0-based and inclusive: `range(1, 3)` will include the second, third\n     * and fourth rows of the query.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.referencedTable - Set this to limit rows of referenced\n     * tables instead of the parent table\n     * @param options.foreignTable - Deprecated, use `options.referencedTable`\n     * instead\n     */\n    range(from, to, { foreignTable, referencedTable = foreignTable, } = {}) {\n        const keyOffset = typeof referencedTable === 'undefined' ? 'offset' : `${referencedTable}.offset`;\n        const keyLimit = typeof referencedTable === 'undefined' ? 'limit' : `${referencedTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n        // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n        if (this.method === 'GET') {\n            this.headers['Accept'] = 'application/json';\n        }\n        else {\n            this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        }\n        this.isMaybeSingle = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * You need to enable the\n     * [db_plan_enabled](https://supabase.com/docs/guides/database/debugging-performance#enabling-explain)\n     * setting before using this method.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        var _a;\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = (_a = this.headers['Accept']) !== null && _a !== void 0 ? _a : 'application/json';\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     * @deprecated Use overrideTypes<yourType, { merge: false }>() method at the end of your call chain instead\n     */\n    returns() {\n        return this;\n    }\n}\nexports.default = PostgrestTransformBuilder;\n//# sourceMappingURL=PostgrestTransformBuilder.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PostgrestTransformBuilder_1 = __importDefault(require(\"./PostgrestTransformBuilder\"));\nclass PostgrestFilterBuilder extends PostgrestTransformBuilder_1.default {\n    /**\n     * Match only rows where `column` is equal to `value`.\n     *\n     * To check if the value of `column` is NULL, you should use `.is()` instead.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is not equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches all of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    likeAllOf(column, patterns) {\n        this.url.searchParams.append(column, `like(all).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches any of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    likeAnyOf(column, patterns) {\n        this.url.searchParams.append(column, `like(any).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches all of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    ilikeAllOf(column, patterns) {\n        this.url.searchParams.append(column, `ilike(all).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches any of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    ilikeAnyOf(column, patterns) {\n        this.url.searchParams.append(column, `ilike(any).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` IS `value`.\n     *\n     * For non-boolean columns, this is only relevant for checking if the value of\n     * `column` is NULL by setting `value` to `null`.\n     *\n     * For boolean columns, you can also set `value` to `true` or `false` and it\n     * will behave the same way as `.eq()`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is included in the `values` array.\n     *\n     * @param column - The column to filter on\n     * @param values - The values array to filter with\n     */\n    in(column, values) {\n        const cleanedValues = Array.from(new Set(values))\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * `column` contains every element appearing in `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * every element appearing in `column` is contained by `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is greater than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or greater than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is less than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or less than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where `column` is\n     * mutually exclusive to `range` and there can be no element between the two\n     * ranges.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for array and range columns. Match only rows where\n     * `column` and `value` have an element in common.\n     *\n     * @param column - The array or range column to filter on\n     * @param value - The array or range value to filter with\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for text and tsvector columns. Match only rows where\n     * `column` matches the query string in `query`.\n     *\n     * @param column - The text or tsvector column to filter on\n     * @param query - The query text to match with\n     * @param options - Named parameters\n     * @param options.config - The text search configuration to use\n     * @param options.type - Change how the `query` text is interpreted\n     */\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Match only rows where each column in `query` keys is equal to its\n     * associated value. Shorthand for multiple `.eq()`s.\n     *\n     * @param query - The object to filter with, with column names as keys mapped\n     * to their filter values\n     */\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    /**\n     * Match only rows which doesn't satisfy the filter.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to be negated to filter with, following\n     * PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param options - Named parameters\n     * @param options.referencedTable - Set this to filter on referenced tables\n     * instead of the parent table\n     * @param options.foreignTable - Deprecated, use `referencedTable` instead\n     */\n    or(filters, { foreignTable, referencedTable = foreignTable, } = {}) {\n        const key = referencedTable ? `${referencedTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy the filter. This is an escape hatch - you\n     * should use the specific filter methods wherever possible.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to filter with, following PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\nexports.default = PostgrestFilterBuilder;\n//# sourceMappingURL=PostgrestFilterBuilder.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PostgrestFilterBuilder_1 = __importDefault(require(\"./PostgrestFilterBuilder\"));\nclass PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas. Columns can be renamed when returned with `customName:columnName`\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder_1.default({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column. Only applies for bulk\n     * inserts.\n     */\n    insert(values, { count, defaultToNull = true, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (!defaultToNull) {\n            prefersHeaders.push('missing=default');\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder_1.default({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column. This only applies when\n     * inserting new rows, not when merging with existing rows under\n     * `ignoreDuplicates: false`. This also only applies when doing bulk upserts.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, defaultToNull = true, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (!defaultToNull) {\n            prefersHeaders.push('missing=default');\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder_1.default({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder_1.default({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder_1.default({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\nexports.default = PostgrestQueryBuilder;\n//# sourceMappingURL=PostgrestQueryBuilder.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.version = void 0;\nexports.version = '0.0.0-automated';\n//# sourceMappingURL=version.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_HEADERS = void 0;\nconst version_1 = require(\"./version\");\nexports.DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version_1.version}` };\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PostgrestQueryBuilder_1 = __importDefault(require(\"./PostgrestQueryBuilder\"));\nconst PostgrestFilterBuilder_1 = __importDefault(require(\"./PostgrestFilterBuilder\"));\nconst constants_1 = require(\"./constants\");\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nclass PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, constants_1.DEFAULT_HEADERS), headers);\n        this.schemaName = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder_1.default(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schemaName,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Select a schema to query or perform an function (rpc) call.\n     *\n     * The schema needs to be on the list of exposed schemas inside Supabase.\n     *\n     * @param schema - The schema to query\n     */\n    schema(schema) {\n        return new PostgrestClient(this.url, {\n            headers: this.headers,\n            schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.get - When set to `true`, the function will be called with\n     * read-only access mode.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, get = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head || get) {\n            method = head ? 'HEAD' : 'GET';\n            Object.entries(args)\n                // params with undefined value needs to be filtered out, otherwise it'll\n                // show up as `?param=undefined`\n                .filter(([_, value]) => value !== undefined)\n                // array values need special syntax\n                .map(([name, value]) => [name, Array.isArray(value) ? `{${value.join(',')}}` : `${value}`])\n                .forEach(([name, value]) => {\n                url.searchParams.append(name, value);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder_1.default({\n            method,\n            url,\n            headers,\n            schema: this.schemaName,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\nexports.default = PostgrestClient;\n//# sourceMappingURL=PostgrestClient.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostgrestError = exports.PostgrestBuilder = exports.PostgrestTransformBuilder = exports.PostgrestFilterBuilder = exports.PostgrestQueryBuilder = exports.PostgrestClient = void 0;\n// Always update wrapper.mjs when updating this file.\nconst PostgrestClient_1 = __importDefault(require(\"./PostgrestClient\"));\nexports.PostgrestClient = PostgrestClient_1.default;\nconst PostgrestQueryBuilder_1 = __importDefault(require(\"./PostgrestQueryBuilder\"));\nexports.PostgrestQueryBuilder = PostgrestQueryBuilder_1.default;\nconst PostgrestFilterBuilder_1 = __importDefault(require(\"./PostgrestFilterBuilder\"));\nexports.PostgrestFilterBuilder = PostgrestFilterBuilder_1.default;\nconst PostgrestTransformBuilder_1 = __importDefault(require(\"./PostgrestTransformBuilder\"));\nexports.PostgrestTransformBuilder = PostgrestTransformBuilder_1.default;\nconst PostgrestBuilder_1 = __importDefault(require(\"./PostgrestBuilder\"));\nexports.PostgrestBuilder = PostgrestBuilder_1.default;\nconst PostgrestError_1 = __importDefault(require(\"./PostgrestError\"));\nexports.PostgrestError = PostgrestError_1.default;\nexports.default = {\n    PostgrestClient: PostgrestClient_1.default,\n    PostgrestQueryBuilder: PostgrestQueryBuilder_1.default,\n    PostgrestFilterBuilder: PostgrestFilterBuilder_1.default,\n    PostgrestTransformBuilder: PostgrestTransformBuilder_1.default,\n    PostgrestBuilder: PostgrestBuilder_1.default,\n    PostgrestError: PostgrestError_1.default,\n};\n//# sourceMappingURL=index.js.map","import index from '../cjs/index.js'\nconst {\n  PostgrestClient,\n  PostgrestQueryBuilder,\n  PostgrestFilterBuilder,\n  PostgrestTransformBuilder,\n  PostgrestBuilder,\n  PostgrestError,\n} = index\n\nexport {\n  PostgrestBuilder,\n  PostgrestClient,\n  PostgrestFilterBuilder,\n  PostgrestQueryBuilder,\n  PostgrestTransformBuilder,\n  PostgrestError,\n}\n\n// compatibility with CJS output\nexport default {\n  PostgrestClient,\n  PostgrestQueryBuilder,\n  PostgrestFilterBuilder,\n  PostgrestTransformBuilder,\n  PostgrestBuilder,\n  PostgrestError,\n}\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n//# sourceMappingURL=constants.js.map","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} value The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\nexport const httpEndpointURL = (socketUrl) => {\n    let url = socketUrl;\n    url = url.replace(/^ws/i, 'http');\n    url = url.replace(/(\\/socket\\/websocket|\\/socket|\\/websocket)\\/?$/i, '');\n    return url.replace(/\\/+$/, '');\n};\n//# sourceMappingURL=transformers.js.map","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n//# sourceMappingURL=timer.js.map","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n//# sourceMappingURL=push.js.map","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n//# sourceMappingURL=RealtimePresence.js.map","import { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nimport { httpEndpointURL } from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n    REALTIME_LISTEN_TYPES[\"SYSTEM\"] = \"system\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\nexport const REALTIME_CHANNEL_STATES = CHANNEL_STATES;\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n */\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.subTopic = topic.replace(/^realtime:/i, '');\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n            private: false,\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n        this.broadcastEndpointURL =\n            httpEndpointURL(this.socket.endPoint) + '/api/broadcast';\n        this.private = this.params.config.private || false;\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (!this.socket.isConnected()) {\n            this.socket.connect();\n        }\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence, private: isPrivate }, } = this.params;\n            this._onError((e) => callback === null || callback === void 0 ? void 0 : callback(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR, e));\n            this._onClose(() => callback === null || callback === void 0 ? void 0 : callback(REALTIME_SUBSCRIBE_STATES.CLOSED));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n                private: isPrivate,\n            };\n            if (this.socket.accessTokenValue) {\n                accessTokenPayload.access_token = this.socket.accessTokenValue;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', async ({ postgres_changes }) => {\n                var _a;\n                this.socket.setAuth();\n                if (postgres_changes === undefined) {\n                    callback === null || callback === void 0 ? void 0 : callback(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = postgres_changes && postgres_changes[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback === null || callback === void 0 ? void 0 : callback(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR, new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback === null || callback === void 0 ? void 0 : callback(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR, new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback === null || callback === void 0 ? void 0 : callback(REALTIME_SUBSCRIBE_STATES.TIMED_OUT);\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    async track(payload, opts = {}) {\n        return await this.send({\n            type: 'presence',\n            event: 'track',\n            payload,\n        }, opts.timeout || this.timeout);\n    }\n    async untrack(opts = {}) {\n        return await this.send({\n            type: 'presence',\n            event: 'untrack',\n        }, opts);\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    /**\n     * Sends a message into the channel.\n     *\n     * @param args Arguments to send to channel\n     * @param args.type The type of event to send\n     * @param args.event The name of the event being sent\n     * @param args.payload Payload to be sent\n     * @param opts Options to be used during the send process\n     */\n    async send(args, opts = {}) {\n        var _a, _b;\n        if (!this._canPush() && args.type === 'broadcast') {\n            const { event, payload: endpoint_payload } = args;\n            const authorization = this.socket.accessTokenValue\n                ? `Bearer ${this.socket.accessTokenValue}`\n                : '';\n            const options = {\n                method: 'POST',\n                headers: {\n                    Authorization: authorization,\n                    apikey: this.socket.apiKey ? this.socket.apiKey : '',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    messages: [\n                        {\n                            topic: this.subTopic,\n                            event,\n                            payload: endpoint_payload,\n                            private: this.private,\n                        },\n                    ],\n                }),\n            };\n            try {\n                const response = await this._fetchWithTimeout(this.broadcastEndpointURL, options, (_a = opts.timeout) !== null && _a !== void 0 ? _a : this.timeout);\n                await ((_b = response.body) === null || _b === void 0 ? void 0 : _b.cancel());\n                return response.ok ? 'ok' : 'error';\n            }\n            catch (error) {\n                if (error.name === 'AbortError') {\n                    return 'timed out';\n                }\n                else {\n                    return 'error';\n                }\n            }\n        }\n        else {\n            return new Promise((resolve) => {\n                var _a, _b, _c;\n                const push = this._push(args.type, args, opts.timeout || this.timeout);\n                if (args.type === 'broadcast' && !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                    resolve('ok');\n                }\n                push.receive('ok', () => resolve('ok'));\n                push.receive('error', () => resolve('error'));\n                push.receive('timeout', () => resolve('timed out'));\n            });\n        }\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    async _fetchWithTimeout(url, options, timeout) {\n        const controller = new AbortController();\n        const id = setTimeout(() => controller.abort(), timeout);\n        const response = await this.socket.fetch(url, Object.assign(Object.assign({}, options), { signal: controller.signal }));\n        clearTimeout(id);\n        return response;\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n//# sourceMappingURL=RealtimeChannel.js.map","import { CHANNEL_EVENTS, CONNECTION_STATE, DEFAULT_HEADERS, DEFAULT_TIMEOUT, SOCKET_STATES, TRANSPORTS, VSN, WS_CLOSE_NORMAL, } from './lib/constants';\nimport Serializer from './lib/serializer';\nimport Timer from './lib/timer';\nimport { httpEndpointURL } from './lib/transformers';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nconst NATIVE_WEBSOCKET_AVAILABLE = typeof WebSocket !== 'undefined';\nconst WORKER_SCRIPT = `\n  addEventListener(\"message\", (e) => {\n    if (e.data.event === \"start\") {\n      setInterval(() => postMessage({ event: \"keepAlive\" }), e.data.interval);\n    }\n  });`;\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param httpEndpoint The string HTTP endpoint, ie, \"https://example.com\", \"/\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     * @param options.worker Use Web Worker to set a side flow. Defaults to false.\n     * @param options.workerUrl The URL of the worker script. Defaults to https://realtime.supabase.com/worker.js that includes a heartbeat event call to keep the connection alive.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessTokenValue = null;\n        this.apiKey = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.httpEndpoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.accessToken = null;\n        /**\n         * Use either custom fetch, if provided, or default fetch to make HTTP requests\n         *\n         * @internal\n         */\n        this._resolveFetch = (customFetch) => {\n            let _fetch;\n            if (customFetch) {\n                _fetch = customFetch;\n            }\n            else if (typeof fetch === 'undefined') {\n                _fetch = (...args) => import('@supabase/node-fetch').then(({ default: fetch }) => fetch(...args));\n            }\n            else {\n                _fetch = fetch;\n            }\n            return (...args) => _fetch(...args);\n        };\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        this.httpEndpoint = httpEndpointURL(endPoint);\n        if (options === null || options === void 0 ? void 0 : options.transport) {\n            this.transport = options.transport;\n        }\n        else {\n            this.transport = null;\n        }\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const accessTokenValue = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.apikey;\n        if (accessTokenValue) {\n            this.accessTokenValue = accessTokenValue;\n            this.apiKey = accessTokenValue;\n        }\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(async () => {\n            this.disconnect();\n            this.connect();\n        }, this.reconnectAfterMs);\n        this.fetch = this._resolveFetch(options === null || options === void 0 ? void 0 : options.fetch);\n        if (options === null || options === void 0 ? void 0 : options.worker) {\n            if (typeof window !== 'undefined' && !window.Worker) {\n                throw new Error('Web Worker is not supported');\n            }\n            this.worker = (options === null || options === void 0 ? void 0 : options.worker) || false;\n            this.workerUrl = options === null || options === void 0 ? void 0 : options.workerUrl;\n        }\n        this.accessToken = (options === null || options === void 0 ? void 0 : options.accessToken) || null;\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        if (this.transport) {\n            this.conn = new this.transport(this.endpointURL(), undefined, {\n                headers: this.headers,\n            });\n            return;\n        }\n        if (NATIVE_WEBSOCKET_AVAILABLE) {\n            this.conn = new WebSocket(this.endpointURL());\n            this.setupConnection();\n            return;\n        }\n        this.conn = new WSWebSocketDummy(this.endpointURL(), undefined, {\n            close: () => {\n                this.conn = null;\n            },\n        });\n        import('ws').then(({ default: WS }) => {\n            this.conn = new WS(this.endpointURL(), undefined, {\n                headers: this.headers,\n            });\n            this.setupConnection();\n        });\n    }\n    /**\n     * Returns the URL of the websocket.\n     * @returns string The URL of the websocket.\n     */\n    endpointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    /**\n     * Returns all created channels\n     */\n    getChannels() {\n        return this.channels;\n    }\n    /**\n     * Unsubscribes and removes a single channel\n     * @param channel A RealtimeChannel instance\n     */\n    async removeChannel(channel) {\n        const status = await channel.unsubscribe();\n        if (this.channels.length === 0) {\n            this.disconnect();\n        }\n        return status;\n    }\n    /**\n     * Unsubscribes and removes all channels\n     */\n    async removeAllChannels() {\n        const values_1 = await Promise.all(this.channels.map((channel) => channel.unsubscribe()));\n        this.disconnect();\n        return values_1;\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overridden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Returns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        const callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            callback();\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * If param is null it will use the `accessToken` callback function or the token set on the client.\n     *\n     * On callback used, it will set the value of the token internal to the client.\n     *\n     * @param token A JWT string to override the token set on the client.\n     */\n    async setAuth(token = null) {\n        let tokenToSend = token ||\n            (this.accessToken && (await this.accessToken())) ||\n            this.accessTokenValue;\n        if (tokenToSend) {\n            let parsed = null;\n            try {\n                parsed = JSON.parse(atob(tokenToSend.split('.')[1]));\n            }\n            catch (_error) { }\n            if (parsed && parsed.exp) {\n                let now = Math.floor(Date.now() / 1000);\n                let valid = now - parsed.exp < 0;\n                if (!valid) {\n                    this.log('auth', `InvalidJWTToken: Invalid value for JWT claim \"exp\" with value ${parsed.exp}`);\n                    return Promise.reject(`InvalidJWTToken: Invalid value for JWT claim \"exp\" with value ${parsed.exp}`);\n                }\n            }\n            this.accessTokenValue = tokenToSend;\n            this.channels.forEach((channel) => {\n                tokenToSend && channel.updateJoinPayload({ access_token: tokenToSend });\n                if (channel.joinedOnce && channel._isJoined()) {\n                    channel._push(CHANNEL_EVENTS.access_token, {\n                        access_token: tokenToSend,\n                    });\n                }\n            });\n        }\n    }\n    /**\n     * Sends a heartbeat message if the socket is connected.\n     */\n    async sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth();\n    }\n    /**\n     * Flushes send buffer\n     */\n    flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Sets up connection handlers.\n     *\n     * @internal\n     */\n    setupConnection() {\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if (ref && ref === this.pendingHeartbeatRef) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    async _onConnOpen() {\n        this.log('transport', `connected to ${this.endpointURL()}`);\n        this.flushSendBuffer();\n        this.reconnectTimer.reset();\n        if (!this.worker) {\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.heartbeatTimer = setInterval(() => this.sendHeartbeat(), this.heartbeatIntervalMs);\n        }\n        else {\n            if (this.workerUrl) {\n                this.log('worker', `starting worker for from ${this.workerUrl}`);\n            }\n            else {\n                this.log('worker', `starting default worker`);\n            }\n            const objectUrl = this._workerObjectUrl(this.workerUrl);\n            this.workerRef = new Worker(objectUrl);\n            this.workerRef.onerror = (error) => {\n                this.log('worker', 'worker error', error.message);\n                this.workerRef.terminate();\n            };\n            this.workerRef.onmessage = (event) => {\n                if (event.data.event === 'keepAlive') {\n                    this.sendHeartbeat();\n                }\n            };\n            this.workerRef.postMessage({\n                event: 'start',\n                interval: this.heartbeatIntervalMs,\n            });\n        }\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    _workerObjectUrl(url) {\n        let result_url;\n        if (url) {\n            result_url = url;\n        }\n        else {\n            const blob = new Blob([WORKER_SCRIPT], { type: 'application/javascript' });\n            result_url = URL.createObjectURL(blob);\n        }\n        return result_url;\n    }\n}\nclass WSWebSocketDummy {\n    constructor(address, _protocols, options) {\n        this.binaryType = 'arraybuffer';\n        this.onclose = () => { };\n        this.onerror = () => { };\n        this.onmessage = () => { };\n        this.onopen = () => { };\n        this.readyState = SOCKET_STATES.connecting;\n        this.send = () => { };\n        this.url = null;\n        this.url = address;\n        this.close = options.close;\n    }\n}\n//# sourceMappingURL=RealtimeClient.js.map","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => import('@supabase/node-fetch').then(({ default: fetch }) => fetch(...args));\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        // @ts-ignore\n        return (yield import('@supabase/node-fetch')).Response;\n    }\n    return Response;\n});\nexport const recursiveToCamel = (item) => {\n    if (Array.isArray(item)) {\n        return item.map((el) => recursiveToCamel(el));\n    }\n    else if (typeof item === 'function' || item !== Object(item)) {\n        return item;\n    }\n    const result = {};\n    Object.entries(item).forEach(([key, value]) => {\n        const newKey = key.replace(/([-_][a-z])/gi, (c) => c.toUpperCase().replace(/[-_]/g, ''));\n        result[newKey] = recursiveToCamel(value);\n    });\n    return result;\n};\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject, options) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res && !(options === null || options === void 0 ? void 0 : options.noResolveJson)) {\n        error\n            .json()\n            .then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((err) => {\n            reject(new StorageUnknownError(_getErrorMessage(err), err));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    if (body) {\n        params.body = JSON.stringify(body);\n    }\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject, options));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function head(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'HEAD', url, Object.assign(Object.assign({}, options), { noResolveJson: true }), parameters);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError, StorageError, StorageUnknownError } from '../lib/errors';\nimport { get, head, post, remove } from '../lib/fetch';\nimport { recursiveToCamel, resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                let headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                const metadata = options.metadata;\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    if (metadata) {\n                        body.append('metadata', this.encodeMetadata(metadata));\n                    }\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                    if (metadata) {\n                        body.append('metadata', this.encodeMetadata(metadata));\n                    }\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                    if (metadata) {\n                        headers['x-metadata'] = this.toBase64(this.encodeMetadata(metadata));\n                    }\n                }\n                if (fileOptions === null || fileOptions === void 0 ? void 0 : fileOptions.headers) {\n                    headers = Object.assign(Object.assign({}, headers), fileOptions.headers);\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, Object.assign({ method, body: body, headers }, ((options === null || options === void 0 ? void 0 : options.duplex) ? { duplex: options.duplex } : {})));\n                const data = yield res.json();\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath, id: data.Id, fullPath: data.Key },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = data;\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Upload a file with a token generated from `createSignedUploadUrl`.\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param token The token generated from `createSignedUploadUrl`\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadToSignedUrl(path, token, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cleanPath = this._removeEmptyFolders(path);\n            const _path = this._getFinalPath(cleanPath);\n            const url = new URL(this.url + `/object/upload/sign/${_path}`);\n            url.searchParams.set('token', token);\n            try {\n                let body;\n                const options = Object.assign({ upsert: DEFAULT_FILE_OPTIONS.upsert }, fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), { 'x-upsert': String(options.upsert) });\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const res = yield this.fetch(url.toString(), {\n                    method: 'PUT',\n                    body: body,\n                    headers,\n                });\n                const data = yield res.json();\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath, fullPath: data.Key },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = data;\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed upload URL.\n     * Signed upload URLs can be used to upload files to the bucket without further authentication.\n     * They are valid for 2 hours.\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param options.upsert If set to true, allows the file to be overwritten if it already exists.\n     */\n    createSignedUploadUrl(path, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                const headers = Object.assign({}, this.headers);\n                if (options === null || options === void 0 ? void 0 : options.upsert) {\n                    headers['x-upsert'] = 'true';\n                }\n                const data = yield post(this.fetch, `${this.url}/object/upload/sign/${_path}`, {}, { headers });\n                const url = new URL(this.url + data.url);\n                const token = url.searchParams.get('token');\n                if (!token) {\n                    throw new StorageError('No token returned by API');\n                }\n                return { data: { signedUrl: url.toString(), path, token }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     * @param options The destination options.\n     */\n    move(fromPath, toPath, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, {\n                    bucketId: this.bucketId,\n                    sourceKey: fromPath,\n                    destinationKey: toPath,\n                    destinationBucket: options === null || options === void 0 ? void 0 : options.destinationBucket,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     * @param options The destination options.\n     */\n    copy(fromPath, toPath, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, {\n                    bucketId: this.bucketId,\n                    sourceKey: fromPath,\n                    destinationKey: toPath,\n                    destinationBucket: options === null || options === void 0 ? void 0 : options.destinationBucket,\n                }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, Object.assign({ expiresIn }, ((options === null || options === void 0 ? void 0 : options.transform) ? { transform: options.transform } : {})), { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file from a private bucket. For public buckets, make a request to the URL returned from `getPublicUrl` instead.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    download(path, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n            const renderPath = wantsTransformation ? 'render/image/authenticated' : 'object';\n            const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n            const queryString = transformationQuery ? `?${transformationQuery}` : '';\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/${renderPath}/${_path}${queryString}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing file.\n     * @param path\n     */\n    info(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const _path = this._getFinalPath(path);\n            try {\n                const data = yield get(this.fetch, `${this.url}/object/info/${_path}`, {\n                    headers: this.headers,\n                });\n                return { data: recursiveToCamel(data), error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks the existence of a file.\n     * @param path\n     */\n    exists(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const _path = this._getFinalPath(path);\n            try {\n                yield head(this.fetch, `${this.url}/object/${_path}`, {\n                    headers: this.headers,\n                });\n                return { data: true, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error) && error instanceof StorageUnknownError) {\n                    const originalError = error.originalError;\n                    if ([400, 404].includes(originalError === null || originalError === void 0 ? void 0 : originalError.status)) {\n                        return { data: false, error };\n                    }\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download Triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const _queryString = [];\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `download=${options.download === true ? '' : options.download}`\n            : '';\n        if (downloadQueryParam !== '') {\n            _queryString.push(downloadQueryParam);\n        }\n        const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n        const renderPath = wantsTransformation ? 'render/image' : 'object';\n        const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n        if (transformationQuery !== '') {\n            _queryString.push(transformationQuery);\n        }\n        let queryString = _queryString.join('&');\n        if (queryString !== '') {\n            queryString = `?${queryString}`;\n        }\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/${renderPath}/public/${_path}${queryString}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    encodeMetadata(metadata) {\n        return JSON.stringify(metadata);\n    }\n    toBase64(data) {\n        if (typeof Buffer !== 'undefined') {\n            return Buffer.from(data).toString('base64');\n        }\n        return btoa(data);\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n    transformOptsToQueryString(transform) {\n        const params = [];\n        if (transform.width) {\n            params.push(`width=${transform.width}`);\n        }\n        if (transform.height) {\n            params.push(`height=${transform.height}`);\n        }\n        if (transform.resize) {\n            params.push(`resize=${transform.resize}`);\n        }\n        if (transform.format) {\n            params.push(`format=${transform.format}`);\n        }\n        if (transform.quality) {\n            params.push(`quality=${transform.quality}`);\n        }\n        return params.join('&');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map","// generated by genversion\nexport const version = '2.7.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n     * The global file size limit takes precedence over this value.\n     * The default value is null, which doesn't set a per bucket file size limit.\n     * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n     * The default value is null, which allows files with all mime types to be uploaded.\n     * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = {\n        public: false,\n    }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, {\n                    id,\n                    name: id,\n                    public: options.public,\n                    file_size_limit: options.fileSizeLimit,\n                    allowed_mime_types: options.allowedMimeTypes,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n     * The global file size limit takes precedence over this value.\n     * The default value is null, which doesn't set a per bucket file size limit.\n     * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n     * The default value is null, which allows files with all mime types to be uploaded.\n     * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, {\n                    id,\n                    name: id,\n                    public: options.public,\n                    file_size_limit: options.fileSizeLimit,\n                    allowed_mime_types: options.allowedMimeTypes,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=StorageBucketApi.js.map","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n//# sourceMappingURL=StorageClient.js.map","import { version } from './version';\nlet JS_ENV = '';\n// @ts-ignore\nif (typeof Deno !== 'undefined') {\n    JS_ENV = 'deno';\n}\nelse if (typeof document !== 'undefined') {\n    JS_ENV = 'web';\n}\nelse if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    JS_ENV = 'react-native';\n}\nelse {\n    JS_ENV = 'node';\n}\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js-${JS_ENV}/${version}` };\nexport const DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nexport const DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nexport const DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    flowType: 'implicit',\n};\nexport const DEFAULT_REALTIME_OPTIONS = {};\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// @ts-ignore\nimport nodeFetch, { Headers as NodeFetchHeaders } from '@supabase/node-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = nodeFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return NodeFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function ensureTrailingSlash(url) {\n    return url.endsWith('/') ? url : url + '/';\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    var _a, _b;\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    const result = {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions), { headers: Object.assign(Object.assign({}, ((_a = DEFAULT_GLOBAL_OPTIONS === null || DEFAULT_GLOBAL_OPTIONS === void 0 ? void 0 : DEFAULT_GLOBAL_OPTIONS.headers) !== null && _a !== void 0 ? _a : {})), ((_b = globalOptions === null || globalOptions === void 0 ? void 0 : globalOptions.headers) !== null && _b !== void 0 ? _b : {})) }),\n        accessToken: () => __awaiter(this, void 0, void 0, function* () { return ''; }),\n    };\n    if (options.accessToken) {\n        result.accessToken = options.accessToken;\n    }\n    else {\n        // hack around Required<>\n        delete result.accessToken;\n    }\n    return result;\n}\n//# sourceMappingURL=helpers.js.map","export const version = '2.69.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\n/** Current session will be checked for refresh at this interval. */\nexport const AUTO_REFRESH_TICK_DURATION_MS = 30 * 1000;\n/**\n * A token refresh will be attempted this many ticks before the current session expires. */\nexport const AUTO_REFRESH_TICK_THRESHOLD = 3;\n/*\n * Earliest time before an access token expires that the session should be refreshed.\n */\nexport const EXPIRY_MARGIN_MS = AUTO_REFRESH_TICK_THRESHOLD * AUTO_REFRESH_TICK_DURATION_MS;\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\nexport const API_VERSION_HEADER_NAME = 'X-Supabase-Api-Version';\nexport const API_VERSIONS = {\n    '2024-01-01': {\n        timestamp: Date.parse('2024-01-01T00:00:00.0Z'),\n        name: '2024-01-01',\n    },\n};\nexport const BASE64URL_REGEX = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;\nexport const JWKS_TTL = 600000; // 10 minutes\n//# sourceMappingURL=constants.js.map","export class AuthError extends Error {\n    constructor(message, status, code) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n        this.status = status;\n        this.code = code;\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status, code) {\n        super(message, status, code);\n        this.name = 'AuthApiError';\n        this.status = status;\n        this.code = code;\n    }\n}\nexport function isAuthApiError(error) {\n    return isAuthError(error) && error.name === 'AuthApiError';\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status, code) {\n        super(message, status, code);\n        this.name = name;\n        this.status = status;\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400, undefined);\n    }\n}\nexport function isAuthSessionMissingError(error) {\n    return isAuthError(error) && error.name === 'AuthSessionMissingError';\n}\nexport class AuthInvalidTokenResponseError extends CustomAuthError {\n    constructor() {\n        super('Auth session or user missing', 'AuthInvalidTokenResponseError', 500, undefined);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400, undefined);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500, undefined);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport function isAuthImplicitGrantRedirectError(error) {\n    return isAuthError(error) && error.name === 'AuthImplicitGrantRedirectError';\n}\nexport class AuthPKCEGrantCodeExchangeError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthPKCEGrantCodeExchangeError', 500, undefined);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status, undefined);\n    }\n}\nexport function isAuthRetryableFetchError(error) {\n    return isAuthError(error) && error.name === 'AuthRetryableFetchError';\n}\n/**\n * This error is thrown on certain methods when the password used is deemed\n * weak. Inspect the reasons to identify what password strength rules are\n * inadequate.\n */\nexport class AuthWeakPasswordError extends CustomAuthError {\n    constructor(message, status, reasons) {\n        super(message, 'AuthWeakPasswordError', status, 'weak_password');\n        this.reasons = reasons;\n    }\n}\nexport function isAuthWeakPasswordError(error) {\n    return isAuthError(error) && error.name === 'AuthWeakPasswordError';\n}\nexport class AuthInvalidJwtError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidJwtError', 400, 'invalid_jwt');\n    }\n}\n//# sourceMappingURL=errors.js.map","/**\n * Avoid modifying this file. It's part of\n * https://github.com/supabase-community/base64url-js.  Submit all fixes on\n * that repo!\n */\n/**\n * An array of characters that encode 6 bits into a Base64-URL alphabet\n * character.\n */\nconst TO_BASE64URL = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'.split('');\n/**\n * An array of characters that can appear in a Base64-URL encoded string but\n * should be ignored.\n */\nconst IGNORE_BASE64URL = ' \\t\\n\\r='.split('');\n/**\n * An array of 128 numbers that map a Base64-URL character to 6 bits, or if -2\n * used to skip the character, or if -1 used to error out.\n */\nconst FROM_BASE64URL = (() => {\n    const charMap = new Array(128);\n    for (let i = 0; i < charMap.length; i += 1) {\n        charMap[i] = -1;\n    }\n    for (let i = 0; i < IGNORE_BASE64URL.length; i += 1) {\n        charMap[IGNORE_BASE64URL[i].charCodeAt(0)] = -2;\n    }\n    for (let i = 0; i < TO_BASE64URL.length; i += 1) {\n        charMap[TO_BASE64URL[i].charCodeAt(0)] = i;\n    }\n    return charMap;\n})();\n/**\n * Converts a byte to a Base64-URL string.\n *\n * @param byte The byte to convert, or null to flush at the end of the byte sequence.\n * @param state The Base64 conversion state. Pass an initial value of `{ queue: 0, queuedBits: 0 }`.\n * @param emit A function called with the next Base64 character when ready.\n */\nexport function byteToBase64URL(byte, state, emit) {\n    if (byte !== null) {\n        state.queue = (state.queue << 8) | byte;\n        state.queuedBits += 8;\n        while (state.queuedBits >= 6) {\n            const pos = (state.queue >> (state.queuedBits - 6)) & 63;\n            emit(TO_BASE64URL[pos]);\n            state.queuedBits -= 6;\n        }\n    }\n    else if (state.queuedBits > 0) {\n        state.queue = state.queue << (6 - state.queuedBits);\n        state.queuedBits = 6;\n        while (state.queuedBits >= 6) {\n            const pos = (state.queue >> (state.queuedBits - 6)) & 63;\n            emit(TO_BASE64URL[pos]);\n            state.queuedBits -= 6;\n        }\n    }\n}\n/**\n * Converts a String char code (extracted using `string.charCodeAt(position)`) to a sequence of Base64-URL characters.\n *\n * @param charCode The char code of the JavaScript string.\n * @param state The Base64 state. Pass an initial value of `{ queue: 0, queuedBits: 0 }`.\n * @param emit A function called with the next byte.\n */\nexport function byteFromBase64URL(charCode, state, emit) {\n    const bits = FROM_BASE64URL[charCode];\n    if (bits > -1) {\n        // valid Base64-URL character\n        state.queue = (state.queue << 6) | bits;\n        state.queuedBits += 6;\n        while (state.queuedBits >= 8) {\n            emit((state.queue >> (state.queuedBits - 8)) & 0xff);\n            state.queuedBits -= 8;\n        }\n    }\n    else if (bits === -2) {\n        // ignore spaces, tabs, newlines, =\n        return;\n    }\n    else {\n        throw new Error(`Invalid Base64-URL character \"${String.fromCharCode(charCode)}\"`);\n    }\n}\n/**\n * Converts a JavaScript string (which may include any valid character) into a\n * Base64-URL encoded string. The string is first encoded in UTF-8 which is\n * then encoded as Base64-URL.\n *\n * @param str The string to convert.\n */\nexport function stringToBase64URL(str) {\n    const base64 = [];\n    const emitter = (char) => {\n        base64.push(char);\n    };\n    const state = { queue: 0, queuedBits: 0 };\n    stringToUTF8(str, (byte) => {\n        byteToBase64URL(byte, state, emitter);\n    });\n    byteToBase64URL(null, state, emitter);\n    return base64.join('');\n}\n/**\n * Converts a Base64-URL encoded string into a JavaScript string. It is assumed\n * that the underlying string has been encoded as UTF-8.\n *\n * @param str The Base64-URL encoded string.\n */\nexport function stringFromBase64URL(str) {\n    const conv = [];\n    const utf8Emit = (codepoint) => {\n        conv.push(String.fromCodePoint(codepoint));\n    };\n    const utf8State = {\n        utf8seq: 0,\n        codepoint: 0,\n    };\n    const b64State = { queue: 0, queuedBits: 0 };\n    const byteEmit = (byte) => {\n        stringFromUTF8(byte, utf8State, utf8Emit);\n    };\n    for (let i = 0; i < str.length; i += 1) {\n        byteFromBase64URL(str.charCodeAt(i), b64State, byteEmit);\n    }\n    return conv.join('');\n}\n/**\n * Converts a Unicode codepoint to a multi-byte UTF-8 sequence.\n *\n * @param codepoint The Unicode codepoint.\n * @param emit      Function which will be called for each UTF-8 byte that represents the codepoint.\n */\nexport function codepointToUTF8(codepoint, emit) {\n    if (codepoint <= 0x7f) {\n        emit(codepoint);\n        return;\n    }\n    else if (codepoint <= 0x7ff) {\n        emit(0xc0 | (codepoint >> 6));\n        emit(0x80 | (codepoint & 0x3f));\n        return;\n    }\n    else if (codepoint <= 0xffff) {\n        emit(0xe0 | (codepoint >> 12));\n        emit(0x80 | ((codepoint >> 6) & 0x3f));\n        emit(0x80 | (codepoint & 0x3f));\n        return;\n    }\n    else if (codepoint <= 0x10ffff) {\n        emit(0xf0 | (codepoint >> 18));\n        emit(0x80 | ((codepoint >> 12) & 0x3f));\n        emit(0x80 | ((codepoint >> 6) & 0x3f));\n        emit(0x80 | (codepoint & 0x3f));\n        return;\n    }\n    throw new Error(`Unrecognized Unicode codepoint: ${codepoint.toString(16)}`);\n}\n/**\n * Converts a JavaScript string to a sequence of UTF-8 bytes.\n *\n * @param str  The string to convert to UTF-8.\n * @param emit Function which will be called for each UTF-8 byte of the string.\n */\nexport function stringToUTF8(str, emit) {\n    for (let i = 0; i < str.length; i += 1) {\n        let codepoint = str.charCodeAt(i);\n        if (codepoint > 0xd7ff && codepoint <= 0xdbff) {\n            // most UTF-16 codepoints are Unicode codepoints, except values in this\n            // range where the next UTF-16 codepoint needs to be combined with the\n            // current one to get the Unicode codepoint\n            const highSurrogate = ((codepoint - 0xd800) * 0x400) & 0xffff;\n            const lowSurrogate = (str.charCodeAt(i + 1) - 0xdc00) & 0xffff;\n            codepoint = (lowSurrogate | highSurrogate) + 0x10000;\n            i += 1;\n        }\n        codepointToUTF8(codepoint, emit);\n    }\n}\n/**\n * Converts a UTF-8 byte to a Unicode codepoint.\n *\n * @param byte  The UTF-8 byte next in the sequence.\n * @param state The shared state between consecutive UTF-8 bytes in the\n *              sequence, an object with the shape `{ utf8seq: 0, codepoint: 0 }`.\n * @param emit  Function which will be called for each codepoint.\n */\nexport function stringFromUTF8(byte, state, emit) {\n    if (state.utf8seq === 0) {\n        if (byte <= 0x7f) {\n            emit(byte);\n            return;\n        }\n        // count the number of 1 leading bits until you reach 0\n        for (let leadingBit = 1; leadingBit < 6; leadingBit += 1) {\n            if (((byte >> (7 - leadingBit)) & 1) === 0) {\n                state.utf8seq = leadingBit;\n                break;\n            }\n        }\n        if (state.utf8seq === 2) {\n            state.codepoint = byte & 31;\n        }\n        else if (state.utf8seq === 3) {\n            state.codepoint = byte & 15;\n        }\n        else if (state.utf8seq === 4) {\n            state.codepoint = byte & 7;\n        }\n        else {\n            throw new Error('Invalid UTF-8 sequence');\n        }\n        state.utf8seq -= 1;\n    }\n    else if (state.utf8seq > 0) {\n        if (byte <= 0x7f) {\n            throw new Error('Invalid UTF-8 sequence');\n        }\n        state.codepoint = (state.codepoint << 6) | (byte & 63);\n        state.utf8seq -= 1;\n        if (state.utf8seq === 0) {\n            emit(state.codepoint);\n        }\n    }\n}\n/**\n * Helper functions to convert different types of strings to Uint8Array\n */\nexport function base64UrlToUint8Array(str) {\n    const result = [];\n    const state = { queue: 0, queuedBits: 0 };\n    const onByte = (byte) => {\n        result.push(byte);\n    };\n    for (let i = 0; i < str.length; i += 1) {\n        byteFromBase64URL(str.charCodeAt(i), state, onByte);\n    }\n    return new Uint8Array(result);\n}\nexport function stringToUint8Array(str) {\n    const result = [];\n    stringToUTF8(str, (byte) => result.push(byte));\n    return new Uint8Array(result);\n}\n//# sourceMappingURL=base64url.js.map","import { API_VERSION_HEADER_NAME, BASE64URL_REGEX } from './constants';\nimport { AuthInvalidJwtError } from './errors';\nimport { base64UrlToUint8Array, stringFromBase64URL } from './base64url';\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof window !== 'undefined' && typeof document !== 'undefined';\nconst localStorageWriteTests = {\n    tested: false,\n    writable: false,\n};\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n    if (!isBrowser()) {\n        return false;\n    }\n    try {\n        if (typeof globalThis.localStorage !== 'object') {\n            return false;\n        }\n    }\n    catch (e) {\n        // DOM exception when accessing `localStorage`\n        return false;\n    }\n    if (localStorageWriteTests.tested) {\n        return localStorageWriteTests.writable;\n    }\n    const randomKey = `lswt-${Math.random()}${Math.random()}`;\n    try {\n        globalThis.localStorage.setItem(randomKey, randomKey);\n        globalThis.localStorage.removeItem(randomKey);\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = true;\n    }\n    catch (e) {\n        // localStorage can't be written to\n        // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = false;\n    }\n    return localStorageWriteTests.writable;\n};\n/**\n * Extracts parameters encoded in the URL both in the query and fragment.\n */\nexport function parseParametersFromURL(href) {\n    const result = {};\n    const url = new URL(href);\n    if (url.hash && url.hash[0] === '#') {\n        try {\n            const hashSearchParams = new URLSearchParams(url.hash.substring(1));\n            hashSearchParams.forEach((value, key) => {\n                result[key] = value;\n            });\n        }\n        catch (e) {\n            // hash is not a query string\n        }\n    }\n    // search parameters take precedence over hash parameters\n    url.searchParams.forEach((value, key) => {\n        result[key] = value;\n    });\n    return result;\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => import('@supabase/node-fetch').then(({ default: fetch }) => fetch(...args));\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = async (storage, key, data) => {\n    await storage.setItem(key, JSON.stringify(data));\n};\nexport const getItemAsync = async (storage, key) => {\n    const value = await storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n};\nexport const removeItemAsync = async (storage, key) => {\n    await storage.removeItem(key);\n};\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\nexport function decodeJWT(token) {\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new AuthInvalidJwtError('Invalid JWT structure');\n    }\n    // Regex checks for base64url format\n    for (let i = 0; i < parts.length; i++) {\n        if (!BASE64URL_REGEX.test(parts[i])) {\n            throw new AuthInvalidJwtError('JWT not in base64url format');\n        }\n    }\n    const data = {\n        // using base64url lib\n        header: JSON.parse(stringFromBase64URL(parts[0])),\n        payload: JSON.parse(stringFromBase64URL(parts[1])),\n        signature: base64UrlToUint8Array(parts[2]),\n        raw: {\n            header: parts[0],\n            payload: parts[1],\n        },\n    };\n    return data;\n}\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport async function sleep(time) {\n    return await new Promise((accept) => {\n        setTimeout(() => accept(null), time);\n    });\n}\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable(fn, isRetryable) {\n    const promise = new Promise((accept, reject) => {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        (async () => {\n            for (let attempt = 0; attempt < Infinity; attempt++) {\n                try {\n                    const result = await fn(attempt);\n                    if (!isRetryable(attempt, null, result)) {\n                        accept(result);\n                        return;\n                    }\n                }\n                catch (e) {\n                    if (!isRetryable(attempt, e)) {\n                        reject(e);\n                        return;\n                    }\n                }\n            }\n        })();\n    });\n    return promise;\n}\nfunction dec2hex(dec) {\n    return ('0' + dec.toString(16)).substr(-2);\n}\n// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\nexport function generatePKCEVerifier() {\n    const verifierLength = 56;\n    const array = new Uint32Array(verifierLength);\n    if (typeof crypto === 'undefined') {\n        const charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\n        const charSetLen = charSet.length;\n        let verifier = '';\n        for (let i = 0; i < verifierLength; i++) {\n            verifier += charSet.charAt(Math.floor(Math.random() * charSetLen));\n        }\n        return verifier;\n    }\n    crypto.getRandomValues(array);\n    return Array.from(array, dec2hex).join('');\n}\nasync function sha256(randomString) {\n    const encoder = new TextEncoder();\n    const encodedData = encoder.encode(randomString);\n    const hash = await crypto.subtle.digest('SHA-256', encodedData);\n    const bytes = new Uint8Array(hash);\n    return Array.from(bytes)\n        .map((c) => String.fromCharCode(c))\n        .join('');\n}\nexport async function generatePKCEChallenge(verifier) {\n    const hasCryptoSupport = typeof crypto !== 'undefined' &&\n        typeof crypto.subtle !== 'undefined' &&\n        typeof TextEncoder !== 'undefined';\n    if (!hasCryptoSupport) {\n        console.warn('WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.');\n        return verifier;\n    }\n    const hashed = await sha256(verifier);\n    return btoa(hashed).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\nexport async function getCodeChallengeAndMethod(storage, storageKey, isPasswordRecovery = false) {\n    const codeVerifier = generatePKCEVerifier();\n    let storedCodeVerifier = codeVerifier;\n    if (isPasswordRecovery) {\n        storedCodeVerifier += '/PASSWORD_RECOVERY';\n    }\n    await setItemAsync(storage, `${storageKey}-code-verifier`, storedCodeVerifier);\n    const codeChallenge = await generatePKCEChallenge(codeVerifier);\n    const codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n    return [codeChallenge, codeChallengeMethod];\n}\n/** Parses the API version which is 2YYY-MM-DD. */\nconst API_VERSION_REGEX = /^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;\nexport function parseResponseAPIVersion(response) {\n    const apiVersion = response.headers.get(API_VERSION_HEADER_NAME);\n    if (!apiVersion) {\n        return null;\n    }\n    if (!apiVersion.match(API_VERSION_REGEX)) {\n        return null;\n    }\n    try {\n        const date = new Date(`${apiVersion}T00:00:00.0Z`);\n        return date;\n    }\n    catch (e) {\n        return null;\n    }\n}\nexport function validateExp(exp) {\n    if (!exp) {\n        throw new Error('Missing exp claim');\n    }\n    const timeNow = Math.floor(Date.now() / 1000);\n    if (exp <= timeNow) {\n        throw new Error('JWT has expired');\n    }\n}\nexport function getAlgorithm(alg) {\n    switch (alg) {\n        case 'RS256':\n            return {\n                name: 'RSASSA-PKCS1-v1_5',\n                hash: { name: 'SHA-256' },\n            };\n        case 'ES256':\n            return {\n                name: 'ECDSA',\n                namedCurve: 'P-256',\n                hash: { name: 'SHA-256' },\n            };\n        default:\n            throw new Error('Invalid alg claim');\n    }\n}\n//# sourceMappingURL=helpers.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { API_VERSIONS, API_VERSION_HEADER_NAME } from './constants';\nimport { expiresAt, looksLikeFetchResponse, parseResponseAPIVersion } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthWeakPasswordError, AuthUnknownError, AuthSessionMissingError, } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst NETWORK_ERROR_CODES = [502, 503, 504];\nexport async function handleError(error) {\n    var _a;\n    if (!looksLikeFetchResponse(error)) {\n        throw new AuthRetryableFetchError(_getErrorMessage(error), 0);\n    }\n    if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        throw new AuthRetryableFetchError(_getErrorMessage(error), error.status);\n    }\n    let data;\n    try {\n        data = await error.json();\n    }\n    catch (e) {\n        throw new AuthUnknownError(_getErrorMessage(e), e);\n    }\n    let errorCode = undefined;\n    const responseAPIVersion = parseResponseAPIVersion(error);\n    if (responseAPIVersion &&\n        responseAPIVersion.getTime() >= API_VERSIONS['2024-01-01'].timestamp &&\n        typeof data === 'object' &&\n        data &&\n        typeof data.code === 'string') {\n        errorCode = data.code;\n    }\n    else if (typeof data === 'object' && data && typeof data.error_code === 'string') {\n        errorCode = data.error_code;\n    }\n    if (!errorCode) {\n        // Legacy support for weak password errors, when there were no error codes\n        if (typeof data === 'object' &&\n            data &&\n            typeof data.weak_password === 'object' &&\n            data.weak_password &&\n            Array.isArray(data.weak_password.reasons) &&\n            data.weak_password.reasons.length &&\n            data.weak_password.reasons.reduce((a, i) => a && typeof i === 'string', true)) {\n            throw new AuthWeakPasswordError(_getErrorMessage(data), error.status, data.weak_password.reasons);\n        }\n    }\n    else if (errorCode === 'weak_password') {\n        throw new AuthWeakPasswordError(_getErrorMessage(data), error.status, ((_a = data.weak_password) === null || _a === void 0 ? void 0 : _a.reasons) || []);\n    }\n    else if (errorCode === 'session_not_found') {\n        // The `session_id` inside the JWT does not correspond to a row in the\n        // `sessions` table. This usually means the user has signed out, has been\n        // deleted, or their session has somehow been terminated.\n        throw new AuthSessionMissingError();\n    }\n    throw new AuthApiError(_getErrorMessage(data), error.status || 500, errorCode);\n}\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport async function _request(fetcher, method, url, options) {\n    var _a;\n    const headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n    if (!headers[API_VERSION_HEADER_NAME]) {\n        headers[API_VERSION_HEADER_NAME] = API_VERSIONS['2024-01-01'].name;\n    }\n    if (options === null || options === void 0 ? void 0 : options.jwt) {\n        headers['Authorization'] = `Bearer ${options.jwt}`;\n    }\n    const qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n    if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n        qs['redirect_to'] = options.redirectTo;\n    }\n    const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n    const data = await _handleRequest(fetcher, method, url + queryString, {\n        headers,\n        noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson,\n    }, {}, options === null || options === void 0 ? void 0 : options.body);\n    return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n}\nasync function _handleRequest(fetcher, method, url, options, parameters, body) {\n    const requestParams = _getRequestParams(method, options, parameters, body);\n    let result;\n    try {\n        result = await fetcher(url, Object.assign({}, requestParams));\n    }\n    catch (e) {\n        console.error(e);\n        // fetch failed, likely due to a network or CORS error\n        throw new AuthRetryableFetchError(_getErrorMessage(e), 0);\n    }\n    if (!result.ok) {\n        await handleError(result);\n    }\n    if (options === null || options === void 0 ? void 0 : options.noResolveJson) {\n        return result;\n    }\n    try {\n        return await result.json();\n    }\n    catch (e) {\n        await handleError(e);\n    }\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        if (!data.expires_at) {\n            session.expires_at = expiresAt(data.expires_in);\n        }\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _sessionResponsePassword(data) {\n    const response = _sessionResponse(data);\n    if (!response.error &&\n        data.weak_password &&\n        typeof data.weak_password === 'object' &&\n        Array.isArray(data.weak_password.reasons) &&\n        data.weak_password.reasons.length &&\n        data.weak_password.message &&\n        typeof data.weak_password.message === 'string' &&\n        data.weak_password.reasons.reduce((a, i) => a && typeof i === 'string', true)) {\n        response.data.weak_password = data.weak_password;\n    }\n    return response;\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\nexport function _noResolveJsonResponse(data) {\n    return data;\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n//# sourceMappingURL=fetch.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _noResolveJsonResponse, _request, _userResponse, } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     * @param scope The logout sope.\n     */\n    async signOut(jwt, scope = 'global') {\n        try {\n            await _request(this.fetch, 'POST', `${this.url}/logout?scope=${scope}`, {\n                headers: this.headers,\n                jwt,\n                noResolveJson: true,\n            });\n            return { data: null, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options Additional options to be included when inviting.\n     */\n    async inviteUserByEmail(email, options = {}) {\n        try {\n            return await _request(this.fetch, 'POST', `${this.url}/invite`, {\n                body: { email, data: options.data },\n                headers: this.headers,\n                redirectTo: options.redirectTo,\n                xform: _userResponse,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    async generateLink(params) {\n        try {\n            const { options } = params, rest = __rest(params, [\"options\"]);\n            const body = Object.assign(Object.assign({}, rest), options);\n            if ('newEmail' in rest) {\n                // replace newEmail with new_email in request body\n                body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                delete body['newEmail'];\n            }\n            return await _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                body: body,\n                headers: this.headers,\n                xform: _generateLinkResponse,\n                redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return {\n                    data: {\n                        properties: null,\n                        user: null,\n                    },\n                    error,\n                };\n            }\n            throw error;\n        }\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    async createUser(attributes) {\n        try {\n            return await _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                body: attributes,\n                headers: this.headers,\n                xform: _userResponse,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     * @param params An object which supports `page` and `perPage` as numbers, to alter the paginated results.\n     */\n    async listUsers(params) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        try {\n            const pagination = { nextPage: null, lastPage: 0, total: 0 };\n            const response = await _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                headers: this.headers,\n                noResolveJson: true,\n                query: {\n                    page: (_b = (_a = params === null || params === void 0 ? void 0 : params.page) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '',\n                    per_page: (_d = (_c = params === null || params === void 0 ? void 0 : params.perPage) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : '',\n                },\n                xform: _noResolveJsonResponse,\n            });\n            if (response.error)\n                throw response.error;\n            const users = await response.json();\n            const total = (_e = response.headers.get('x-total-count')) !== null && _e !== void 0 ? _e : 0;\n            const links = (_g = (_f = response.headers.get('link')) === null || _f === void 0 ? void 0 : _f.split(',')) !== null && _g !== void 0 ? _g : [];\n            if (links.length > 0) {\n                links.forEach((link) => {\n                    const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1));\n                    const rel = JSON.parse(link.split(';')[1].split('=')[1]);\n                    pagination[`${rel}Page`] = page;\n                });\n                pagination.total = parseInt(total);\n            }\n            return { data: Object.assign(Object.assign({}, users), pagination), error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { users: [] }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    async getUserById(uid) {\n        try {\n            return await _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                headers: this.headers,\n                xform: _userResponse,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    async updateUserById(uid, attributes) {\n        try {\n            return await _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                body: attributes,\n                headers: this.headers,\n                xform: _userResponse,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     * @param shouldSoftDelete If true, then the user will be soft-deleted from the auth schema. Soft deletion allows user identification from the hashed user ID but is not reversible.\n     * Defaults to false for backward compatibility.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    async deleteUser(id, shouldSoftDelete = false) {\n        try {\n            return await _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                headers: this.headers,\n                body: {\n                    should_soft_delete: shouldSoftDelete,\n                },\n                xform: _userResponse,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    async _listFactors(params) {\n        try {\n            const { data, error } = await _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                headers: this.headers,\n                xform: (factors) => {\n                    return { data: { factors }, error: null };\n                },\n            });\n            return { data, error };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    async _deleteFactor(params) {\n        try {\n            const data = await _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                headers: this.headers,\n            });\n            return { data, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=GoTrueAdminApi.js.map","import { supportsLocalStorage } from './helpers';\n/**\n * Provides safe access to the globalThis.localStorage property.\n */\nexport const localStorageAdapter = {\n    getItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\n/**\n * Returns a localStorage-like object that stores the key-value pairs in\n * memory.\n */\nexport function memoryLocalStorageAdapter(store = {}) {\n    return {\n        getItem: (key) => {\n            return store[key] || null;\n        },\n        setItem: (key, value) => {\n            store[key] = value;\n        },\n        removeItem: (key) => {\n            delete store[key];\n        },\n    };\n}\n//# sourceMappingURL=local-storage.js.map","import { supportsLocalStorage } from './helpers';\n/**\n * @experimental\n */\nexport const internals = {\n    /**\n     * @experimental\n     */\n    debug: !!(globalThis &&\n        supportsLocalStorage() &&\n        globalThis.localStorage &&\n        globalThis.localStorage.getItem('supabase.gotrue-js.locks.debug') === 'true'),\n};\n/**\n * An error thrown when a lock cannot be acquired after some amount of time.\n *\n * Use the {@link #isAcquireTimeout} property instead of checking with `instanceof`.\n */\nexport class LockAcquireTimeoutError extends Error {\n    constructor(message) {\n        super(message);\n        this.isAcquireTimeout = true;\n    }\n}\nexport class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError {\n}\nexport class ProcessLockAcquireTimeoutError extends LockAcquireTimeoutError {\n}\n/**\n * Implements a global exclusive lock using the Navigator LockManager API. It\n * is available on all browsers released after 2022-03-15 with Safari being the\n * last one to release support. If the API is not available, this function will\n * throw. Make sure you check availablility before configuring {@link\n * GoTrueClient}.\n *\n * You can turn on debugging by setting the `supabase.gotrue-js.locks.debug`\n * local storage item to `true`.\n *\n * Internals:\n *\n * Since the LockManager API does not preserve stack traces for the async\n * function passed in the `request` method, a trick is used where acquiring the\n * lock releases a previously started promise to run the operation in the `fn`\n * function. The lock waits for that promise to finish (with or without error),\n * while the function will finally wait for the result anyway.\n *\n * @param name Name of the lock to be acquired.\n * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n *                       the lock can't be acquired without waiting. If positive, the lock acquire\n *                       will time out after so many milliseconds. An error is\n *                       a timeout if it has `isAcquireTimeout` set to true.\n * @param fn The operation to run once the lock is acquired.\n */\nexport async function navigatorLock(name, acquireTimeout, fn) {\n    if (internals.debug) {\n        console.log('@supabase/gotrue-js: navigatorLock: acquire lock', name, acquireTimeout);\n    }\n    const abortController = new globalThis.AbortController();\n    if (acquireTimeout > 0) {\n        setTimeout(() => {\n            abortController.abort();\n            if (internals.debug) {\n                console.log('@supabase/gotrue-js: navigatorLock acquire timed out', name);\n            }\n        }, acquireTimeout);\n    }\n    // MDN article: https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request\n    // Wrapping navigator.locks.request() with a plain Promise is done as some\n    // libraries like zone.js patch the Promise object to track the execution\n    // context. However, it appears that most browsers use an internal promise\n    // implementation when using the navigator.locks.request() API causing them\n    // to lose context and emit confusing log messages or break certain features.\n    // This wrapping is believed to help zone.js track the execution context\n    // better.\n    return await Promise.resolve().then(() => globalThis.navigator.locks.request(name, acquireTimeout === 0\n        ? {\n            mode: 'exclusive',\n            ifAvailable: true,\n        }\n        : {\n            mode: 'exclusive',\n            signal: abortController.signal,\n        }, async (lock) => {\n        if (lock) {\n            if (internals.debug) {\n                console.log('@supabase/gotrue-js: navigatorLock: acquired', name, lock.name);\n            }\n            try {\n                return await fn();\n            }\n            finally {\n                if (internals.debug) {\n                    console.log('@supabase/gotrue-js: navigatorLock: released', name, lock.name);\n                }\n            }\n        }\n        else {\n            if (acquireTimeout === 0) {\n                if (internals.debug) {\n                    console.log('@supabase/gotrue-js: navigatorLock: not immediately available', name);\n                }\n                throw new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock \"${name}\" immediately failed`);\n            }\n            else {\n                if (internals.debug) {\n                    try {\n                        const result = await globalThis.navigator.locks.query();\n                        console.log('@supabase/gotrue-js: Navigator LockManager state', JSON.stringify(result, null, '  '));\n                    }\n                    catch (e) {\n                        console.warn('@supabase/gotrue-js: Error when querying Navigator LockManager state', e);\n                    }\n                }\n                // Browser is not following the Navigator LockManager spec, it\n                // returned a null lock when we didn't use ifAvailable. So we can\n                // pretend the lock is acquired in the name of backward compatibility\n                // and user experience and just run the function.\n                console.warn('@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request');\n                return await fn();\n            }\n        }\n    }));\n}\nconst PROCESS_LOCKS = {};\n/**\n * Implements a global exclusive lock that works only in the current process.\n * Useful for environments like React Native or other non-browser\n * single-process (i.e. no concept of \"tabs\") environments.\n *\n * Use {@link #navigatorLock} in browser environments.\n *\n * @param name Name of the lock to be acquired.\n * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n *                       the lock can't be acquired without waiting. If positive, the lock acquire\n *                       will time out after so many milliseconds. An error is\n *                       a timeout if it has `isAcquireTimeout` set to true.\n * @param fn The operation to run once the lock is acquired.\n */\nexport async function processLock(name, acquireTimeout, fn) {\n    var _a;\n    const previousOperation = (_a = PROCESS_LOCKS[name]) !== null && _a !== void 0 ? _a : Promise.resolve();\n    const currentOperation = Promise.race([\n        previousOperation.catch(() => {\n            // ignore error of previous operation that we're waiting to finish\n            return null;\n        }),\n        acquireTimeout >= 0\n            ? new Promise((_, reject) => {\n                setTimeout(() => {\n                    reject(new ProcessLockAcquireTimeoutError(`Acquring process lock with name \"${name}\" timed out`));\n                }, acquireTimeout);\n            })\n            : null,\n    ].filter((x) => x))\n        .catch((e) => {\n        if (e && e.isAcquireTimeout) {\n            throw e;\n        }\n        return null;\n    })\n        .then(async () => {\n        // previous operations finished and we didn't get a race on the acquire\n        // timeout, so the current operation can finally start\n        return await fn();\n    });\n    PROCESS_LOCKS[name] = currentOperation.catch(async (e) => {\n        if (e && e.isAcquireTimeout) {\n            // if the current operation timed out, it doesn't mean that the previous\n            // operation finished, so we need contnue waiting for it to finish\n            await previousOperation;\n            return null;\n        }\n        throw e;\n    });\n    // finally wait for the current operation to finish successfully, with an\n    // error or with an acquire timeout error\n    return await currentOperation;\n}\n//# sourceMappingURL=locks.js.map","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n//# sourceMappingURL=polyfills.js.map","import GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN_MS, AUTO_REFRESH_TICK_DURATION_MS, AUTO_REFRESH_TICK_THRESHOLD, GOTRUE_URL, STORAGE_KEY, JWKS_TTL, } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthPKCEGrantCodeExchangeError, AuthInvalidCredentialsError, AuthSessionMissingError, AuthInvalidTokenResponseError, AuthUnknownError, isAuthApiError, isAuthError, isAuthRetryableFetchError, isAuthSessionMissingError, isAuthImplicitGrantRedirectError, AuthInvalidJwtError, } from './lib/errors';\nimport { _request, _sessionResponse, _sessionResponsePassword, _userResponse, _ssoResponse, } from './lib/fetch';\nimport { Deferred, getItemAsync, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, retryable, sleep, supportsLocalStorage, parseParametersFromURL, getCodeChallengeAndMethod, getAlgorithm, validateExp, decodeJWT, } from './lib/helpers';\nimport { localStorageAdapter, memoryLocalStorageAdapter } from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\nimport { version } from './lib/version';\nimport { LockAcquireTimeoutError, navigatorLock } from './lib/locks';\nimport { stringToUint8Array } from './lib/base64url';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n    flowType: 'implicit',\n    debug: false,\n    hasCustomAuthorizationHeader: false,\n};\nasync function lockNoOp(name, acquireTimeout, fn) {\n    return await fn();\n}\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        var _a, _b;\n        this.memoryStorage = null;\n        this.stateChangeEmitters = new Map();\n        this.autoRefreshTicker = null;\n        this.visibilityChangedCallback = null;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        this.hasCustomAuthorizationHeader = false;\n        this.suppressGetSessionWarning = false;\n        this.lockAcquired = false;\n        this.pendingInLock = [];\n        /**\n         * Used to broadcast state change events to other tabs listening.\n         */\n        this.broadcastChannel = null;\n        this.logger = console.log;\n        this.instanceID = GoTrueClient.nextInstanceID;\n        GoTrueClient.nextInstanceID += 1;\n        if (this.instanceID > 0 && isBrowser()) {\n            console.warn('Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.');\n        }\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.logDebugMessages = !!settings.debug;\n        if (typeof settings.debug === 'function') {\n            this.logger = settings.debug;\n        }\n        this.persistSession = settings.persistSession;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.lock = settings.lock || lockNoOp;\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.flowType = settings.flowType;\n        this.hasCustomAuthorizationHeader = settings.hasCustomAuthorizationHeader;\n        if (settings.lock) {\n            this.lock = settings.lock;\n        }\n        else if (isBrowser() && ((_a = globalThis === null || globalThis === void 0 ? void 0 : globalThis.navigator) === null || _a === void 0 ? void 0 : _a.locks)) {\n            this.lock = navigatorLock;\n        }\n        else {\n            this.lock = lockNoOp;\n        }\n        this.jwks = { keys: [] };\n        this.jwks_cached_at = Number.MIN_SAFE_INTEGER;\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n        if (this.persistSession) {\n            if (settings.storage) {\n                this.storage = settings.storage;\n            }\n            else {\n                if (supportsLocalStorage()) {\n                    this.storage = localStorageAdapter;\n                }\n                else {\n                    this.memoryStorage = {};\n                    this.storage = memoryLocalStorageAdapter(this.memoryStorage);\n                }\n            }\n        }\n        else {\n            this.memoryStorage = {};\n            this.storage = memoryLocalStorageAdapter(this.memoryStorage);\n        }\n        if (isBrowser() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) {\n            try {\n                this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey);\n            }\n            catch (e) {\n                console.error('Failed to create a new BroadcastChannel, multi-tab state changes will not be available', e);\n            }\n            (_b = this.broadcastChannel) === null || _b === void 0 ? void 0 : _b.addEventListener('message', async (event) => {\n                this._debug('received broadcast notification from other tab or client', event);\n                await this._notifyAllSubscribers(event.data.event, event.data.session, false); // broadcast = false so we don't get an endless loop of messages\n            });\n        }\n        this.initialize();\n    }\n    _debug(...args) {\n        if (this.logDebugMessages) {\n            this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`, ...args);\n        }\n        return this;\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    async initialize() {\n        if (this.initializePromise) {\n            return await this.initializePromise;\n        }\n        this.initializePromise = (async () => {\n            return await this._acquireLock(-1, async () => {\n                return await this._initialize();\n            });\n        })();\n        return await this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    async _initialize() {\n        var _a;\n        try {\n            const params = parseParametersFromURL(window.location.href);\n            let callbackUrlType = 'none';\n            if (this._isImplicitGrantCallback(params)) {\n                callbackUrlType = 'implicit';\n            }\n            else if (await this._isPKCECallback(params)) {\n                callbackUrlType = 'pkce';\n            }\n            /**\n             * Attempt to get the session from the URL only if these conditions are fulfilled\n             *\n             * Note: If the URL isn't one of the callback url types (implicit or pkce),\n             * then there could be an existing session so we don't want to prematurely remove it\n             */\n            if (isBrowser() && this.detectSessionInUrl && callbackUrlType !== 'none') {\n                const { data, error } = await this._getSessionFromURL(params, callbackUrlType);\n                if (error) {\n                    this._debug('#_initialize()', 'error detecting session from URL', error);\n                    if (isAuthImplicitGrantRedirectError(error)) {\n                        const errorCode = (_a = error.details) === null || _a === void 0 ? void 0 : _a.code;\n                        if (errorCode === 'identity_already_exists' ||\n                            errorCode === 'identity_not_found' ||\n                            errorCode === 'single_identity_not_deletable') {\n                            return { error };\n                        }\n                    }\n                    // failed login attempt via url,\n                    // remove old session as in verifyOtp, signUp and signInWith*\n                    await this._removeSession();\n                    return { error };\n                }\n                const { session, redirectType } = data;\n                this._debug('#_initialize()', 'detected session in URL', session, 'redirect type', redirectType);\n                await this._saveSession(session);\n                setTimeout(async () => {\n                    if (redirectType === 'recovery') {\n                        await this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                    }\n                    else {\n                        await this._notifyAllSubscribers('SIGNED_IN', session);\n                    }\n                }, 0);\n                return { error: null };\n            }\n            // no login attempt via callback url try to recover session from storage\n            await this._recoverAndRefresh();\n            return { error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { error };\n            }\n            return {\n                error: new AuthUnknownError('Unexpected error during initialization', error),\n            };\n        }\n        finally {\n            await this._handleVisibilityChange();\n            this._debug('#_initialize()', 'end');\n        }\n    }\n    /**\n     * Creates a new anonymous user.\n     *\n     * @returns A session where the is_anonymous claim in the access token JWT set to true\n     */\n    async signInAnonymously(credentials) {\n        var _a, _b, _c;\n        try {\n            const res = await _request(this.fetch, 'POST', `${this.url}/signup`, {\n                headers: this.headers,\n                body: {\n                    data: (_b = (_a = credentials === null || credentials === void 0 ? void 0 : credentials.options) === null || _a === void 0 ? void 0 : _a.data) !== null && _b !== void 0 ? _b : {},\n                    gotrue_meta_security: { captcha_token: (_c = credentials === null || credentials === void 0 ? void 0 : credentials.options) === null || _c === void 0 ? void 0 : _c.captchaToken },\n                },\n                xform: _sessionResponse,\n            });\n            const { data, error } = res;\n            if (error || !data) {\n                return { data: { user: null, session: null }, error: error };\n            }\n            const session = data.session;\n            const user = data.user;\n            if (data.session) {\n                await this._saveSession(data.session);\n                await this._notifyAllSubscribers('SIGNED_IN', session);\n            }\n            return { data: { user, session }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Creates a new user.\n     *\n     * Be aware that if a user account exists in the system you may get back an\n     * error message that attempts to hide this information from the user.\n     * This method has support for PKCE via email signups. The PKCE flow cannot be used when autoconfirm is enabled.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    async signUp(credentials) {\n        var _a, _b, _c;\n        try {\n            let res;\n            if ('email' in credentials) {\n                const { email, password, options } = credentials;\n                let codeChallenge = null;\n                let codeChallengeMethod = null;\n                if (this.flowType === 'pkce') {\n                    ;\n                    [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(this.storage, this.storageKey);\n                }\n                res = await _request(this.fetch, 'POST', `${this.url}/signup`, {\n                    headers: this.headers,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    body: {\n                        email,\n                        password,\n                        data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        code_challenge: codeChallenge,\n                        code_challenge_method: codeChallengeMethod,\n                    },\n                    xform: _sessionResponse,\n                });\n            }\n            else if ('phone' in credentials) {\n                const { phone, password, options } = credentials;\n                res = await _request(this.fetch, 'POST', `${this.url}/signup`, {\n                    headers: this.headers,\n                    body: {\n                        phone,\n                        password,\n                        data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                        channel: (_c = options === null || options === void 0 ? void 0 : options.channel) !== null && _c !== void 0 ? _c : 'sms',\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponse,\n                });\n            }\n            else {\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n            }\n            const { data, error } = res;\n            if (error || !data) {\n                return { data: { user: null, session: null }, error: error };\n            }\n            const session = data.session;\n            const user = data.user;\n            if (data.session) {\n                await this._saveSession(data.session);\n                await this._notifyAllSubscribers('SIGNED_IN', session);\n            }\n            return { data: { user, session }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or that the\n     * email/phone and password combination is wrong or that the account can only\n     * be accessed via social login.\n     */\n    async signInWithPassword(credentials) {\n        try {\n            let res;\n            if ('email' in credentials) {\n                const { email, password, options } = credentials;\n                res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                    headers: this.headers,\n                    body: {\n                        email,\n                        password,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponsePassword,\n                });\n            }\n            else if ('phone' in credentials) {\n                const { phone, password, options } = credentials;\n                res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                    headers: this.headers,\n                    body: {\n                        phone,\n                        password,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponsePassword,\n                });\n            }\n            else {\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n            }\n            const { data, error } = res;\n            if (error) {\n                return { data: { user: null, session: null }, error };\n            }\n            else if (!data || !data.session || !data.user) {\n                return { data: { user: null, session: null }, error: new AuthInvalidTokenResponseError() };\n            }\n            if (data.session) {\n                await this._saveSession(data.session);\n                await this._notifyAllSubscribers('SIGNED_IN', data.session);\n            }\n            return {\n                data: Object.assign({ user: data.user, session: data.session }, (data.weak_password ? { weakPassword: data.weak_password } : null)),\n                error,\n            };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     * This method supports the PKCE flow.\n     */\n    async signInWithOAuth(credentials) {\n        var _a, _b, _c, _d;\n        return await this._handleProviderSignIn(credentials.provider, {\n            redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n            scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n            queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n            skipBrowserRedirect: (_d = credentials.options) === null || _d === void 0 ? void 0 : _d.skipBrowserRedirect,\n        });\n    }\n    /**\n     * Log in an existing user by exchanging an Auth Code issued during the PKCE flow.\n     */\n    async exchangeCodeForSession(authCode) {\n        await this.initializePromise;\n        return this._acquireLock(-1, async () => {\n            return this._exchangeCodeForSession(authCode);\n        });\n    }\n    async _exchangeCodeForSession(authCode) {\n        const storageItem = await getItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n        const [codeVerifier, redirectType] = (storageItem !== null && storageItem !== void 0 ? storageItem : '').split('/');\n        try {\n            const { data, error } = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=pkce`, {\n                headers: this.headers,\n                body: {\n                    auth_code: authCode,\n                    code_verifier: codeVerifier,\n                },\n                xform: _sessionResponse,\n            });\n            await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            if (error) {\n                throw error;\n            }\n            if (!data || !data.session || !data.user) {\n                return {\n                    data: { user: null, session: null, redirectType: null },\n                    error: new AuthInvalidTokenResponseError(),\n                };\n            }\n            if (data.session) {\n                await this._saveSession(data.session);\n                await this._notifyAllSubscribers('SIGNED_IN', data.session);\n            }\n            return { data: Object.assign(Object.assign({}, data), { redirectType: redirectType !== null && redirectType !== void 0 ? redirectType : null }), error };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null, redirectType: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Allows signing in with an OIDC ID token. The authentication provider used\n     * should be enabled and configured.\n     */\n    async signInWithIdToken(credentials) {\n        try {\n            const { options, provider, token, access_token, nonce } = credentials;\n            const res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n                headers: this.headers,\n                body: {\n                    provider,\n                    id_token: token,\n                    access_token,\n                    nonce,\n                    gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                },\n                xform: _sessionResponse,\n            });\n            const { data, error } = res;\n            if (error) {\n                return { data: { user: null, session: null }, error };\n            }\n            else if (!data || !data.session || !data.user) {\n                return {\n                    data: { user: null, session: null },\n                    error: new AuthInvalidTokenResponseError(),\n                };\n            }\n            if (data.session) {\n                await this._saveSession(data.session);\n                await this._notifyAllSubscribers('SIGNED_IN', data.session);\n            }\n            return { data, error };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     *\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or, that the account\n     * can only be accessed via social login.\n     *\n     * Do note that you will need to configure a Whatsapp sender on Twilio\n     * if you are using phone sign in with the 'whatsapp' channel. The whatsapp\n     * channel is not supported on other providers\n     * at this time.\n     * This method supports PKCE when an email is passed.\n     */\n    async signInWithOtp(credentials) {\n        var _a, _b, _c, _d, _e;\n        try {\n            if ('email' in credentials) {\n                const { email, options } = credentials;\n                let codeChallenge = null;\n                let codeChallengeMethod = null;\n                if (this.flowType === 'pkce') {\n                    ;\n                    [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(this.storage, this.storageKey);\n                }\n                const { error } = await _request(this.fetch, 'POST', `${this.url}/otp`, {\n                    headers: this.headers,\n                    body: {\n                        email,\n                        data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                        create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        code_challenge: codeChallenge,\n                        code_challenge_method: codeChallengeMethod,\n                    },\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                });\n                return { data: { user: null, session: null }, error };\n            }\n            if ('phone' in credentials) {\n                const { phone, options } = credentials;\n                const { data, error } = await _request(this.fetch, 'POST', `${this.url}/otp`, {\n                    headers: this.headers,\n                    body: {\n                        phone,\n                        data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                        create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        channel: (_e = options === null || options === void 0 ? void 0 : options.channel) !== null && _e !== void 0 ? _e : 'sms',\n                    },\n                });\n                return { data: { user: null, session: null, messageId: data === null || data === void 0 ? void 0 : data.message_id }, error };\n            }\n            throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Log in a user given a User supplied OTP or TokenHash received through mobile or email.\n     */\n    async verifyOtp(params) {\n        var _a, _b;\n        try {\n            let redirectTo = undefined;\n            let captchaToken = undefined;\n            if ('options' in params) {\n                redirectTo = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo;\n                captchaToken = (_b = params.options) === null || _b === void 0 ? void 0 : _b.captchaToken;\n            }\n            const { data, error } = await _request(this.fetch, 'POST', `${this.url}/verify`, {\n                headers: this.headers,\n                body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: captchaToken } }),\n                redirectTo,\n                xform: _sessionResponse,\n            });\n            if (error) {\n                throw error;\n            }\n            if (!data) {\n                throw new Error('An error occurred on token verification.');\n            }\n            const session = data.session;\n            const user = data.user;\n            if (session === null || session === void 0 ? void 0 : session.access_token) {\n                await this._saveSession(session);\n                await this._notifyAllSubscribers(params.type == 'recovery' ? 'PASSWORD_RECOVERY' : 'SIGNED_IN', session);\n            }\n            return { data: { user, session }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     */\n    async signInWithSSO(params) {\n        var _a, _b, _c;\n        try {\n            let codeChallenge = null;\n            let codeChallengeMethod = null;\n            if (this.flowType === 'pkce') {\n                ;\n                [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(this.storage, this.storageKey);\n            }\n            return await _request(this.fetch, 'POST', `${this.url}/sso`, {\n                body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                    ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                    : null)), { skip_http_redirect: true, code_challenge: codeChallenge, code_challenge_method: codeChallengeMethod }),\n                headers: this.headers,\n                xform: _ssoResponse,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Sends a reauthentication OTP to the user's email or phone number.\n     * Requires the user to be signed-in.\n     */\n    async reauthenticate() {\n        await this.initializePromise;\n        return await this._acquireLock(-1, async () => {\n            return await this._reauthenticate();\n        });\n    }\n    async _reauthenticate() {\n        try {\n            return await this._useSession(async (result) => {\n                const { data: { session }, error: sessionError, } = result;\n                if (sessionError)\n                    throw sessionError;\n                if (!session)\n                    throw new AuthSessionMissingError();\n                const { error } = await _request(this.fetch, 'GET', `${this.url}/reauthenticate`, {\n                    headers: this.headers,\n                    jwt: session.access_token,\n                });\n                return { data: { user: null, session: null }, error };\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Resends an existing signup confirmation email, email change email, SMS OTP or phone change OTP.\n     */\n    async resend(credentials) {\n        try {\n            const endpoint = `${this.url}/resend`;\n            if ('email' in credentials) {\n                const { email, type, options } = credentials;\n                const { error } = await _request(this.fetch, 'POST', endpoint, {\n                    headers: this.headers,\n                    body: {\n                        email,\n                        type,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                });\n                return { data: { user: null, session: null }, error };\n            }\n            else if ('phone' in credentials) {\n                const { phone, type, options } = credentials;\n                const { data, error } = await _request(this.fetch, 'POST', endpoint, {\n                    headers: this.headers,\n                    body: {\n                        phone,\n                        type,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                });\n                return { data: { user: null, session: null, messageId: data === null || data === void 0 ? void 0 : data.message_id }, error };\n            }\n            throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a type');\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     *\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     *\n     * **IMPORTANT:** This method loads values directly from the storage attached\n     * to the client. If that storage is based on request cookies for example,\n     * the values in it may not be authentic and therefore it's strongly advised\n     * against using this method and its results in such circumstances. A warning\n     * will be emitted if this is detected. Use {@link #getUser()} instead.\n     */\n    async getSession() {\n        await this.initializePromise;\n        const result = await this._acquireLock(-1, async () => {\n            return this._useSession(async (result) => {\n                return result;\n            });\n        });\n        return result;\n    }\n    /**\n     * Acquires a global lock based on the storage key.\n     */\n    async _acquireLock(acquireTimeout, fn) {\n        this._debug('#_acquireLock', 'begin', acquireTimeout);\n        try {\n            if (this.lockAcquired) {\n                const last = this.pendingInLock.length\n                    ? this.pendingInLock[this.pendingInLock.length - 1]\n                    : Promise.resolve();\n                const result = (async () => {\n                    await last;\n                    return await fn();\n                })();\n                this.pendingInLock.push((async () => {\n                    try {\n                        await result;\n                    }\n                    catch (e) {\n                        // we just care if it finished\n                    }\n                })());\n                return result;\n            }\n            return await this.lock(`lock:${this.storageKey}`, acquireTimeout, async () => {\n                this._debug('#_acquireLock', 'lock acquired for storage key', this.storageKey);\n                try {\n                    this.lockAcquired = true;\n                    const result = fn();\n                    this.pendingInLock.push((async () => {\n                        try {\n                            await result;\n                        }\n                        catch (e) {\n                            // we just care if it finished\n                        }\n                    })());\n                    await result;\n                    // keep draining the queue until there's nothing to wait on\n                    while (this.pendingInLock.length) {\n                        const waitOn = [...this.pendingInLock];\n                        await Promise.all(waitOn);\n                        this.pendingInLock.splice(0, waitOn.length);\n                    }\n                    return await result;\n                }\n                finally {\n                    this._debug('#_acquireLock', 'lock released for storage key', this.storageKey);\n                    this.lockAcquired = false;\n                }\n            });\n        }\n        finally {\n            this._debug('#_acquireLock', 'end');\n        }\n    }\n    /**\n     * Use instead of {@link #getSession} inside the library. It is\n     * semantically usually what you want, as getting a session involves some\n     * processing afterwards that requires only one client operating on the\n     * session at once across multiple tabs or processes.\n     */\n    async _useSession(fn) {\n        this._debug('#_useSession', 'begin');\n        try {\n            // the use of __loadSession here is the only correct use of the function!\n            const result = await this.__loadSession();\n            return await fn(result);\n        }\n        finally {\n            this._debug('#_useSession', 'end');\n        }\n    }\n    /**\n     * NEVER USE DIRECTLY!\n     *\n     * Always use {@link #_useSession}.\n     */\n    async __loadSession() {\n        this._debug('#__loadSession()', 'begin');\n        if (!this.lockAcquired) {\n            this._debug('#__loadSession()', 'used outside of an acquired lock!', new Error().stack);\n        }\n        try {\n            let currentSession = null;\n            const maybeSession = await getItemAsync(this.storage, this.storageKey);\n            this._debug('#getSession()', 'session from storage', maybeSession);\n            if (maybeSession !== null) {\n                if (this._isValidSession(maybeSession)) {\n                    currentSession = maybeSession;\n                }\n                else {\n                    this._debug('#getSession()', 'session from storage is not valid');\n                    await this._removeSession();\n                }\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            // A session is considered expired before the access token _actually_\n            // expires. When the autoRefreshToken option is off (or when the tab is\n            // in the background), very eager users of getSession() -- like\n            // realtime-js -- might send a valid JWT which will expire by the time it\n            // reaches the server.\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at * 1000 - Date.now() < EXPIRY_MARGIN_MS\n                : false;\n            this._debug('#__loadSession()', `session has${hasExpired ? '' : ' not'} expired`, 'expires_at', currentSession.expires_at);\n            if (!hasExpired) {\n                if (this.storage.isServer) {\n                    let suppressWarning = this.suppressGetSessionWarning;\n                    const proxySession = new Proxy(currentSession, {\n                        get: (target, prop, receiver) => {\n                            if (!suppressWarning && prop === 'user') {\n                                // only show warning when the user object is being accessed from the server\n                                console.warn('Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.');\n                                suppressWarning = true; // keeps this proxy instance from logging additional warnings\n                                this.suppressGetSessionWarning = true; // keeps this client's future proxy instances from warning\n                            }\n                            return Reflect.get(target, prop, receiver);\n                        },\n                    });\n                    currentSession = proxySession;\n                }\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = await this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        }\n        finally {\n            this._debug('#__loadSession()', 'end');\n        }\n    }\n    /**\n     * Gets the current user details if there is an existing session. This method\n     * performs a network request to the Supabase Auth server, so the returned\n     * value is authentic and can be used to base authorization rules on.\n     *\n     * @param jwt Takes in an optional access token JWT. If no JWT is provided, the JWT from the current session is used.\n     */\n    async getUser(jwt) {\n        if (jwt) {\n            return await this._getUser(jwt);\n        }\n        await this.initializePromise;\n        const result = await this._acquireLock(-1, async () => {\n            return await this._getUser();\n        });\n        return result;\n    }\n    async _getUser(jwt) {\n        try {\n            if (jwt) {\n                return await _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            return await this._useSession(async (result) => {\n                var _a, _b, _c;\n                const { data, error } = result;\n                if (error) {\n                    throw error;\n                }\n                // returns an error if there is no access_token or custom authorization header\n                if (!((_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) && !this.hasCustomAuthorizationHeader) {\n                    return { data: { user: null }, error: new AuthSessionMissingError() };\n                }\n                return await _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: (_c = (_b = data.session) === null || _b === void 0 ? void 0 : _b.access_token) !== null && _c !== void 0 ? _c : undefined,\n                    xform: _userResponse,\n                });\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                if (isAuthSessionMissingError(error)) {\n                    // JWT contains a `session_id` which does not correspond to an active\n                    // session in the database, indicating the user is signed out.\n                    await this._removeSession();\n                    await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n                }\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Updates user data for a logged in user.\n     */\n    async updateUser(attributes, options = {}) {\n        await this.initializePromise;\n        return await this._acquireLock(-1, async () => {\n            return await this._updateUser(attributes, options);\n        });\n    }\n    async _updateUser(attributes, options = {}) {\n        try {\n            return await this._useSession(async (result) => {\n                const { data: sessionData, error: sessionError } = result;\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                let codeChallenge = null;\n                let codeChallengeMethod = null;\n                if (this.flowType === 'pkce' && attributes.email != null) {\n                    ;\n                    [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(this.storage, this.storageKey);\n                }\n                const { data, error: userError } = await _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    body: Object.assign(Object.assign({}, attributes), { code_challenge: codeChallenge, code_challenge_method: codeChallengeMethod }),\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                await this._saveSession(session);\n                await this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token or access token in the current session is invalid, an error will be thrown.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    async setSession(currentSession) {\n        await this.initializePromise;\n        return await this._acquireLock(-1, async () => {\n            return await this._setSession(currentSession);\n        });\n    }\n    async _setSession(currentSession) {\n        try {\n            if (!currentSession.access_token || !currentSession.refresh_token) {\n                throw new AuthSessionMissingError();\n            }\n            const timeNow = Date.now() / 1000;\n            let expiresAt = timeNow;\n            let hasExpired = true;\n            let session = null;\n            const { payload } = decodeJWT(currentSession.access_token);\n            if (payload.exp) {\n                expiresAt = payload.exp;\n                hasExpired = expiresAt <= timeNow;\n            }\n            if (hasExpired) {\n                const { session: refreshedSession, error } = await this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!refreshedSession) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                session = refreshedSession;\n            }\n            else {\n                const { data, error } = await this._getUser(currentSession.access_token);\n                if (error) {\n                    throw error;\n                }\n                session = {\n                    access_token: currentSession.access_token,\n                    refresh_token: currentSession.refresh_token,\n                    user: data.user,\n                    token_type: 'bearer',\n                    expires_in: expiresAt - timeNow,\n                    expires_at: expiresAt,\n                };\n                await this._saveSession(session);\n                await this._notifyAllSubscribers('SIGNED_IN', session);\n            }\n            return { data: { user: session.user, session }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { session: null, user: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    async refreshSession(currentSession) {\n        await this.initializePromise;\n        return await this._acquireLock(-1, async () => {\n            return await this._refreshSession(currentSession);\n        });\n    }\n    async _refreshSession(currentSession) {\n        try {\n            return await this._useSession(async (result) => {\n                var _a;\n                if (!currentSession) {\n                    const { data, error } = result;\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = await this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { user: null, session: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    async _getSessionFromURL(params, callbackUrlType) {\n        try {\n            if (!isBrowser())\n                throw new AuthImplicitGrantRedirectError('No browser detected.');\n            // If there's an error in the URL, it doesn't matter what flow it is, we just return the error.\n            if (params.error || params.error_description || params.error_code) {\n                // The error class returned implies that the redirect is from an implicit grant flow\n                // but it could also be from a redirect error from a PKCE flow.\n                throw new AuthImplicitGrantRedirectError(params.error_description || 'Error in URL with unspecified error_description', {\n                    error: params.error || 'unspecified_error',\n                    code: params.error_code || 'unspecified_code',\n                });\n            }\n            // Checks for mismatches between the flowType initialised in the client and the URL parameters\n            switch (callbackUrlType) {\n                case 'implicit':\n                    if (this.flowType === 'pkce') {\n                        throw new AuthPKCEGrantCodeExchangeError('Not a valid PKCE flow url.');\n                    }\n                    break;\n                case 'pkce':\n                    if (this.flowType === 'implicit') {\n                        throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                    }\n                    break;\n                default:\n                // there's no mismatch so we continue\n            }\n            // Since this is a redirect for PKCE, we attempt to retrieve the code from the URL for the code exchange\n            if (callbackUrlType === 'pkce') {\n                this._debug('#_initialize()', 'begin', 'is PKCE flow', true);\n                if (!params.code)\n                    throw new AuthPKCEGrantCodeExchangeError('No code detected.');\n                const { data, error } = await this._exchangeCodeForSession(params.code);\n                if (error)\n                    throw error;\n                const url = new URL(window.location.href);\n                url.searchParams.delete('code');\n                window.history.replaceState(window.history.state, '', url.toString());\n                return { data: { session: data.session, redirectType: null }, error: null };\n            }\n            const { provider_token, provider_refresh_token, access_token, refresh_token, expires_in, expires_at, token_type, } = params;\n            if (!access_token || !expires_in || !refresh_token || !token_type) {\n                throw new AuthImplicitGrantRedirectError('No session defined in URL');\n            }\n            const timeNow = Math.round(Date.now() / 1000);\n            const expiresIn = parseInt(expires_in);\n            let expiresAt = timeNow + expiresIn;\n            if (expires_at) {\n                expiresAt = parseInt(expires_at);\n            }\n            const actuallyExpiresIn = expiresAt - timeNow;\n            if (actuallyExpiresIn * 1000 <= AUTO_REFRESH_TICK_DURATION_MS) {\n                console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${actuallyExpiresIn}s, should have been closer to ${expiresIn}s`);\n            }\n            const issuedAt = expiresAt - expiresIn;\n            if (timeNow - issuedAt >= 120) {\n                console.warn('@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale', issuedAt, expiresAt, timeNow);\n            }\n            else if (timeNow - issuedAt < 0) {\n                console.warn('@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew', issuedAt, expiresAt, timeNow);\n            }\n            const { data, error } = await this._getUser(access_token);\n            if (error)\n                throw error;\n            const session = {\n                provider_token,\n                provider_refresh_token,\n                access_token,\n                expires_in: expiresIn,\n                expires_at: expiresAt,\n                refresh_token,\n                token_type,\n                user: data.user,\n            };\n            // Remove tokens from URL\n            window.location.hash = '';\n            this._debug('#_getSessionFromURL()', 'clearing window.location.hash');\n            return { data: { session, redirectType: params.type }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { session: null, redirectType: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantCallback(params) {\n        return Boolean(params.access_token || params.error_description);\n    }\n    /**\n     * Checks if the current URL and backing storage contain parameters given by a PKCE flow\n     */\n    async _isPKCECallback(params) {\n        const currentStorageContent = await getItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n        return !!(params.code && currentStorageContent);\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     *\n     * If using `others` scope, no `SIGNED_OUT` event is fired!\n     */\n    async signOut(options = { scope: 'global' }) {\n        await this.initializePromise;\n        return await this._acquireLock(-1, async () => {\n            return await this._signOut(options);\n        });\n    }\n    async _signOut({ scope } = { scope: 'global' }) {\n        return await this._useSession(async (result) => {\n            var _a;\n            const { data, error: sessionError } = result;\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = await this.admin.signOut(accessToken, scope);\n                if (error) {\n                    // ignore 404s since user might not exist anymore\n                    // ignore 401s since an invalid or expired JWT should sign out the current session\n                    if (!(isAuthApiError(error) &&\n                        (error.status === 404 || error.status === 401 || error.status === 403))) {\n                        return { error };\n                    }\n                }\n            }\n            if (scope !== 'others') {\n                await this._removeSession();\n                await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            }\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this._debug('#unsubscribe()', 'state change callback with id removed', id);\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this._debug('#onAuthStateChange()', 'registered callback with id', id);\n        this.stateChangeEmitters.set(id, subscription);\n        (async () => {\n            await this.initializePromise;\n            await this._acquireLock(-1, async () => {\n                this._emitInitialSession(id);\n            });\n        })();\n        return { data: { subscription } };\n    }\n    async _emitInitialSession(id) {\n        return await this._useSession(async (result) => {\n            var _a, _b;\n            try {\n                const { data: { session }, error, } = result;\n                if (error)\n                    throw error;\n                await ((_a = this.stateChangeEmitters.get(id)) === null || _a === void 0 ? void 0 : _a.callback('INITIAL_SESSION', session));\n                this._debug('INITIAL_SESSION', 'callback id', id, 'session', session);\n            }\n            catch (err) {\n                await ((_b = this.stateChangeEmitters.get(id)) === null || _b === void 0 ? void 0 : _b.callback('INITIAL_SESSION', null));\n                this._debug('INITIAL_SESSION', 'callback id', id, 'error', err);\n                console.error(err);\n            }\n        });\n    }\n    /**\n     * Sends a password reset request to an email address. This method supports the PKCE flow.\n     *\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    async resetPasswordForEmail(email, options = {}) {\n        let codeChallenge = null;\n        let codeChallengeMethod = null;\n        if (this.flowType === 'pkce') {\n            ;\n            [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(this.storage, this.storageKey, true // isPasswordRecovery\n            );\n        }\n        try {\n            return await _request(this.fetch, 'POST', `${this.url}/recover`, {\n                body: {\n                    email,\n                    code_challenge: codeChallenge,\n                    code_challenge_method: codeChallengeMethod,\n                    gotrue_meta_security: { captcha_token: options.captchaToken },\n                },\n                headers: this.headers,\n                redirectTo: options.redirectTo,\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Gets all the identities linked to a user.\n     */\n    async getUserIdentities() {\n        var _a;\n        try {\n            const { data, error } = await this.getUser();\n            if (error)\n                throw error;\n            return { data: { identities: (_a = data.user.identities) !== null && _a !== void 0 ? _a : [] }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Links an oauth identity to an existing user.\n     * This method supports the PKCE flow.\n     */\n    async linkIdentity(credentials) {\n        var _a;\n        try {\n            const { data, error } = await this._useSession(async (result) => {\n                var _a, _b, _c, _d, _e;\n                const { data, error } = result;\n                if (error)\n                    throw error;\n                const url = await this._getUrlForProvider(`${this.url}/user/identities/authorize`, credentials.provider, {\n                    redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                    scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                    queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n                    skipBrowserRedirect: true,\n                });\n                return await _request(this.fetch, 'GET', url, {\n                    headers: this.headers,\n                    jwt: (_e = (_d = data.session) === null || _d === void 0 ? void 0 : _d.access_token) !== null && _e !== void 0 ? _e : undefined,\n                });\n            });\n            if (error)\n                throw error;\n            if (isBrowser() && !((_a = credentials.options) === null || _a === void 0 ? void 0 : _a.skipBrowserRedirect)) {\n                window.location.assign(data === null || data === void 0 ? void 0 : data.url);\n            }\n            return { data: { provider: credentials.provider, url: data === null || data === void 0 ? void 0 : data.url }, error: null };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: { provider: credentials.provider, url: null }, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Unlinks an identity from a user by deleting it. The user will no longer be able to sign in with that identity once it's unlinked.\n     */\n    async unlinkIdentity(identity) {\n        try {\n            return await this._useSession(async (result) => {\n                var _a, _b;\n                const { data, error } = result;\n                if (error) {\n                    throw error;\n                }\n                return await _request(this.fetch, 'DELETE', `${this.url}/user/identities/${identity.identity_id}`, {\n                    headers: this.headers,\n                    jwt: (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined,\n                });\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    async _refreshAccessToken(refreshToken) {\n        const debugName = `#_refreshAccessToken(${refreshToken.substring(0, 5)}...)`;\n        this._debug(debugName, 'begin');\n        try {\n            const startedAt = Date.now();\n            // will attempt to refresh the token with exponential backoff\n            return await retryable(async (attempt) => {\n                if (attempt > 0) {\n                    await sleep(200 * Math.pow(2, attempt - 1)); // 200, 400, 800, ...\n                }\n                this._debug(debugName, 'refreshing attempt', attempt);\n                return await _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                    body: { refresh_token: refreshToken },\n                    headers: this.headers,\n                    xform: _sessionResponse,\n                });\n            }, (attempt, error) => {\n                const nextBackOffInterval = 200 * Math.pow(2, attempt);\n                return (error &&\n                    isAuthRetryableFetchError(error) &&\n                    // retryable only if the request can be sent before the backoff overflows the tick duration\n                    Date.now() + nextBackOffInterval - startedAt < AUTO_REFRESH_TICK_DURATION_MS);\n            });\n        }\n        catch (error) {\n            this._debug(debugName, 'error', error);\n            if (isAuthError(error)) {\n                return { data: { session: null, user: null }, error };\n            }\n            throw error;\n        }\n        finally {\n            this._debug(debugName, 'end');\n        }\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    async _handleProviderSignIn(provider, options) {\n        const url = await this._getUrlForProvider(`${this.url}/authorize`, provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n            queryParams: options.queryParams,\n        });\n        this._debug('#_handleProviderSignIn()', 'provider', provider, 'options', options, 'url', url);\n        // try to open on the browser\n        if (isBrowser() && !options.skipBrowserRedirect) {\n            window.location.assign(url);\n        }\n        return { data: { provider, url }, error: null };\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes the token\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    async _recoverAndRefresh() {\n        var _a;\n        const debugName = '#_recoverAndRefresh()';\n        this._debug(debugName, 'begin');\n        try {\n            const currentSession = await getItemAsync(this.storage, this.storageKey);\n            this._debug(debugName, 'session from storage', currentSession);\n            if (!this._isValidSession(currentSession)) {\n                this._debug(debugName, 'session is not valid');\n                if (currentSession !== null) {\n                    await this._removeSession();\n                }\n                return;\n            }\n            const expiresWithMargin = ((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) * 1000 - Date.now() < EXPIRY_MARGIN_MS;\n            this._debug(debugName, `session has${expiresWithMargin ? '' : ' not'} expired with margin of ${EXPIRY_MARGIN_MS}s`);\n            if (expiresWithMargin) {\n                if (this.autoRefreshToken && currentSession.refresh_token) {\n                    const { error } = await this._callRefreshToken(currentSession.refresh_token);\n                    if (error) {\n                        console.error(error);\n                        if (!isAuthRetryableFetchError(error)) {\n                            this._debug(debugName, 'refresh failed with a non-retryable error, removing the session', error);\n                            await this._removeSession();\n                        }\n                    }\n                }\n            }\n            else {\n                // no need to persist currentSession again, as we just loaded it from\n                // local storage; persisting it again may overwrite a value saved by\n                // another client with access to the same local storage\n                await this._notifyAllSubscribers('SIGNED_IN', currentSession);\n            }\n        }\n        catch (err) {\n            this._debug(debugName, 'error', err);\n            console.error(err);\n            return;\n        }\n        finally {\n            this._debug(debugName, 'end');\n        }\n    }\n    async _callRefreshToken(refreshToken) {\n        var _a, _b;\n        if (!refreshToken) {\n            throw new AuthSessionMissingError();\n        }\n        // refreshing is already in progress\n        if (this.refreshingDeferred) {\n            return this.refreshingDeferred.promise;\n        }\n        const debugName = `#_callRefreshToken(${refreshToken.substring(0, 5)}...)`;\n        this._debug(debugName, 'begin');\n        try {\n            this.refreshingDeferred = new Deferred();\n            const { data, error } = await this._refreshAccessToken(refreshToken);\n            if (error)\n                throw error;\n            if (!data.session)\n                throw new AuthSessionMissingError();\n            await this._saveSession(data.session);\n            await this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n            const result = { session: data.session, error: null };\n            this.refreshingDeferred.resolve(result);\n            return result;\n        }\n        catch (error) {\n            this._debug(debugName, 'error', error);\n            if (isAuthError(error)) {\n                const result = { session: null, error };\n                if (!isAuthRetryableFetchError(error)) {\n                    await this._removeSession();\n                }\n                (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                return result;\n            }\n            (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n            throw error;\n        }\n        finally {\n            this.refreshingDeferred = null;\n            this._debug(debugName, 'end');\n        }\n    }\n    async _notifyAllSubscribers(event, session, broadcast = true) {\n        const debugName = `#_notifyAllSubscribers(${event})`;\n        this._debug(debugName, 'begin', session, `broadcast = ${broadcast}`);\n        try {\n            if (this.broadcastChannel && broadcast) {\n                this.broadcastChannel.postMessage({ event, session });\n            }\n            const errors = [];\n            const promises = Array.from(this.stateChangeEmitters.values()).map(async (x) => {\n                try {\n                    await x.callback(event, session);\n                }\n                catch (e) {\n                    errors.push(e);\n                }\n            });\n            await Promise.all(promises);\n            if (errors.length > 0) {\n                for (let i = 0; i < errors.length; i += 1) {\n                    console.error(errors[i]);\n                }\n                throw errors[0];\n            }\n        }\n        finally {\n            this._debug(debugName, 'end');\n        }\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    async _saveSession(session) {\n        this._debug('#_saveSession()', session);\n        // _saveSession is always called whenever a new session has been acquired\n        // so we can safely suppress the warning returned by future getSession calls\n        this.suppressGetSessionWarning = true;\n        await setItemAsync(this.storage, this.storageKey, session);\n    }\n    async _removeSession() {\n        this._debug('#_removeSession()');\n        await removeItemAsync(this.storage, this.storageKey);\n        await this._notifyAllSubscribers('SIGNED_OUT', null);\n    }\n    /**\n     * Removes any registered visibilitychange callback.\n     *\n     * {@see #startAutoRefresh}\n     * {@see #stopAutoRefresh}\n     */\n    _removeVisibilityChangedCallback() {\n        this._debug('#_removeVisibilityChangedCallback()');\n        const callback = this.visibilityChangedCallback;\n        this.visibilityChangedCallback = null;\n        try {\n            if (callback && isBrowser() && (window === null || window === void 0 ? void 0 : window.removeEventListener)) {\n                window.removeEventListener('visibilitychange', callback);\n            }\n        }\n        catch (e) {\n            console.error('removing visibilitychange callback failed', e);\n        }\n    }\n    /**\n     * This is the private implementation of {@link #startAutoRefresh}. Use this\n     * within the library.\n     */\n    async _startAutoRefresh() {\n        await this._stopAutoRefresh();\n        this._debug('#_startAutoRefresh()');\n        const ticker = setInterval(() => this._autoRefreshTokenTick(), AUTO_REFRESH_TICK_DURATION_MS);\n        this.autoRefreshTicker = ticker;\n        if (ticker && typeof ticker === 'object' && typeof ticker.unref === 'function') {\n            // ticker is a NodeJS Timeout object that has an `unref` method\n            // https://nodejs.org/api/timers.html#timeoutunref\n            // When auto refresh is used in NodeJS (like for testing) the\n            // `setInterval` is preventing the process from being marked as\n            // finished and tests run endlessly. This can be prevented by calling\n            // `unref()` on the returned object.\n            ticker.unref();\n            // @ts-expect-error TS has no context of Deno\n        }\n        else if (typeof Deno !== 'undefined' && typeof Deno.unrefTimer === 'function') {\n            // similar like for NodeJS, but with the Deno API\n            // https://deno.land/api@latest?unstable&s=Deno.unrefTimer\n            // @ts-expect-error TS has no context of Deno\n            Deno.unrefTimer(ticker);\n        }\n        // run the tick immediately, but in the next pass of the event loop so that\n        // #_initialize can be allowed to complete without recursively waiting on\n        // itself\n        setTimeout(async () => {\n            await this.initializePromise;\n            await this._autoRefreshTokenTick();\n        }, 0);\n    }\n    /**\n     * This is the private implementation of {@link #stopAutoRefresh}. Use this\n     * within the library.\n     */\n    async _stopAutoRefresh() {\n        this._debug('#_stopAutoRefresh()');\n        const ticker = this.autoRefreshTicker;\n        this.autoRefreshTicker = null;\n        if (ticker) {\n            clearInterval(ticker);\n        }\n    }\n    /**\n     * Starts an auto-refresh process in the background. The session is checked\n     * every few seconds. Close to the time of expiration a process is started to\n     * refresh the session. If refreshing fails it will be retried for as long as\n     * necessary.\n     *\n     * If you set the {@link GoTrueClientOptions#autoRefreshToken} you don't need\n     * to call this function, it will be called for you.\n     *\n     * On browsers the refresh process works only when the tab/window is in the\n     * foreground to conserve resources as well as prevent race conditions and\n     * flooding auth with requests. If you call this method any managed\n     * visibility change callback will be removed and you must manage visibility\n     * changes on your own.\n     *\n     * On non-browser platforms the refresh process works *continuously* in the\n     * background, which may not be desirable. You should hook into your\n     * platform's foreground indication mechanism and call these methods\n     * appropriately to conserve resources.\n     *\n     * {@see #stopAutoRefresh}\n     */\n    async startAutoRefresh() {\n        this._removeVisibilityChangedCallback();\n        await this._startAutoRefresh();\n    }\n    /**\n     * Stops an active auto refresh process running in the background (if any).\n     *\n     * If you call this method any managed visibility change callback will be\n     * removed and you must manage visibility changes on your own.\n     *\n     * See {@link #startAutoRefresh} for more details.\n     */\n    async stopAutoRefresh() {\n        this._removeVisibilityChangedCallback();\n        await this._stopAutoRefresh();\n    }\n    /**\n     * Runs the auto refresh token tick.\n     */\n    async _autoRefreshTokenTick() {\n        this._debug('#_autoRefreshTokenTick()', 'begin');\n        try {\n            await this._acquireLock(0, async () => {\n                try {\n                    const now = Date.now();\n                    try {\n                        return await this._useSession(async (result) => {\n                            const { data: { session }, } = result;\n                            if (!session || !session.refresh_token || !session.expires_at) {\n                                this._debug('#_autoRefreshTokenTick()', 'no session');\n                                return;\n                            }\n                            // session will expire in this many ticks (or has already expired if <= 0)\n                            const expiresInTicks = Math.floor((session.expires_at * 1000 - now) / AUTO_REFRESH_TICK_DURATION_MS);\n                            this._debug('#_autoRefreshTokenTick()', `access token expires in ${expiresInTicks} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`);\n                            if (expiresInTicks <= AUTO_REFRESH_TICK_THRESHOLD) {\n                                await this._callRefreshToken(session.refresh_token);\n                            }\n                        });\n                    }\n                    catch (e) {\n                        console.error('Auto refresh tick failed with error. This is likely a transient error.', e);\n                    }\n                }\n                finally {\n                    this._debug('#_autoRefreshTokenTick()', 'end');\n                }\n            });\n        }\n        catch (e) {\n            if (e.isAcquireTimeout || e instanceof LockAcquireTimeoutError) {\n                this._debug('auto refresh token tick lock not available');\n            }\n            else {\n                throw e;\n            }\n        }\n    }\n    /**\n     * Registers callbacks on the browser / platform, which in-turn run\n     * algorithms when the browser window/tab are in foreground. On non-browser\n     * platforms it assumes always foreground.\n     */\n    async _handleVisibilityChange() {\n        this._debug('#_handleVisibilityChange()');\n        if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n            if (this.autoRefreshToken) {\n                // in non-browser environments the refresh token ticker runs always\n                this.startAutoRefresh();\n            }\n            return false;\n        }\n        try {\n            this.visibilityChangedCallback = async () => await this._onVisibilityChanged(false);\n            window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', this.visibilityChangedCallback);\n            // now immediately call the visbility changed callback to setup with the\n            // current visbility state\n            await this._onVisibilityChanged(true); // initial call\n        }\n        catch (error) {\n            console.error('_handleVisibilityChange', error);\n        }\n    }\n    /**\n     * Callback registered with `window.addEventListener('visibilitychange')`.\n     */\n    async _onVisibilityChanged(calledFromInitialize) {\n        const methodName = `#_onVisibilityChanged(${calledFromInitialize})`;\n        this._debug(methodName, 'visibilityState', document.visibilityState);\n        if (document.visibilityState === 'visible') {\n            if (this.autoRefreshToken) {\n                // in browser environments the refresh token ticker runs only on focused tabs\n                // which prevents race conditions\n                this._startAutoRefresh();\n            }\n            if (!calledFromInitialize) {\n                // called when the visibility has changed, i.e. the browser\n                // transitioned from hidden -> visible so we need to see if the session\n                // should be recovered immediately... but to do that we need to acquire\n                // the lock first asynchronously\n                await this.initializePromise;\n                await this._acquireLock(-1, async () => {\n                    if (document.visibilityState !== 'visible') {\n                        this._debug(methodName, 'acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting');\n                        // visibility has changed while waiting for the lock, abort\n                        return;\n                    }\n                    // recover the session\n                    await this._recoverAndRefresh();\n                });\n            }\n        }\n        else if (document.visibilityState === 'hidden') {\n            if (this.autoRefreshToken) {\n                this._stopAutoRefresh();\n            }\n        }\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    async _getUrlForProvider(url, provider, options) {\n        const urlParams = [`provider=${encodeURIComponent(provider)}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n        }\n        if (this.flowType === 'pkce') {\n            const [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(this.storage, this.storageKey);\n            const flowParams = new URLSearchParams({\n                code_challenge: `${encodeURIComponent(codeChallenge)}`,\n                code_challenge_method: `${encodeURIComponent(codeChallengeMethod)}`,\n            });\n            urlParams.push(flowParams.toString());\n        }\n        if (options === null || options === void 0 ? void 0 : options.queryParams) {\n            const query = new URLSearchParams(options.queryParams);\n            urlParams.push(query.toString());\n        }\n        if (options === null || options === void 0 ? void 0 : options.skipBrowserRedirect) {\n            urlParams.push(`skip_http_redirect=${options.skipBrowserRedirect}`);\n        }\n        return `${url}?${urlParams.join('&')}`;\n    }\n    async _unenroll(params) {\n        try {\n            return await this._useSession(async (result) => {\n                var _a;\n                const { data: sessionData, error: sessionError } = result;\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return await _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    async _enroll(params) {\n        try {\n            return await this._useSession(async (result) => {\n                var _a, _b;\n                const { data: sessionData, error: sessionError } = result;\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const body = Object.assign({ friendly_name: params.friendlyName, factor_type: params.factorType }, (params.factorType === 'phone' ? { phone: params.phone } : { issuer: params.issuer }));\n                const { data, error } = await _request(this.fetch, 'POST', `${this.url}/factors`, {\n                    body,\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                if (params.factorType === 'totp' && ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code)) {\n                    data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n                }\n                return { data, error: null };\n            });\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n    /**\n     * {@see GoTrueMFAApi#verify}\n     */\n    async _verify(params) {\n        return this._acquireLock(-1, async () => {\n            try {\n                return await this._useSession(async (result) => {\n                    var _a;\n                    const { data: sessionData, error: sessionError } = result;\n                    if (sessionError) {\n                        return { data: null, error: sessionError };\n                    }\n                    const { data, error } = await _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                        body: { code: params.code, challenge_id: params.challengeId },\n                        headers: this.headers,\n                        jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                    });\n                    if (error) {\n                        return { data: null, error };\n                    }\n                    await this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n                    await this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n                    return { data, error };\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challenge}\n     */\n    async _challenge(params) {\n        return this._acquireLock(-1, async () => {\n            try {\n                return await this._useSession(async (result) => {\n                    var _a;\n                    const { data: sessionData, error: sessionError } = result;\n                    if (sessionError) {\n                        return { data: null, error: sessionError };\n                    }\n                    return await _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                        body: { channel: params.channel },\n                        headers: this.headers,\n                        jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                    });\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challengeAndVerify}\n     */\n    async _challengeAndVerify(params) {\n        // both _challenge and _verify independently acquire the lock, so no need\n        // to acquire it here\n        const { data: challengeData, error: challengeError } = await this._challenge({\n            factorId: params.factorId,\n        });\n        if (challengeError) {\n            return { data: null, error: challengeError };\n        }\n        return await this._verify({\n            factorId: params.factorId,\n            challengeId: challengeData.id,\n            code: params.code,\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#listFactors}\n     */\n    async _listFactors() {\n        // use #getUser instead of #_getUser as the former acquires a lock\n        const { data: { user }, error: userError, } = await this.getUser();\n        if (userError) {\n            return { data: null, error: userError };\n        }\n        const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n        const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n        const phone = factors.filter((factor) => factor.factor_type === 'phone' && factor.status === 'verified');\n        return {\n            data: {\n                all: factors,\n                totp,\n                phone,\n            },\n            error: null,\n        };\n    }\n    /**\n     * {@see GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n     */\n    async _getAuthenticatorAssuranceLevel() {\n        return this._acquireLock(-1, async () => {\n            return await this._useSession(async (result) => {\n                var _a, _b;\n                const { data: { session }, error: sessionError, } = result;\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                if (!session) {\n                    return {\n                        data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                        error: null,\n                    };\n                }\n                const { payload } = decodeJWT(session.access_token);\n                let currentLevel = null;\n                if (payload.aal) {\n                    currentLevel = payload.aal;\n                }\n                let nextLevel = currentLevel;\n                const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n                if (verifiedFactors.length > 0) {\n                    nextLevel = 'aal2';\n                }\n                const currentAuthenticationMethods = payload.amr || [];\n                return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n            });\n        });\n    }\n    async fetchJwk(kid, jwks = { keys: [] }) {\n        // try fetching from the supplied jwks\n        let jwk = jwks.keys.find((key) => key.kid === kid);\n        if (jwk) {\n            return jwk;\n        }\n        // try fetching from cache\n        jwk = this.jwks.keys.find((key) => key.kid === kid);\n        // jwk exists and jwks isn't stale\n        if (jwk && this.jwks_cached_at + JWKS_TTL > Date.now()) {\n            return jwk;\n        }\n        // jwk isn't cached in memory so we need to fetch it from the well-known endpoint\n        const { data, error } = await _request(this.fetch, 'GET', `${this.url}/.well-known/jwks.json`, {\n            headers: this.headers,\n        });\n        if (error) {\n            throw error;\n        }\n        if (!data.keys || data.keys.length === 0) {\n            throw new AuthInvalidJwtError('JWKS is empty');\n        }\n        this.jwks = data;\n        this.jwks_cached_at = Date.now();\n        // Find the signing key\n        jwk = data.keys.find((key) => key.kid === kid);\n        if (!jwk) {\n            throw new AuthInvalidJwtError('No matching signing key found in JWKS');\n        }\n        return jwk;\n    }\n    /**\n     * @experimental This method may change in future versions.\n     * @description Gets the claims from a JWT. If the JWT is symmetric JWTs, it will call getUser() to verify against the server. If the JWT is asymmetric, it will be verified against the JWKS using the WebCrypto API.\n     */\n    async getClaims(jwt, jwks = { keys: [] }) {\n        try {\n            let token = jwt;\n            if (!token) {\n                const { data, error } = await this.getSession();\n                if (error || !data.session) {\n                    return { data: null, error };\n                }\n                token = data.session.access_token;\n            }\n            const { header, payload, signature, raw: { header: rawHeader, payload: rawPayload }, } = decodeJWT(token);\n            // Reject expired JWTs\n            validateExp(payload.exp);\n            // If symmetric algorithm or WebCrypto API is unavailable, fallback to getUser()\n            if (!header.kid ||\n                header.alg === 'HS256' ||\n                !('crypto' in globalThis && 'subtle' in globalThis.crypto)) {\n                const { error } = await this.getUser(token);\n                if (error) {\n                    throw error;\n                }\n                // getUser succeeds so the claims in the JWT can be trusted\n                return {\n                    data: {\n                        claims: payload,\n                        header,\n                        signature,\n                    },\n                    error: null,\n                };\n            }\n            const algorithm = getAlgorithm(header.alg);\n            const signingKey = await this.fetchJwk(header.kid, jwks);\n            // Convert JWK to CryptoKey\n            const publicKey = await crypto.subtle.importKey('jwk', signingKey, algorithm, true, [\n                'verify',\n            ]);\n            // Verify the signature\n            const isValid = await crypto.subtle.verify(algorithm, publicKey, signature, stringToUint8Array(`${rawHeader}.${rawPayload}`));\n            if (!isValid) {\n                throw new AuthInvalidJwtError('Invalid JWT signature');\n            }\n            // If verification succeeds, decode and return claims\n            return {\n                data: {\n                    claims: payload,\n                    header,\n                    signature,\n                },\n                error: null,\n            };\n        }\n        catch (error) {\n            if (isAuthError(error)) {\n                return { data: null, error };\n            }\n            throw error;\n        }\n    }\n}\nGoTrueClient.nextInstanceID = 0;\n//# sourceMappingURL=GoTrueClient.js.map","import GoTrueClient from './GoTrueClient';\nconst AuthClient = GoTrueClient;\nexport default AuthClient;\n//# sourceMappingURL=AuthClient.js.map","import { AuthClient } from '@supabase/auth-js';\nexport class SupabaseAuthClient extends AuthClient {\n    constructor(options) {\n        super(options);\n    }\n}\n//# sourceMappingURL=SupabaseAuthClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_GLOBAL_OPTIONS, DEFAULT_DB_OPTIONS, DEFAULT_AUTH_OPTIONS, DEFAULT_REALTIME_OPTIONS, } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { ensureTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = ensureTrailingSlash(supabaseUrl);\n        const baseUrl = new URL(_supabaseUrl);\n        this.realtimeUrl = new URL('realtime/v1', baseUrl);\n        this.realtimeUrl.protocol = this.realtimeUrl.protocol.replace('http', 'ws');\n        this.authUrl = new URL('auth/v1', baseUrl);\n        this.storageUrl = new URL('storage/v1', baseUrl);\n        this.functionsUrl = new URL('functions/v1', baseUrl);\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${baseUrl.hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_a = settings.auth.storageKey) !== null && _a !== void 0 ? _a : '';\n        this.headers = (_b = settings.global.headers) !== null && _b !== void 0 ? _b : {};\n        if (!settings.accessToken) {\n            this.auth = this._initSupabaseAuthClient((_c = settings.auth) !== null && _c !== void 0 ? _c : {}, this.headers, settings.global.fetch);\n        }\n        else {\n            this.accessToken = settings.accessToken;\n            this.auth = new Proxy({}, {\n                get: (_, prop) => {\n                    throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(prop)} is not possible`);\n                },\n            });\n        }\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), settings.global.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers, accessToken: this._getAccessToken.bind(this) }, settings.realtime));\n        this.rest = new PostgrestClient(new URL('rest/v1', baseUrl).href, {\n            headers: this.headers,\n            schema: settings.db.schema,\n            fetch: this.fetch,\n        });\n        if (!settings.accessToken) {\n            this._listenForAuthEvents();\n        }\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl.href, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl.href, this.headers, this.fetch);\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    // NOTE: signatures must be kept in sync with PostgrestClient.schema\n    /**\n     * Select a schema to query or perform an function (rpc) call.\n     *\n     * The schema needs to be on the list of exposed schemas inside Supabase.\n     *\n     * @param schema - The schema to query\n     */\n    schema(schema) {\n        return this.rest.schema(schema);\n    }\n    // NOTE: signatures must be kept in sync with PostgrestClient.rpc\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.get - When set to `true`, the function will be called with\n     * read-only access mode.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, options = {}) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.accessToken) {\n                return yield this.accessToken();\n            }\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, flowType, lock, debug, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl.href,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            flowType,\n            lock,\n            debug,\n            fetch,\n            // auth checks if there is a custom authorizaiton header using this flag\n            // so it knows whether to return an error when getUser is called with no session\n            hasCustomAuthorizationHeader: 'Authorization' in this.headers,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl.href, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, 'CLIENT', session === null || session === void 0 ? void 0 : session.access_token);\n        });\n        return data;\n    }\n    _handleTokenChanged(event, source, token) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT') {\n            this.realtime.setAuth();\n            if (source == 'STORAGE')\n                this.auth.signOut();\n            this.changedAccessToken = undefined;\n        }\n    }\n}\n//# sourceMappingURL=SupabaseClient.js.map","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/auth-js';\nexport { PostgrestError, } from '@supabase/postgrest-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, FunctionRegion, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n//# sourceMappingURL=index.js.map","import { createClient } from '@supabase/supabase-js';\r\n\r\n// Supabase configuration\r\n// These values should be replaced with your actual Supabase project details\r\n// You should use environment variables in production\r\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL || 'https://rcpqtgtuuqkkrhzbmksu.supabase.co';\r\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjcHF0Z3R1dXFra3JoemJta3N1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0NDczMjUsImV4cCI6MjA2NDAyMzMyNX0.TBiu0kMe-tiMsEUuE9rEVdd3__xyD7ICZaH-rzq0ZRs';\r\n\r\n// Create a single supabase client for interacting with your database\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n// Export types for better TypeScript support\r\nexport type { User, Session } from '@supabase/supabase-js';","import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { Session, User, supabase } from '../utils/supabaseClient';\r\n\r\ninterface AuthContextType {\r\n  session: Session | null;\r\n  user: User | null;\r\n  signInWithGoogle: () => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n  loading: boolean;\r\n  hasPaid: boolean;\r\n  chatSyncEnabled: boolean;\r\n  chatCount: number;\r\n  refreshUserStatus: () => Promise<void>;\r\n}\r\n\r\n// Create context with default values\r\nconst AuthContext = createContext<AuthContextType>({\r\n  session: null,\r\n  user: null,\r\n  signInWithGoogle: async () => {},\r\n  signOut: async () => {},\r\n  loading: true,\r\n  hasPaid: false,\r\n  chatSyncEnabled: false,\r\n  chatCount: 0,\r\n  refreshUserStatus: async () => {},\r\n});\r\n\r\n// Hook for using auth context\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\ninterface AuthProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [hasPaid, setHasPaid] = useState(false);\r\n  const [chatSyncEnabled, setChatSyncEnabled] = useState(false);\r\n  const [chatCount, setChatCount] = useState(0);\r\n\r\n  // Upsert user in Supabase users table\r\n  const upsertUser = async (userObj: User) => {\r\n    if (!userObj) return;\r\n    const { id, email } = userObj;\r\n    if (!id || !email) return;\r\n    const { error } = await supabase\r\n      .from('users')\r\n      .upsert([{ id, email }], { onConflict: 'id' });\r\n    if (error) console.error('Error upserting user:', error);\r\n  };\r\n\r\n  // Fetch user status (has_paid, chat_sync_enabled, chat_count)\r\n  const fetchUserStatus = async (id: string) => {\r\n    const { data, error } = await supabase\r\n      .from('users')\r\n      .select('has_paid, chat_sync_enabled, chat_count')\r\n      .eq('id', id)\r\n      .single();\r\n    if (error) {\r\n      console.error('Error fetching user status:', error);\r\n      setHasPaid(false);\r\n      setChatSyncEnabled(false);\r\n      setChatCount(0);\r\n      return;\r\n    }\r\n    setHasPaid(!!data.has_paid);\r\n    setChatSyncEnabled(!!data.chat_sync_enabled);\r\n    setChatCount(data.chat_count || 0);\r\n  };\r\n\r\n  // Refresh user status (exposed for Stripe integration)\r\n  const refreshUserStatus = async () => {\r\n    if (user?.id) {\r\n      await fetchUserStatus(user.id);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Get session from supabase\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      setLoading(false);\r\n      if (session?.user) {\r\n        upsertUser(session.user);\r\n        fetchUserStatus(session.user.id);\r\n      }\r\n    });\r\n\r\n    // Set up the listener for auth changes\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      setLoading(false);\r\n      if (session?.user) {\r\n        upsertUser(session.user);\r\n        fetchUserStatus(session.user.id);\r\n      } else {\r\n        setHasPaid(false);\r\n        setChatSyncEnabled(false);\r\n      }\r\n    });\r\n\r\n    // Clean up the subscription\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  // Sign in with Google\r\n  const signInWithGoogle = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: {\r\n          redirectTo: window.location.origin,\r\n        },\r\n      });\r\n      if (error) throw error;\r\n    } catch (error) {\r\n      console.error('Error signing in with Google:', error);\r\n    }\r\n  };\r\n\r\n  // Sign out\r\n  const signOut = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n    } catch (error) {\r\n      console.error('Error signing out:', error);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    session,\r\n    user,\r\n    signInWithGoogle,\r\n    signOut,\r\n    loading,\r\n    hasPaid,\r\n    chatSyncEnabled,\r\n    chatCount,\r\n    refreshUserStatus,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({\n      color = \"currentColor\",\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = \"\",\n      children,\n      ...rest\n    }, ref) => {\n      return createElement(\n        \"svg\",\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n          ...rest\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...Array.isArray(children) ? children : [children]\n        ]\n      );\n    }\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"Activity\", [\n  [\"path\", { d: \"M22 12h-4l-3 9L9 3l-3 9H2\", key: \"d5dnw9\" }]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\", key: \"vv98re\" }],\n  [\"path\", { d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\", key: \"1cyq3y\" }]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Book = createLucideIcon(\"Book\", [\n  [\"path\", { d: \"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20\", key: \"t4utmx\" }]\n]);\n\nexport { Book as default };\n//# sourceMappingURL=book.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"Brain\", [\n  [\n    \"path\",\n    {\n      d: \"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z\",\n      key: \"l5xja\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z\",\n      key: \"ep3f8r\"\n    }\n  ],\n  [\"path\", { d: \"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4\", key: \"1p4c4q\" }],\n  [\"path\", { d: \"M17.599 6.5a3 3 0 0 0 .399-1.375\", key: \"tmeiqw\" }],\n  [\"path\", { d: \"M6.003 5.125A3 3 0 0 0 6.401 6.5\", key: \"105sqy\" }],\n  [\"path\", { d: \"M3.477 10.896a4 4 0 0 1 .585-.396\", key: \"ql3yin\" }],\n  [\"path\", { d: \"M19.938 10.5a4 4 0 0 1 .585.396\", key: \"1qfode\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-1.967-.516\", key: \"2e4loj\" }],\n  [\"path\", { d: \"M19.967 17.484A4 4 0 0 1 18 18\", key: \"159ez6\" }]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CalendarCheck = createLucideIcon(\"CalendarCheck\", [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }],\n  [\"path\", { d: \"m9 16 2 2 4-4\", key: \"19s6y9\" }]\n]);\n\nexport { CalendarCheck as default };\n//# sourceMappingURL=calendar-check.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckSquare = createLucideIcon(\"CheckSquare\", [\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }],\n  [\"path\", { d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\", key: \"1jnkn4\" }]\n]);\n\nexport { CheckSquare as default };\n//# sourceMappingURL=check-square.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\"path\", { d: \"M15 3h6v6\", key: \"1q9fwt\" }],\n  [\"path\", { d: \"M10 14 21 3\", key: \"gplh6r\" }],\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HardDrive = createLucideIcon(\"HardDrive\", [\n  [\"line\", { x1: \"22\", x2: \"2\", y1: \"12\", y2: \"12\", key: \"1y58io\" }],\n  [\n    \"path\",\n    {\n      d: \"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\",\n      key: \"oot6mr\"\n    }\n  ],\n  [\"line\", { x1: \"6\", x2: \"6.01\", y1: \"16\", y2: \"16\", key: \"sgf278\" }],\n  [\"line\", { x1: \"10\", x2: \"10.01\", y1: \"16\", y2: \"16\", key: \"1l4acy\" }]\n]);\n\nexport { HardDrive as default };\n//# sourceMappingURL=hard-drive.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"Heart\", [\n  [\n    \"path\",\n    {\n      d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\",\n      key: \"c3ymky\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LifeBuoy = createLucideIcon(\"LifeBuoy\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m4.93 4.93 4.24 4.24\", key: \"1ymg45\" }],\n  [\"path\", { d: \"m14.83 9.17 4.24-4.24\", key: \"1cb5xl\" }],\n  [\"path\", { d: \"m14.83 14.83 4.24 4.24\", key: \"q42g0n\" }],\n  [\"path\", { d: \"m9.17 14.83-4.24 4.24\", key: \"bqpfvv\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }]\n]);\n\nexport { LifeBuoy as default };\n//# sourceMappingURL=life-buoy.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lightbulb = createLucideIcon(\"Lightbulb\", [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n]);\n\nexport { Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageCircle = createLucideIcon(\"MessageCircle\", [\n  [\"path\", { d: \"M7.9 20A9 9 0 1 0 4 16.1L2 22Z\", key: \"vv11sd\" }]\n]);\n\nexport { MessageCircle as default };\n//# sourceMappingURL=message-circle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MoreVertical = createLucideIcon(\"MoreVertical\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { MoreVertical as default };\n//# sourceMappingURL=more-vertical.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PlusCircle = createLucideIcon(\"PlusCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M8 12h8\", key: \"1wcyev\" }],\n  [\"path\", { d: \"M12 8v8\", key: \"napkw2\" }]\n]);\n\nexport { PlusCircle as default };\n//# sourceMappingURL=plus-circle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"Sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\",\n      key: \"17u4zn\"\n    }\n  ],\n  [\"path\", { d: \"M5 3v4\", key: \"bklmnn\" }],\n  [\"path\", { d: \"M19 17v4\", key: \"iiml17\" }],\n  [\"path\", { d: \"M3 5h4\", key: \"nem4j1\" }],\n  [\"path\", { d: \"M17 19h4\", key: \"lbex7p\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Tag = createLucideIcon(\"Tag\", [\n  [\n    \"path\",\n    {\n      d: \"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\",\n      key: \"vktsd0\"\n    }\n  ],\n  [\"circle\", { cx: \"7.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"kqv944\" }]\n]);\n\nexport { Tag as default };\n//# sourceMappingURL=tag.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ThumbsUp = createLucideIcon(\"ThumbsUp\", [\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"y3tblf\"\n    }\n  ]\n]);\n\nexport { ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TrendingUp = createLucideIcon(\"TrendingUp\", [\n  [\"polyline\", { points: \"22 7 13.5 15.5 8.5 10.5 2 17\", key: \"126l90\" }],\n  [\"polyline\", { points: \"16 7 22 7 22 13\", key: \"kwv8wd\" }]\n]);\n\nexport { TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trophy = createLucideIcon(\"Trophy\", [\n  [\"path\", { d: \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\", key: \"17hqa7\" }],\n  [\"path\", { d: \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\", key: \"lmptdp\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\"path\", { d: \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\", key: \"1nw9bq\" }],\n  [\"path\", { d: \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\", key: \"1np0yb\" }],\n  [\"path\", { d: \"M18 2H6v7a6 6 0 0 0 12 0V2Z\", key: \"u46fv3\" }]\n]);\n\nexport { Trophy as default };\n//# sourceMappingURL=trophy.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserCheck = createLucideIcon(\"UserCheck\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"polyline\", { points: \"16 11 18 13 22 9\", key: \"1pwet4\" }]\n]);\n\nexport { UserCheck as default };\n//# sourceMappingURL=user-check.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserPlus = createLucideIcon(\"UserPlus\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"8\", y2: \"14\", key: \"1bvyxn\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"11\", y2: \"11\", key: \"1shjgl\" }]\n]);\n\nexport { UserPlus as default };\n//# sourceMappingURL=user-plus.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { ElementType } from 'react'; // Import ElementType\n\ninterface NavItemProps {\n  icon: ElementType; // Use ElementType for the icon prop\n  label: string;\n  isActive: boolean;\n  onClick: () => void;\n  vertical?: boolean;\n}\n\nconst NavItem: React.FC<NavItemProps> = ({\n  icon: Icon,\n  label,\n  isActive,\n  onClick,\n  vertical = false\n}) => {\n  return (\n    <motion.button\n      whileHover={{ scale: 1.03 }}\n      whileTap={{ scale: 0.97 }}\n      onClick={onClick}\n      className={`\n        relative w-full flex ${vertical ? 'flex-row items-center' : 'flex-col items-center justify-center'} \n        ${isActive\n          ? vertical\n            ? 'text-indigo-600 bg-indigo-50 font-medium'\n            : 'text-indigo-600 font-medium'\n          : 'text-gray-500 hover:text-gray-700'\n        }\n        ${vertical ? 'p-3 rounded-lg' : 'py-2'}\n        transition-colors duration-200 focus:outline-none\n      `}\n      aria-label={label}\n      aria-pressed={isActive}\n      role=\"tab\"\n      tabIndex={0}\n    >\n      <Icon size={vertical ? 20 : 24} className={vertical ? 'mr-3' : 'mb-1'} aria-hidden=\"true\" />\n      <span className={vertical ? 'text-sm' : 'text-xs'}>{label}</span>\n\n      {isActive && !vertical && (\n        <motion.div\n          className=\"absolute bottom-0 left-1/2 w-1.5 h-1.5 bg-indigo-600 rounded-full transform -translate-x-1/2 mb-0.5\"\n          layoutId=\"bottom-indicator\"\n          transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n          aria-hidden=\"true\"\n        />\n      )}\n    </motion.button>\n  );\n};\n\nexport default NavItem;\n","import React from 'react';\nimport { AlertTriangle, Info, X } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\nexport type DisclaimerType = 'medical' | 'emergency' | 'ai' | 'mini' | 'full';\n\ninterface LegalDisclaimerProps {\n  type: DisclaimerType;\n  onClose?: () => void;\n  className?: string;\n}\n\nconst LegalDisclaimer: React.FC<LegalDisclaimerProps> = ({\n  type,\n  onClose,\n  className = ''\n}) => {\n  // Mini disclaimer for persistent display in UI header\n  if (type === 'mini') {\n    return (\n      <div className={`text-xs text-gray-500 ${className}`}>\n\n        <span>AI companion  not medical advice</span>\n\n      </div>\n    );\n  }\n\n  // Medical disclaimer\n  if (type === 'medical') {\n    return (\n      <div className={`bg-blue-50 border border-blue-100 rounded-lg p-4 ${className}`}>\n        <div className=\"flex\">\n          <Info size={20} className=\"text-blue-500 flex-shrink-0 mt-0.5 mr-3\" />\n          <div className=\"flex-1\">\n            <h4 className=\"text-sm font-medium text-blue-800\">Medical Disclaimer</h4>\n            <p className=\"text-xs text-blue-700 mt-1\">\n              Soberi.ai is an informational and self-help tool only. The content and conversations provided by the service do not constitute medical advice, diagnosis, or treatment and do not create a clinicianpatient relationship. Always seek the advice of a qualified health-care professional with any questions you may have regarding a medical condition or mental-health concern.\n            </p>\n          </div>\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"flex-shrink-0 text-blue-400 hover:text-blue-600 ml-2\"\n              aria-label=\"Close disclaimer\"\n            >\n              <X size={16} />\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Emergency disclaimer\n  if (type === 'emergency') {\n    return (\n      <div className={`bg-red-50 border border-red-100 rounded-lg p-4 ${className}`}>\n        <div className=\"flex\">\n          <AlertTriangle size={20} className=\"text-red-500 flex-shrink-0 mt-0.5 mr-3\" />\n          <div className=\"flex-1\">\n            <h4 className=\"text-sm font-medium text-red-800\">Emergency Disclaimer</h4>\n            <p className=\"text-xs text-red-700 mt-1\">\n              If you believe you may harm yourself or others, or are having a medical emergency, call your local emergency number (e.g., 112 in the EU/UK, 911 in the US) immediately. Soberi.ai is not a crisis-response service and cannot contact emergency services on your behalf.\n            </p>\n          </div>\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"flex-shrink-0 text-red-400 hover:text-red-600 ml-2\"\n              aria-label=\"Close disclaimer\"\n            >\n              <X size={16} />\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // AI disclaimer\n  if (type === 'ai') {\n    return (\n      <div className={`bg-amber-50 border border-amber-100 rounded-lg p-4 ${className}`}>\n        <div className=\"flex\">\n          <Info size={20} className=\"text-amber-500 flex-shrink-0 mt-0.5 mr-3\" />\n          <div className=\"flex-1\">\n            <h4 className=\"text-sm font-medium text-amber-800\">AI Disclaimer</h4>\n            <p className=\"text-xs text-amber-700 mt-1\">\n              Conversations are generated by an artificial-intelligence system and may occasionally produce inaccurate, incomplete, or biased information. You are solely responsible for how you interpret and act on the content.\n            </p>\n          </div>\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"flex-shrink-0 text-amber-400 hover:text-amber-600 ml-2\"\n              aria-label=\"Close disclaimer\"\n            >\n              <X size={16} />\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Full disclaimer (all disclaimers combined)\n  return (\n    <div className={`space-y-4 ${className}`}>\n      <div className=\"bg-blue-50 border border-blue-100 rounded-lg p-4\">\n        <h4 className=\"text-sm font-medium text-blue-800\">Medical Disclaimer</h4>\n        <p className=\"text-xs text-blue-700 mt-1\">\n          Soberi.ai is an informational and self-help tool only. The content and conversations provided by the service do not constitute medical advice, diagnosis, or treatment and do not create a clinicianpatient relationship.\n        </p>\n      </div>\n\n      <div className=\"bg-red-50 border border-red-100 rounded-lg p-4\">\n        <h4 className=\"text-sm font-medium text-red-800\">Emergency Disclaimer</h4>\n        <p className=\"text-xs text-red-700 mt-1\">\n          If you believe you may harm yourself or others, or are having a medical emergency, call your local emergency number (911) immediately. Soberi.ai cannot contact emergency services on your behalf.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-100 rounded-lg p-4\">\n        <h4 className=\"text-sm font-medium text-amber-800\">AI Disclaimer</h4>\n        <p className=\"text-xs text-amber-700 mt-1\">\n          Conversations are generated by an artificial-intelligence system and may occasionally produce inaccurate, incomplete, or biased information.\n        </p>\n      </div>\n\n      {onClose && (\n        <div className=\"flex justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm\"\n          >\n            I Understand\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LegalDisclaimer;","import React from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\ninterface LoginButtonProps {\r\n  className?: string;\r\n}\r\n\r\nconst LoginButton: React.FC<LoginButtonProps> = ({ className = '' }) => {\r\n  const { user, signInWithGoogle, signOut, loading } = useAuth();\r\n\r\n  if (loading) {\r\n    return (\r\n      <button \r\n        className={`flex items-center justify-center bg-gray-200 text-gray-400 py-2 px-4 rounded-lg ${className}`}\r\n        disabled\r\n      >\r\n        <span className=\"animate-pulse\">Loading...</span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  if (user) {\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        {user.user_metadata?.avatar_url && (\r\n          <img \r\n            src={user.user_metadata.avatar_url} \r\n            alt=\"User avatar\" \r\n            className=\"w-8 h-8 rounded-full\"\r\n          />\r\n        )}\r\n        <div className=\"flex flex-col text-sm\">\r\n          <span className=\"font-medium\">{user.user_metadata?.full_name || user.email}</span>\r\n          <button \r\n            onClick={signOut}\r\n            className=\"text-xs text-red-600 hover:text-red-800 text-left\"\r\n          >\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={signInWithGoogle}\r\n      className={`flex items-center gap-2 bg-white hover:bg-gray-50 text-gray-800 font-medium py-2 px-4 border border-gray-300 rounded-lg transition-colors duration-200 ${className}`}\r\n    >\r\n      <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <g transform=\"matrix(1, 0, 0, 1, 27.009001, -39.238998)\">\r\n          <path fill=\"#4285F4\" d=\"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z\"/>\r\n          <path fill=\"#34A853\" d=\"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z\"/>\r\n          <path fill=\"#FBBC05\" d=\"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z\"/>\r\n          <path fill=\"#EA4335\" d=\"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z\"/>\r\n        </g>\r\n      </svg>\r\n      Sign in with Google\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default LoginButton;","import React, { useEffect, useState } from 'react';\r\nimport { getStorageUsage } from '../../utils/indexedDBUtils';\r\nimport { HardDrive, AlertTriangle } from 'lucide-react';\r\n\r\nexport const StorageIndicator: React.FC = () => {\r\n  const [storageInfo, setStorageInfo] = useState<{\r\n    usage: number;\r\n    quota: number;\r\n    percentage: number;\r\n  } | null>(null);\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkStorage = async () => {\r\n      const info = await getStorageUsage();\r\n      setStorageInfo(info);\r\n    };\r\n\r\n    checkStorage();\r\n    // Check storage every minute\r\n    const interval = setInterval(checkStorage, 60000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  if (!storageInfo || storageInfo.quota === 0) return null;\r\n\r\n  const formatBytes = (bytes: number): string => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const getStatusColor = (percentage: number): string => {\r\n    if (percentage < 50) return 'text-green-400';\r\n    if (percentage < 80) return 'text-yellow-400';\r\n    return 'text-red-400';\r\n  };\r\n\r\n  const getProgressBarColor = (percentage: number): string => {\r\n    if (percentage < 50) return 'bg-green-500';\r\n    if (percentage < 80) return 'bg-yellow-500';\r\n    return 'bg-red-500';\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <button\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        className=\"p-2 rounded-lg hover:bg-gray-800 transition-colors\"\r\n        title=\"Storage Usage\"\r\n      >\r\n        <HardDrive className={`w-5 h-5 ${getStatusColor(storageInfo.percentage)}`} />\r\n        {storageInfo.percentage > 80 && (\r\n          <AlertTriangle className=\"w-3 h-3 text-red-400 absolute -top-1 -right-1\" />\r\n        )}\r\n      </button>\r\n\r\n      {isExpanded && (\r\n        <div className=\"absolute bottom-full mb-2 right-0 w-64 bg-gray-800 rounded-lg shadow-lg p-4 z-50\">\r\n          <h3 className=\"text-sm font-semibold text-gray-300 mb-2\">Storage Usage</h3>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between text-xs text-gray-400\">\r\n              <span>Used</span>\r\n              <span>{formatBytes(storageInfo.usage)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-between text-xs text-gray-400\">\r\n              <span>Available</span>\r\n              <span>{formatBytes(storageInfo.quota)}</span>\r\n            </div>\r\n            \r\n            <div className=\"w-full bg-gray-700 rounded-full h-2 mt-2\">\r\n              <div\r\n                className={`h-2 rounded-full transition-all ${getProgressBarColor(storageInfo.percentage)}`}\r\n                style={{ width: `${Math.min(storageInfo.percentage, 100)}%` }}\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"text-center text-xs text-gray-400 mt-1\">\r\n              {storageInfo.percentage.toFixed(1)}% used\r\n            </div>\r\n\r\n            {storageInfo.percentage > 80 && (\r\n              <div className=\"mt-3 p-2 bg-red-900/20 border border-red-800 rounded text-xs text-red-400\">\r\n                <AlertTriangle className=\"w-3 h-3 inline mr-1\" />\r\n                Storage is running low. Older messages will be automatically removed if needed.\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}; ","import React from 'react';\nimport { Menu } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { useStore } from '../../store/useStore';\nimport LegalDisclaimer from '../Legal/LegalDisclaimer';\nimport LoginButton from '../../auth/LoginButton';\nimport { StorageIndicator } from '../UI/StorageIndicator';\n\ninterface HeaderProps {\n  toggleMenu: () => void;\n  isMenuOpen: boolean;\n}\n\nconst Header: React.FC<HeaderProps> = ({ toggleMenu, isMenuOpen }) => {\n  const { activeTab, userProgress } = useStore();\n\n  const getTitle = () => {\n    switch (activeTab) {\n      case 'chat':\n        return 'Chat with Soberi';\n      case 'checkin':\n        return 'Daily Check-In';\n      case 'journal':\n        return 'Journal';\n      case 'progress':\n        return 'Your Progress';\n      case 'resources':\n        return 'Resources';\n      case 'tasks':\n        return 'Tasks';\n      case 'insights':\n        return 'Insights';\n      default:\n        return 'Soberi.ai';\n    }\n  };\n\n  const getSubtitle = () => {\n    switch (activeTab) {\n      case 'chat':\n        return 'Share your thoughts and feelings';\n      case 'checkin':\n        return 'Track your daily status';\n      case 'journal':\n        return 'Reflect and record your journey';\n      case 'progress':\n        return `${userProgress.currentStreak} day${userProgress.currentStreak !== 1 ? 's' : ''} clean`;\n      case 'resources':\n        return 'Support and tools';\n      case 'tasks':\n        return 'Structure your day';\n      case 'insights':\n        return 'Reflect on your recovery insights';\n      default:\n        return 'Your recovery companion';\n    }\n  };\n\n  return (\n    <header className=\"bg-white border-b px-4 py-3 flex flex-col lg:px-6\">\n      <div className=\"flex justify-between items-center\">\n        <div className=\"flex items-center\">\n          <button\n            onClick={toggleMenu}\n            className=\"mr-3 p-2 rounded-full hover:bg-gray-100 lg:hidden\"\n            aria-label=\"Open menu\"\n          >\n            <Menu size={20} className=\"text-gray-600\" />\n          </button>\n          <div>\n            <motion.h1\n              className=\"text-lg font-semibold text-gray-800\"\n              key={activeTab}\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              {getTitle()}\n            </motion.h1>\n            <motion.p\n              className=\"text-xs text-gray-500\"\n              key={`${activeTab}-subtitle`}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ duration: 0.3, delay: 0.1 }}\n            >\n              {getSubtitle()}\n            </motion.p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center\">\n          {activeTab === 'progress' && (\n            <div className=\"hidden sm:block px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-medium\">\n              {userProgress.currentStreak > 0\n                ? `${userProgress.currentStreak} day streak `\n                : 'Start your journey today'}\n            </div>\n          )}\n          <div className=\"ml-2\">\n            <StorageIndicator />\n          </div>\n          <div className=\"ml-2\">\n            <LoginButton />\n          </div>\n        </div>\n      </div>\n\n      {activeTab === 'chat' && (\n        <div className=\"mt-1 flex justify-end z-50\">\n          <LegalDisclaimer type=\"mini\" />\n        </div>\n      )}\n    </header>\n  );\n};\n\nexport default Header;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { X, Lightbulb, Heart, AlertCircle } from 'lucide-react';\nimport { EmotionalInsight } from '../../types';\n\ninterface InsightCardProps {\n  insight: EmotionalInsight;\n  onDismiss: () => void;\n  total: number;\n  current: number;\n}\n\nconst InsightCard: React.FC<InsightCardProps> = ({ \n  insight,\n  onDismiss,\n  total,\n  current\n}) => {\n  const getIcon = () => {\n    switch (insight.type) {\n      case 'insight':\n        return <Lightbulb className=\"text-amber-500\\\" size={20} />;\n      case 'encouragement':\n        return <Heart className=\"text-pink-500\" size={20} />;\n      case 'reminder':\n        return <AlertCircle className=\"text-blue-500\" size={20} />;\n      default:\n        return <Lightbulb className=\"text-amber-500\" size={20} />;\n    }\n  };\n  \n  const getBgColor = () => {\n    switch (insight.type) {\n      case 'insight':\n        return 'bg-amber-50 border-amber-100';\n      case 'encouragement':\n        return 'bg-pink-50 border-pink-100';\n      case 'reminder':\n        return 'bg-blue-50 border-blue-100';\n      default:\n        return 'bg-amber-50 border-amber-100';\n    }\n  };\n\n  const getTextColor = () => {\n    switch (insight.type) {\n      case 'insight':\n        return 'text-amber-800';\n      case 'encouragement':\n        return 'text-pink-800';\n      case 'reminder':\n        return 'text-blue-800';\n      default:\n        return 'text-amber-800';\n    }\n  };\n  \n  return (\n    <motion.div \n      className={`rounded-lg border p-4 ${getBgColor()}`}\n      initial={{ opacity: 0, y: -10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -10 }}\n    >\n      <div className=\"flex justify-between items-start\">\n        <div className=\"flex items-center\">\n          <div className=\"w-8 h-8 rounded-full bg-white flex items-center justify-center mr-3\">\n            {getIcon()}\n          </div>\n          <h3 className={`font-medium ${getTextColor()}`}>\n            {insight.type === 'insight' && 'Recovery Insight'}\n            {insight.type === 'encouragement' && 'Encouragement'}\n            {insight.type === 'reminder' && 'Helpful Reminder'}\n          </h3>\n        </div>\n        <div className=\"flex items-center\">\n          {total > 1 && (\n            <span className=\"text-xs mr-3 opacity-75\">\n              {current} of {total}\n            </span>\n          )}\n          <button \n            onClick={onDismiss}\n            className={`p-1 rounded-full hover:bg-white/20 ${getTextColor()}`}\n          >\n            <X size={16} />\n          </button>\n        </div>\n      </div>\n      \n      <p className={`mt-3 ${getTextColor()}`}>\n        {insight.content}\n      </p>\n    </motion.div>\n  );\n};\n\nexport default InsightCard;","import React from 'react';\r\nimport { useStore } from '../../store/useStore';\r\nimport InsightCard from '../TasksView/InsightCard';\r\n\r\nconst InsightsView: React.FC = () => {\r\n  const { insights, updateInsightNote } = useStore();\r\n  const sortedInsights = [...insights].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto\">\r\n      <h2 className=\"text-2xl font-bold mb-6 flex items-center gap-2\">\r\n        <span role=\"img\" aria-label=\"lightbulb\"></span> Insights\r\n      </h2>\r\n      {sortedInsights.length === 0 ? (\r\n        <div className=\"text-gray-500 text-center py-12\">No insights yet. Insights from your journey will appear here.</div>\r\n      ) : (\r\n        <div className=\"space-y-8\">\r\n          {sortedInsights.map((insight, idx) => (\r\n            <div key={insight.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-4\">\r\n              <InsightCard\r\n                insight={insight}\r\n                onDismiss={() => {}}\r\n                total={1}\r\n                current={1}\r\n              />\r\n              {/* User note box */}\r\n              <div className=\"mt-4\">\r\n                <label htmlFor={`user-note-${insight.id}`} className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Your Reflection\r\n                </label>\r\n                <textarea\r\n                  id={`user-note-${insight.id}`}\r\n                  className=\"w-full border rounded-lg p-2 text-sm min-h-[60px] focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  placeholder=\"Write your thoughts about this insight...\"\r\n                  value={insight.userNote || ''}\r\n                  onChange={e => updateInsightNote(insight.id, e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InsightsView; ","import React, { useEffect, useState } from 'react';\nimport { Heart, CalendarCheck, BookOpen, TrendingUp, X, LifeBuoy, CheckSquare, Lightbulb } from 'lucide-react'; // Added Lightbulb\nimport { motion } from 'framer-motion';\nimport { useStore } from '../../store/useStore';\nimport NavItem from './NavItem';\nimport Header from './Header';\nimport InsightsView from '../InsightsView/InsightsView'; // Add this import\n\nconst AppLayout: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { activeTab, setActiveTab } = useStore();\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Escape' && isMenuOpen) {\n      setIsMenuOpen(false);\n    }\n  };\n\n  const navItems = [\n    { id: 'chat', label: 'Chat', icon: Heart, tab: 'chat' as const },\n    { id: 'checkin', label: 'Check In', icon: CalendarCheck, tab: 'checkin' as const },\n    { id: 'tasks', label: 'Tasks', icon: CheckSquare, tab: 'tasks' as const },\n    { id: 'journal', label: 'Journal', icon: BookOpen, tab: 'journal' as const },\n    { id: 'progress', label: 'Progress', icon: TrendingUp, tab: 'progress' as const },\n    { id: 'insights', label: 'Insights', icon: Lightbulb, tab: 'insights' as const },\n    { id: 'resources', label: 'Resources', icon: LifeBuoy, tab: 'resources' as const }\n  ];\n\n  return (\n    <div className=\"flex flex-col h-full min-h-screen bg-gradient-to-b from-gray-50 to-white\" onKeyDown={handleKeyDown}>\n      {/* Make Header sticky */}\n      <div className=\"sticky top-0 z-10 w-full\"> {/* Ensure full width and appropriate z-index (restored z-30) */}\n        <Header toggleMenu={toggleMenu} isMenuOpen={isMenuOpen} />\n      </div>\n\n      {/* Container for sidebar and main content. Removed overflow-hidden to allow page scroll. */}\n      <div className=\"flex flex-1\">\n        {/* Mobile Navigation Drawer */}\n        <motion.div\n          className=\"fixed inset-0 backdrop-blur-sm bg-black/30 z-20 lg:hidden\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: isMenuOpen ? 1 : 0 }}\n          transition={{ duration: 0.2 }}\n          style={{ pointerEvents: isMenuOpen ? 'auto' : 'none' }}\n          aria-hidden={!isMenuOpen}\n        >\n          <motion.div\n            className=\"absolute top-0 left-0 h-full w-64 bg-white shadow-lg\"\n            initial={{ x: '-100%' }}\n            animate={{ x: isMenuOpen ? 0 : '-100%' }}\n            transition={{ duration: 0.3, ease: 'easeInOut' }}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"Navigation menu\"\n          >\n            <div className=\"flex justify-between items-center p-4 border-b\">\n              <h2 className=\"text-xl font-semibold text-indigo-600\">Soberi.ai</h2>\n              <button\n                onClick={toggleMenu}\n                className=\"p-1 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n                aria-label=\"Close menu\"\n              >\n                <X size={20} className=\"text-gray-600\" />\n              </button>\n            </div>\n            <nav className=\"p-4 space-y-2\" role=\"tablist\">\n              {navItems.map((item) => (\n                <NavItem\n                  key={item.id}\n                  icon={item.icon}\n                  label={item.label}\n                  isActive={activeTab === item.tab}\n                  onClick={() => {\n                    setActiveTab(item.tab);\n                    setIsMenuOpen(false);\n                  }}\n                  vertical\n                />\n              ))}\n            </nav>\n\n            <div className=\"absolute bottom-0 left-0 right-0 p-4 border-t\">\n              {/* Emergency Help Button */}\n              <button\n                onClick={() => {\n                  setActiveTab('resources');\n                  setIsMenuOpen(false);\n                }}\n                className=\"w-full py-2 px-3 bg-red-50 text-red-700 border border-red-100 rounded-lg flex items-center justify-center hover:bg-red-100 transition-colors duration-200\"\n              >\n                <LifeBuoy size={16} className=\"mr-2\" />\n                <span className=\"text-sm font-medium\">Emergency Help</span>\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n\n        {/* Desktop Sidebar */}\n        <div className=\"hidden lg:flex lg:flex-col lg:w-64 bg-white/80 backdrop-blur-sm shadow-lg border-r border-gray-100 sticky top-16 z-10 h-[calc(100vh-4rem)] overflow-y-auto\">\n          {/* Updated Desktop Sidebar Header to be more consistent with Mobile Drawer Header style */}\n          <div className=\"p-4 border-b flex items-center \">\n            <h2 className=\"text-xl font-semibold text-indigo-600\">Soberi.ai</h2>\n            {/* Removed subtitle for consistency with mobile drawer's simplicity */}\n          </div>\n          {/* Desktop sidebar nav: Now part of the scrollable sidebar */}\n          <nav className=\"space-y-2 p-4\" role=\"tablist\" aria-label=\"Main navigation\">\n            {navItems.map((item) => (\n              <NavItem\n                key={item.id}\n                icon={item.icon}\n                label={item.label}\n                isActive={activeTab === item.tab}\n                onClick={() => setActiveTab(item.tab)}\n                vertical\n              />\n            ))}\n          </nav>\n\n          <div className=\"p-4 border-t\">\n            {/* Emergency Help Button */}\n            <button\n              onClick={() => setActiveTab('resources')}\n              className=\"w-full py-2 px-3 mb-4 bg-red-50 text-red-700 border border-red-100 rounded-lg flex items-center justify-center hover:bg-red-100 transition-colors duration-200\"\n            >\n              <LifeBuoy size={16} className=\"mr-2\" />\n              <span className=\"text-sm font-medium\">Emergency Help</span>\n            </button>\n\n            <div className=\"text-xs text-gray-500\">\n              <p className=\"mb-1\">Version 0.1.0</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Bottom Navigation (Mobile) - Removed as per user request\n        <div className=\"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm shadow-lg border-t border-gray-100 z-10 safe-bottom\">\n          <div className=\"flex justify-around items-center h-16 px-2\" role=\"tablist\" aria-label=\"Mobile navigation\">\n            {navItems.slice(0, 5).map((item) => (\n              <NavItem\n                key={item.id}\n                icon={item.icon}\n                label={item.label}\n                isActive={activeTab === item.tab}\n                onClick={() => setActiveTab(item.tab)}\n              />\n            ))}\n          </div>\n        </div>\n        */}\n\n        {/* Main Content: Removed overflow-auto so it scrolls with page */}\n        <main className=\"flex-1 pb-20 lg:pb-0 w-full\" id=\"main-content\"> {/* Consider adjusting pb-20 if needed after nav removal */}\n          <div className=\"container mx-auto p-4\">\n            {activeTab === 'insights' ? <InsightsView /> : children}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default AppLayout;\n","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { getTimeFromDate } from '../../utils/dateUtils';\n\ninterface MessageBubbleProps {\n  message: string;\n  sender: 'user' | 'ai';\n  timestamp: number;\n}\n\nconst MessageBubble: React.FC<MessageBubbleProps> = ({ message, sender, timestamp }) => {\n  const isUser = sender === 'user';\n\n  // Helper function to escape HTML characters\n  const escapeHtml = (unsafe: string): string => {\n    return unsafe\n      .replace(/&/g, \"&amp;\") // Attempting double escape for &\n      .replace(/</g, \"&lt;\")  // Attempting double escape for <\n      .replace(/>/g, \"&gt;\")  // Attempting double escape for >\n      .replace(/\"/g, \"&quot;\") // Attempting double escape for \"\n      .replace(/'/g, \"&#039;\"); // Attempting double escape for ' (or use &#039; directly if & is the issue)\n                                    // Let's try with &#039; directly for single quote as it was working partially\n                                    // Correcting the single quote based on previous partial success:\n                                    // .replace(/'/g, \"&#039;\");\n                                    // For consistency with double escaping attempt:\n                                    // .replace(/'/g, \"&#039;\");\n                                    // Given the problem seems to be with & becoming literal, let's be very specific for the single quote too.\n                                    // The previous final_file_content had '&#039;' for single quote, which was fine.\n                                    // The issue was with &, <, >, \".\n                                    // So, for single quote, \"&#039;\" should be fine if the & on its own isn't the primary issue.\n                                    // Let's stick to the pattern for now.\n                                    // If &#039; becomes &#039; that's good.\n                                    // If &quot; becomes \" that's good.\n                                    // The problem was \" becoming \"\n                                    // So if &quot; becomes \" then we are good.\n                                    // Let's use the simpler &#039; for single quote as it seemed to work.\n                                    // The main problem is with &, <, >, \" becoming literal &, <, >, \"\n                                    // So the double escape is for those.\n                                    // For single quote, \"&#039;\" was fine.\n                                    // Let's re-evaluate. The problem is that `\"` in my input becomes `\"` in the file.\n                                    // So, if I want `\"` in the file, I need to ensure the input string `\"` is not transformed.\n                                    // The \"double escape\" theory is that `&quot;` in input becomes `\"` in file.\n                                    // Let's apply this consistently.\n      // Double escape for single quote too for consistency of the experiment\n  };\n\n// Process AI messages: escape HTML first, then apply markdown for bold and italic\nconst aiMessageHtml = isUser\n  ? ''\n  : escapeHtml(message)\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>') // Bold: **text**\n      .replace(/\\*(.*?)\\*/g, '<em>$1</em>');           // Italic: *text*\n\nreturn (\n  <motion.div\n    initial={{ opacity: 0, y: 20 }}\n    animate={{ opacity: 1, y: 0 }}\n    transition={{ duration: 0.3 }}\n    className={`flex ${isUser ? 'justify-end' : 'justify-start'}`}\n  >\n    <div className={`\n        max-w-[85%] md:max-w-[70%]\n        ${isUser\n        ? 'bg-gradient-to-br from-indigo-600 to-indigo-700 text-white rounded-2xl shadow-lg'\n        : 'bg-white/90 backdrop-blur-sm border border-gray-100 text-gray-800 rounded-2xl shadow-md'}\n        px-4 py-3\n      `}>\n      {isUser ? (\n        <p className=\"whitespace-pre-wrap\">{message}</p>\n      ) : (\n        <p\n          className=\"whitespace-pre-wrap\"\n          dangerouslySetInnerHTML={{ __html: aiMessageHtml }}\n        />\n      )}\n      <div className={`text-xs mt-2 ${isUser ? 'text-indigo-100/80' : 'text-gray-400'}`}>\n        {getTimeFromDate(timestamp)}\n      </div>\n    </div>\n  </motion.div>\n);\n};\n\nexport default MessageBubble;\n","import React from 'react';\n\ninterface SkeletonProps {\n  className?: string;\n  width?: string;\n  height?: string;\n}\n\nconst Skeleton: React.FC<SkeletonProps> = ({ \n  className = '', \n  width = 'w-full', \n  height = 'h-4' \n}) => {\n  return (\n    <div \n      className={`animate-pulse bg-gray-200 rounded ${width} ${height} ${className}`}\n      aria-hidden=\"true\"\n    />\n  );\n};\n\nexport default Skeleton;","import React from 'react';\nimport Skeleton from '../UI/Skeleton';\n\nconst ChatSkeleton: React.FC = () => {\n  return (\n    <div className=\"flex flex-col space-y-4 animate-pulse\">\n      {/* User message */}\n      <div className=\"flex justify-end\">\n        <div className=\"max-w-[70%] bg-indigo-600 rounded-tl-lg rounded-tr-lg rounded-bl-lg px-4 py-3\">\n          <Skeleton className=\"bg-indigo-400 h-4 w-24 mb-2\" />\n          <Skeleton className=\"bg-indigo-400 h-4 w-32\" />\n          <div className=\"text-xs mt-1 text-indigo-100\">\n            <Skeleton className=\"bg-indigo-400 h-3 w-12 mt-1\" />\n          </div>\n        </div>\n      </div>\n      \n      {/* AI response typing indicator */}\n      <div className=\"flex justify-start\">\n        <div className=\"max-w-[70%] bg-white border border-gray-200 rounded-tl-lg rounded-tr-lg rounded-br-lg px-4 py-3 shadow-sm\">\n          <div className=\"flex space-x-1\">\n            <div className=\"w-2 h-2 rounded-full bg-gray-300 animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n            <div className=\"w-2 h-2 rounded-full bg-gray-300 animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n            <div className=\"w-2 h-2 rounded-full bg-gray-300 animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatSkeleton;","import React from 'react';\nimport { motion } from 'framer-motion';\n\ninterface QuickResponsesProps {\n  onSelect: (message: string) => void;\n}\n\nconst QuickResponses: React.FC<QuickResponsesProps> = ({ onSelect }) => {\n  // Generate contextual suggestions based on recovery themes\n  const suggestions = [\n    \"I'm struggling with cravings today\",\n    \"I feel like I might relapse\",\n    \"What coping strategies can help me?\",\n    \"I'm feeling really good today\",\n    \"How do I handle triggers?\",\n    \"I slipped up yesterday\"\n  ];\n\n  return (\n    <div>\n      <p className=\"text-xs text-gray-500 mb-2\">Quick responses:</p>\n      <div className=\"flex flex-wrap gap-2\">\n        {suggestions.map((suggestion, index) => (\n          <motion.button\n            key={index}\n            whileHover={{ scale: 1.03 }}\n            whileTap={{ scale: 0.97 }}\n            onClick={() => onSelect(suggestion)}\n            className=\"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full text-xs transition-colors duration-200\"\n          >\n            {suggestion}\n          </motion.button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default QuickResponses;","/**\n * Stripe product configuration\n * \n * This file contains the configuration for the Stripe products used in the application.\n * Each product must include priceId, name, description, and mode properties.\n */\n\nexport interface StripeProduct {\n  priceId: string;\n  name: string;\n  description: string;\n  mode: 'subscription' | 'payment';\n  price?: string;\n  currency?: string;\n}\n\nexport const PRODUCTS: StripeProduct[] = [\n  {\n    priceId: 'price_1RUSroFdhzZhnmSKP5fbkOjR',\n    name: 'Soberi.ai',\n    description: 'If you wish to cancel your subscription, please email us at exaliodevelopment@gmail.com. We will refund the amount corresponding to any unused tokens.',\n    mode: 'subscription',\n    price: '20.00',\n    currency: 'EUR'\n  }\n];\n\nexport const getProductByPriceId = (priceId: string): StripeProduct | undefined => {\n  return PRODUCTS.find(product => product.priceId === priceId);\n};","import React, { useState } from 'react';\nimport { useAuth } from '../../auth/AuthContext';\nimport { PRODUCTS, StripeProduct } from '../../stripe-config';\nimport { createCheckoutSession } from '../../utils/stripeUtils';\nimport { RefreshCw } from 'lucide-react';\n\ninterface SubscriptionButtonProps {\n  product?: StripeProduct;\n  className?: string;\n  buttonText?: string;\n  showPrice?: boolean;\n}\n\nconst SubscriptionButton: React.FC<SubscriptionButtonProps> = ({ \n  product = PRODUCTS[0],\n  className = '',\n  buttonText = 'Subscribe Now',\n  showPrice = true\n}) => {\n  const { user } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubscribe = async () => {\n    if (!user) {\n      // Redirect to login page if not logged in\n      window.location.href = '/login?redirect=' + encodeURIComponent(window.location.pathname);\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const { url } = await createCheckoutSession({\n        priceId: product.priceId,\n        mode: product.mode,\n        successUrl: `${window.location.origin}/?payment_success=true&session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: window.location.href,\n      });\n\n      if (url) {\n        window.location.href = url;\n      } else {\n        throw new Error('Failed to create checkout session');\n      }\n    } catch (error) {\n      console.error('Error creating checkout session:', error);\n      alert('Something went wrong. Please try again later.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleSubscribe}\n      disabled={isLoading}\n      className={`flex items-center justify-center px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors duration-200 ${className}`}\n    >\n      {isLoading ? (\n        <>\n          <RefreshCw size={18} className=\"mr-2 animate-spin\" />\n          Processing...\n        </>\n      ) : (\n        <>\n          {buttonText}\n          {showPrice && product.price && (\n            <span className=\"ml-2\">\n              {product.price} {product.currency}\n            </span>\n          )}\n        </>\n      )}\n    </button>\n  );\n};\n\nexport default SubscriptionButton;","import { supabase } from './supabaseClient';\n\ninterface CreateCheckoutSessionParams {\n  priceId: string;\n  mode: 'subscription' | 'payment';\n  successUrl: string;\n  cancelUrl: string;\n}\n\ninterface CheckoutResponse {\n  sessionId?: string;\n  url?: string;\n  error?: string;\n}\n\n/**\n * Creates a Stripe checkout session\n */\nexport async function createCheckoutSession({\n  priceId,\n  mode,\n  successUrl,\n  cancelUrl,\n}: CreateCheckoutSessionParams): Promise<CheckoutResponse> {\n  try {\n    const { data, error } = await supabase.functions.invoke('stripe-checkout', {\n      body: {\n        price_id: priceId,\n        mode,\n        success_url: successUrl,\n        cancel_url: cancelUrl,\n      },\n    });\n\n    if (error) {\n      console.error('Error creating checkout session:', error);\n      throw new Error(error.message);\n    }\n\n    if (!data || !data.sessionId || !data.url) {\n      throw new Error('Invalid response from checkout endpoint');\n    }\n\n    return {\n      sessionId: data.sessionId,\n      url: data.url,\n    };\n  } catch (error: any) {\n    console.error('Error creating checkout session:', error);\n    return { error: error.message };\n  }\n}\n\n/**\n * Checks if the current user has an active subscription\n */\nexport async function checkSubscriptionStatus(): Promise<boolean> {\n  try {\n    const { data, error } = await supabase\n      .from('stripe_user_subscriptions')\n      .select('subscription_status')\n      .maybeSingle();\n\n    if (error) {\n      console.error('Error checking subscription status:', error);\n      return false;\n    }\n\n    return data?.subscription_status === 'active';\n  } catch (error) {\n    console.error('Error checking subscription status:', error);\n    return false;\n  }\n}","import React, { useState, useEffect, useRef } from 'react';\nimport { Send, RefreshCw, AlertTriangle, Info, X, Heart, Lightbulb } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useStore } from '../../store/useStore';\nimport MessageBubble from './MessageBubble';\n// import { getWelcomeMessage } from '../../utils/mockUtils'; // Removed as per user feedback\nimport ChatSkeleton from './ChatSkeleton';\nimport QuickResponses from './QuickResponses';\nimport { useAuth } from '../../auth/AuthContext';\nimport SubscriptionButton from '../Subscription/SubscriptionButton';\n\nconst soberiWelcomeMessage = `Hey! So glad you're here.\n\nLife can throw some curveballs, right? And it's totally cool if you're not feeling 100% right now. We all have those days.\n\nI'm here to chat, listen, and help you figure things out, no pressure. What's up? What's on your mind or what have you been dealing with lately?\n\nFeel free to just vent, brainstorm, or whatever you need. My goal is to be that buddy in your corner, helping you see things a bit clearer or just being a sounding board.\n\nSo, what can I do for you today?`;\n\n// Define hint messages with unique IDs\nconst chatHints = [\n  {\n    id: 'hint-1',\n    text: \"Say what's on your mind, even the things you wouldn't ever say to anyone. Your chats are private and never seen by another human being.\",\n  },\n  {\n    id: 'hint-2',\n    text: \"Talk to me like you talk to yourself. Share even the deepest things you haven't shared with anyone. Everything is confidential.\",\n  },\n  // Add more hints here in the future\n];\n\nconst ChatView: React.FC = () => {\n  const [inputValue, setInputValue] = useState('');\n  const messages = useStore((state) => state.messages);\n  const isLoading = useStore((state) => state.isLoading);\n  const insights = useStore((state) => state.insights);\n  const markInsightSeen = useStore((state) => state.markInsightSeen);\n  const storeSendMessage = useStore((state) => state.sendMessage);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [showInfoBanner, setShowInfoBanner] = useState(true);\n  const [showEmotionalInsight, setShowEmotionalInsight] = useState(false);\n  const [currentInsight, setCurrentInsight] = useState<string | null>(null);\n\n  // State for managing hints\n  const [dismissedHintIds, setDismissedHintIds] = useState<string[]>(() => {\n    const dismissed = localStorage.getItem('dismissedChatHints');\n    return dismissed ? JSON.parse(dismissed) : [];\n  });\n  const [currentHintIndex, setCurrentHintIndex] = useState<number>(0);\n\n  // Filter out dismissed hints\n  const availableHints = chatHints.filter(\n    (hint) => !dismissedHintIds.includes(hint.id)\n  );\n\n  const currentHint = availableHints[currentHintIndex];\n\n  // Effect to update local storage when dismissed hints change\n  useEffect(() => {\n    localStorage.setItem('dismissedChatHints', JSON.stringify(dismissedHintIds));\n  }, [dismissedHintIds]);\n\n  // Effect to reset hint index if all hints are dismissed or if available hints change\n  useEffect(() => {\n    if (currentHintIndex >= availableHints.length) {\n      setCurrentHintIndex(0);\n    }\n  }, [availableHints, currentHintIndex]);\n\n  useEffect(() => {\n    // Scroll to bottom whenever messages change\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  useEffect(() => {\n    // Check for unshown insights\n    const unshownInsights = insights.filter(insight => !insight.shown);\n    if (unshownInsights.length > 0 && !showEmotionalInsight) {\n      setCurrentInsight(unshownInsights[0].content);\n      setShowEmotionalInsight(true);\n      markInsightSeen(unshownInsights[0].id);\n    }\n  }, [insights, markInsightSeen]);\n\n  const { user, hasPaid, chatCount } = useAuth();\n  const supabaseUserId = user?.id;\n  const FREE_CHAT_LIMIT = 10;\n  const isLocked = !hasPaid && chatCount >= FREE_CHAT_LIMIT;\n\n  const handleSendMessage = async () => {\n    if (inputValue.trim() === '' || !supabaseUserId) {\n      if (!supabaseUserId) console.error('Cannot send message: Supabase User ID is missing.');\n      return;\n    }\n    \n    await storeSendMessage(inputValue.trim(), supabaseUserId);\n    setInputValue('');\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    // If Ctrl + Enter is pressed, then send the message\n    if (e.key === 'Enter' && e.ctrlKey) {\n      e.preventDefault(); // Prevent default action (which might be adding a newline or form submission)\n      handleSendMessage();\n    }\n    // If Shift + Enter is pressed, it will do its default (add a newline in some browsers/OS configurations)\n    // If only Enter is pressed, it will also do its default (add a newline in a textarea).\n  };\n\n  const handleQuickResponseClick = async (message: string) => {\n    if (!supabaseUserId) {\n      console.error('Cannot send quick response: Supabase User ID is missing.');\n      return;\n    }\n    await storeSendMessage(message, supabaseUserId);\n  };\n\n  const handleDismissHint = () => {\n    if (currentHint) {\n      setDismissedHintIds((prevIds) => [...prevIds, currentHint.id]);\n      // Move to the next hint\n      setCurrentHintIndex((prevIndex) => (prevIndex + 1) % availableHints.length);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full max-w-3xl mx-auto\">\n      <div className=\"flex-1 overflow-y-auto px-4 py-4 space-y-6\">\n        {messages.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-center px-4 space-y-4\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6 }}\n              className=\"w-20 h-20 rounded-full bg-indigo-100 flex items-center justify-center mb-4\"\n            >\n              <motion.div\n                animate={{\n                  scale: [1, 1.1, 1],\n                }}\n                transition={{\n                  repeat: Infinity,\n                  repeatType: \"loop\",\n                  duration: 2,\n                }}\n              >\n                <Heart size={36} className=\"text-indigo-500\" />\n              </motion.div>\n            </motion.div>\n            <h3 className=\"text-xl font-semibold text-gray-800\">Welcome to Soberi.ai</h3>\n            <p className=\"text-gray-600 max-w-md whitespace-pre-line\">\n              {soberiWelcomeMessage}\n            </p>\n            {/* Removed the motion.div that used getWelcomeMessage() */}\n\n            <div className=\"w-full max-w-md mt-2\">\n              <QuickResponses onSelect={handleQuickResponseClick} />\n            </div>\n\n            {/* Emotional Journey Banner */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 1 }}\n              className=\"w-full max-w-md mt-4 p-4 bg-amber-50 border border-amber-100 rounded-lg\"\n            >\n              <h4 className=\"font-medium text-amber-800 mb-1\">About The Recovery Journey</h4>\n              <p className=\"text-sm text-amber-700\">\n                Recovery often feels worse before it feels better as your brain heals and you learn to process emotions without substances. This discomfort isn't failureit's evidence of healing. Trust the process.\n              </p>\n            </motion.div>\n          </div>\n        ) : (\n          <>\n            <AnimatePresence>\n              {showInfoBanner && (\n                <motion.div\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: \"auto\" }}\n                  exit={{ opacity: 0, height: 0 }}\n                  className=\"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4 flex items-start\"\n                >\n                  <Info size={18} className=\"text-blue-500 mr-3 mt-0.5 flex-shrink-0\" />\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-medium text-blue-800 text-sm\">Privacy Assured</h4>\n                    <p className=\"text-blue-700 text-xs mt-1\">\n                      Everything you share is private and confidential. I'm here to support your recovery without judgment.\n                    </p>\n                  </div>\n                  <button\n                    onClick={() => setShowInfoBanner(false)}\n                    className=\"text-blue-500 hover:text-blue-700 ml-2 flex-shrink-0\"\n                  >\n                    <X size={16} />\n                  </button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            {/* Emotional Insight Banner */}\n            <AnimatePresence>\n              {showEmotionalInsight && currentInsight && (\n                <motion.div\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: \"auto\" }}\n                  exit={{ opacity: 0, height: 0 }}\n                  className=\"bg-amber-50 border border-amber-100 rounded-lg p-4 mb-4 flex items-start\"\n                >\n                  <div className=\"w-8 h-8 rounded-full bg-white flex items-center justify-center mr-3 flex-shrink-0\">\n                    <Lightbulb size={16} className=\"text-amber-500\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-medium text-amber-800 text-sm\">Recovery Insight</h4>\n                    <p className=\"text-amber-700 text-sm mt-1\">\n                      {currentInsight}\n                    </p>\n                  </div>\n                  <button\n                    onClick={() => setShowEmotionalInsight(false)}\n                    className=\"text-amber-500 hover:text-amber-700 ml-2 flex-shrink-0\"\n                  >\n                    <X size={16} />\n                  </button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            {messages.map((message) => (\n              <MessageBubble\n                key={message.id}\n                message={message.content}\n                sender={message.sender}\n                timestamp={message.timestamp}\n              />\n            ))}\n            {isLoading && <ChatSkeleton />}\n\n            {!isLoading && messages.length > 0 && (\n              <div className=\"my-4\">\n                <QuickResponses onSelect={handleQuickResponseClick} />\n              </div>\n            )}\n          </>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Hint Banner */}\n      <AnimatePresence>\n        {currentHint && availableHints.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"bg-blue-50 border border-blue-100 rounded-lg p-3 mx-4 mb-2 flex items-start\"\n          >\n            <Lightbulb size={16} className=\"text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n            <div className=\"flex-1\">\n              <p className=\"text-blue-700 text-sm\">\n                {currentHint.text}\n              </p>\n            </div>\n            <button\n              onClick={handleDismissHint}\n              className=\"text-blue-500 hover:text-blue-700 ml-2 flex-shrink-0\"\n              aria-label=\"Dismiss hint\"\n            >\n              <X size={14} />\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Chat usage and gating UI */}\n      <div className=\"border-t bg-white p-4\">\n        {isLocked ? (\n          <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center\">\n            <h4 className=\"text-amber-800 font-semibold mb-2\">Free chat limit reached</h4>\n            <p className=\"text-amber-700 text-sm mb-4\">\n              You've used your 10 free chats. Subscribe to unlock unlimited support and continue your recovery journey.\n            </p>\n            <SubscriptionButton buttonText=\"Subscribe Now\" showPrice />\n          </div>\n        ) : (\n        <div className=\"relative flex items-center\">\n          <textarea\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Type your message...\"\n            className=\"flex-1 resize-none border border-gray-300 rounded-lg p-3 pr-12 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 max-h-32\"\n            rows={1}\n            aria-label=\"Message input\"\n              disabled={isLocked || isLoading || !supabaseUserId}\n          />\n          <button\n            onClick={handleSendMessage}\n              disabled={inputValue.trim() === '' || isLoading || isLocked || !supabaseUserId}\n            className={`absolute right-3 p-1 rounded-full \n                ${inputValue.trim() === '' || isLoading || isLocked || !supabaseUserId\n                ? 'bg-gray-200 text-gray-400'\n                : 'bg-indigo-600 text-white hover:bg-indigo-700'\n              } transition-colors duration-200`}\n            aria-label=\"Send message\"\n          >\n            {isLoading ? (\n              <RefreshCw size={20} className=\"animate-spin\" />\n            ) : (\n              <Send size={20} />\n            )}\n          </button>\n        </div>\n        )}\n        <div className=\"flex justify-center mt-2\">\n          <button\n            onClick={() => useStore.getState().setActiveTab('resources')}\n            className=\"flex items-center text-xs text-orange-600 hover:text-orange-800\"\n          >\n            <AlertTriangle size={12} className=\"mr-1\" />\n            <span>Need urgent help? Access crisis resources</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatView;\n","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { MoodType } from '../../types';\n\ninterface MoodSelectorProps {\n  selectedMood: MoodType | null;\n  onSelectMood: (mood: MoodType) => void;\n}\n\nconst MoodSelector: React.FC<MoodSelectorProps> = ({ selectedMood, onSelectMood }) => {\n  const moods: { value: MoodType; emoji: string; label: string }[] = [\n    { value: 'terrible', emoji: '', label: 'Terrible' },\n    { value: 'bad', emoji: '', label: 'Bad' },\n    { value: 'neutral', emoji: '', label: 'Neutral' },\n    { value: 'good', emoji: '', label: 'Good' },\n    { value: 'great', emoji: '', label: 'Great' },\n  ];\n\n  return (\n    <div className=\"grid grid-cols-5 gap-2\">\n      {moods.map((mood) => (\n        <motion.button\n          key={mood.value}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => onSelectMood(mood.value)}\n          className={`flex flex-col items-center justify-center p-3 rounded-2xl transition-all duration-200 hover:shadow-md ${\n            selectedMood === mood.value\n              ? 'bg-gradient-to-b from-indigo-100 to-indigo-50 border-2 border-indigo-500 shadow-inner'\n              : 'bg-white/80 backdrop-blur-sm border border-gray-100 hover:bg-gray-50'\n          }`}\n        >\n          <span className=\"text-2xl mb-1\">{mood.emoji}</span>\n          <span className=\"text-xs font-medium tracking-wide\">{mood.label}</span>\n        </motion.button>\n      ))}\n    </div>\n  );\n};\n\nexport default MoodSelector;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { CravingLevel } from '../../types';\n\ninterface CravingSelectorProps {\n  selectedCravingLevel: CravingLevel | null;\n  onSelectCravingLevel: (level: CravingLevel) => void;\n}\n\nconst CravingSelector: React.FC<CravingSelectorProps> = ({ \n  selectedCravingLevel, \n  onSelectCravingLevel \n}) => {\n  const cravingLevels: { value: CravingLevel; label: string }[] = [\n    { value: 'none', label: 'None' },\n    { value: 'mild', label: 'Mild' },\n    { value: 'moderate', label: 'Moderate' },\n    { value: 'severe', label: 'Severe' },\n    { value: 'extreme', label: 'Extreme' },\n  ];\n\n  return (\n    <div className=\"space-y-3\">\n      {cravingLevels.map((level) => {\n        const isSelected = selectedCravingLevel === level.value;\n        const getColorClass = () => {\n          if (isSelected) {\n            switch (level.value) {\n              case 'none': return 'bg-green-100 border-green-500';\n              case 'mild': return 'bg-emerald-100 border-emerald-500';\n              case 'moderate': return 'bg-yellow-100 border-yellow-500';\n              case 'severe': return 'bg-orange-100 border-orange-500';\n              case 'extreme': return 'bg-red-100 border-red-500';\n              default: return 'bg-indigo-100 border-indigo-500';\n            }\n          }\n          return 'bg-gray-50 border-gray-200 hover:bg-gray-100';\n        };\n        \n        const getBgFillWidth = () => {\n          switch (level.value) {\n            case 'none': return 'w-[10%]';\n            case 'mild': return 'w-[30%]';\n            case 'moderate': return 'w-[50%]';\n            case 'severe': return 'w-[75%]';\n            case 'extreme': return 'w-[95%]';\n            default: return 'w-0';\n          }\n        };\n        \n        const getBgColor = () => {\n          switch (level.value) {\n            case 'none': return 'bg-green-200';\n            case 'mild': return 'bg-emerald-200';\n            case 'moderate': return 'bg-yellow-200';\n            case 'severe': return 'bg-orange-200';\n            case 'extreme': return 'bg-red-200';\n            default: return 'bg-gray-200';\n          }\n        };\n\n        return (\n          <motion.button\n            key={level.value}\n            whileTap={{ scale: 0.98 }}\n            onClick={() => onSelectCravingLevel(level.value)}\n            className={`relative w-full py-3 px-4 rounded-lg border-2 transition-colors duration-200 overflow-hidden text-left ${getColorClass()}`}\n          >\n            <div className={`absolute top-0 left-0 h-full ${getBgFillWidth()} ${getBgColor()} opacity-30 rounded-l-md`}></div>\n            <span className=\"relative font-medium\">{level.label}</span>\n          </motion.button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default CravingSelector;","import React from 'react';\nimport { Phone, Heart, ExternalLink } from 'lucide-react';\n\ninterface EmergencyResourcesProps {\n  compact?: boolean;\n}\n\nconst EmergencyResources: React.FC<EmergencyResourcesProps> = ({ compact = false }) => {\n  const resources = [\n    {\n      name: \"SAMHSA's National Helpline\",\n      description: \"Treatment referral and information service for substance use disorders\",\n      phone: \"1-800-662-4357\",\n      website: \"https://www.samhsa.gov/find-help/national-helpline\",\n      available: \"24/7, 365 days a year\",\n      languages: \"English & Spanish\"\n    },\n    {\n      name: \"National Suicide Prevention Lifeline\",\n      description: \"Crisis support for mental health emergencies\",\n      phone: \"988 or 1-800-273-8255\",\n      website: \"https://988lifeline.org/\",\n      available: \"24/7\",\n      languages: \"Multiple languages available\"\n    },\n    {\n      name: \"Crisis Text Line\",\n      description: \"Crisis support via text message\",\n      phone: \"Text HOME to 741741\",\n      website: \"https://www.crisistextline.org/\",\n      available: \"24/7\",\n      languages: \"English\"\n    },\n    {\n      name: \"FindTreatment.gov\",\n      description: \"Locate substance use treatment facilities near you\",\n      website: \"https://findtreatment.gov/\",\n      available: \"24/7 for online resources\",\n      languages: \"English\"\n    }\n  ];\n\n  if (compact) {\n    // Compact version for embedding in other components\n    return (\n      <div className=\"text-sm\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <Phone size={16} className=\"text-orange-700\" />\n          <a href=\"tel:18006624357\" className=\"text-orange-700 font-medium hover:underline\">\n            SAMHSA Helpline: 1-800-662-4357\n          </a>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Heart size={16} className=\"text-orange-700\" />\n          <a href=\"sms:741741&body=HOME\" className=\"text-orange-700 font-medium hover:underline\">\n            Crisis Text Line: Text HOME to 741741\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  // Full version\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Emergency Resources</h2>\n      <p className=\"text-gray-600 mb-6\">\n        If you're experiencing a crisis or need immediate support, these resources are available 24/7. Your conversation remains confidential, and your privacy is respected.\n      </p>\n\n      <div className=\"space-y-6\">\n        {resources.map((resource) => (\n          <div key={resource.name} className=\"border-b border-gray-100 pb-5 last:border-b-0 last:pb-0\">\n            <h3 className=\"font-medium text-lg mb-1\">{resource.name}</h3>\n            <p className=\"text-gray-600 text-sm mb-3\">{resource.description}</p>\n\n            <div className=\"space-y-2\">\n              {resource.phone && (\n                <div className=\"flex items-start\">\n                  <Phone size={18} className=\"text-indigo-500 mr-2 mt-0.5\" />\n                  <div>\n                    <a\n                      href={`tel:${resource.phone.replace(/\\D/g, '')}`}\n                      className=\"text-indigo-600 hover:text-indigo-800 hover:underline font-medium\"\n                    >\n                      {resource.phone}\n                    </a>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex items-start\">\n                <ExternalLink size={18} className=\"text-indigo-500 mr-2 mt-0.5\" />\n                <div>\n                  <a\n                    href={resource.website}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-indigo-600 hover:text-indigo-800 hover:underline\"\n                  >\n                    {resource.website.replace('https://', '')}\n                  </a>\n                </div>\n              </div>\n\n              <div className=\"text-xs text-gray-500 mt-1\">\n                Available: {resource.available}  {resource.languages}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-100\">\n        <h3 className=\"font-medium mb-2 text-blue-800\">Your Privacy Matters</h3>\n        <p className=\"text-sm text-blue-700\">\n          All helplines prioritize your confidentiality. Soberi.ai does not monitor or share any information about your calls\n          or messages with these services. These are independent resources available to support you when needed.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default EmergencyResources;","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useStore } from '../../store/useStore';\nimport MoodSelector from './MoodSelector';\nimport CravingSelector from './CravingSelector';\nimport { MoodType, CravingLevel } from '../../types';\nimport { getCurrentDateString } from '../../utils/dateUtils';\nimport { getCheckInByDate } from '../../utils/storageUtils';\nimport { getMockResponseBasedOnMood } from '../../utils/mockUtils';\nimport EmergencyResources from '../Resources/EmergencyResources';\nimport { useAuth } from '../../auth/AuthContext';\n\nconst CheckInView: React.FC = () => {\n  const { user } = useAuth();\n  const { submitCheckIn, sendMessage } = useStore();\n  const [selectedMood, setSelectedMood] = useState<MoodType | null>(null);\n  const [selectedCravingLevel, setSelectedCravingLevel] = useState<CravingLevel | null>(null);\n  const [notes, setNotes] = useState('');\n  const [alreadyCheckedIn, setAlreadyCheckedIn] = useState(false);\n  const [submissionComplete, setSubmissionComplete] = useState(false);\n  const [showCrisisResources, setShowCrisisResources] = useState(false);\n  const [showCrisisOptions, setShowCrisisOptions] = useState(false);\n\n  useEffect(() => {\n    const today = getCurrentDateString();\n    const todayCheckIn = getCheckInByDate(today);\n\n    if (todayCheckIn) {\n      setSelectedMood(todayCheckIn.mood);\n      setSelectedCravingLevel(todayCheckIn.cravingLevel);\n      setNotes(todayCheckIn.notes);\n      setAlreadyCheckedIn(true);\n    }\n  }, []);\n\n  // Show crisis resources when extreme cravings are selected\n  useEffect(() => {\n    if (selectedCravingLevel === 'extreme' || selectedCravingLevel === 'severe') {\n      setShowCrisisResources(true);\n      setShowCrisisOptions(true);\n    } else {\n      setShowCrisisResources(false);\n      setShowCrisisOptions(false);\n    }\n  }, [selectedCravingLevel]);\n\n  const handleSubmit = async () => {\n    if (selectedMood && selectedCravingLevel) {\n      // Submit the check-in\n      submitCheckIn(selectedMood, selectedCravingLevel, notes);\n      // If severe/extreme cravings, direct user to chat for immediate support\n      if (selectedCravingLevel === 'extreme' || selectedCravingLevel === 'severe') {\n        setSubmissionComplete(true);\n        setTimeout(() => {\n          useStore.getState().setActiveTab('chat');\n        }, 1500);\n      } else {\n        setSubmissionComplete(true);\n      }\n    }\n  };\n\n  const handleTalkToSoberi = async () => {\n    if (selectedMood && selectedCravingLevel) {\n      // Submit the check-in first (it uses its own internal ID system)\n      submitCheckIn(selectedMood, selectedCravingLevel, notes);\n\n      // Generate crisis response for chat\n      const message = `I'm having ${selectedCravingLevel} cravings right now and feeling ${selectedMood}.`;\n\n      // Switch to chat view\n      useStore.getState().setActiveTab('chat');\n\n      if (!user || !user.id) {\n        console.error(\"User or user.id is not available for sending message to Soberi.ai\");\n        // Optionally, handle this case in the UI, e.g., show an error message before switching tab\n        // For now, we'll let the sendMessage in the store handle the error display in chat\n        // but ideally, the user should be guided if not authenticated.\n        // We can proceed to call sendMessage and let it handle the missing ID if that's the desired flow for unauth users.\n        // However, the store's sendMessage currently requires supabaseUserId.\n        // So, if user.id is missing, we should probably not even attempt.\n        \n        // Fallback or error message logic if user is not available for `sendMessage`\n        const tempIdForLocal = useStore.getState().messages.length > 0 ? useStore.getState().messages[0].id : 'temp-error-id'; // Hacky way to get a temp id if no messages\n        const localErrorMsg = {\n            id: tempIdForLocal + 'error',\n            content: 'You need to be logged in to talk to Soberi.ai. Please log in and try again.',\n            sender: 'ai' as 'ai' | 'user',\n            timestamp: Date.now(),\n        };\n        // A bit of a hack to show message if not logged in, ideally ChatView handles this better or user is prompted to login\n        useStore.setState(state => ({ messages: [...state.messages, localErrorMsg] }));\n        return; // Stop if no supabase user.id\n      }\n\n      // Add a small delay to ensure UI has updated after setActiveTab\n      setTimeout(() => {\n        sendMessage(message, user.id);\n      }, 100);\n    }\n  };\n\n  const resetForm = () => {\n    setSelectedMood(null);\n    setSelectedCravingLevel(null);\n    setNotes('');\n    setSubmissionComplete(false);\n    setAlreadyCheckedIn(false);\n  };\n\n  if (submissionComplete) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"max-w-lg mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6\"\n      >\n        <div className=\"text-center py-8\">\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ type: \"spring\", stiffness: 260, damping: 20, delay: 0.2 }}\n            className=\"w-16 h-16 bg-green-100 rounded-full mx-auto flex items-center justify-center mb-4\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-green-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </svg>\n          </motion.div>\n          <h3 className=\"text-xl font-semibold mb-2\">Check-In Complete!</h3>\n\n          {(selectedCravingLevel === 'extreme' || selectedCravingLevel === 'severe') ? (\n            <div>\n              <p className=\"text-gray-600 mb-3\">I've noticed you're experiencing strong cravings right now.</p>\n              <p className=\"text-gray-600 mb-6\">Taking you to the chat for immediate support...</p>\n            </div>\n          ) : (\n            <p className=\"text-gray-600 mb-6\">Thank you for checking in today. Your honesty helps build self-awareness, a key skill in recovery.</p>\n          )}\n\n          <button\n            onClick={resetForm}\n            className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200\"\n          >\n            Check In Again\n          </button>\n        </div>\n      </motion.div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-lg mx-auto\">\n      {alreadyCheckedIn ? (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\"\n        >\n          <div className=\"flex items-center mb-4\">\n            <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-green-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n            <div>\n              <h3 className=\"text-lg font-medium\">You've already checked in today</h3>\n              <p className=\"text-sm text-gray-500\">Want to update your check-in?</p>\n            </div>\n          </div>\n          <button\n            onClick={resetForm}\n            className=\"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors duration-200\"\n          >\n            Update Today's Check-In\n          </button>\n        </motion.div>\n      ) : (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\"\n        >\n          <h2 className=\"text-xl font-semibold mb-2\">Daily Check-In</h2>\n          <p className=\"text-gray-600 text-sm mb-6\">Tracking your mood and cravings helps build self-awareness and identifies patterns in your recovery journey.</p>\n\n          <div className=\"space-y-8\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                How are you feeling today?\n              </label>\n              <MoodSelector selectedMood={selectedMood} onSelectMood={setSelectedMood} />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                Rate your cravings today\n              </label>\n              <CravingSelector\n                selectedCravingLevel={selectedCravingLevel}\n                onSelectCravingLevel={setSelectedCravingLevel}\n              />\n            </div>\n\n            {/* Emotional Recovery Context */}\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              className=\"bg-indigo-50 border border-indigo-100 rounded-lg p-4\"\n            >\n              <h3 className=\"text-indigo-900 font-medium mb-2\">Recovery Context</h3>\n              <p className=\"text-indigo-700 text-sm mb-3\">\n                Recovery often feels worse before it gets better as your brain heals and you learn to process emotions. This discomfort isn't failureit's evidence of healing.\n              </p>\n              <p className=\"text-indigo-700 text-sm\">\n                You're developing the strength to feel difficult emotions without substances. This skill takes time but becomes easier with practice.\n              </p>\n            </motion.div>\n\n            {showCrisisResources && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: \"auto\" }}\n                className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\"\n              >\n                <h3 className=\"text-orange-800 font-medium mb-2\">Need immediate help?</h3>\n                <p className=\"text-orange-700 text-sm mb-3\">\n                  Strong cravings are temporary and will pass. You're not alone in this moment.\n                </p>\n                <EmergencyResources compact={true} />\n                <p className=\"text-orange-700 text-sm mt-3\">\n                  After submitting your check-in, we'll provide personalized strategies and connect you with immediate support.\n                </p>\n              </motion.div>\n            )}\n\n            <div>\n              <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Notes (optional)\n              </label>\n              <textarea\n                id=\"notes\"\n                rows={3}\n                value={notes}\n                onChange={(e) => setNotes(e.target.value)}\n                placeholder=\"What's affecting your mood or cravings today? Any triggers or victories to note?\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n              />\n            </div>\n\n            {showCrisisOptions ? (\n              <div className=\"flex flex-col space-y-3\">\n                <button\n                  onClick={handleTalkToSoberi}\n                  className=\"w-full py-3 px-4 rounded-lg font-medium bg-indigo-600 hover:bg-indigo-700 text-white transition-colors duration-200\"\n                >\n                  Talk to Soberi Now\n                </button>\n                <button\n                  onClick={handleSubmit}\n                  className=\"w-full py-3 px-4 rounded-lg font-medium bg-white border border-indigo-300 text-indigo-700 hover:bg-indigo-50 transition-colors duration-200\"\n                >\n                  Submit Check-In Only\n                </button>\n              </div>\n            ) : (\n              <button\n                onClick={handleSubmit}\n                disabled={!selectedMood || !selectedCravingLevel}\n                className={`w-full py-3 px-4 rounded-lg font-medium transition-colors duration-200\n                  ${(!selectedMood || !selectedCravingLevel)\n                    ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                    : 'bg-indigo-600 hover:bg-indigo-700 text-white'}`}\n              >\n                Submit Check-In\n              </button>\n            )}\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default CheckInView;","import React, { useState } from 'react';\nimport { Trash2, MoreVertical, Tag, X } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { JournalEntry as JournalEntryType } from '../../types';\nimport { formatDate } from '../../utils/dateUtils';\n\ninterface JournalEntryProps {\n  entry: JournalEntryType;\n  onDelete: (id: string) => void;\n  onSelectTag: (tag: string) => void;\n}\n\nconst JournalEntry: React.FC<JournalEntryProps> = ({ entry, onDelete, onSelectTag }) => {\n  const [showActions, setShowActions] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  \n  const handleDelete = () => {\n    setIsDeleting(true);\n    // Short delay to allow animation to complete\n    setTimeout(() => {\n      onDelete(entry.id);\n    }, 300);\n  };\n  \n  const toggleActions = () => {\n    setShowActions(!showActions);\n  };\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: isDeleting ? 0 : 1, y: isDeleting ? -20 : 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      transition={{ duration: 0.3 }}\n      className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\"\n    >\n      <div className=\"p-5\">\n        <div className=\"flex justify-between items-start mb-3\">\n          <div className=\"text-sm text-gray-500\">\n            {formatDate(entry.date)}\n          </div>\n          <div className=\"relative\">\n            <button \n              onClick={toggleActions}\n              className=\"p-1 hover:bg-gray-100 rounded-full transition-colors duration-200\"\n              aria-label=\"Entry actions\"\n            >\n              <MoreVertical size={16} className=\"text-gray-500\" />\n            </button>\n            \n            <AnimatePresence>\n              {showActions && (\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.95, y: -5 }}\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\n                  exit={{ opacity: 0, scale: 0.95, y: -5 }}\n                  transition={{ duration: 0.1 }}\n                  className=\"absolute right-0 mt-1 w-32 bg-white rounded-md shadow-lg z-10 overflow-hidden\"\n                >\n                  <button\n                    onClick={handleDelete}\n                    className=\"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center\"\n                  >\n                    <Trash2 size={14} className=\"mr-2\" />\n                    Delete\n                  </button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n        \n        <div className=\"prose prose-sm max-w-none mb-4\">\n          <p className=\"whitespace-pre-wrap\">{entry.content}</p>\n        </div>\n        \n        {entry.tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-1 mt-3\">\n            {entry.tags.map(tag => (\n              <button\n                key={tag}\n                onClick={() => onSelectTag(tag)}\n                className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 transition-colors duration-200\"\n              >\n                {tag}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default JournalEntry;","import React, { useState } from 'react';\nimport { useStore } from '../../store/useStore';\nimport { X, Plus } from 'lucide-react';\n\ninterface NewJournalEntryFormProps {\n  onComplete: () => void;\n}\n\nconst NewJournalEntryForm: React.FC<NewJournalEntryFormProps> = ({ onComplete }) => {\n  const { addJournalEntry } = useStore();\n  const [content, setContent] = useState('');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState<string[]>([]);\n  \n  const handleAddTag = () => {\n    const trimmedTag = tagInput.trim();\n    if (trimmedTag && !tags.includes(trimmedTag)) {\n      setTags([...tags, trimmedTag]);\n      setTagInput('');\n    }\n  };\n  \n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && tagInput.trim()) {\n      e.preventDefault();\n      handleAddTag();\n    } else if (e.key === 'Backspace' && !tagInput && tags.length > 0) {\n      // Remove the last tag when backspace is pressed and input is empty\n      setTags(tags.slice(0, -1));\n    }\n  };\n  \n  const removeTag = (tagToRemove: string) => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n  };\n  \n  const handleSubmit = () => {\n    if (content.trim()) {\n      addJournalEntry(content, tags);\n      setContent('');\n      setTags([]);\n      onComplete();\n    }\n  };\n  \n  // Quick tag suggestions\n  const tagSuggestions = ['progress', 'challenge', 'victory', 'trigger', 'coping', 'gratitude'];\n  \n  return (\n    <div>\n      <textarea\n        value={content}\n        onChange={(e) => setContent(e.target.value)}\n        placeholder=\"What's on your mind today?\"\n        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n        rows={5}\n      />\n      \n      <div className=\"mt-4\">\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Tags (optional)\n        </label>\n        \n        <div className=\"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-indigo-500 focus-within:border-transparent mb-3\">\n          {tags.map(tag => (\n            <span \n              key={tag} \n              className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800\"\n            >\n              {tag}\n              <button \n                type=\"button\"\n                onClick={() => removeTag(tag)}\n                className=\"ml-1.5 text-indigo-600 hover:text-indigo-900 focus:outline-none\"\n              >\n                <X size={14} />\n              </button>\n            </span>\n          ))}\n          \n          <input\n            type=\"text\"\n            value={tagInput}\n            onChange={(e) => setTagInput(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder={tags.length === 0 ? \"Add tags...\" : \"\"}\n            className=\"flex-1 min-w-[120px] outline-none text-sm\"\n          />\n          \n          {tagInput && (\n            <button\n              type=\"button\"\n              onClick={handleAddTag}\n              className=\"inline-flex items-center p-1 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 transition-colors duration-200\"\n            >\n              <Plus size={14} />\n            </button>\n          )}\n        </div>\n        \n        <div className=\"flex flex-wrap gap-1 mb-6\">\n          <span className=\"text-xs text-gray-500 mr-1\">Suggestions:</span>\n          {tagSuggestions.map(tag => (\n            <button\n              key={tag}\n              type=\"button\"\n              onClick={() => !tags.includes(tag) && setTags([...tags, tag])}\n              disabled={tags.includes(tag)}\n              className={`text-xs px-2 py-0.5 rounded-full transition-colors duration-200 \n                ${tags.includes(tag) \n                  ? 'bg-gray-100 text-gray-400 cursor-not-allowed' \n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n            >\n              {tag}\n            </button>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"flex justify-end space-x-3\">\n        <button\n          type=\"button\"\n          onClick={onComplete}\n          className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200\"\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleSubmit}\n          disabled={!content.trim()}\n          className={`px-4 py-2 rounded-lg transition-colors duration-200 ${\n            !content.trim()\n              ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n              : 'bg-indigo-600 hover:bg-indigo-700 text-white'\n          }`}\n        >\n          Save Entry\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default NewJournalEntryForm;","import React, { useState } from 'react';\nimport { useStore } from '../../store/useStore';\nimport { Plus, Search, Tag, X } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { formatDate } from '../../utils/dateUtils';\nimport JournalEntry from './JournalEntry';\nimport NewJournalEntryForm from './NewJournalEntryForm';\n\nconst JournalView: React.FC = () => {\n  const { journalEntries, removeJournalEntry } = useStore();\n  const [showNewEntryForm, setShowNewEntryForm] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTag, setSelectedTag] = useState<string | null>(null);\n\n  const toggleNewEntryForm = () => {\n    setShowNewEntryForm(!showNewEntryForm);\n  };\n\n  const closeForm = () => {\n    setShowNewEntryForm(false);\n  };\n\n  // Extract all unique tags from journal entries\n  const allTags = Array.from(\n    new Set(journalEntries.flatMap(entry => entry.tags))\n  );\n\n  // Filter entries based on search query and selected tag\n  const filteredEntries = journalEntries\n    .filter(entry => {\n      const matchesSearch = searchQuery === '' || \n        entry.content.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesTag = selectedTag === null || \n        entry.tags.includes(selectedTag);\n      return matchesSearch && matchesTag;\n    })\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div className=\"relative flex-1\">\n          <input\n            type=\"text\"\n            placeholder=\"Search journal entries...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n          />\n          <Search size={18} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n          {searchQuery && (\n            <button \n              onClick={() => setSearchQuery('')}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n            >\n              <X size={16} />\n            </button>\n          )}\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={toggleNewEntryForm}\n          className=\"flex items-center justify-center gap-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 shadow-sm\"\n        >\n          <Plus size={18} />\n          <span>New Entry</span>\n        </motion.button>\n      </div>\n\n      {allTags.length > 0 && (\n        <div className=\"mb-6 flex flex-wrap gap-2\">\n          <div className=\"flex items-center mr-1\">\n            <Tag size={16} className=\"text-gray-500 mr-1\" />\n            <span className=\"text-sm text-gray-600\">Filter:</span>\n          </div>\n          {selectedTag !== null && (\n            <button\n              onClick={() => setSelectedTag(null)}\n              className=\"text-xs flex items-center gap-1 px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-full transition-colors duration-200\"\n            >\n              Clear\n              <X size={12} />\n            </button>\n          )}\n          {allTags.map(tag => (\n            <motion.button\n              key={tag}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setSelectedTag(selectedTag === tag ? null : tag)}\n              className={`text-xs px-3 py-1 rounded-full transition-colors duration-200 ${\n                selectedTag === tag\n                  ? 'bg-indigo-100 text-indigo-800'\n                  : 'bg-gray-100 text-gray-800 hover:bg-gray-200'\n              }`}\n            >\n              {tag}\n            </motion.button>\n          ))}\n        </div>\n      )}\n\n      <AnimatePresence>\n        {showNewEntryForm && (\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            transition={{ duration: 0.2 }}\n            className=\"mb-8 bg-white rounded-xl shadow-md border border-gray-200 p-5\"\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-medium\">New Journal Entry</h3>\n              <button \n                onClick={closeForm}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n            <NewJournalEntryForm onComplete={closeForm} />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {filteredEntries.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full mx-auto flex items-center justify-center mb-4\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-800 mb-1\">No journal entries yet</h3>\n          <p className=\"text-gray-500 mb-4\">Start writing to record your thoughts and progress</p>\n          <button\n            onClick={toggleNewEntryForm}\n            className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200\"\n          >\n            Create Your First Entry\n          </button>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredEntries.map((entry) => (\n            <JournalEntry \n              key={entry.id} \n              entry={entry} \n              onDelete={removeJournalEntry} \n              onSelectTag={setSelectedTag}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default JournalView;","import React, { useEffect, useRef } from 'react';\nimport { motion, useAnimation } from 'framer-motion';\n\ninterface ProgressCardProps {\n  title: string;\n  value: number;\n  unit: string;\n  icon: React.ReactNode;\n  color: string;\n  accentColor: string;\n  animate?: boolean;\n}\n\nconst ProgressCard: React.FC<ProgressCardProps> = ({\n  title,\n  value,\n  unit,\n  icon,\n  color,\n  accentColor,\n  animate = false,\n}) => {\n  const controls = useAnimation();\n  const prevValue = useRef(value);\n  \n  useEffect(() => {\n    if (animate && value > prevValue.current) {\n      controls.start({\n        scale: [1, 1.1, 1],\n        transition: { duration: 0.5 }\n      });\n    }\n    prevValue.current = value;\n  }, [value, animate, controls]);\n\n  return (\n    <motion.div \n      animate={controls}\n      className={`${color} rounded-xl p-5 border border-gray-100`}\n    >\n      <div className=\"flex items-center mb-3\">\n        <div className=\"w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3\">\n          {icon}\n        </div>\n        <h3 className=\"text-gray-700 font-medium\">{title}</h3>\n      </div>\n      <div className={`text-3xl font-bold ${accentColor}`}>\n        {value}\n        <span className=\"text-sm font-normal text-gray-500 ml-1\">{unit}</span>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default ProgressCard;","import React from 'react';\nimport { DailyCheckIn } from '../../types';\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameDay, getDay } from 'date-fns';\n\ninterface StreakCalendarProps {\n  checkIns: DailyCheckIn[];\n}\n\nconst StreakCalendar: React.FC<StreakCalendarProps> = ({ checkIns }) => {\n  const currentDate = new Date();\n  const firstDayOfMonth = startOfMonth(currentDate);\n  const lastDayOfMonth = endOfMonth(currentDate);\n  \n  const days = eachDayOfInterval({\n    start: firstDayOfMonth,\n    end: lastDayOfMonth,\n  });\n  \n  const startingDayIndex = getDay(firstDayOfMonth);\n  \n  const getMoodColor = (date: Date): string => {\n    const checkIn = checkIns.find(c => isSameDay(new Date(c.date), date));\n    \n    if (!checkIn) return 'bg-gray-100';\n    \n    switch (checkIn.mood) {\n      case 'great':\n        return 'bg-green-500';\n      case 'good':\n        return 'bg-emerald-400';\n      case 'neutral':\n        return 'bg-yellow-300';\n      case 'bad':\n        return 'bg-orange-400';\n      case 'terrible':\n        return 'bg-red-500';\n      default:\n        return 'bg-gray-100';\n    }\n  };\n  \n  const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  \n  return (\n    <div className=\"bg-white rounded-lg\">\n      <div className=\"text-center mb-4\">\n        <h3 className=\"text-lg font-medium\">{format(currentDate, 'MMMM yyyy')}</h3>\n      </div>\n      \n      <div className=\"grid grid-cols-7 gap-1 mb-2\">\n        {weekDays.map(day => (\n          <div key={day} className=\"text-xs text-center text-gray-500 font-medium\">\n            {day}\n          </div>\n        ))}\n      </div>\n      \n      <div className=\"grid grid-cols-7 gap-1\">\n        {Array.from({ length: startingDayIndex }).map((_, index) => (\n          <div key={`empty-${index}`} className=\"aspect-square\" />\n        ))}\n        \n        {days.map(day => {\n          const isToday = isSameDay(day, currentDate);\n          const hasCheckIn = checkIns.some(c => isSameDay(new Date(c.date), day));\n          \n          return (\n            <div \n              key={day.toString()} \n              className={`aspect-square flex items-center justify-center rounded-full relative ${\n                isToday ? 'border-2 border-indigo-500' : ''\n              }`}\n            >\n              <div \n                className={`\n                  w-3/4 h-3/4 rounded-full flex items-center justify-center\n                  ${hasCheckIn ? getMoodColor(day) : 'bg-gray-100'}\n                  ${isToday ? 'border-2 border-white' : ''}\n                `}\n              >\n                <span className={`text-xs font-medium ${hasCheckIn ? 'text-white' : 'text-gray-700'}`}>\n                  {format(day, 'd')}\n                </span>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      \n      <div className=\"mt-4 flex flex-wrap gap-2\">\n        <div className=\"text-xs text-gray-600 mr-1\">Mood:</div>\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-3 h-3 rounded-full bg-green-500\"></div>\n          <span className=\"text-xs text-gray-600\">Great</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-3 h-3 rounded-full bg-emerald-400\"></div>\n          <span className=\"text-xs text-gray-600\">Good</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-3 h-3 rounded-full bg-yellow-300\"></div>\n          <span className=\"text-xs text-gray-600\">Neutral</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-3 h-3 rounded-full bg-orange-400\"></div>\n          <span className=\"text-xs text-gray-600\">Bad</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-3 h-3 rounded-full bg-red-500\"></div>\n          <span className=\"text-xs text-gray-600\">Terrible</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StreakCalendar;","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X } from 'lucide-react';\nimport { useStore } from '../../store/useStore';\n\ninterface RelapseDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst RelapseDialog: React.FC<RelapseDialogProps> = ({ isOpen, onClose }) => {\n  const { markRelapse, sendMessage } = useStore();\n  const [reason, setReason] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleSubmit = async () => {\n    setIsSubmitting(true);\n\n    // Record the relapse\n    markRelapse();\n\n    // Send a message to the AI about the relapse for support\n    if (reason.trim()) {\n      await sendMessage(`I had a relapse. ${reason.trim()}`);\n    } else {\n      await sendMessage(\"I had a relapse and could use some support.\");\n    }\n\n    setIsSubmitting(false);\n    setReason('');\n    onClose();\n\n    // Navigate to chat for immediate support\n    useStore.getState().setActiveTab('chat');\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\"\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.9, opacity: 0 }}\n            className=\"bg-white rounded-xl shadow-xl max-w-md w-full overflow-hidden\"\n          >\n            <div className=\"flex justify-between items-center border-b p-4\">\n              <h3 className=\"text-lg font-semibold\">Record a Relapse</h3>\n              <button\n                onClick={onClose}\n                className=\"p-1 rounded-full hover:bg-gray-100\"\n              >\n                <X size={20} className=\"text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <p className=\"mb-4 text-gray-700\">\n                Recording a relapse will reset your current streak, but it's an important part of the recovery process.\n                Soberi is here to support you through this moment.\n              </p>\n\n              <div className=\"mb-4\">\n                <label htmlFor=\"reason\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  What happened? (optional)\n                </label>\n                <textarea\n                  id=\"reason\"\n                  rows={3}\n                  value={reason}\n                  onChange={(e) => setReason(e.target.value)}\n                  placeholder=\"Share what led to this moment if you'd like...\"\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n                />\n              </div>\n\n              <div className=\"flex space-x-3 justify-end\">\n                <button\n                  onClick={onClose}\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSubmit}\n                  disabled={isSubmitting}\n                  className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200 flex items-center\"\n                >\n                  {isSubmitting ? (\n                    <>\n                      <span className=\"mr-2\">Processing</span>\n                      <svg className=\"animate-spin h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                    </>\n                  ) : (\n                    'Record & Get Support'\n                  )}\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default RelapseDialog;","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { AlertTriangle, PlusCircle, X } from 'lucide-react';\nimport { useStore } from '../../store/useStore';\nimport { formatDate } from '../../utils/dateUtils';\n\nconst TriggerTracker: React.FC = () => {\n  const { triggerLogs, addTriggerLog, removeTriggerLog } = useStore();\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [trigger, setTrigger] = useState('');\n  const [intensity, setIntensity] = useState<number>(5);\n  const [strategy, setStrategy] = useState('');\n  const [successful, setSuccessful] = useState<boolean>(true);\n  const [notes, setNotes] = useState('');\n  \n  const commonTriggers = [\n    'Stress', 'Negative emotions', 'Social pressure', 'Being around users',\n    'Certain locations', 'Celebrations', 'Boredom', 'Arguments'\n  ];\n  \n  const commonStrategies = [\n    'Called support person', 'Used urge surfing', 'Distraction technique',\n    'Physical exercise', 'Mindfulness meditation', 'Left the situation',\n    'Delayed decision (waited it out)', 'Used HALT check'\n  ];\n  \n  const handleSubmit = () => {\n    if (trigger && strategy) {\n      addTriggerLog(trigger, intensity, strategy, successful, notes);\n      resetForm();\n    }\n  };\n  \n  const resetForm = () => {\n    setTrigger('');\n    setIntensity(5);\n    setStrategy('');\n    setSuccessful(true);\n    setNotes('');\n    setShowAddForm(false);\n  };\n  \n  const sortedTriggers = [...triggerLogs].sort((a, b) => \n    new Date(b.date).getTime() - new Date(a.date).getTime()\n  );\n  \n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h3 className=\"text-lg font-medium\">Trigger Tracker</h3>\n          <p className=\"text-sm text-gray-600\">Log triggers and strategies to learn what works for you</p>\n        </div>\n        <button\n          onClick={() => setShowAddForm(true)}\n          className=\"flex items-center px-3 py-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors duration-200\"\n        >\n          <PlusCircle size={16} className=\"mr-1\" />\n          <span className=\"text-sm\">Add New</span>\n        </button>\n      </div>\n      \n      <AnimatePresence>\n        {showAddForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mb-6 border border-gray-200 rounded-lg p-4\"\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h4 className=\"font-medium\">Record a Trigger</h4>\n              <button \n                onClick={resetForm}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={18} />\n              </button>\n            </div>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  What triggered you?\n                </label>\n                <input\n                  type=\"text\"\n                  value={trigger}\n                  onChange={(e) => setTrigger(e.target.value)}\n                  placeholder=\"Describe what triggered your craving\"\n                  className=\"w-full p-2 border border-gray-300 rounded-lg\"\n                />\n                <div className=\"flex flex-wrap gap-1 mt-2\">\n                  {commonTriggers.map((t) => (\n                    <button\n                      key={t}\n                      type=\"button\"\n                      onClick={() => setTrigger(t)}\n                      className=\"text-xs px-2 py-0.5 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200\"\n                    >\n                      {t}\n                    </button>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Intensity (1-10)\n                </label>\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"range\"\n                    min=\"1\"\n                    max=\"10\"\n                    value={intensity}\n                    onChange={(e) => setIntensity(parseInt(e.target.value))}\n                    className=\"w-full\"\n                  />\n                  <span className=\"ml-2 text-sm font-medium w-6 text-center\">{intensity}</span>\n                </div>\n                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                  <span>Mild</span>\n                  <span>Moderate</span>\n                  <span>Severe</span>\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Strategy Used\n                </label>\n                <input\n                  type=\"text\"\n                  value={strategy}\n                  onChange={(e) => setStrategy(e.target.value)}\n                  placeholder=\"What did you do to cope?\"\n                  className=\"w-full p-2 border border-gray-300 rounded-lg\"\n                />\n                <div className=\"flex flex-wrap gap-1 mt-2\">\n                  {commonStrategies.map((s) => (\n                    <button\n                      key={s}\n                      type=\"button\"\n                      onClick={() => setStrategy(s)}\n                      className=\"text-xs px-2 py-0.5 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200\"\n                    >\n                      {s}\n                    </button>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Was it successful?\n                </label>\n                <div className=\"flex space-x-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setSuccessful(true)}\n                    className={`px-3 py-1 rounded-lg text-sm ${\n                      successful \n                        ? 'bg-green-100 text-green-700 border border-green-200' \n                        : 'bg-gray-100 text-gray-700 border border-gray-200'\n                    }`}\n                  >\n                    Yes\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setSuccessful(false)}\n                    className={`px-3 py-1 rounded-lg text-sm ${\n                      !successful \n                        ? 'bg-red-100 text-red-700 border border-red-200' \n                        : 'bg-gray-100 text-gray-700 border border-gray-200'\n                    }`}\n                  >\n                    No\n                  </button>\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Notes (optional)\n                </label>\n                <textarea\n                  value={notes}\n                  onChange={(e) => setNotes(e.target.value)}\n                  rows={2}\n                  placeholder=\"Any additional details about this experience\"\n                  className=\"w-full p-2 border border-gray-300 rounded-lg\"\n                />\n              </div>\n              \n              <div className=\"flex justify-end space-x-2\">\n                <button\n                  type=\"button\"\n                  onClick={resetForm}\n                  className=\"px-3 py-1.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 text-sm\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleSubmit}\n                  disabled={!trigger || !strategy}\n                  className={`px-3 py-1.5 rounded-lg text-sm ${\n                    !trigger || !strategy\n                      ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                      : 'bg-indigo-600 text-white hover:bg-indigo-700'\n                  }`}\n                >\n                  Save Trigger\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      \n      {sortedTriggers.length === 0 ? (\n        <div className=\"text-center py-8\">\n          <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3\">\n            <AlertTriangle size={20} className=\"text-gray-500\" />\n          </div>\n          <h4 className=\"text-gray-700 font-medium mb-1\">No triggers logged yet</h4>\n          <p className=\"text-sm text-gray-500 mb-3\">\n            Track what triggers your cravings and which strategies help\n          </p>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm\"\n          >\n            Log Your First Trigger\n          </button>\n        </div>\n      ) : (\n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n          {sortedTriggers.map((log) => (\n            <motion.div\n              key={log.id}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              className={`p-3 rounded-lg border ${\n                log.successful\n                  ? 'border-green-100 bg-green-50'\n                  : 'border-red-100 bg-red-50'\n              }`}\n            >\n              <div className=\"flex justify-between\">\n                <h5 className=\"font-medium text-sm\">{log.trigger}</h5>\n                <div className=\"flex items-center\">\n                  <span className=\"text-xs text-gray-500 mr-2\">{formatDate(log.date)}</span>\n                  <button\n                    onClick={() => removeTriggerLog(log.id)}\n                    className=\"text-gray-400 hover:text-gray-600\"\n                  >\n                    <X size={14} />\n                  </button>\n                </div>\n              </div>\n              <div className=\"mt-1 text-xs text-gray-600 flex items-center\">\n                <div className=\"mr-3\">\n                  Intensity: \n                  <span className=\"font-medium ml-1\">{log.intensity}/10</span>\n                </div>\n                <div>\n                  Strategy: \n                  <span className=\"font-medium ml-1\">{log.strategy}</span>\n                </div>\n              </div>\n              {log.notes && (\n                <p className=\"mt-2 text-xs text-gray-600 border-t border-gray-200 pt-1\">\n                  {log.notes}\n                </p>\n              )}\n            </motion.div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TriggerTracker;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { Milestone } from '../../types';\nimport { formatDate } from '../../utils/dateUtils';\nimport { Award, AlertTriangle, Trophy } from 'lucide-react';\n\ninterface MilestoneTimelineProps {\n  milestones: Milestone[];\n}\n\nconst MilestoneTimeline: React.FC<MilestoneTimelineProps> = ({ milestones }) => {\n  // Sort milestones by date (newest first)\n  const sortedMilestones = [...milestones].sort((a, b) => \n    new Date(b.date).getTime() - new Date(a.date).getTime()\n  );\n  \n  const getIcon = (type: string) => {\n    switch (type) {\n      case 'streak':\n        return <Award className=\"text-indigo-500\" />;\n      case 'relapse':\n        return <AlertTriangle className=\"text-orange-500\" />;\n      case 'achievement':\n        return <Trophy className=\"text-yellow-500\" />;\n      default:\n        return <Award className=\"text-indigo-500\" />;\n    }\n  };\n  \n  const getColorClass = (type: string) => {\n    switch (type) {\n      case 'streak':\n        return 'bg-indigo-50 border-indigo-100';\n      case 'relapse':\n        return 'bg-orange-50 border-orange-100';\n      case 'achievement':\n        return 'bg-yellow-50 border-yellow-100';\n      default:\n        return 'bg-gray-50 border-gray-100';\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      <h3 className=\"text-xl font-semibold mb-2\">Your Recovery Journey</h3>\n      <p className=\"text-gray-600 mb-6\">\n        Every step matters - celebrate your progress and learn from setbacks.\n      </p>\n      \n      {sortedMilestones.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full mx-auto flex items-center justify-center mb-4\">\n            <Trophy size={24} className=\"text-gray-400\" />\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-800 mb-1\">No milestones yet</h3>\n          <p className=\"text-gray-500 mb-4\">\n            Keep going! Your first milestone will appear when you reach a streak of 7 days.\n          </p>\n        </div>\n      ) : (\n        <div className=\"relative\">\n          {/* Timeline line */}\n          <div className=\"absolute top-0 bottom-0 left-6 w-0.5 bg-gray-200 z-0\"></div>\n          \n          <div className=\"space-y-8 relative z-10\">\n            {sortedMilestones.map((milestone, index) => (\n              <motion.div\n                key={milestone.id}\n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ duration: 0.3, delay: index * 0.1 }}\n                className=\"flex gap-4\"\n              >\n                <div className=\"w-12 h-12 rounded-full border-2 border-white bg-white shadow-sm flex items-center justify-center flex-shrink-0\">\n                  {getIcon(milestone.type)}\n                </div>\n                \n                <div className={`flex-1 p-4 rounded-lg border ${getColorClass(milestone.type)}`}>\n                  <div className=\"flex justify-between items-start\">\n                    <h4 className=\"font-medium\">\n                      {milestone.type === 'streak' && `${milestone.value} Day Streak`}\n                      {milestone.type === 'relapse' && `Relapse Recovery`}\n                      {milestone.type === 'achievement' && `Achievement Unlocked`}\n                    </h4>\n                    <span className=\"text-xs text-gray-500\">{formatDate(milestone.date)}</span>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">{milestone.description}</p>\n                  \n                  {milestone.type === 'relapse' && (\n                    <p className=\"text-xs text-orange-700 mt-2\">\n                      Remember, recovery isn't linear. Each relapse is an opportunity to learn and grow stronger.\n                    </p>\n                  )}\n                  \n                  {milestone.type === 'streak' && milestone.value >= 30 && (\n                    <div className=\"mt-2 text-xs text-indigo-600 bg-indigo-50 p-2 rounded\">\n                      <span className=\"font-medium\">Amazing work!</span> You've reached a significant milestone in your recovery journey.\n                    </div>\n                  )}\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MilestoneTimeline;","import * as React from 'react';\n\n// TabsContext to manage state across tab components\nconst TabsContext = React.createContext<{\n  value: string;\n  onValueChange: (value: string) => void;\n}>({\n  value: '',\n  onValueChange: () => {},\n});\n\ninterface TabsProps {\n  value: string;\n  onValueChange: (value: string) => void;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const Tabs: React.FC<TabsProps> = ({ \n  value, \n  onValueChange, \n  children, \n  className = '' \n}) => {\n  return (\n    <TabsContext.Provider value={{ value, onValueChange }}>\n      <div className={className}>\n        {children}\n      </div>\n    </TabsContext.Provider>\n  );\n};\n\ninterface TabsListProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const TabsList: React.FC<TabsListProps> = ({ children, className = '' }) => {\n  return (\n    <div className={`flex space-x-4 ${className}`}>\n      {children}\n    </div>\n  );\n};\n\ninterface TabsTriggerProps {\n  value: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const TabsTrigger: React.FC<TabsTriggerProps> = ({ \n  value, \n  children, \n  className = '' \n}) => {\n  const { value: selectedValue, onValueChange } = React.useContext(TabsContext);\n  const isSelected = selectedValue === value;\n\n  return (\n    <button\n      className={`px-3 py-1.5 text-sm font-medium transition-all relative rounded-full\n        ${isSelected\n          ? 'bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-md'\n          : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100/50 bg-white/80 backdrop-blur-sm'}\n        ${className}`}\n      onClick={() => onValueChange(value)}\n      role=\"tab\"\n      aria-selected={isSelected}\n    >\n      {children}\n    </button>\n  );\n};\n\ninterface TabsContentProps {\n  value: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const TabsContent: React.FC<TabsContentProps> = ({ \n  value, \n  children, \n  className = '' \n}) => {\n  const { value: selectedValue } = React.useContext(TabsContext);\n  const isSelected = selectedValue === value;\n\n  if (!isSelected) return null;\n\n  return (\n    <div className={className} role=\"tabpanel\">\n      {children}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { useStore } from '../../store/useStore';\nimport { Award, Calendar, AlertTriangle, RefreshCw, Milestone, BarChart2 } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport ProgressCard from './ProgressCard';\nimport StreakCalendar from './StreakCalendar';\nimport RelapseDialog from './RelapseDialog';\nimport TriggerTracker from './TriggerTracker';\nimport MilestoneTimeline from './MilestoneTimeline';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../UI/Tabs';\n\nconst ProgressView: React.FC = () => {\n  const { userProgress, checkIns } = useStore();\n  const [showRelapseDialog, setShowRelapseDialog] = useState(false);\n  const [activeTab, setActiveTab] = useState('progress');\n  \n  const hasStarted = userProgress.startDate !== null;\n\n  if (!hasStarted) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-full py-16 text-center\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 max-w-md\"\n        >\n          <div className=\"w-16 h-16 bg-indigo-100 rounded-full mx-auto flex items-center justify-center mb-5\">\n            <Calendar size={32} className=\"text-indigo-600\" />\n          </div>\n          <h2 className=\"text-xl font-semibold mb-3\">Start Your Journey</h2>\n          <p className=\"text-gray-600 mb-6\">\n            Begin tracking your recovery progress by completing your first daily check-in.\n          </p>\n          <button\n            onClick={() => {\n              useStore.getState().setActiveTab('checkin');\n            }}\n            className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200\"\n          >\n            Go to Daily Check-In\n          </button>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n        <ProgressCard \n          title=\"Current Streak\"\n          value={userProgress.currentStreak}\n          unit=\"days\"\n          icon={<Award size={20} className=\"text-indigo-500\" />}\n          color=\"bg-indigo-50\"\n          accentColor=\"text-indigo-600\"\n          animate={true}\n        />\n        \n        <ProgressCard \n          title=\"Longest Streak\"\n          value={userProgress.longestStreak}\n          unit=\"days\"\n          icon={<Calendar size={20} className=\"text-emerald-500\" />}\n          color=\"bg-emerald-50\"\n          accentColor=\"text-emerald-600\"\n        />\n        \n        <ProgressCard \n          title=\"Total Clean Days\"\n          value={userProgress.totalDaysClean}\n          unit=\"days\"\n          icon={<Award size={20} className=\"text-blue-500\" />}\n          color=\"bg-blue-50\"\n          accentColor=\"text-blue-600\"\n        />\n      </div>\n      \n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"mb-6\">\n          <TabsTrigger value=\"progress\">Calendar</TabsTrigger>\n          <TabsTrigger value=\"triggers\">Trigger Tracker</TabsTrigger>\n          <TabsTrigger value=\"milestones\">Milestones</TabsTrigger>\n        </TabsList>\n        \n        <TabsContent value=\"progress\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n            <div className=\"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-medium mb-4\">Your Progress Calendar</h3>\n              <StreakCalendar checkIns={checkIns} />\n            </div>\n            \n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col\">\n              <h3 className=\"text-lg font-medium mb-4\">Recovery Tools</h3>\n              \n              <p className=\"text-gray-600 text-sm mb-6\">\n                These tools help you manage your recovery journey effectively.\n              </p>\n              \n              <div className=\"space-y-4 mt-auto\">\n                <button\n                  onClick={() => setShowRelapseDialog(true)}\n                  className=\"w-full py-3 px-4 flex items-center justify-center gap-2 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors duration-200\"\n                >\n                  <AlertTriangle size={18} className=\"text-orange-500\" />\n                  <span>Record a Relapse</span>\n                </button>\n                \n                <button\n                  onClick={() => {\n                    useStore.getState().resetProgress();\n                  }}\n                  className=\"w-full py-3 px-4 flex items-center justify-center gap-2 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors duration-200\"\n                >\n                  <RefreshCw size={18} className=\"text-gray-600\" />\n                  <span>Reset Progress</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </TabsContent>\n        \n        <TabsContent value=\"triggers\">\n          <TriggerTracker />\n        </TabsContent>\n        \n        <TabsContent value=\"milestones\">\n          <MilestoneTimeline milestones={userProgress.milestones || []} />\n        </TabsContent>\n      </Tabs>\n      \n      <RelapseDialog \n        isOpen={showRelapseDialog} \n        onClose={() => setShowRelapseDialog(false)} \n      />\n    </div>\n  );\n};\n\nexport default ProgressView;","import React from 'react';\nimport { Users, Book, Award, Calendar, ExternalLink } from 'lucide-react';\n\nconst RecoveryResources: React.FC = () => {\n  const supportGroups = [\n    {\n      name: \"Alcoholics Anonymous\",\n      description: \"12-step recovery program for alcohol addiction\",\n      website: \"https://www.aa.org/\",\n      features: [\"Find local meetings\", \"Online meetings available\", \"Free to join\"]\n    },\n    {\n      name: \"Narcotics Anonymous\",\n      description: \"12-step program for drug addiction recovery\",\n      website: \"https://www.na.org/\",\n      features: [\"Global community\", \"Peer support\", \"Free to join\"]\n    },\n    {\n      name: \"SMART Recovery\",\n      description: \"Science-based addiction recovery support group\",\n      website: \"https://www.smartrecovery.org/\",\n      features: [\"Alternative to 12-step\", \"CBT-based approach\", \"Online & in-person options\"]\n    },\n    {\n      name: \"Refuge Recovery\",\n      description: \"Buddhist-inspired approach to recovery\",\n      website: \"https://refugerecovery.org/\",\n      features: [\"Mindfulness-based\", \"Meditation-focused\", \"Compassionate community\"]\n    }\n  ];\n\n  const educationalResources = [\n    {\n      name: \"NIDA - National Institute on Drug Abuse\",\n      description: \"Research-based information on drug use and addiction\",\n      website: \"https://nida.nih.gov/\",\n    },\n    {\n      name: \"Recovery Research Institute\",\n      description: \"Non-profit research institute for addiction recovery\",\n      website: \"https://www.recoveryanswers.org/\",\n    },\n    {\n      name: \"In The Rooms\",\n      description: \"Online recovery meetings and community\",\n      website: \"https://www.intherooms.com/\",\n    }\n  ];\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-2\">Recovery Resources</h2>\n      <p className=\"text-gray-600 mb-6\">\n        Recovery is stronger with support. Here are evidence-based resources to help you on your journey.\n      </p>\n      \n      <div className=\"mb-8\">\n        <div className=\"flex items-center mb-4\">\n          <div className=\"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3\">\n            <Users size={18} className=\"text-indigo-600\" />\n          </div>\n          <h3 className=\"text-lg font-medium\">Support Groups</h3>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {supportGroups.map((group) => (\n            <div key={group.name} className=\"border border-gray-100 rounded-lg p-4 hover:border-indigo-200 transition-colors duration-200\">\n              <h4 className=\"font-medium mb-1\">{group.name}</h4>\n              <p className=\"text-gray-600 text-sm mb-2\">{group.description}</p>\n              <ul className=\"text-xs text-gray-500 mb-3\">\n                {group.features.map((feature, index) => (\n                  <li key={index} className=\"flex items-center mb-1\">\n                    <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full mr-2\"></span>\n                    {feature}\n                  </li>\n                ))}\n              </ul>\n              <a \n                href={group.website} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-xs flex items-center text-indigo-600 hover:text-indigo-800 hover:underline\"\n              >\n                <ExternalLink size={12} className=\"mr-1\" />\n                Visit Website\n              </a>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"mb-8\">\n        <div className=\"flex items-center mb-4\">\n          <div className=\"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3\">\n            <Book size={18} className=\"text-indigo-600\" />\n          </div>\n          <h3 className=\"text-lg font-medium\">Educational Resources</h3>\n        </div>\n        \n        <div className=\"space-y-3\">\n          {educationalResources.map((resource) => (\n            <div key={resource.name} className=\"flex justify-between items-center p-3 border border-gray-100 rounded-lg hover:border-indigo-200 transition-colors duration-200\">\n              <div>\n                <h4 className=\"font-medium text-sm\">{resource.name}</h4>\n                <p className=\"text-gray-600 text-xs\">{resource.description}</p>\n              </div>\n              <a \n                href={resource.website} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-xs flex items-center text-indigo-600 hover:text-indigo-800 hover:underline\"\n              >\n                <ExternalLink size={12} className=\"mr-1\" />\n                Visit\n              </a>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div>\n        <div className=\"flex items-center mb-4\">\n          <div className=\"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3\">\n            <Award size={18} className=\"text-indigo-600\" />\n          </div>\n          <h3 className=\"text-lg font-medium\">Recovery Skills</h3>\n        </div>\n        \n        <div className=\"space-y-3\">\n          <div className=\"p-4 border border-gray-100 rounded-lg\">\n            <h4 className=\"font-medium mb-2\">H.A.L.T.</h4>\n            <p className=\"text-sm text-gray-600 mb-2\">\n              When cravings hit, check if you're:\n            </p>\n            <ul className=\"grid grid-cols-2 gap-2 text-sm\">\n              <li className=\"flex items-center\">\n                <span className=\"w-1.5 h-1.5 bg-red-400 rounded-full mr-2\"></span>\n                <span className=\"font-medium\">H</span>ungry\n              </li>\n              <li className=\"flex items-center\">\n                <span className=\"w-1.5 h-1.5 bg-amber-400 rounded-full mr-2\"></span>\n                <span className=\"font-medium\">A</span>ngry\n              </li>\n              <li className=\"flex items-center\">\n                <span className=\"w-1.5 h-1.5 bg-blue-400 rounded-full mr-2\"></span>\n                <span className=\"font-medium\">L</span>onely\n              </li>\n              <li className=\"flex items-center\">\n                <span className=\"w-1.5 h-1.5 bg-purple-400 rounded-full mr-2\"></span>\n                <span className=\"font-medium\">T</span>ired\n              </li>\n            </ul>\n            <p className=\"text-xs text-gray-500 mt-2\">\n              Address these basic needs first as they often trigger cravings or emotional distress.\n            </p>\n          </div>\n          \n          <div className=\"p-4 border border-gray-100 rounded-lg\">\n            <h4 className=\"font-medium mb-2\">U.R.G.E. Surfing</h4>\n            <p className=\"text-sm text-gray-600 mb-3\">\n              A technique to manage cravings:\n            </p>\n            <ul className=\"space-y-2 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"w-5 h-5 bg-indigo-100 rounded-full flex items-center justify-center mr-2 mt-0.5\">U</span>\n                <div>\n                  <span className=\"font-medium\">Understand</span> that urges are temporary\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"w-5 h-5 bg-indigo-100 rounded-full flex items-center justify-center mr-2 mt-0.5\">R</span>\n                <div>\n                  <span className=\"font-medium\">Recognize</span> what you're feeling\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"w-5 h-5 bg-indigo-100 rounded-full flex items-center justify-center mr-2 mt-0.5\">G</span>\n                <div>\n                  <span className=\"font-medium\">Get</span> support or use coping skills\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"w-5 h-5 bg-indigo-100 rounded-full flex items-center justify-center mr-2 mt-0.5\">E</span>\n                <div>\n                  <span className=\"font-medium\">Expect</span> the urge to pass\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RecoveryResources;","import React, { useState } from 'react';\nimport { Clock, Brain, Activity, UserPlus, ThumbsUp } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ntype CopingCategory = 'immediate' | 'cognitive' | 'physical' | 'social' | 'longterm';\n\nconst CopingSkills: React.FC = () => {\n  const [selectedCategory, setSelectedCategory] = useState<CopingCategory>('immediate');\n  \n  const categories = [\n    { id: 'immediate', label: 'Immediate Relief', icon: Clock, color: 'bg-red-50 text-red-700 border-red-100' },\n    { id: 'cognitive', label: 'Thought Strategies', icon: Brain, color: 'bg-blue-50 text-blue-700 border-blue-100' },\n    { id: 'physical', label: 'Physical Techniques', icon: Activity, color: 'bg-green-50 text-green-700 border-green-100' },\n    { id: 'social', label: 'Social Support', icon: UserPlus, color: 'bg-purple-50 text-purple-700 border-purple-100' },\n    { id: 'longterm', label: 'Long-term Strategies', icon: ThumbsUp, color: 'bg-amber-50 text-amber-700 border-amber-100' }\n  ];\n  \n  const copingSkills = {\n    immediate: [\n      {\n        title: \"HALT Check\",\n        description: \"Ask yourself if you're Hungry, Angry, Lonely, or Tired. Address these basic needs first.\",\n        steps: [\n          \"Identify which of these needs might be triggering cravings\",\n          \"Take immediate action (eat, calm down, call someone, or rest)\",\n          \"Reassess your craving level after addressing the need\"\n        ]\n      },\n      {\n        title: \"Urge Surfing\",\n        description: \"Visualize your craving as a wave that will rise, peak, and eventually subside.\",\n        steps: [\n          \"Notice the physical sensations of the craving\",\n          \"Breathe deeply and observe these sensations without judgment\",\n          \"Visualize riding the wave until it naturally subsides\",\n          \"Remember: most urges peak at 20-30 minutes, then decrease\"\n        ]\n      },\n      {\n        title: \"5-4-3-2-1 Grounding\",\n        description: \"Use your senses to ground yourself in the present moment.\",\n        steps: [\n          \"Name 5 things you can see\",\n          \"Name 4 things you can physically feel\",\n          \"Name 3 things you can hear\",\n          \"Name 2 things you can smell\",\n          \"Name 1 thing you can taste\"\n        ]\n      },\n      {\n        title: \"Cold Water Technique\",\n        description: \"Using temperature to interrupt craving patterns.\",\n        steps: [\n          \"Fill a bowl with cold water or grab an ice cube\",\n          \"Dip your face in the water or hold the ice in your hand\",\n          \"Focus intently on the physical sensation\",\n          \"This activates the parasympathetic nervous system to calm your body\"\n        ]\n      }\n    ],\n    cognitive: [\n      {\n        title: \"Thought Challenging\",\n        description: \"Identify and challenge unhelpful thoughts that contribute to cravings.\",\n        steps: [\n          \"Write down your craving-related thought (e.g., 'One use won't hurt')\",\n          \"Identify the thinking distortion (e.g., minimizing consequences)\",\n          \"Challenge with evidence ('Previous 'just once' led to relapse')\",\n          \"Create a more realistic thought ('Using now will threaten my progress')\"\n        ]\n      },\n      {\n        title: \"Playing the Tape Forward\",\n        description: \"Visualize the full consequences of giving in to the craving.\",\n        steps: [\n          \"Imagine in detail what would happen if you use\",\n          \"Include both immediate aftermath and longer-term effects\",\n          \"Visualize how you'll feel tomorrow, next week, next month\",\n          \"Focus on specific consequences to relationships, work, health\"\n        ]\n      },\n      {\n        title: \"Values Reconnection\",\n        description: \"Remind yourself of your deeper values and why recovery matters.\",\n        steps: [\n          \"Keep a list of your core values (e.g., health, family, integrity)\",\n          \"Review how sobriety aligns with these values\",\n          \"Write about how substance use conflicts with these values\",\n          \"Visualize your future self thanking you for staying strong now\"\n        ]\n      }\n    ],\n    physical: [\n      {\n        title: \"Progressive Muscle Relaxation\",\n        description: \"Systematically tensing and relaxing muscle groups to reduce physical tension.\",\n        steps: [\n          \"Find a quiet place to sit or lie down\",\n          \"Tense each muscle group for 5-10 seconds, then release\",\n          \"Work from toes to head, noticing the difference between tension and relaxation\",\n          \"Focus on your breathing between each muscle group\"\n        ]\n      },\n      {\n        title: \"Intense Exercise Burst\",\n        description: \"Quick, intense physical activity to change your physiological state.\",\n        steps: [\n          \"Choose a simple exercise (jumping jacks, push-ups, brisk walk)\",\n          \"Do it intensely for 1-5 minutes\",\n          \"Focus completely on the physical sensations\",\n          \"This releases endorphins and changes brain chemistry\"\n        ]\n      },\n      {\n        title: \"4-7-8 Breathing\",\n        description: \"A breathing pattern to activate relaxation response.\",\n        steps: [\n          \"Inhale quietly through your nose for 4 seconds\",\n          \"Hold your breath for 7 seconds\",\n          \"Exhale completely through your mouth for 8 seconds\",\n          \"Repeat 4 times\"\n        ]\n      }\n    ],\n    social: [\n      {\n        title: \"Call Your Support Person\",\n        description: \"Reach out to someone who understands your recovery journey.\",\n        steps: [\n          \"Keep 2-3 support contacts in your favorites list\",\n          \"Tell them honestly: 'I'm having strong cravings right now'\",\n          \"Ask them to listen, distract you, or remind you of your progress\",\n          \"Stay on the phone until the urge decreases\"\n        ]\n      },\n      {\n        title: \"Online Support Group\",\n        description: \"Connect with recovery communities available 24/7.\",\n        steps: [\n          \"Bookmark online meeting resources (AA/NA online, SMART Recovery)\",\n          \"Join a meeting even if it's already in progress\",\n          \"Share that you're struggling right now\",\n          \"Listen to others' experiences with cravings and how they cope\"\n        ]\n      },\n      {\n        title: \"Accountable Messaging\",\n        description: \"Text your accountability partner about your craving.\",\n        steps: [\n          \"Establish a person you can text anytime about cravings\",\n          \"Send a message describing your craving level and situation\",\n          \"Commit to checking in again in 30 minutes\",\n          \"Knowing you'll report back increases your commitment to resist\"\n        ]\n      }\n    ],\n    longterm: [\n      {\n        title: \"Trigger Identification & Planning\",\n        description: \"Map your personal triggers and develop specific response plans.\",\n        steps: [\n          \"List all your known triggers (people, places, emotions, situations)\",\n          \"Rate each trigger by intensity (1-10)\",\n          \"Develop a specific plan for each high-intensity trigger\",\n          \"Practice your response plans through visualization or role-play\"\n        ]\n      },\n      {\n        title: \"Daily Meditation Practice\",\n        description: \"Build mindfulness skills to observe cravings without acting on them.\",\n        steps: [\n          \"Start with just 5 minutes of meditation daily\",\n          \"Focus on observing thoughts without judgment\",\n          \"Gradually increase duration as your skills improve\",\n          \"Use guided meditation apps focused on addiction recovery\"\n        ]\n      },\n      {\n        title: \"H.O.W. Program\",\n        description: \"A framework for daily recovery maintenance.\",\n        steps: [\n          \"Honesty: Daily self-check about thoughts, feelings, and behaviors\",\n          \"Open-mindedness: Consider new recovery strategies and perspectives\",\n          \"Willingness: Take concrete actions each day that support your recovery\"\n        ]\n      },\n      {\n        title: \"Lifestyle Redesign\",\n        description: \"Gradually reshape your environment and activities to support sobriety.\",\n        steps: [\n          \"Identify aspects of your lifestyle that supported addiction\",\n          \"Create substitute activities that provide similar benefits\",\n          \"Gradually build new social connections through healthy activities\",\n          \"Redesign your physical spaces to remove triggers and add positive cues\"\n        ]\n      }\n    ]\n  };\n  \n  const selectedSkills = copingSkills[selectedCategory];\n  const selectedCategoryInfo = categories.find(c => c.id === selectedCategory);\n  \n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-2\">Coping Skills Library</h2>\n      <p className=\"text-gray-600 mb-6\">\n        Evidence-based techniques to manage cravings and build recovery skills.\n      </p>\n      \n      {/* Category Selection */}\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-2 mb-6\">\n        {categories.map((category) => {\n          const isSelected = category.id === selectedCategory;\n          const CategoryIcon = category.icon;\n          \n          return (\n            <button \n              key={category.id}\n              onClick={() => setSelectedCategory(category.id as CopingCategory)}\n              className={`p-3 rounded-lg border flex flex-col items-center text-center transition-colors duration-200\n                ${isSelected \n                  ? category.color\n                  : 'bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100'\n                }\n              `}\n            >\n              <CategoryIcon size={20} className=\"mb-1\" />\n              <span className=\"text-xs font-medium\">{category.label}</span>\n            </button>\n          );\n        })}\n      </div>\n      \n      {/* Skills List */}\n      <div className=\"space-y-6\">\n        {selectedSkills.map((skill, index) => (\n          <motion.div\n            key={`${selectedCategory}-${index}`}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.3, delay: index * 0.1 }}\n            className=\"border border-gray-200 rounded-lg overflow-hidden\"\n          >\n            <div className={`${selectedCategoryInfo?.color} p-4`}>\n              <h3 className=\"font-medium\">{skill.title}</h3>\n              <p className=\"text-sm mt-1\">{skill.description}</p>\n            </div>\n            \n            <div className=\"p-4 bg-white\">\n              <h4 className=\"text-sm font-medium mb-2\">How to practice:</h4>\n              <ol className=\"space-y-2\">\n                {skill.steps.map((step, stepIndex) => (\n                  <li key={stepIndex} className=\"text-sm flex items-start\">\n                    <span className=\"w-5 h-5 bg-gray-100 rounded-full flex items-center justify-center mr-2 flex-shrink-0 mt-0.5\">\n                      {stepIndex + 1}\n                    </span>\n                    <span className=\"text-gray-700\">{step}</span>\n                  </li>\n                ))}\n              </ol>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n      \n      <div className=\"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-100\">\n        <h3 className=\"font-medium mb-1\">Practice makes progress</h3>\n        <p className=\"text-sm text-gray-600\">\n          These skills become more effective with regular practice. Try to work with these techniques\n          when your cravings are at a 3-4 out of 10, so you can build your skills before facing\n          more intense urges.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default CopingSkills;","import React from 'react';\nimport { ArrowLeft } from 'lucide-react';\n\ninterface LegalTermsViewProps {\n  type: 'terms' | 'privacy' | 'ai';\n  onBack: () => void;\n}\n\nconst LegalTermsView: React.FC<LegalTermsViewProps> = ({ type, onBack }) => {\n  return (\n    <div className=\"max-w-3xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      <div className=\"flex items-center mb-6\">\n        <button\n          onClick={onBack}\n          className=\"p-2 mr-2 rounded-full hover:bg-gray-100\"\n          aria-label=\"Go back\"\n        >\n          <ArrowLeft size={20} className=\"text-gray-600\" />\n        </button>\n        <h1 className=\"text-2xl font-semibold\">\n          {type === 'terms' && 'Terms of Service'}\n          {type === 'privacy' && 'Privacy Policy'}\n          {type === 'ai' && 'AI Transparency'}\n        </h1>\n      </div>\n\n      <div className=\"prose max-w-none\">\n        {type === 'terms' && (\n          <>\n            <h2>1. Introduction</h2>\n            <p>\n              These Terms of Service (\"Terms\") govern your access to and use of Soberi.ai, including any content, functionality, and services offered through Soberi.ai (the \"Service\").\n            </p>\n\n            <h2>2. Medical Disclaimer</h2>\n            <p>\n              Soberi.ai is an informational and self-help tool only. The content and conversations provided by the service do not constitute medical advice, diagnosis, or treatment and do not create a clinicianpatient relationship. Always seek the advice of a qualified health-care professional with any questions you may have regarding a medical condition or mental-health concern.\n            </p>\n\n            <h2>3. Emergency Disclaimer</h2>\n            <p>\n              If you believe you may harm yourself or others, or are having a medical emergency, call your local emergency number (e.g., 112 in the EU/UK, 911 in the US) immediately. Soberi.ai is not a crisis-response service and cannot contact emergency services on your behalf.\n            </p>\n\n            <h2>4. AI & Accuracy Disclaimer</h2>\n            <p>\n              Conversations are generated by an artificial-intelligence system and may occasionally produce inaccurate, incomplete, or biased information. You are solely responsible for how you interpret and act on the content.\n            </p>\n\n            <h2>5. No Warranties / Limitation of Liability</h2>\n            <p>\n              The service is provided \"as is\" and \"as available,\" without warranties of any kind, express or implied. To the maximum extent permitted by law, the company disclaims all liability for losses or damages arising from your use of Soberi.ai.\n            </p>\n\n            <h2>6. Age Restriction</h2>\n            <p>\n              Soberi.ai is intended for users 18 years and older. If you are under 18, please do not use the service.\n            </p>\n\n            <h2>7. User-Generated Content & Moderation</h2>\n            <p>\n              We reserve the right to remove any content that violates these Terms or that we find objectionable for any reason. You are responsible for all content you submit to the Service.\n            </p>\n\n            <h2>8. Intellectual Property</h2>\n            <p>\n              \"Soberi.ai\" and all related logos, trademarks, and service marks are owned by us. All other trademarks, service marks, and logos used in connection with our Service are the property of their respective owners.\n            </p>\n\n            <h2>9. Changes to Terms</h2>\n            <p>\n              We may modify these Terms at any time. It is your responsibility to review these Terms periodically. Your continued use of the Service constitutes acceptance of any changes.\n            </p>\n          </>\n        )}\n\n        {type === 'privacy' && (\n          <>\n            <h2>1. Introduction</h2>\n            <p>\n              This Privacy Policy describes how we collect, use, and share your personal information when you use Soberi.ai (the \"Service\").\n            </p>\n\n            <h2>2. Information We Collect</h2>\n            <p>\n              We collect information you provide directly to us, including:\n            </p>\n            <ul>\n              <li>Chat messages and interactions with the AI</li>\n              <li>Journal entries</li>\n              <li>Check-in data regarding your mood and cravings</li>\n              <li>Progress tracking information</li>\n              <li>Task information</li>\n              <li>Device information and usage data</li>\n            </ul>\n\n            <h2>3. How We Use Your Information</h2>\n            <p>\n              We use your information to:\n            </p>\n            <ul>\n              <li>Provide, maintain, and improve the Service</li>\n              <li>Personalize your experience</li>\n              <li>Monitor and analyze usage trends</li>\n              <li>Enhance the safety and security of the Service</li>\n              <li>Communicate with you about the Service</li>\n            </ul>\n\n            <h2>4. Data Storage and Security</h2>\n            <p>\n              Your data is stored locally on your device and synchronized with secure cloud storage when you are online. We implement appropriate technical and organizational measures to protect your personal data.\n            </p>\n\n            <h2>5. GDPR Compliance</h2>\n            <p>\n              For users in the European Economic Area (EEA), we process your personal data in accordance with the General Data Protection Regulation (GDPR).\n            </p>\n            <p>\n              Lawful basis for processing:\n            </p>\n            <ul>\n              <li>Consent: For processing health-related data</li>\n              <li>Contract: To provide you with the Service</li>\n              <li>Legitimate Interests: To improve our Service</li>\n            </ul>\n\n            <h2>6. Your Rights</h2>\n            <p>\n              Depending on your location, you may have certain rights regarding your personal information, including:\n            </p>\n            <ul>\n              <li>Access to your personal data</li>\n              <li>Correction of inaccurate data</li>\n              <li>Deletion of your data</li>\n              <li>Data portability</li>\n              <li>Withdrawal of consent</li>\n            </ul>\n\n            <h2>7. Changes to This Privacy Policy</h2>\n            <p>\n              We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.\n            </p>\n\n            <h2>8. Contact Us</h2>\n            <p>\n              If you have any questions about this Privacy Policy, please contact us at: privacy@Soberi.ai\n            </p>\n          </>\n        )}\n\n        {type === 'ai' && (\n          <>\n            <h2>1. AI Technology</h2>\n            <p>\n              Soberi.ai uses advanced artificial intelligence technology to provide recovery support through conversations. Our AI system is designed to offer encouragement, information, and coping strategies for addiction recovery.\n            </p>\n\n            <h2>2. How Our AI Works</h2>\n            <p>\n              Our AI uses natural language processing to understand your messages and generate helpful responses. The system is trained on a wide range of recovery-related information but does not provide medical advice or treatment.\n            </p>\n\n            <h2>3. AI Limitations</h2>\n            <p>\n              While our AI strives to provide accurate and helpful information, it has several limitations:\n            </p>\n            <ul>\n              <li>It may occasionally generate incorrect or incomplete information</li>\n              <li>It cannot diagnose medical conditions or provide personalized medical advice</li>\n              <li>It cannot contact emergency services if you are in crisis</li>\n              <li>It may not always understand complex emotional states or nuanced situations</li>\n            </ul>\n\n            <h2>4. EU AI Act Compliance</h2>\n            <p>\n              Soberi.ai is designed to comply with the EU AI Act requirements for high-risk AI systems, including risk assessment, bias monitoring, and technical documentation.\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LegalTermsView;","import React, { useState, useEffect } from 'react';\nimport { useStore } from '../../store/useStore';\nimport { Trash2, Clock, Search, Plus, X } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { MemoryEntry, MemoryType } from '../../types';\nimport { format } from 'date-fns';\n\nconst MemoryDebugView: React.FC = () => {\n  const { memories, removeMemory, addMemory } = useStore();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [typeFilter, setTypeFilter] = useState<MemoryType | 'all'>('all');\n  const [showNewMemoryForm, setShowNewMemoryForm] = useState(false);\n  const [newMemory, setNewMemory] = useState<{\n    content: string;\n    type: MemoryType;\n    importance: number;\n    tags: string;\n  }>({\n    content: '',\n    type: 'personal_detail',\n    importance: 5,\n    tags: '',\n  });\n\n  // Filter memories based on search query and type\n  const filteredMemories = memories\n    .filter(memory => {\n      const matchesSearch = searchQuery === '' ||\n        memory.content.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        memory.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n\n      const matchesType = typeFilter === 'all' || memory.type === typeFilter;\n\n      return matchesSearch && matchesType;\n    })\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n\n  const handleCreateMemory = () => {\n    if (newMemory.content.trim() === '') return;\n\n    const memoryEntry: MemoryEntry = {\n      id: crypto.randomUUID(),\n      date: new Date().toISOString(),\n      content: newMemory.content,\n      type: newMemory.type,\n      importance: newMemory.importance,\n      tags: newMemory.tags.split(',').map(tag => tag.trim()).filter(Boolean),\n      accessCount: 0\n    };\n\n    addMemory(memoryEntry);\n\n    // Reset form\n    setNewMemory({\n      content: '',\n      type: 'personal_detail',\n      importance: 5,\n      tags: '',\n    });\n\n    setShowNewMemoryForm(false);\n  };\n\n  const getMemoryTypeColor = (type: MemoryType): string => {\n    switch (type) {\n      case 'personal_detail':\n        return 'bg-blue-100 text-blue-800';\n      case 'preference':\n        return 'bg-purple-100 text-purple-800';\n      case 'breakthrough':\n        return 'bg-green-100 text-green-800';\n      case 'trigger':\n        return 'bg-red-100 text-red-800';\n      case 'coping_strategy':\n        return 'bg-teal-100 text-teal-800';\n      case 'goal':\n        return 'bg-amber-100 text-amber-800';\n      case 'relapse':\n        return 'bg-orange-100 text-orange-800';\n      case 'conversation_summary':\n        return 'bg-indigo-100 text-indigo-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const memoryTypes: MemoryType[] = [\n    'personal_detail',\n    'preference',\n    'breakthrough',\n    'trigger',\n    'coping_strategy',\n    'goal',\n    'relapse',\n    'conversation_summary'\n  ];\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-semibold mb-2\">Memory System Debug View</h1>\n        <p className=\"text-gray-600\">\n          This view allows you to inspect and manage Soberi.ai's memory system, which helps the AI provide more personalized responses.\n        </p>\n      </div>\n\n      <div className=\"mb-6 flex flex-col sm:flex-row gap-4 items-start\">\n        <div className=\"relative flex-1\">\n          <input\n            type=\"text\"\n            placeholder=\"Search memories...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n          />\n          <Search size={18} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n          {searchQuery && (\n            <button\n              onClick={() => setSearchQuery('')}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n            >\n              <X size={16} />\n            </button>\n          )}\n        </div>\n\n        <div>\n          <select\n            value={typeFilter}\n            onChange={(e) => setTypeFilter(e.target.value as MemoryType | 'all')}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n          >\n            <option value=\"all\">All Memory Types</option>\n            {memoryTypes.map((type) => (\n              <option key={type} value={type}>\n                {type.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase())}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <button\n          onClick={() => setShowNewMemoryForm(!showNewMemoryForm)}\n          className=\"flex items-center justify-center gap-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 shadow-sm whitespace-nowrap\"\n        >\n          <Plus size={18} />\n          <span>Add Memory</span>\n        </button>\n      </div>\n\n      <AnimatePresence>\n        {showNewMemoryForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mb-8 bg-white rounded-xl shadow-md border border-gray-200 p-5\"\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-medium\">Add New Memory</h3>\n              <button\n                onClick={() => setShowNewMemoryForm(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Memory Content\n                </label>\n                <textarea\n                  value={newMemory.content}\n                  onChange={(e) => setNewMemory({ ...newMemory, content: e.target.value })}\n                  placeholder=\"Enter memory content...\"\n                  rows={3}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Memory Type\n                  </label>\n                  <select\n                    value={newMemory.type}\n                    onChange={(e) => setNewMemory({ ...newMemory, type: e.target.value as MemoryType })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n                  >\n                    {memoryTypes.map((type) => (\n                      <option key={type} value={type}>\n                        {type.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase())}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Importance (1-10)\n                  </label>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"range\"\n                      min=\"1\"\n                      max=\"10\"\n                      value={newMemory.importance}\n                      onChange={(e) => setNewMemory({ ...newMemory, importance: parseInt(e.target.value) })}\n                      className=\"w-full\"\n                    />\n                    <span className=\"ml-2 text-sm font-medium w-6 text-center\">{newMemory.importance}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Tags (comma separated)\n                </label>\n                <input\n                  type=\"text\"\n                  value={newMemory.tags}\n                  onChange={(e) => setNewMemory({ ...newMemory, tags: e.target.value })}\n                  placeholder=\"mood, recovery, trigger, etc.\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n                />\n              </div>\n\n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  onClick={() => setShowNewMemoryForm(false)}\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleCreateMemory}\n                  disabled={!newMemory.content.trim()}\n                  className={`px-4 py-2 rounded-lg transition-colors duration-200 ${!newMemory.content.trim()\n                      ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                      : 'bg-indigo-600 hover:bg-indigo-700 text-white'\n                    }`}\n                >\n                  Save Memory\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-medium mb-4\">Memory Entries ({filteredMemories.length})</h2>\n\n        {filteredMemories.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-500\">No memories found matching your criteria.</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {filteredMemories.map((memory) => (\n              <div\n                key={memory.id}\n                className=\"p-4 border border-gray-200 rounded-lg hover:border-indigo-200 transition-colors duration-200\"\n              >\n                <div className=\"flex justify-between\">\n                  <div className=\"flex items-center\">\n                    <span className={`text-xs px-2 py-1 rounded-full ${getMemoryTypeColor(memory.type)}`}>\n                      {memory.type.replace('_', ' ')}\n                    </span>\n                    <span className=\"ml-2 text-sm text-gray-500\">\n                      Importance: {memory.importance}/10\n                    </span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <span className=\"text-xs text-gray-500 flex items-center\">\n                      <Clock size={12} className=\"mr-1\" />\n                      {format(new Date(memory.date), 'MMM d, yyyy')}\n                    </span>\n                    <button\n                      onClick={() => removeMemory(memory.id)}\n                      className=\"ml-3 text-gray-400 hover:text-red-500\"\n                    >\n                      <Trash2 size={16} />\n                    </button>\n                  </div>\n                </div>\n\n                <p className=\"mt-2 text-gray-700\">{memory.content}</p>\n\n                {memory.tags.length > 0 && (\n                  <div className=\"mt-2 flex flex-wrap gap-1\">\n                    {memory.tags.map((tag, index) => (\n                      <span\n                        key={index}\n                        className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full\"\n                      >\n                        {tag}\n                      </span>\n                    ))}\n                  </div>\n                )}\n\n                <div className=\"mt-2 text-xs text-gray-500\">\n                  Accessed {memory.accessCount} times\n                  {memory.lastAccessed && `  Last accessed: ${format(new Date(memory.lastAccessed), 'MMM d, yyyy')}`}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MemoryDebugView;","import React, { useState, useEffect } from 'react';\nimport { useStore } from '../../store/useStore';\nimport { Send, RefreshCw } from 'lucide-react';\n\nconst MemoryContextDemo: React.FC = () => {\n  const [message, setMessage] = useState('');\n  const [context, setContext] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const { generateContextFromMemories } = useStore();\n  \n  const handleGenerateContext = async () => {\n    if (!message.trim()) return;\n    setIsGenerating(true);\n    // Generate memory context based on the message\n    const memoryContext = await generateContextFromMemories(message);\n      setContext(memoryContext);\n      setIsGenerating(false);\n  };\n  \n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-semibold mb-2\">Memory Context Demo</h1>\n        <p className=\"text-gray-600\">\n          This demo shows how the AI generates context from past memories to provide more personalized responses.\n          Type a message and see what memories the AI would retrieve.\n        </p>\n      </div>\n      \n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\">\n        <h2 className=\"text-lg font-medium mb-4\">Test Memory Retrieval</h2>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Enter a message to generate context\n          </label>\n          <textarea\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            placeholder=\"Type a message like you would in chat...\"\n            rows={3}\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n          />\n        </div>\n        \n        <div className=\"flex justify-end\">\n          <button\n            onClick={handleGenerateContext}\n            disabled={!message.trim() || isGenerating}\n            className={`flex items-center px-4 py-2 rounded-lg transition-colors duration-200\n              ${!message.trim() || isGenerating\n                ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                : 'bg-indigo-600 hover:bg-indigo-700 text-white'\n              }`}\n          >\n            {isGenerating ? (\n              <>\n                <RefreshCw size={18} className=\"mr-2 animate-spin\" />\n                Generating...\n              </>\n            ) : (\n              <>\n                <Send size={18} className=\"mr-2\" />\n                Generate Context\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n      \n      {context && (\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n          <h2 className=\"text-lg font-medium mb-4\">Retrieved Memory Context</h2>\n          \n          {context.trim() === '' ? (\n            <div className=\"bg-amber-50 border border-amber-100 rounded-lg p-4 mb-4\">\n              <p className=\"text-amber-800\">\n                No relevant memories found for this message. This could be because:\n              </p>\n              <ul className=\"list-disc pl-5 mt-2 text-amber-700 text-sm\">\n                <li>The AI doesn't have enough memories stored yet</li>\n                <li>The message doesn't contain topics that match any stored memories</li>\n                <li>The message is too generic or doesn't contain personal information</li>\n              </ul>\n            </div>\n          ) : (\n            <>\n              <div className=\"bg-indigo-50 border border-indigo-100 rounded-lg p-4 mb-4\">\n                <p className=\"text-indigo-800 text-sm\">\n                  This is the context the AI would use to generate a more personalized response.\n                  This information isn't shown to you during normal conversations but helps the AI\n                  remember important details about your recovery journey.\n                </p>\n              </div>\n              \n              <pre className=\"bg-gray-50 p-4 rounded-lg text-gray-700 text-sm overflow-x-auto whitespace-pre-wrap\">\n                {context}\n              </pre>\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MemoryContextDemo;","import React, { useState, useEffect } from 'react';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../UI/Tabs';\nimport EmergencyResources from '../Resources/EmergencyResources';\nimport RecoveryResources from '../Resources/RecoveryResources';\nimport CopingSkills from './CopingSkills';\nimport LegalTermsView from '../Legal/LegalTermsView';\nimport MemoryDebugView from '../MemoryView/MemoryDebugView';\nimport MemoryContextDemo from '../MemoryView/MemoryContextDemo';\n\nconst ResourcesView: React.FC = () => {\n  const [activeTab, setActiveTab] = useState('emergency');\n  const [legalView, setLegalView] = useState<'terms' | 'privacy' | 'ai' | null>(null);\n  const [showMemoryDebug, setShowMemoryDebug] = useState(false);\n\n  // Handle legal view links from footer\n  useEffect(() => {\n    const handleHashChange = () => {\n      const hash = window.location.hash;\n      if (hash === '#terms') {\n        setLegalView('terms');\n      } else if (hash === '#privacy') {\n        setLegalView('privacy');\n      } else if (hash === '#ai') {\n        setLegalView('ai');\n      } else if (hash === '#memory-debug') {\n        setShowMemoryDebug(true);\n      }\n    };\n\n    handleHashChange(); // Check on initial render\n    window.addEventListener('hashchange', handleHashChange);\n\n    return () => {\n      window.removeEventListener('hashchange', handleHashChange);\n    };\n  }, []);\n\n  if (legalView) {\n    return (\n      <LegalTermsView\n        type={legalView}\n        onBack={() => {\n          setLegalView(null);\n          window.history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n        }}\n      />\n    );\n  }\n\n  if (showMemoryDebug) {\n    return (\n      <div>\n        <div className=\"mb-4\">\n          <button\n            onClick={() => {\n              setShowMemoryDebug(false);\n              window.history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n            }}\n            className=\"flex items-center text-indigo-600 hover:text-indigo-800\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            Back to Resources\n          </button>\n        </div>\n\n        <Tabs value=\"memory-debug\" onValueChange={(value) => { }}>\n          <TabsList className=\"mb-6\">\n            <TabsTrigger value=\"memory-debug\">Memory Debug</TabsTrigger>\n            <TabsTrigger value=\"memory-context\">Context Demo</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"memory-debug\">\n            <MemoryDebugView />\n          </TabsContent>\n\n          <TabsContent value=\"memory-context\">\n            <MemoryContextDemo />\n          </TabsContent>\n        </Tabs>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-semibold mb-2\">Recovery Resources</h1>\n        <p className=\"text-gray-600\">\n          Access helplines, support groups, and coping strategies to strengthen your recovery journey.\n        </p>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"mb-6\">\n          <TabsTrigger value=\"emergency\">Emergency Help</TabsTrigger>\n          <TabsTrigger value=\"resources\">Support Groups</TabsTrigger>\n          <TabsTrigger value=\"coping\">Coping Skills</TabsTrigger>\n          <TabsTrigger value=\"legal\">Legal</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"emergency\">\n          <EmergencyResources />\n        </TabsContent>\n\n        <TabsContent value=\"resources\">\n          <RecoveryResources />\n        </TabsContent>\n\n        <TabsContent value=\"coping\">\n          <CopingSkills />\n        </TabsContent>\n\n        <TabsContent value=\"legal\">\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Legal Information</h2>\n            <p className=\"text-gray-600 mb-6\">\n              Review our legal documents and policies:\n            </p>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <button\n                onClick={() => setLegalView('terms')}\n                className=\"p-5 border border-gray-200 rounded-lg hover:border-indigo-200 transition-colors duration-200\"\n              >\n                <h3 className=\"font-medium text-lg mb-2\">Terms of Service</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Review the terms and conditions for using Soberi.ai\n                </p>\n              </button>\n\n              <button\n                onClick={() => setLegalView('privacy')}\n                className=\"p-5 border border-gray-200 rounded-lg hover:border-indigo-200 transition-colors duration-200\"\n              >\n                <h3 className=\"font-medium text-lg mb-2\">Privacy Policy</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Learn how we collect, use, and protect your data\n                </p>\n              </button>\n\n              <button\n                onClick={() => setLegalView('ai')}\n                className=\"p-5 border border-gray-200 rounded-lg hover:border-indigo-200 transition-colors duration-200\"\n              >\n                <h3 className=\"font-medium text-lg mb-2\">AI Transparency</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Information about how our AI technology works\n                </p>\n              </button>\n            </div>\n\n            {/* Debug link - only visible in development */}\n            <div className=\"mt-8 pt-4 border-t border-gray-100\">\n              <h3 className=\"text-sm font-medium text-gray-500 mb-2\">Developer Options</h3>\n              <button\n                onClick={() => setShowMemoryDebug(true)}\n                className=\"text-xs text-gray-500 hover:text-indigo-600\"\n              >\n                Memory System Debug\n              </button>\n            </div>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default ResourcesView;","import React, { useState } from 'react';\nimport { X, Calendar } from 'lucide-react';\nimport { useStore } from '../../store/useStore';\nimport { TaskPriority, TaskCategory } from '../../types';\nimport { getCurrentDateString } from '../../utils/dateUtils';\nimport { format } from 'date-fns';\n\ninterface NewTaskFormProps {\n  onClose: () => void;\n  selectedDate?: string;\n}\n\nconst NewTaskForm: React.FC<NewTaskFormProps> = ({ \n  onClose,\n  selectedDate = getCurrentDateString()\n}) => {\n  const { addTask } = useStore();\n  \n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [priority, setPriority] = useState<TaskPriority>('medium');\n  const [category, setCategory] = useState<TaskCategory>('self-care');\n  const [timeEstimate, setTimeEstimate] = useState<number | undefined>(undefined);\n  const [date, setDate] = useState(selectedDate);\n  \n  const handleSubmit = () => {\n    if (title.trim()) {\n      addTask(\n        title,\n        description,\n        date,\n        priority,\n        category,\n        timeEstimate\n      );\n      onClose();\n    }\n  };\n  \n  const categoryOptions: { value: TaskCategory; label: string; emoji: string }[] = [\n    { value: 'self-care', label: 'Self-care', emoji: '' },\n    { value: 'physical', label: 'Physical', emoji: '' },\n    { value: 'social', label: 'Social', emoji: '' },\n    { value: 'productive', label: 'Productive', emoji: '' },\n    { value: 'recovery', label: 'Recovery', emoji: '' }\n  ];\n  \n  const priorityOptions: { value: TaskPriority; label: string; color: string }[] = [\n    { value: 'high', label: 'High', color: 'bg-red-100 text-red-800 border-red-200' },\n    { value: 'medium', label: 'Medium', color: 'bg-amber-100 text-amber-800 border-amber-200' },\n    { value: 'low', label: 'Low', color: 'bg-blue-100 text-blue-800 border-blue-200' }\n  ];\n  \n  return (\n    <div className=\"bg-white rounded-xl shadow-md border border-gray-200 p-5\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h3 className=\"font-medium text-lg\">Add New Task</h3>\n        <button \n          onClick={onClose}\n          className=\"p-1 hover:bg-gray-100 rounded-full\"\n        >\n          <X size={18} className=\"text-gray-500\" />\n        </button>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Task Title *\n          </label>\n          <input\n            id=\"title\"\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            placeholder=\"What do you need to do?\"\n            className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n          />\n        </div>\n        \n        <div>\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Description (optional)\n          </label>\n          <textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder=\"Add any details or steps\"\n            rows={2}\n            className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n          />\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Category\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n              {categoryOptions.map((option) => (\n                <button\n                  key={option.value}\n                  type=\"button\"\n                  onClick={() => setCategory(option.value)}\n                  className={`px-3 py-2 text-center text-sm rounded-lg border transition-colors duration-200 flex items-center justify-center\n                    ${category === option.value \n                      ? 'border-indigo-300 bg-indigo-50 text-indigo-800' \n                      : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                >\n                  <span className=\"mr-1\">{option.emoji}</span>\n                  {option.label}\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Priority\n            </label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {priorityOptions.map((option) => (\n                <button\n                  key={option.value}\n                  type=\"button\"\n                  onClick={() => setPriority(option.value)}\n                  className={`px-3 py-2 text-center text-sm rounded-lg border transition-colors duration-200\n                    ${priority === option.value \n                      ? option.color\n                      : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                >\n                  {option.label}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"timeEstimate\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Time Estimate (minutes)\n            </label>\n            <input\n              id=\"timeEstimate\"\n              type=\"number\"\n              min=\"1\"\n              value={timeEstimate || ''}\n              onChange={(e) => setTimeEstimate(e.target.value ? parseInt(e.target.value) : undefined)}\n              placeholder=\"How long will this take?\"\n              className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n            />\n          </div>\n          \n          <div>\n            <label htmlFor=\"date\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Date\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <Calendar size={16} className=\"text-gray-500\" />\n              </div>\n              <input\n                id=\"date\"\n                type=\"date\"\n                value={date}\n                onChange={(e) => setDate(e.target.value)}\n                className=\"w-full pl-10 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-3 mt-2\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleSubmit}\n            disabled={!title.trim()}\n            className={`px-4 py-2 rounded-lg transition-colors duration-200 ${\n              !title.trim()\n                ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                : 'bg-indigo-600 hover:bg-indigo-700 text-white'\n            }`}\n          >\n            Save Task\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NewTaskForm;","import React, { useState } from 'react';\nimport { Check, Clock, AlertTriangle, Trash2, MoreVertical, CheckCircle2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useStore } from '../../store/useStore';\nimport { Task } from '../../types';\n\ninterface TaskItemProps {\n  task: Task;\n}\n\nconst TaskItem: React.FC<TaskItemProps> = ({ task }) => {\n  const { markTaskComplete, removeTask } = useStore();\n  const [showOptions, setShowOptions] = useState(false);\n  \n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-red-100 text-red-800 border-red-200';\n      case 'medium':\n        return 'bg-amber-100 text-amber-800 border-amber-200';\n      case 'low':\n        return 'bg-blue-100 text-blue-800 border-blue-200';\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n  \n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'self-care':\n        return <span className=\"text-purple-500\"></span>;\n      case 'physical':\n        return <span className=\"text-green-500\"></span>;\n      case 'social':\n        return <span className=\"text-blue-500\"></span>;\n      case 'productive':\n        return <span className=\"text-amber-500\"></span>;\n      case 'recovery':\n        return <span className=\"text-red-500\"></span>;\n      default:\n        return <span className=\"text-gray-500\"></span>;\n    }\n  };\n  \n  const handleComplete = () => {\n    markTaskComplete(task.id);\n  };\n  \n  const handleDelete = () => {\n    removeTask(task.id);\n  };\n  \n  const toggleOptions = () => {\n    setShowOptions(!showOptions);\n  };\n  \n  return (\n    <motion.div \n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, height: 0 }}\n      className={`relative bg-white rounded-lg shadow-sm border overflow-hidden ${\n        task.completed ? 'border-gray-100' : 'border-gray-200'\n      }`}\n    >\n      <div className=\"flex items-start p-4\">\n        <button\n          onClick={handleComplete}\n          disabled={task.completed}\n          className={`flex-shrink-0 w-6 h-6 mr-3 mt-0.5 rounded-full flex items-center justify-center border ${\n            task.completed \n              ? 'bg-green-500 border-green-500 text-white cursor-default' \n              : 'border-gray-300 hover:border-indigo-500 hover:bg-indigo-50'\n          }`}\n          aria-label={task.completed ? 'Task completed' : 'Mark as complete'}\n        >\n          {task.completed && <Check size={14} />}\n        </button>\n        \n        <div className=\"flex-1 mr-3\">\n          <div className=\"flex items-center mb-1\">\n            <h4 className={`font-medium ${task.completed ? 'line-through text-gray-500' : 'text-gray-800'}`}>\n              {task.title}\n            </h4>\n          </div>\n          \n          <p className={`text-sm mb-2 ${task.completed ? 'line-through text-gray-400' : 'text-gray-600'}`}>\n            {task.description}\n          </p>\n          \n          <div className=\"flex items-center text-xs text-gray-500 space-x-3\">\n            {task.timeEstimate && (\n              <div className=\"flex items-center\">\n                <Clock size={12} className=\"mr-1\" />\n                <span>{task.timeEstimate} min</span>\n              </div>\n            )}\n            \n            <div className=\"flex items-center\">\n              {getCategoryIcon(task.category)}\n              <span className=\"ml-1 capitalize\">{task.category}</span>\n            </div>\n            \n            <div className={`px-2 py-0.5 rounded-full text-xs ${getPriorityColor(task.priority)}`}>\n              {task.priority}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"relative flex-shrink-0\">\n          <button \n            onClick={toggleOptions}\n            className=\"p-1 rounded-full hover:bg-gray-100\"\n          >\n            <MoreVertical size={16} className=\"text-gray-500\" />\n          </button>\n          \n          <AnimatePresence>\n            {showOptions && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.95 }}\n                className=\"absolute right-0 top-full mt-1 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-10 w-32\"\n              >\n                {!task.completed && (\n                  <button\n                    onClick={handleComplete}\n                    className=\"w-full px-3 py-2 text-left text-sm flex items-center hover:bg-gray-50\"\n                  >\n                    <CheckCircle2 size={14} className=\"mr-2 text-green-500\" />\n                    Complete\n                  </button>\n                )}\n                <button\n                  onClick={handleDelete}\n                  className=\"w-full px-3 py-2 text-left text-sm flex items-center text-red-600 hover:bg-red-50\"\n                >\n                  <Trash2 size={14} className=\"mr-2\" />\n                  Delete\n                </button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default TaskItem;","import React, { useState, useEffect } from 'react';\nimport { useStore } from '../../store/useStore';\nimport { Plus, Check, Calendar, Clock, ArrowRight, X, PencilIcon, Trash2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Task, TaskCategory, TaskPriority } from '../../types';\nimport { format } from 'date-fns';\nimport { getCurrentDateString } from '../../utils/dateUtils';\nimport NewTaskForm from './NewTaskForm';\nimport TaskItem from './TaskItem';\nimport InsightCard from './InsightCard';\n\nconst TasksView: React.FC = () => {\n  const { tasks, insights, markInsightSeen } = useStore();\n  const [showNewTaskForm, setShowNewTaskForm] = useState(false);\n  const [selectedDate, setSelectedDate] = useState(getCurrentDateString());\n  const [unshownInsights, setUnshownInsights] = useState<typeof insights>([]);\n  const [currentInsightIndex, setCurrentInsightIndex] = useState(0);\n  \n  useEffect(() => {\n    // Filter insights that haven't been shown yet\n    const unseenInsights = insights.filter(insight => !insight.shown);\n    setUnshownInsights(unseenInsights);\n  }, [insights]);\n\n  const filteredTasks = tasks\n    .filter(task => task.date === selectedDate)\n    .sort((a, b) => {\n      // First by completed status\n      if (a.completed !== b.completed) {\n        return a.completed ? 1 : -1;\n      }\n      \n      // Then by priority\n      const priorityOrder = { high: 0, medium: 1, low: 2 };\n      return priorityOrder[a.priority] - priorityOrder[b.priority];\n    });\n\n  const handleNextInsight = () => {\n    // Mark current insight as shown\n    if (unshownInsights.length > 0 && currentInsightIndex < unshownInsights.length) {\n      markInsightSeen(unshownInsights[currentInsightIndex].id);\n    }\n    \n    // Move to next insight if available\n    if (currentInsightIndex < unshownInsights.length - 1) {\n      setCurrentInsightIndex(currentInsightIndex + 1);\n    } else {\n      setCurrentInsightIndex(0);\n      setUnshownInsights(unshownInsights.filter(insight => !insight.shown));\n    }\n  };\n\n  const completedTasks = filteredTasks.filter(task => task.completed);\n  const pendingTasks = filteredTasks.filter(task => !task.completed);\n  \n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      {/* Emotional Insight Card */}\n      <AnimatePresence>\n        {unshownInsights.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"mb-6\"\n          >\n            <InsightCard \n              insight={unshownInsights[currentInsightIndex]} \n              onDismiss={handleNextInsight} \n              total={unshownInsights.length}\n              current={currentInsightIndex + 1}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      <div className=\"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h2 className=\"text-xl font-semibold\">Daily Structure</h2>\n          <p className=\"text-gray-600 text-sm\">Having a structured day helps build recovery momentum</p>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={() => setSelectedDate(getCurrentDateString())}\n            className={`px-3 py-1.5 text-sm rounded-lg transition-colors duration-200 ${\n              selectedDate === getCurrentDateString()\n                ? 'bg-indigo-100 text-indigo-700 font-medium'\n                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n            }`}\n          >\n            Today\n          </button>\n          <button\n            onClick={() => setShowNewTaskForm(true)}\n            className=\"flex items-center gap-1 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200 shadow-sm text-sm\"\n          >\n            <Plus size={16} />\n            <span>Add Task</span>\n          </button>\n        </div>\n      </div>\n      \n      <AnimatePresence>\n        {showNewTaskForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mb-8\"\n          >\n            <NewTaskForm onClose={() => setShowNewTaskForm(false)} selectedDate={selectedDate} />\n          </motion.div>\n        )}\n      </AnimatePresence>\n      \n      {filteredTasks.length === 0 ? (\n        <div className=\"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full mx-auto flex items-center justify-center mb-4\">\n            <Calendar size={24} className=\"text-gray-400\" />\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-800 mb-1\">No tasks for {selectedDate === getCurrentDateString() ? 'today' : format(new Date(selectedDate), 'MMMM d, yyyy')}</h3>\n          <p className=\"text-gray-500 mb-4\">Structure your day with meaningful activities</p>\n          <button\n            onClick={() => setShowNewTaskForm(true)}\n            className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200\"\n          >\n            Add Your First Task\n          </button>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {pendingTasks.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-medium mb-3\">Pending Tasks</h3>\n              <div className=\"space-y-2\">\n                {pendingTasks.map((task) => (\n                  <TaskItem key={task.id} task={task} />\n                ))}\n              </div>\n            </div>\n          )}\n          \n          {completedTasks.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-medium mb-3\">Completed Tasks</h3>\n              <div className=\"space-y-2 opacity-75\">\n                {completedTasks.map((task) => (\n                  <TaskItem key={task.id} task={task} />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n      \n      {/* Daily Inspiration */}\n      <div className=\"mt-8 p-5 bg-indigo-50 rounded-lg border border-indigo-100\">\n        <h3 className=\"font-medium text-indigo-900 mb-2\">Recovery Perspective</h3>\n        <p className=\"text-indigo-700 text-sm italic\">\n          \"Recovery isn't about reaching a destination of constant happiness. It's about building the capacity to experience the full range of human emotions without being overwhelmed by them or needing to escape them.\"\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default TasksView;","import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { AlertTriangle, RefreshCw } from 'lucide-react';\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false,\n    error: null\n  };\n\n  public static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('Uncaught error:', error, errorInfo);\n    // In production, you would send this to an error tracking service\n  }\n\n  private handleReset = () => {\n    this.setState({ hasError: false, error: null });\n    window.location.reload();\n  };\n\n  public render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 px-4\">\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center\">\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <AlertTriangle className=\"w-8 h-8 text-red-600\" />\n            </div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              Oops! Something went wrong\n            </h1>\n            <p className=\"text-gray-600 mb-6\">\n              We're sorry, but something unexpected happened. Don't worry, your data is safe.\n            </p>\n            <button\n              onClick={this.handleReset}\n              className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\n            >\n              <RefreshCw className=\"w-4 h-4 mr-2\" />\n              Reload App\n            </button>\n            {process.env.NODE_ENV === 'development' && this.state.error && (\n              <details className=\"mt-6 text-left\">\n                <summary className=\"cursor-pointer text-sm text-gray-500 hover:text-gray-700\">\n                  Error details (development only)\n                </summary>\n                <pre className=\"mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto\">\n                  {this.state.error.toString()}\n                  {this.state.error.stack}\n                </pre>\n              </details>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;","import React, { useState, useEffect } from 'react';\nimport { Download, X } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt: () => Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed', platform: string }>;\n}\n\nconst AppInstallPrompt: React.FC = () => {\n  const [installPrompt, setInstallPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e: Event) => {\n      // Prevent Chrome 67 and earlier from automatically showing the prompt\n      e.preventDefault();\n      // Store the event so it can be triggered later\n      setInstallPrompt(e as BeforeInstallPromptEvent);\n      // Show the prompt to the user\n      setShowPrompt(true);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstallClick = () => {\n    if (!installPrompt) return;\n\n    // Show the install prompt\n    installPrompt.prompt();\n\n    // Wait for the user to respond to the prompt\n    installPrompt.userChoice.then((choiceResult) => {\n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the install prompt');\n      } else {\n        console.log('User dismissed the install prompt');\n      }\n\n      // Clear the saved prompt since it can't be used again\n      setInstallPrompt(null);\n      setShowPrompt(false);\n    });\n  };\n\n  const dismissPrompt = () => {\n    setShowPrompt(false);\n    // Store in localStorage that the user has dismissed the prompt\n    localStorage.setItem('installPromptDismissed', 'true');\n  };\n\n  // Don't render anything if there's no prompt or the user has dismissed it\n  if (!showPrompt) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: 50 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: 50 }}\n        className=\"fixed bottom-20 left-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-50 md:left-auto md:right-4 md:bottom-4 md:max-w-sm\"\n      >\n        <div className=\"flex justify-between items-start\">\n          <div className=\"flex-1\">\n            <h3 className=\"font-medium text-gray-800 mb-1\">Install Soberi.ai</h3>\n            <p className=\"text-sm text-gray-600 mb-3\">\n              Add Soberi to your home screen for easier access and a better experience.\n            </p>\n\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={handleInstallClick}\n                className=\"flex items-center px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-sm\"\n              >\n                <Download size={16} className=\"mr-1\" />\n                Install\n              </button>\n              <button\n                onClick={dismissPrompt}\n                className=\"px-3 py-1.5 border border-gray-300 text-gray-700 rounded-lg text-sm\"\n              >\n                Maybe Later\n              </button>\n            </div>\n          </div>\n          <button\n            onClick={dismissPrompt}\n            className=\"ml-2 text-gray-400 hover:text-gray-600\"\n          >\n            <X size={18} />\n          </button>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\nexport default AppInstallPrompt;","import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport LegalDisclaimer from './LegalDisclaimer';\n\ninterface DisclaimerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst DisclaimerModal: React.FC<DisclaimerModalProps> = ({ isOpen, onClose }) => {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\"\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.9, opacity: 0 }}\n            className=\"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] overflow-hidden\"\n          >\n            <div className=\"flex justify-between items-center border-b p-4\">\n              <h3 className=\"text-lg font-semibold\">Before You Begin</h3>\n            </div>\n\n            <div className=\"p-4 overflow-y-auto max-h-[calc(80vh-120px)]\">\n              <p className=\"text-gray-600 mb-4\">\n                Soberi.ai is a supportive companion for your recovery journey. Please note:\n              </p>\n\n              <LegalDisclaimer type=\"full\" onClose={onClose} />\n\n              <div className=\"mt-4 text-xs text-gray-500\">\n                By clicking \"I Understand\", you confirm that you are at least 18 years old and agree to these terms.\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default DisclaimerModal;","import React from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  fallback?: React.ReactNode;\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \r\n  children, \r\n  fallback = <div className=\"flex items-center justify-center min-h-screen\">\r\n    <div className=\"bg-white p-8 rounded-lg shadow-md max-w-md w-full\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Please Sign In</h2>\r\n      <p className=\"text-gray-600 mb-6\">You need to be signed in to access this page.</p>\r\n    </div>\r\n  </div>\r\n}) => {\r\n  const { user, loading } = useAuth();\r\n\r\n  // Show loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-pulse text-lg text-gray-600\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If user is not authenticated, show the fallback\r\n  if (!user) {\r\n    return <>{fallback}</>;\r\n  }\r\n\r\n  // If user is authenticated, show the protected content\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { useState } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport LoginButton from './LoginButton';\r\nimport { Sparkles, Lock, MessageCircle, UserCheck } from 'lucide-react';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const { user, loading } = useAuth();\r\n  const [showLegal, setShowLegal] = useState<'none' | 'tos' | 'privacy'>('none');\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4\">\r\n        <div className=\"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin\"></div>\r\n        <p className=\"mt-4 text-gray-600\">Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (user) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4\">\r\n        <div className=\"bg-white p-8 rounded-xl shadow-md max-w-md w-full\">\r\n          <div className=\"text-center mb-6\">\r\n            <h2 className=\"text-2xl font-semibold text-gray-800\">Welcome Back!</h2>\r\n            <p className=\"text-gray-600 mt-2\">You're already signed in as {user.user_metadata?.full_name || user.email}</p>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-center\">\r\n            <button\r\n              onClick={() => window.location.href = '/'}\r\n              className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-lg transition-colors duration-200\"\r\n            >\r\n              Go to Dashboard\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 p-4\">\r\n      <div className=\"bg-white/90 p-8 rounded-2xl shadow-xl max-w-md w-full border border-indigo-100 relative\">\r\n        {/* Hero Section */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"flex justify-center mb-4\">\r\n            <span className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-100\">\r\n              <Sparkles size={36} className=\"text-indigo-500\" />\r\n            </span>\r\n          </div>\r\n          <h2 className=\"text-3xl font-extrabold text-gray-900 mb-2\">Welcome to Soberi.ai</h2>\r\n          <p className=\"text-gray-600 text-base mb-2\">Your private, AI-powered recovery companion.</p>\r\n          <p className=\"text-indigo-700 text-sm font-medium\">First 10 insights and chats are free. No personal data stored except your email and payment status.</p>\r\n        </div>\r\n\r\n        {/* Benefits Section */}\r\n        <div className=\"grid grid-cols-1 gap-4 mb-8\">\r\n          <div className=\"flex items-center gap-3 bg-indigo-50 rounded-lg p-3\">\r\n            <MessageCircle size={20} className=\"text-indigo-500\" />\r\n            <span className=\"text-gray-700 text-sm\">Chat with a supportive AI, anytime</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-3 bg-indigo-50 rounded-lg p-3\">\r\n            <UserCheck size={20} className=\"text-indigo-500\" />\r\n            <span className=\"text-gray-700 text-sm\">Track your progress and daily check-ins</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-3 bg-indigo-50 rounded-lg p-3\">\r\n            <Lock size={20} className=\"text-indigo-500\" />\r\n            <span className=\"text-gray-700 text-sm\">Your data is encrypted and stays on your device</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Call to Action */}\r\n        <div className=\"flex flex-col items-center space-y-4\">\r\n          <LoginButton className=\"w-full text-lg py-3\" />\r\n          <div className=\"text-xs text-gray-500 text-center\">\r\n            By signing in, you agree to our{' '}\r\n            <button\r\n              className=\"text-indigo-600 hover:underline focus:outline-none\"\r\n              onClick={() => setShowLegal('tos')}\r\n              type=\"button\"\r\n            >\r\n              Terms of Service\r\n            </button>\r\n            {' '}and{' '}\r\n            <button\r\n              className=\"text-indigo-600 hover:underline focus:outline-none\"\r\n              onClick={() => setShowLegal('privacy')}\r\n              type=\"button\"\r\n            >\r\n              Privacy Policy\r\n            </button>.\r\n          </div>\r\n        </div>\r\n        {/* Modal for short legal text */}\r\n        {showLegal !== 'none' && (\r\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/30\">\r\n            <div className=\"bg-white rounded-lg shadow-lg p-6 max-w-xs w-full text-sm relative\">\r\n              <button\r\n                className=\"absolute top-2 right-2 text-gray-400 hover:text-gray-600\"\r\n                onClick={() => setShowLegal('none')}\r\n                aria-label=\"Close\"\r\n              >\r\n                \r\n              </button>\r\n              {showLegal === 'tos' && (\r\n                <div>\r\n                  <h3 className=\"font-semibold mb-2\">Terms of Service</h3>\r\n                  <p>By using Soberi.ai, you agree to use the app for personal recovery support only. Do not use the app for unlawful or harmful purposes. Continued use means you accept any changes to these terms.</p>\r\n                </div>\r\n              )}\r\n              {showLegal === 'privacy' && (\r\n                <div>\r\n                  <h3 className=\"font-semibold mb-2\">Privacy Policy</h3>\r\n                  <p>Soberi.ai only stores your email and payment status on our servers. All other data is encrypted and stays on your device. We do not sell or share your personal information.</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;","import React, { useEffect, useState } from 'react';\r\nimport { useStore } from '../store/useStore';\r\nimport { migrateFromLocalStorage, indexedDBStorage } from '../utils/indexedDBUtils';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface StorageMigrationProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const StorageMigration: React.FC<StorageMigrationProps> = ({ children }) => {\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [migrationProgress, setMigrationProgress] = useState('');\r\n\r\n  useEffect(() => {\r\n    const initializeStorage = async () => {\r\n      try {\r\n        setMigrationProgress('Initializing storage...');\r\n        \r\n        // Get userId from localStorage\r\n        const userId = localStorage.getItem('Soberi_userId');\r\n        if (!userId) {\r\n          // No user ID yet, just initialize IndexedDB and continue\r\n          await indexedDBStorage.init();\r\n          setIsReady(true);\r\n          return;\r\n        }\r\n\r\n        // Initialize IndexedDB\r\n        await indexedDBStorage.init();\r\n        \r\n        // Check if migration is needed\r\n        const hasLocalStorageData = localStorage.getItem('Soberiai-storage') !== null;\r\n        const hasIndexedDBData = await indexedDBStorage.getAppState(userId) !== null;\r\n        \r\n        if (hasLocalStorageData && !hasIndexedDBData) {\r\n          setMigrationProgress('Migrating data to improved storage...');\r\n          await migrateFromLocalStorage(userId);\r\n          \r\n          // Optional: Clear localStorage after successful migration\r\n          // But keep userId for authentication\r\n          const keysToKeep = ['Soberi_userId', 'sb-auth-token'];\r\n          const allKeys = Object.keys(localStorage);\r\n          \r\n          allKeys.forEach(key => {\r\n            if (!keysToKeep.some(keepKey => key.includes(keepKey))) {\r\n              localStorage.removeItem(key);\r\n            }\r\n          });\r\n          \r\n          setMigrationProgress('Migration complete!');\r\n        }\r\n        \r\n        // Initialize the store after storage is ready\r\n        await useStore.getState().initializeStore();\r\n        \r\n        setIsReady(true);\r\n      } catch (err) {\r\n        console.error('Storage initialization error:', err);\r\n        setError(err instanceof Error ? err.message : 'Failed to initialize storage');\r\n      }\r\n    };\r\n\r\n    initializeStorage();\r\n  }, []);\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\r\n        <div className=\"bg-red-900/20 border border-red-800 rounded-lg p-6 max-w-md w-full\">\r\n          <h2 className=\"text-xl font-semibold text-red-400 mb-2\">Storage Error</h2>\r\n          <p className=\"text-gray-300 mb-4\">{error}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n          >\r\n            Reload Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isReady) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-900 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"w-12 h-12 text-purple-400 animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-gray-300\">{migrationProgress || 'Loading...'}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}; ","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    const getPlatform = () => {\n        return capCustomPlatform !== null ? capCustomPlatform.name : getPlatformId(win);\n    };\n    const isNativePlatform = () => getPlatform() !== 'web';\n    const isPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const getPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find((h) => h.name === pluginName); };\n    const handleError = (err) => win.console.error(err);\n    const registeredPlugins = new Map();\n    const registerPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null && !jsImplementation && 'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find((m) => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then((impl) => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise((resolve) => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([...Object.keys(jsImplementations), ...(pluginHeader ? [platform] : [])]),\n        });\n        return proxy;\n    };\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = (filePath) => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor() {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach((listener) => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: (event) => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach((arg) => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach((cookie) => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0 ? `domain=${options.url}` : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie.replace(/^ +/, '').replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0 ? base64String.split(',')[1] : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map((k) => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach((str) => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') || options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') || typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, ExceptionCode, WebPlugin, WebView, buildRequestInit, registerPlugin };\n//# sourceMappingURL=index.js.map\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import React, { useEffect, useState } from 'react';\nimport { useStore } from './store/useStore';\nimport { useAuth } from './auth/AuthContext';\nimport AppLayout from './components/Layout/AppLayout';\nimport ChatView from './components/ChatView/ChatView';\nimport CheckInView from './components/CheckInView/CheckInView';\nimport JournalView from './components/JournalView/JournalView';\nimport ProgressView from './components/ProgressView/ProgressView';\nimport ResourcesView from './components/ResourcesView/ResourcesView';\nimport TasksView from './components/TasksView/TasksView';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport AppInstallPrompt from './components/AppInstallPrompt';\nimport DisclaimerModal from './components/Legal/DisclaimerModal';\nimport ProtectedRoute from './auth/ProtectedRoute';\nimport LoginPage from './auth/LoginPage';\nimport { StorageMigration } from './components/StorageMigration';\nimport { Capacitor } from '@capacitor/core';\nimport { App as CapacitorApp } from '@capacitor/app';\n\nfunction App() {\n  const { activeTab, setActiveTab } = useStore();\n  const { refreshUserStatus } = useAuth();\n  const [showDisclaimerModal, setShowDisclaimerModal] = useState(false);\n\n  useEffect(() => {\n    // Set page title based on app name\n    document.title = 'Soberi.ai - Your Recovery Companion';\n\n    // Handle app state changes on mobile\n    if (Capacitor.isNativePlatform()) {\n      const appStateListener = CapacitorApp.addListener('appStateChange', ({ isActive }) => {\n        if (isActive) {\n          // App has become active\n          refreshUserStatus();\n        }\n      });\n\n      // Handle back button on Android\n      const backButtonListener = CapacitorApp.addListener('backButton', ({ canGoBack }) => {\n        if (!canGoBack) {\n          CapacitorApp.exitApp();\n        }\n      });\n\n      return () => {\n        appStateListener.remove();\n        backButtonListener.remove();\n      };\n    }\n\n    // Check for URL parameters to determine initial tab or payment success\n    const params = new URLSearchParams(window.location.search);\n    const tabParam = params.get('tab');\n    const paymentSuccess = params.get('payment_success');\n\n    if (paymentSuccess === 'true') {\n      refreshUserStatus();\n      // Optionally, remove the query params from URL to clean it up\n      window.history.replaceState({}, document.title, window.location.pathname);\n    }\n\n    if (tabParam) {\n      const validTabs = ['chat', 'checkin', 'journal', 'progress', 'resources', 'tasks'];\n      if (validTabs.includes(tabParam)) {\n        setActiveTab(tabParam as any);\n      }\n    }\n\n    // Check if it's the first visit\n    const hasSeenDisclaimer = localStorage.getItem('Soberi_has_seen_disclaimer') === 'true';\n    if (!hasSeenDisclaimer) {\n      setShowDisclaimerModal(true);\n    }\n  }, [setActiveTab, refreshUserStatus]);\n\n  const handleCloseDisclaimer = () => {\n    setShowDisclaimerModal(false);\n    localStorage.setItem('Soberi_has_seen_disclaimer', 'true');\n  };\n\n  const renderActiveView = () => {\n    switch (activeTab) {\n      case 'chat':\n        return <ChatView />;\n      case 'checkin':\n        return <CheckInView />;\n      case 'journal':\n        return <JournalView />;\n      case 'progress':\n        return <ProgressView />;\n      case 'resources':\n        return <ResourcesView />;\n      case 'tasks':\n        return <TasksView />;\n      default:\n        return <ChatView />;\n    }\n  };\n\n  return (\n    <ErrorBoundary>\n      <StorageMigration>\n        <ProtectedRoute fallback={<LoginPage />}>\n          <div className={`font-sans bg-gray-50 flex flex-col min-h-screen w-full ${Capacitor.isNativePlatform() ? 'safe-area-inset' : ''}`}>\n            <AppLayout>\n              {renderActiveView()}\n            </AppLayout>\n            {!Capacitor.isNativePlatform() && <AppInstallPrompt />}\n            <DisclaimerModal isOpen={showDisclaimerModal} onClose={handleCloseDisclaimer} />\n          </div>\n        </ProtectedRoute>\n      </StorageMigration>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App.tsx';\nimport './index.css';\nimport { registerServiceWorker } from './registerServiceWorker';\nimport { AuthProvider } from './auth/AuthContext';\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </StrictMode>\n);\n\n// Register service worker for PWA support\nregisterServiceWorker();\n","export function registerServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    window.addEventListener('load', async () => {\n      try {\n        const registration = await navigator.serviceWorker.register('/service-worker.js', {\n          scope: '/'\n        });\n\n        console.log('ServiceWorker registration successful with scope: ', registration.scope);\n\n        // Check for updates\n        registration.addEventListener('updatefound', () => {\n          const newWorker = registration.installing;\n          if (newWorker) {\n            newWorker.addEventListener('statechange', () => {\n              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                // New content is available, show notification to user\n                showUpdateNotification();\n              }\n            });\n          }\n        });\n\n        // Register for push notifications\n        requestNotificationPermission();\n\n      } catch (error) {\n        console.error('ServiceWorker registration failed: ', error);\n      }\n    });\n\n    // Handle service worker communication\n    navigator.serviceWorker.addEventListener('message', (event) => {\n      console.log('Message from service worker: ', event.data);\n      // Handle various messages from service worker\n      if (event.data.type === 'CACHE_UPDATED') {\n        // Handle cache updates\n      }\n    });\n\n    // Add offline detection\n    window.addEventListener('online', () => {\n      console.log('Application is online. Syncing data...');\n      // Trigger background sync\n      if (navigator.serviceWorker.controller) {\n        navigator.serviceWorker.ready.then(registration => {\n          // Check if Background Sync is supported by the browser and registration object\n          if ('sync' in registration) {\n            // Cast registration to any or a type that includes BackgroundSyncManager if needed,\n            // or ensure your tsconfig.json lib includes 'WebWorker' and potentially 'DOM.BackgroundSync'\n            // For a quick fix, we can cast to any to bypass strict type checking here if 'sync' is known to exist at runtime.\n            const regWithSync = registration as any; \n            try {\n              regWithSync.sync.register('sync-checkins');\n              regWithSync.sync.register('sync-journal');\n              regWithSync.sync.register('sync-tasks');\n              console.log('Background sync registered for checkins, journal, and tasks.');\n            } catch (syncError) {\n              console.error('Failed to register background sync:', syncError);\n            }\n          } else {\n            console.warn('Background Sync not supported by this browser or service worker registration.');\n          }\n        });\n      }\n    });\n\n    window.addEventListener('offline', () => {\n      console.log('Application is offline. Data will be synced when connection returns.');\n      // Show offline notification to user\n      showOfflineNotification();\n    });\n  }\n}\n\nfunction showUpdateNotification() {\n  // Create a notification or UI element to inform the user\n  // of available updates\n  const notification = document.createElement('div');\n  notification.className = 'update-notification';\n  notification.innerHTML = `\n  \n  `;\n\n  document.body.appendChild(notification);\n\n  document.getElementById('update-app')?.addEventListener('click', () => {\n    window.location.reload();\n  });\n}\n\nfunction showOfflineNotification() {\n  // Create a notification to inform the user they're offline\n  const notification = document.createElement('div');\n  notification.className = 'offline-notification';\n  notification.innerHTML = `\n    <div class=\"p-3 bg-amber-600 text-white fixed top-0 left-0 right-0 text-center z-50\">\n      <p>You're offline. Some features may be limited.</p>\n    </div>\n  `;\n\n  const existingNotification = document.querySelector('.offline-notification');\n  if (!existingNotification) {\n    document.body.appendChild(notification);\n\n    // Remove after 5 seconds\n    setTimeout(() => {\n      notification.remove();\n    }, 5000);\n  }\n}\n\nasync function requestNotificationPermission() {\n  if ('Notification' in window) {\n    const permission = await Notification.requestPermission();\n\n    if (permission === 'granted') {\n      // Subscribe to push notifications\n      subscribeToPushNotifications();\n    }\n  }\n}\n\nasync function subscribeToPushNotifications() {\n  try {\n    const registration = await navigator.serviceWorker.ready;\n\n    // In a real app, you would request a subscription from your server\n    // and use the server's public key\n    // This is just a placeholder example\n    /*\n    const subscription = await registration.pushManager.subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: urlBase64ToUint8Array('YOUR_PUBLIC_KEY')\n    });\n    \n    // Send the subscription to your server\n    await fetch('/api/subscribe', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(subscription),\n    });\n    */\n\n    console.log('Ready for push notifications');\n  } catch (error) {\n    console.error('Error subscribing to push notifications:', error);\n  }\n}\n\n// Helper function to convert a base64 string to a Uint8Array\n// Needed for the applicationServerKey\nfunction urlBase64ToUint8Array(base64String: string): Uint8Array {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n\n  return outputArray;\n}"],"file":"assets/index-CvKR66Vo.js"}